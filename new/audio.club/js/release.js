/*! audio.club: v0.3.0 (webpack: v1.13.0) */
!function(t){function e(s){if(i[s])return i[s].exports;var a=i[s]={exports:{},id:s,loaded:!1};return t[s].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";var s=i(6),a=i(4);window.gSTB=window.parent.gSTB,s.data.windowId=window.parent.stbWebWindow.windowId(),s.data.isPortal=1===s.data.windowId,s.addListeners({load:function(){i(16).load({name:core.environment.language},function(t){a.init([i(12),i(13),i(14)]),a.pages.forEach(function(t){t.emit("load")})}),window._=window.gettext},done:function(){a.navigate("pageMain")}})},function(t,e,i){"use strict";function s(t){var e,i=this;if(t=t||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!t.propagate,a.call(this,t.data),this.$node=t.$node||document.createElement("div"),this.$body=t.$body||this.$node,this.$node.className+=" component "+(t.className||""),this.id=t.id||this.$node.id||"cid"+o++,t.parent&&t.parent.add(this),t.visible===!1&&this.hide(),t.focusable===!1&&(this.focusable=!1),this.defaultEvents){t.events=t.events||{};for(e in this.defaultEvents)t.events[e]=t.events[e]||this.defaultEvents[e]}t.events&&this.addListeners(t.events),t.children&&this.add.apply(this,t.children),this.$node.addEventListener("click",function(t){0===t.button&&(i.focus(),i.events.click&&i.emit("click",{event:t})),t.stopPropagation()})}var a=i(3),n=i(4),o=0;s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.defaultEvents=null,s.prototype.add=function(t){var e;for(e=0;e<arguments.length;e++)t=arguments[e],this.children.push(t),t.parent=this,t.$node&&null===t.$node.parentNode&&this.$body.appendChild(t.$node),this.events.add&&this.emit("add",{item:t})},s.prototype.remove=function(){this.parent&&(n.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(t){t.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},s.prototype.focus=function(t){var e=n.current,i=e.activeComponent;return this.focusable&&this!==i?(i&&i.blur(),e.activeComponent=i=this,i.$node.classList.add("focus"),i.events.focus&&i.emit("focus",t),!0):!1},s.prototype.blur=function(){var t=n.current,e=t.activeComponent;return this.$node.classList.remove("focus"),this===e?(t.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},s.prototype.show=function(t){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",t),!0)},s.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},t.exports=s},function(t,e){"use strict";t.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(t,e,i){"use strict";function s(){this.events={}}s.prototype={addListener:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},once:function(t,e){var i=this;this.events[t]=this.events[t]||[],this.events[t].push(function s(){e.apply(this,arguments),i.removeListener(t,s)})},addListeners:function(t){var e;if("object"==typeof t)for(e in t)t.hasOwnProperty(e)&&this.addListener(e,t[e])},removeListener:function(t,e){this.events[t]&&(this.events[t]=this.events[t].filter(function(t){return t!==e}),0===this.events[t].length&&(this.events[t]=void 0))},removeAllListeners:function(t){0===arguments.length?this.events={}:t&&(this.events[t]=void 0)},emit:function(t,e,i){var s,a=this.events[t];if(a)for(s=0;s<a.length;s++)a[s].apply(this,Array.prototype.slice.call(arguments,1))}},s.prototype.constructor=s,t.exports=s},function(t,e,i){"use strict";var s,a=i(3);s=new a,s.current=null,s.history=[],s.pages=[],s.ids={},s.init=function(t){var e,i,s;if(t){for(this.pages=[],this.pages=t,e=0,i=t.length;i>e;e++)s=t[e],this.ids[s.id]=s,s.active&&(this.current=s);return this.events.init&&this.emit("init",{pages:t}),!0}return!1},s.parse=function(t){var e={name:"",data:[]};return e.data=t.split("/").map(decodeURIComponent),e.name=e.data.shift().slice(1),e},s.stringify=function(t,e){return e=Array.isArray(e)?e:[],t=encodeURIComponent(t),e=e.map(encodeURIComponent),e.unshift(t),e.join("/")},s.show=function(t,e){return t&&!t.active?(t.$node.classList.add("active"),t.active=!0,this.current=t,t.events.show&&t.emit("show",{page:t,data:e}),!0):!1},s.hide=function(t){return t&&t.active?(t.$node.classList.remove("active"),t.active=!1,this.current=null,t.events.hide&&t.emit("hide",{page:t}),!0):!1},s.navigate=function(t,e){var i=this.current,s=this.ids[t];return s&&!s.active?(location.hash=this.stringify(t,e),this.hide(this.current),this.show(s,e),this.events.navigate&&this.emit("navigate",{from:i,to:s}),this.history.push(s),!0):!1},s.back=function(){var t,e;return this.history.length>1&&(t=this.history.pop(),e=this.history[this.history.length-1],e&&!e.active)?(location.hash=e.id,this.hide(this.current),this.show(e),this.events.navigate&&this.emit("navigate",{from:t,to:e}),!0):!1},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.active=!1,this.activeComponent=null,t.className="page "+(t.className||""),a.call(this,t),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){"use strict";var s,a,n,o,r=i(17),c=i(4),l=i(2),h=i(33),d={};i(18),window.core=window.parent.getCoreInstanse(window),window.core.once("load",function(){s.data.time.load&&s.defaultEvents.load({type:"load"})}),window.localStorage=window.parent.localStorage||window.parent.stbStorage,window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),s=new r({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),s.setScreen=function(t){return t?(t.availHeight=t.height-(t.availTop+t.availBottom),t.availWidth=t.width-(t.availLeft+t.availRight),window.moveTo(0,0),window.resizeTo(t.width,t.height),n&&n instanceof HTMLLinkElement&&document.head.removeChild(n),o&&o instanceof HTMLLinkElement&&document.head.removeChild(o),o=document.createElement("link"),o.rel="stylesheet",o.href=window.core.theme.path+t.height+".css?"+ +new Date,document.head.appendChild(o),n=document.createElement("link"),n.rel="stylesheet",n.href="css/release."+t.height+".css?"+ +new Date,document.head.appendChild(n),this.data.metrics=t,!0):!1},s.EVENT_END_OF_FILE=1,s.EVENT_GET_MEDIA_INFO=2,s.EVENT_PLAYBACK_BEGIN=4,s.EVENT_CONTENT_ERROR=5,s.EVENT_DUAL_MONO_DETECT=6,s.EVENT_INFO_GET=7,s.EVENT_SUBTITLE_LOAD_ERROR=8,s.EVENT_SUBTITLE_FIND=9,s.EVENT_HDMI_CONNECT=32,s.EVENT_HDMI_DISCONNECT=33,s.EVENT_RECORD_FINISH_SUCCESSFULL=34,s.EVENT_RECORD_FINISH_ERROR=35,s.EVENT_DVB_SCANING=40,s.EVENT_DVB_FOUND=41,s.EVENT_DVB_CHANELL_EPG_UPDATE=42,s.EVENT_DVB_ANTENNA_OFF=43,s.setScreen(h[screen.height]||h[720]);for(a in l)"volumeUp"!==a&&"volumeDown"!==a&&(d[l[a]]=!0);s.defaultEvents={load:function(t){s.data.time.load=t.timeStamp,window.core.ready&&(s.events[t.type]&&s.emit(t.type,t),c.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)}),s.data.time.done=+new Date,s.events.done&&s.emit("done",t))},unload:function(t){s.events[t.type]&&s.emit(t.type,t),c.pages.forEach(function(e){e.events[t.type]&&e.emit(t.type,t)})},error:function(t){},keydown:function(t){var e,i=c.current,a={keyCode:t.keyCode,stop:t.stop,shiftKey:t.shiftKey,altKey:t.altKey,type:t.type,"native":t};0!==a.keyCode&&(a.code=a.keyCode,a.shiftKey&&(a.code+=1e3),a.altKey&&(a.code+=2e3),e=i.activeComponent,e&&e!==i&&(e.events[a.type]&&e.emit(a.type,a),!a.stop&&e.propagate&&e.parent&&e.parent.events[a.type]&&e.parent.emit(a.type,a)),a.stop||(i.events[a.type]&&i.emit(a.type,a),a.stop||s.events[a.type]&&s.emit(a.type,a)),s.data.host&&d[a.code]&&t.preventDefault())},keypress:function(t){var e=c.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t)},click:function(t){},contextmenu:function(t){t.preventDefault()},mousewheel:function(t){var e=c.current;e.activeComponent&&e.activeComponent!==e&&e.activeComponent.events[t.type]&&e.activeComponent.emit(t.type,t),t.stop||e.events[t.type]&&e.emit(t.type,t)}};for(a in s.defaultEvents)window.addEventListener(a,s.defaultEvents[a]);s.show=function(){this.events.show&&this.emit("show"),window.core.call("app:ready")},s.exit=function(t){var e,a=i(10),n=i(8),o=c.current.activeComponent;c.current.add(e=new a({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){o.focus()}},children:[new n({size:2,focusIndex:0,data:[{items:[{value:gettext("Exit")}],click:function(){return"function"==typeof t&&t(!0)?(e.hide(),void e.remove()):(s.events.exit&&s.emit("exit"),e.hide(),e.remove(),void core.call("exit"))}},{items:[{value:gettext("Cancel")}],click:function(){"function"==typeof t&&t(!1),e.hide(),e.remove()}}],events:{keydown:function(i){n.prototype.defaultEvents.keydown.call(this,i),i.code===l.back&&(i.stop=!0,"function"==typeof t&&t(!1),e.hide(),e.remove())}}})]})),e.show(),e.focus()},window.stbEvent={},window.stbEvent.onEvent=function(t,e){if(Array.prototype.forEach.call(window.frames,function(i){i.stbEvent&&i.stbEvent.onEvent&&i.stbEvent.onEvent(t,e)}),s.events.media){if(e)try{e=JSON.parse(e)}catch(i){}s.emit("media",{code:parseInt(t,10),info:e})}},window.stbEvent.onBroadcastMessage=function(t,e,i){Array.prototype.forEach.call(window.frames,function(s){s.stbEvent&&s.stbEvent.onBroadcastMessage&&s.stbEvent.onBroadcastMessage(t,e,i)}),s.events.message&&s.emit("message",{broadcast:!0,windowId:t,message:e,data:i})},window.stbEvent.onMessage=function(t,e,i){Array.prototype.forEach.call(window.frames,function(s){s.stbEvent&&s.stbEvent.onMessage&&s.stbEvent.onMessage(t,e,i)}),s.events.message&&s.emit("message",{broadcast:!1,windowId:t,message:e,data:i})},window.stbEvent.onMount=function(t){Array.prototype.forEach.call(window.frames,function(e){e.stbEvent&&e.stbEvent.onMount&&e.stbEvent.onMount(t)}),s.events["device:mount"]&&s.emit("device:mount",{state:t})},window.stbEvent.onMediaAvailable=function(t,e){Array.prototype.forEach.call(window.frames,function(i){i.stbEvent&&i.stbEvent.onMediaAvailable&&i.stbEvent.onMediaAvailable(t,e)}),s.events["media:available"]&&s.emit("media:available",{mime:t,url:e})},window.stbEvent.onNetworkStateChange=function(t){s.events["internet:state"]&&s.emit("internet:state",{state:t})},window.stbEvent.onWebBrowserProgress=function(t){Array.prototype.forEach.call(window.frames,function(e){e.stbEvent&&e.stbEvent.onWebBrowserProgress&&e.stbEvent.onWebBrowserProgress(t)}),s.events["browser:progress"]&&s.emit("browser:progress",{progress:t})},window.stbEvent.onWindowActivated=function(){Array.prototype.forEach.call(window.frames,function(t){t.stbEvent&&t.stbEvent.onWindowActivated&&t.stbEvent.onWindowActivated()}),s.events["window:focus"]&&s.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),t.exports=s},function(t,e){"use strict";var i={};i.tag=function(t,e,i){var s,a,n=null;if(t){if(n=document.createElement(t),e&&"object"==typeof e)for(a in e)n[a]=e[a];for(s=2;s<arguments.length;s++)arguments[s]&&n.appendChild("object"==typeof arguments[s]?arguments[s]:document.createTextNode(arguments[s]))}return n},i.fragment=function(t){var e,i=document.createDocumentFragment();for(e=0;e<arguments.length;e++)t=arguments[e],t&&i.appendChild("object"==typeof t?t:document.createTextNode(t));return i},i.add=function(t,e){var i;if(t instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&t.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return t}return null},i.remove=function(t){var e,i=0;for(e=0;e<arguments.length;e++)arguments[e]&&arguments[e].parentNode&&arguments[e].parentNode.removeChild(arguments[e])===arguments[e]&&i++;return arguments.length>0&&i===arguments.length},t.exports=i},function(t,e,i){"use strict";function s(t){var e=this;t=t||{},this.handlers={},this.$noData=null,t.className="layoutList "+(t.className||""),t.propagate=t.propagate||!0,this.fixedData=t.fixedData||!1,t.$body=document.createElement("div"),t.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",a.call(this,t),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(t){t.$item.layout.children.length&&!t.inner&&t.$item.layout.children[t.$item.layout.focusIndex].focus(),t.inner&&(e.focus(),e.focusItem(t.$item)),e.handlers[t.$item.index]&&e.handlers[t.$item.index](t.$item)})}var a=i(9),n=i(24);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.renderItemDefault=function(t,e){var i,s;if(t.ready&&this.fixedData&&!t.innerHTML.length)for(s=0;s<e.items.length;s++)"string"==typeof e.items[s].value&&(t.layout.$node.childNodes[s].innerText=e.items[s].value,t.layout.$node.childNodes[s].className=e.items[s].className);else{for(;t.firstChild;)t.removeChild(t.firstChild);i=new n({focusable:!1,data:e.items}),t.appendChild(i.$node),t.layout=i,i.parent=this,i.$parentItem=t,i.addListener("click",function(){this.parent.emit("click:item",{$item:t,inner:!0})}),e.click&&(this.handlers[t.index]=e.click),t.ready=!0}t.value=e.value||{}},s.prototype.setData=function(t){a.prototype.setData.call(this,t),t.data&&t.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},s.prototype.init=function(t){var e;a.prototype.init.call(this,t),t.noData&&(this.$noData.innerHTML="",t.noData instanceof Element?this.$noData.appendChild(t.noData):"string"==typeof t.noData&&(e=document.createElement("div"),e.innerText=t.noData,this.$noData.appendChild(e)))},s.prototype.renderItem=s.prototype.renderItemDefault,t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,t.type&&(this.type=t.type),this.provider=null,t.className="list "+(t.className||""),this.type===this.TYPE_HORIZONTAL&&(t.className+=" horizontal"),n.call(this,t),this.init(t)}function a(t){var e,i;for(e=0;e<t.length;e++)i=t[e],"object"!=typeof i&&(i=t[e]={value:t[e]});return t}var n=i(1),o=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.renderItemDefault=function(t,e){t.innerText=e.value},s.prototype.renderItem=s.prototype.renderItemDefault,s.prototype.defaultEvents={mousewheel:function(t){this.type===this.TYPE_VERTICAL&&t.wheelDeltaY&&this.move(t.wheelDeltaY>0?o.up:o.down),this.type===this.TYPE_HORIZONTAL&&t.wheelDeltaX&&this.move(t.wheelDeltaX>0?o.left:o.right)},keydown:function(t){switch(t.code){case o.up:case o.down:case o.right:case o.left:case o.pageUp:case o.pageDown:case o.home:case o.end:this.move(t.code);break;case o.ok:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:t})}}},s.prototype.init=function(t){var e,i,s=this,a=this.$body.children.length,n=function(t){this.data&&(s.focusItem(this),s.events["click:item"]&&s.emit("click:item",{$item:this,event:t}))};if(void 0!==t.cycle&&(this.cycle=t.cycle),t.scroll&&(this.scroll=t.scroll),t.provider&&(this.provider=t.provider),t.render&&(this.renderItem=t.render),t.size&&(this.size=t.size),this.size!==a)for(a>0&&(this.$body.innerText=null),i=0;i<this.size;i++)e=document.createElement("div"),e.index=i,e.className="item",e.addEventListener("click",n),this.$body.appendChild(e);void 0!==t.viewIndex,this.viewIndex=null,this.provider?this.provider.get(null,function(e,i){e?s.events["data:error"]&&s.emit("data:error",e):(i&&(t.data=i,s.setData(t),s.scroll&&s.scroll.init({realSize:s.provider.maxCount,viewSize:s.provider.size,value:s.provider.head+s.provider.pos})),s.events["data:get"]&&s.emit("data:get"))}):t.data&&this.setData(t)},s.prototype.setData=function(t){t.data&&(this.data=a(t.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&!this.provider&&this.scroll.init({realSize:this.data.length,viewSize:this.size,value:t.viewIndex||0}),void 0!==t.focusIndex&&this.data.length?this.focusIndex(t.focusIndex):this.renderView(t.viewIndex||0)},s.prototype.renderView=function(t){var e,i,s,a,n;if(this.viewIndex!==t){for(a=this.viewIndex,this.viewIndex=n=t,i=0;i<this.size;i++)e=this.$body.children[i],s=this.data[t],s?(e.data=s,e.index=t,this.renderItem(e,s),s.mark?e.classList.add("mark"):e.classList.remove("mark")):(e.data=e.index=void 0,e.innerHTML="&nbsp;",e.ready=!1),t++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:a,currIndex:n}),this.events["select:item"]&&this.emit("select:item",{$item:e}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},s.prototype.move=function(t){var e=this,i=!1;if(this.data.length)switch(t){case o.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case o.up:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s||0===s?s:e.$focusItem.index})}):(this.cycle&&this.move(o.end),this.events.overflow&&this.emit("overflow",{direction:t,cycle:this.cycle})));break;case o.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case o.down:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s||0===s?s:e.$focusItem.index})}):(this.cycle&&this.move(o.home),this.events.overflow&&this.emit("overflow",{direction:t,cycle:this.cycle})));break;case o.pageUp:if(this.provider)return void this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s?s:0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case o.pageDown:if(this.provider){this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s||0===s?s:i.length<e.size?i.length-1:e.size-1})});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case o.home:if(this.provider){this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s?s:0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case o.end:if(this.provider){this.provider.get(t,function(t,i,s){t?e.events["data:error"]&&e.emit("data:error",t):i&&e.setData({data:i,focusIndex:s||0===s?s:i.length<e.size?i.length-1:e.size-1})});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},s.prototype.focusItem=function(t){var e=this.$focusItem;return t&&e!==t?(null!==e&&(e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e})),this.$focusItem=t,this.$focusItem.data=this.data[this.$focusItem.index],t.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:e,$curr:t}),this.events["select:item"]&&this.emit("select:item",{$item:t}),!0):!1},s.prototype.blurItem=function(t){return t?(t===this.$focusItem&&(this.$focusItem=null),t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t}),!0):!1},s.prototype.focusIndex=function(t){var e=this.viewIndex||0;t>=e+this.size?(t=t<this.data.length-1?t:this.data.length-1,this.renderView(t-this.size+1),this.focusItem(this.$body.lastChild)):e>t?(t=t>0?t:0,this.renderView(t),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[t-e]))},s.prototype.markItem=function(t,e){e?t.classList.add("mark"):t.classList.remove("mark"),t.data.mark=e},t.exports=s},function(t,e,i){"use strict";function s(t){var e;t=t||{},t.focusable=t.focusable||!1,t.className="modalMessage "+(t.className||""),t.visible=t.visible||!1,t.$body=document.createElement("div"),t.$body.className="body",a.call(this,t),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=t.title||"",t.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+t.icon),e=document.createElement("div"),e.className="overlay",this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(this.$body),this.$node.firstChild.firstChild.appendChild(e)}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.focus=function(){this.$node.classList.add("active"),a.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof a&&this.children[0].focus()},s.prototype.blur=function(){this.$node.classList.remove("active"),a.prototype.blur.call(this)},t.exports=s},function(t,e,s){"use strict";function a(t){var e,i=[];if(t&&t.length)for(e=0;e<t.length;e++)i[e]={items:[{className:"title",value:t[e].name}],value:t[e]};return i}var n=s(3),o=new n;o.urls={base:core.stalker.host},o.tracks={playerContext:null,intent:null,request:null,get:function(t,e){var i,s="audio-tracks?",n=[],o=this;e=e||{};for(i in e)i&&e[i]&&n.push(i+"="+e[i]);s+=n.join("&"),this.request&&this.request.abort(),this.request=core.stalker.request(s,{method:"GET",version:3,onload:function(e,i){o.request=null,i.error&&(e=!0),t(e,e?[]:a(i.data),e?null:i.paging.total)},error:function(e){o.request=null,t(!0,[])}})},link:function(t,e){var i="audio-tracks/"+e.id+"/link";core.stalker.request(i,{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t(e,i.data.url)},onerror:function(){t(!0,"")}})}},o.list={request:null,getAll:function(t){function e(t,o){var r="audio-playlists?",c=[];for(i in o)i&&o[i]&&c.push(i+"="+o[i]);r+=c.join("&"),s.request&&s.request.abort(),s.request=core.stalker.request(r,{method:"GET",version:3,onload:function(i,s){return s.error&&(i=!0),!i&&(n=n.concat(a(s.data)),s.paging.total>n.length)?void e(t,{limit:200,offset:n.length}):void t(i,n)},onerror:function(e){t(!0,[])}})}var i,s=this,n=[];e(t,{limit:200,offset:0})},get:function(t,e){var s="audio-playlists?",n=[];e=e||{};for(i in e)i&&e[i]&&n.push(i+"="+e[i]);s+=n.join("&"),this.request&&this.request.abort(),this.request=core.stalker.request(s,{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t(e,e?[]:a(i.data),e?null:i.paging.total)},onerror:function(){t(!0,[])}})},getList:function(t,e,s){var n="audio-playlists/"+e+"/audio-tracks?",o=[];s=s||{};for(i in s)i&&s[i]&&o.push(i+"="+s[i]);n+=o.join("&"),this.request&&this.request.abort(),this.request=core.stalker.request(n,{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t(e,e?[]:a(i.data),e?null:i.paging.total)},onerror:function(e){t(!0,[])}})},create:function(t,e){var i="audio-playlists";e=e||{},this.request&&this.request.abort(),this.request=core.stalker.request(i,{method:"POST",version:3,body:JSON.stringify({name:e.name}),onload:function(e,i){i.error&&(e=!0),t&&t(e,i.data)},onerror:function(e){t&&t(!0,{})}})},remove:function(t,e){var i="audio-playlists/"+e.id;this.request&&this.request.abort(),this.request=core.stalker.request(i,{method:"DELETE",version:3,onload:function(e,i){i.error&&(e=!0),t&&t(e,i.data)},onerror:function(){t(!0,[])}})},addTrack:function(t,e){var i="audio-playlists/"+e.id+"/audio-tracks";this.request&&this.request.abort(),this.request=core.stalker.request(i,{method:"POST",version:3,body:JSON.stringify({id:e.track}),onload:function(e,i){i.error&&(e=!0),t&&t(e,i.data)},onerror:function(){t(!0,[])}})},removeTrack:function(t,e){var i="audio-playlists/"+e.id+"/audio-tracks/"+e.track;this.request&&this.request.abort(),this.request=core.stalker.request(i,{method:"DELETE",version:3,onload:function(e,i){i.error&&(e=!0),t&&t(e,i.data)},onerror:function(){t(!0,[])}})}},o.albums={request:null,get:function(t,e){var i,s="audio-albums?",n=[];e=e||{};for(i in e)i&&e[i]&&n.push(i+"="+e[i]);s+=n.join("&"),this.request&&this.request.abort(),this.request=core.stalker.request(s,{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t(e,e?[]:a(i.data),e?null:i.paging.total)},onerror:function(e){t(!0,[])}})}},o.artists={request:null,get:function(t,e){var i,s="audio-artists?",n=[];e=e||{};for(i in e)i&&e[i]&&n.push(i+"="+e[i]);s+=n.join("&"),this.request&&this.request.abort(),this.request=core.stalker.request(s,{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t(e,e?[]:a(i.data),e?null:i.paging.total)},onerror:function(){t(!0,[])}})}},o.genre={get:function(t){core.stalker.request("audio-genres",{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t&&t(e,i)}})}},o.years={get:function(t){core.stalker.request("audio-years",{method:"GET",version:3,onload:function(e,i){i.error&&(e=!0),t&&t(e,i)},onerror:function(){t(!0,[])}})}},t.exports=o},function(t,e,i){"use strict";var s="pageInit",a=i(5),n=new a({$node:document.getElementById(s)});t.exports=n},function(t,i,s){"use strict";function a(t,e){P.style.backgroundImage="",R.style.display="none",xt.init(),A.innerText="",O.innerText="",q.innerText="",ct.albums.get(t,e)}function n(t,e){ct.artists.get(t,e)}function o(t,e){P.style.backgroundImage="",R.style.display="none",xt.init(),A.innerText="",O.innerText="",q.innerText="",ct.tracks.get(t,e)}function r(t,e){P.style.backgroundImage="",R.style.display="none",xt.init(),A.innerText="",O.innerText="",q.innerText="",ct.list.get(t,e)}function c(t,e){P.style.backgroundImage="",R.style.display="none",xt.init(),A.innerText="",O.innerText="",q.innerText="",ct.list.getList(t,_t.listId,e)}function l(t){var e=t.$item.data.value;Et.push({provider:C.provider,focus:C.$focusItem.index,title:k.$title.innerText,type:St.albums}),k.$title.innerText=e.name,St.active=St.tracks,zt.artistId="",zt.albumId=e.id,Y=p,U=o,j=d,W=zt,W.offset=0,G=_("No tracks"),Z.init(Nt.lastConfig=[Nt.f3,Nt.menu]),C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:{items:[{className:"icon",value:"v"},{className:"title",value:"..."}],value:null}}),focusIndex:0,noData:G})}function h(t){var e=t.$item.data.value;Et.push({provider:C.provider,focus:C.$focusItem.index,title:k.$title.innerText,type:St.artists}),k.$title.innerText=e.name,St.active=St.albums,Tt.artistId=e.id,U=a,W=zt,W.offset=0,G=_("No albums"),j=l,Y=v,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:{items:[{className:"icon",value:"v"},{className:"title",value:"..."}],value:null}}),focusIndex:0,noData:G})}function d(){g()}function u(t){var e=t.$item.data.value;Et.push({provider:C.provider,focus:C.$focusItem.index,title:k.$title.innerText,type:St.lists}),k.$title.innerText=e.name,St.active=St.tracks,_t.listId=e.id,Y=p,U=c,j=d,W=_t.config,W.offset=0,G=_("No tracks"),E.children[0].$body.children[1].children[0].children[1].innerText=_("Remove from playlist"),Nt.f3.title=_("Remove from playlist"),Z.init(Nt.lastConfig=[Nt.f3,Nt.menu]),C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:{items:[{className:"icon",value:"v"},{className:"title",value:"..."}],value:null}}),focusIndex:0,noData:G})}function p(t){var e,i=[];if(!t)return R.style.display="none",void xt.init();for(R.style.display="block",xt.init(),e=0;e<t.album.genres.length;e++)i.push(t.album.genres[e].name);t.album.cover?P.style.backgroundImage="url("+ct.urls.base+t.album.cover+")":P.style.backgroundImage="",A.innerText=i.join(", "),O.innerText=t.album.artist.name,q.innerText=t.album.year.name}function f(){}function v(t){var e,i=[];if(!t)return R.style.display="none",void xt.init();for(R.style.display="block",xt.init(),e=0;e<t.genres.length;e++)i.push(t.genres[e].name);t.cover?P.style.backgroundImage="url("+ct.urls.base+t.cover+")":P.style.backgroundImage="url(img/placeholder.png)",A.innerText=i.join(", "),O.innerText=t.artist.name,q.innerText=t.year.name}function m(t){}function g(){function t(t,e){var a=null,n=null;t||(C.data.length>1&&(C.provider.head+C.provider.pos+C.$focusItem.index+1<=C.provider.maxCount&&(a=function(){C.move(et.down),s!==C.$focusItem.value.id?g():(ct.tracks.playerContext=null,ct.tracks.intent.close())}),(C.provider.head>0||C.provider.pos>(C.provider.headItem?1:0)||C.$focusItem.index>(C.provider.headItem?1:0))&&(n=function(){C.move(et.up),s!==C.$focusItem.value.id?g():(ct.tracks.playerContext=null,ct.tracks.intent.close())})),ct.tracks.intent=core.intent({action:"play",mime:"content/audio",data:{title:i,uri:e},events:{end:function(){a?a():(ct.tracks.playerContext=null,ct.tracks.intent.close())},error:function(){a?a():(ct.tracks.playerContext=null,ct.tracks.intent.close())},next:a,prev:n},context:ct.tracks.playerContext},function(t,e){ct.tracks.playerContext=e,t}))}var e=C.$focusItem,i=e.textContent,s=e.value.id;e.value&&(e.value.url?t(!1,e.value.url):ct.tracks.link(t,{id:e.value.id}))}function y(){var t=Et.pop();switch(k.$title.innerHTML=t.title,St.active=t.type,t.type){case St.albums:U=a,W=Tt,Tt.artistId="",Y=v,j=l,G=_("No albums");break;case St.artists:U=n,Y=f,W=Ct,j=h,G=_("No artists");break;case St.tracks:zt.artistId="",zt.albumId="",Y=p,j=d,U=o,W=zt,G=_("No tracks");break;case St.lists:Y=m,j=u,U=r,G=_("No playlists"),W=Lt,E.children[0].$body.children[1].children[0].children[1].innerText=_("Add to playlist"),Nt.f3.title=_("Add to playlist"),Z.init(Nt.lastConfig=[Nt.f1,Nt.menu])}W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,cycle:!0,getter:U}),focusIndex:0,noData:G})}function w(){C.$focusItem.value&&(W===_t.config?ct.list.removeTrack(function(){b(!0)},{id:_t.listId,track:C.$focusItem.value.id}):(x.blur(),B.show(),B.focus()))}function b(t){var e=C.$focusItem?C.$focusItem.index:0;t&&C.provider.botEmptyLine&&C.$focusItem.index===C.data.length-1&&(e=C.$focusItem.index-1,C.provider.pos>0&&C.provider.pos--),W.offset=C.provider.head,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,pos:C.provider.pos,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:e,noData:G})}function $(t){ct.list.getAll(function(e,i){var s=i||[];s.push({items:[{className:"title",value:_("Create playlist")}],value:null}),V.setData({
data:s,focusIndex:0}),W===Lt&&b(t)})}var x,k,I,E,N,C,T,z,L,S,D,P,A,O,q,R,M,H,B,V,j,Y,U,W,G,F,K,Z,J="pageMain",X=s(5),Q=new X({$node:document.getElementById(J)}),tt=s(7),et=s(2),it=s(4),st=s(19),at=s(26),nt=s(27),ot=s(25),rt=s(8),ct=s(11),lt=s(15),ht=s(32),dt=s(31),ut=s(6),pt=s(10),ft=s(23),vt=s(21),mt=s(28),gt=s(22),yt=s(30),wt=s(29),bt=new yt({}),$t=new yt({}),xt=new wt({propagate:!0,step:5,scroll:bt}),kt=new at({$node:document.getElementById("pMainPanel")}),It={},Et=[],Nt={f1R:{type:"f1",title:_("Reset filters"),action:function(){}},f1:{type:"f1",title:_("Delete"),action:function(){if(C.$focusItem.data.value)switch(St.active){case St.lists:ct.list.remove(function(){$(!0)},{id:C.$focusItem.value.id}),I.hide()}}},f3:{type:"f3",title:_("Add to playlist"),action:function(){if(C.$focusItem.data.value)switch(St.active){case St.tracks:w()}}},menu:{type:"menu",action:function(){if(C.$focusItem.data.value)switch(St.active){case St.lists:x.blur(),I.show(),I.focus();break;case St.tracks:x.blur(),E.show(),E.focus()}}},lastConfig:[]},Ct={search:"",offset:0,limit:7},Tt={genreId:"",artistId:"",yearId:"",search:"",sortby:"",offset:0,limit:7},zt={albumId:"",genreId:"",artistId:"",yearId:"",search:"",sortby:"",offset:0,limit:7},Lt={search:"",offset:0,limit:7},_t={config:{search:"",offset:0,limit:7},listId:""},St={albums:1,artists:2,tracks:3,lists:4,active:1},Dt={size:7,pages:2};Q.add(kt),Q.add(new vt),core.addListener("show",function(){ct.tracks.playerContext=null}),Q.addListener("load",function(){function t(){ut.show(),it.navigate("pageMain"),C.removeListener("data:error",t),C.removeListener("data:get",t),C.focus(),ct.genre.get(function(t,e){var a,n=[];for(e=e.data||[],n.push({state:!0,title:_("All genres"),value:""}),a=0;a<e.length;a++)n.push({state:!1,title:e[a].name,value:e[a].id});i.setData({data:n,focusIndex:0}),ct.years.get(function(t,e){var i,a=[];for(e=e.data||[],a.push({state:!0,title:_("All years"),value:""}),i=0;i<e.length;i++)a.push({state:!1,title:e[i].name,value:e[i].id});s.setData({data:a,focusIndex:0}),$()})})}var i,s,c,J,X,at,vt,yt,wt;R=tt.tag("div"),P=tt.tag("div",{className:"info poster"}),A=tt.tag("div",{className:"info genres"}),q=tt.tag("div",{className:"info year"}),O=tt.tag("div",{className:"info director"}),Z=new gt({visible:!1,parent:Q}),Z.init([]),F=new dt({propagate:!0,focusable:!0,children:[vt=new rt({focusIndex:0,className:"graphite",cycle:!0,data:[{items:[{className:"icon",value:"M"},yt=new ft({placeholder:_("Search"),events:{keydown:function(t){switch(ft.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:t.stop=!0;break;case et.ok:W.search!==this.value&&(Tt.search=this.value,zt.search=this.value,Ct.search=this.value,Lt.search=this.value,_t.config.search=this.value,wt.setValue(this.value),C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:0,noData:G})),this.parent.emit("click")}}}})]},{items:[{className:"icon",value:"J"},{value:_("Albums")}],click:function(){x.blur(),M.show(),M.focus()}},{items:[{className:"icon",value:"e"},{value:_("All genres")}],click:function(){x.blur(),z.show(),z.focus()}},{items:[{className:"icon",value:"b"},{value:_("All years")}],click:function(){x.blur(),L.show(),L.focus()}},{items:[{className:"icon",value:"L"},{value:_("By date")}],click:function(){x.blur(),S.show(),S.focus()}}],events:{keydown:function(t){switch(rt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.right:N.emit("keydown",t),t.stop=!0}}}})],events:{focus:function(){dt.prototype.defaultEvents.focus.call(this),Z.init([Nt.f1R]),Z.show()}}}),window.leftMenuList=vt,window.leftInput=yt,K=new dt({propagate:!0,focusable:!0,children:[new rt({propagate:!0,focusIndex:1,className:"graphite",cycle:!0,data:[{items:[{className:"icon",value:"M"},wt=new ft({placeholder:_("Search"),events:{keydown:function(t){switch(ft.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:t.stop=!0;break;case et.ok:W.search!==this.value&&(Lt.search=this.value,_t.config.search=this.value,Tt.search=this.value,zt.search=this.value,Ct.search=this.value,yt.setValue(this.value),C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:0,noData:G})),this.parent.emit("click")}}}})]},{items:[{className:"icon",value:"J"},{value:_("Playlists")}],click:function(){x.blur(),M.show(),M.focus()}},{items:[{className:"icon",value:"U"},{value:_("Create playlist")}],click:function(){x.blur(),H.show(),H.focus()}}],events:{keydown:function(t){switch(rt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.right:N.emit("keydown",t),t.stop=!0}}}})]}),N=new ot({title:_("Menu"),children:[new ht({propagate:!0,focusable:!0,children:[F,K]})]}),F.show(),k=new ot({title:_("Albums"),main:!0}),R.appendChild(P),R.appendChild(tt.tag("div",{className:"info title"},_("Artist:"))),R.appendChild(O),R.appendChild(tt.tag("div",{className:"info title"},_("Genres:"))),R.appendChild(A),R.appendChild(tt.tag("div",{className:"info title"},_("Year:"))),R.appendChild(q),xt.$body.appendChild(R),T=new ot({title:_("Info"),children:[xt,bt],events:{focus:function(){ot.prototype.defaultEvents.focus.call(this),Z.hide()}}}),xt.init(),j=l,Y=v,U=a,W=Tt,G=_("No albums"),C=new rt({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:{},getter:U=a,cycle:!0}),scroll:$t,events:{focus:function(){Z.show(),Z.init(Nt.lastConfig)},"focus:item":function(t){clearTimeout(It.info),It.info=window.setTimeout(function(){Y(t.$curr.data.value)},core.environment.onFocusDebounceTimeout)},"move:view":function(){C&&C.$focusItem&&Y(C.$focusItem.data.value)},"click:item":function(t){return!t.$item.data.value&&Et.length?void y():void j(t)},keydown:function(t){switch(rt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.playPause:St.active===St.tracks&&C.$focusItem.data.value&&g()}}},size:Dt.size,fixedData:!0,className:"graphite audioList",noData:G,focusIndex:0}),x=new nt({visible:!1,$node:document.getElementById("pMainPanelSet"),panels:[N,k,T]}),kt.add(x),x.drawShadow(),C.once("data:error",t),C.once("data:get",t),k.add(C),k.add($t),k.focus(),M=new pt({visible:!1,title:_("Categories"),events:{show:function(){this.children[0].focus()}},children:[new mt({focusIndex:0,size:4,cycle:!0,data:[{state:!0,title:_("Albums"),value:St.albums},{state:!1,title:_("Artists"),value:St.artists},{state:!1,title:_("Tracks"),value:St.tracks},{state:!1,title:_("Playlists"),value:St.lists}],events:{"click:item":function(){M.hide(),x.focus()},select:function(t){switch(k.$title.innerHTML=t.$curr.data.title,Et=[],t.$curr.data.value){case St.albums:St.active===St.lists&&(F.show(),F.focus()),Nt.lastConfig=[],F.children[0].$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,U=a,W=Tt,Tt.artistId="",Y=v,j=l,G=_("No albums");break;case St.artists:St.active===St.lists&&(F.show(),F.focus()),Nt.lastConfig=[],F.children[0].$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,U=n,R.style.display="none",xt.init(),W=Ct,Y=f,j=h,G=_("No artists");break;case St.tracks:St.active===St.lists&&(F.show(),F.focus()),Nt.lastConfig=[Nt.f3,Nt.menu],F.children[0].$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,zt.artistId="",zt.albumId="",Y=p,j=d,U=o,W=zt,G=_("No tracks");break;case St.lists:Y=m,j=u,U=r,G=_("No playlists"),Nt.lastConfig=[Nt.f1,Nt.menu],W=Lt,K.show(),K.focus()}St.active=t.$curr.data.value,W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,cycle:!0,getter:U}),focusIndex:0,noData:G})},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:M.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(M),D=new pt({visible:!1,title:_("Categories"),events:{show:function(){this.children[0].focus()}},children:[new mt({focusIndex:0,size:3,cycle:!0,data:[{state:!0,title:_("Albums"),value:St.albums},{state:!1,title:_("Artists"),value:St.artists},{state:!1,title:_("Tracks"),value:St.tracks},{state:!1,title:_("Playlists"),value:St.lists}],events:{"click:item":function(){M.hide(),x.focus()},select:function(t){switch(vt.$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,k.$title.innerHTML=t.$curr.data.title,Et=[],St.active=t.$curr.data.value,t.$curr.data.value){case St.albums:U=a,W=Tt,Tt.artistId="",Y=v,j=l,G=_("No albums"),Nt.lastConfig=[];break;case St.artists:U=n,R.style.display="none",xt.init(),W=Ct,Y=f,j=h,G=_("No artists"),Nt.lastConfig=[];break;case St.tracks:zt.artistId="",zt.albumId="",Y=p,j=d,U=o,W=zt,G=_("No tracks"),Nt.lastConfig=[Nt.f3,Nt.menu];break;case St.lists:return}W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,cycle:!0,getter:U}),focusIndex:0,noData:G})},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:M.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(D),z=new pt({visible:!1,title:_("Genres"),events:{show:function(){this.children[0].focus()}},children:[i=new mt({focusIndex:0,size:5,cycle:!0,events:{"click:item":function(){z.hide(),x.focus()},select:function(t){vt.$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,Tt.genreId=t.$curr.data.value,zt.genreId=t.$curr.data.value,W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:0,noData:G})},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:z.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(z),B=new pt({visible:!1,title:_("Playlists"),events:{show:function(){this.children[0].focus()}},children:[V=new rt({focusIndex:0,size:5,cycle:!0,events:{"click:item":function(t){t=t.$item.data.value,B.hide(),t?(ct.list.addTrack(null,{id:t.id,track:C.$focusItem.value.id}),x.focus()):(J=!0,H.show(),H.focus())},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:B.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(B),L=new pt({visible:!1,title:_("Years"),events:{show:function(){this.children[0].focus()}},children:[s=new mt({focusIndex:0,size:5,cycle:!0,events:{"click:item":function(){L.hide(),x.focus()},select:function(t){vt.$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,Tt.yearId=t.$curr.data.value,zt.yearId=t.$curr.data.value,W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:0,noData:G})},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:L.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(L),S=new pt({visible:!1,title:_("Sort"),events:{show:function(){this.children[0].focus()}},children:[new mt({focusIndex:0,size:2,cycle:!0,data:[{state:!0,title:_("By date"),value:"added"},{state:!1,title:_("By name"),value:"name"}],events:{"click:item":function(){S.hide(),x.focus()},select:function(t){vt.$focusItem.layout.$node.children[1].innerText=t.$curr.data.title,Tt.sortby=t.$curr.data.value,zt.sortby=t.$curr.data.value,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,getter:U,cycle:!0,headItem:C.provider.headItem}),focusIndex:0,noData:G})},keydown:function(t){switch(mt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:S.hide(),x.focus(),t.stop=!0}}}})]}),Q.add(S),X=new st({value:_("Cancel"),className:"cancelBtn bottom",events:{keydown:function(t){switch(t.code){case et.ok:case et.back:J=!1,H.hide(),x.focus(),c.setValue(""),t.stop=!0;break;case et.up:case et.down:X.blur(),c.focus();break;case et.right:X.blur(),at.focus()}}}}),at=new st({value:_("Create"),className:"createBtn bottom",events:{click:function(){H.hide(),x.focus(),c.setValue("")},keydown:function(t){switch(t.code){case et.ok:ct.list.create(function(t,e){t||(J&&(J=!1,ct.list.addTrack(function(){b()},{id:e.id,track:C.$focusItem.value.id})),$())},{name:c.value});case et.back:H.hide(),x.focus(),c.setValue(""),t.stop=!0;break;case et.up:case et.down:at.blur(),c.focus();break;case et.left:at.blur(),X.focus()}}}}),c=new ft({placeholder:_("name"),events:{keydown:function(t){var e=!this.value;switch(ft.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:if(e){H.hide(),x.focus(),t.stop=!0;break}t.stop=!0;break;case et.ok:break;case et.down:case et.up:c.blur(),at.focus()}}}}),H=new pt({title:_("create playlist"),events:{show:function(){c.focus()}},children:[c,X,at]}),Q.add(H),Q.add(I=new pt({title:_("Actions"),events:{show:function(){},hide:function(){x.focus()}},children:[new rt({size:1,focusIndex:0,cycle:!0,data:[{items:[{className:"icon red",value:"w"},{value:_("Delete")}],click:function(){ct.list.remove(function(){$(!0)},{id:C.$focusItem.value.id}),I.hide(),e.stop=!0}}],events:{keydown:function(t){switch(rt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:I.hide(),t.stop=!0}}}})]})),Q.add(E=new pt({title:_("Actions"),events:{show:function(){clearTimeout(It.footer),Z.hide()},hide:function(){x.focus()}},children:[new rt({size:2,focusIndex:0,cycle:!0,data:[{items:[{className:"icon",value:"1"},{value:_("Play")}],click:function(){g(),E.hide()}},{items:[{className:"icon yellow",value:"y"},{value:_("Add to playlist")}],click:function(){E.hide(),w()}}],events:{keydown:function(t){switch(rt.prototype.defaultEvents.keydown.call(this,t),t.code){case et.back:E.hide(),t.stop=!0}}}})]})),Nt.f1R.action=function(){i.$checkedData&&(i.$checkedData.state=!1,i.data[0].state=!0),i.setData({data:i.data,focusIndex:0}),s.$checkedData&&(s.$checkedData.state=!1,s.data[0].state=!0),s.setData({data:s.data,focusIndex:0}),Ct.search="",Tt.genreId="",Tt.yearId="",Tt.search="",zt.genreId="",zt.yearId="",zt.search="",Lt.search="",_t.config.search="",yt.setValue(""),wt.setValue(""),vt.$body.children[2].layout.$node.children[1].innerText=_("All genres"),vt.$body.children[3].layout.$node.children[1].innerText=_("All years"),W.offset=0,C.init({provider:new lt({pageSize:Dt.size,cacheSize:Dt.pages,request:W,cycle:!0,getter:U,headItem:C.provider.headItem}),focusIndex:0,noData:G})}}),Q.addListener("show",function(){x.show(),x.focus()}),Q.addListener("keydown",function(t){switch(t.code){case et.back:if(Et.length){y(),t.stop=!0;break}x.blur(),ut.exit(function(t){t||x.focus()})}}),t.exports=Q},function(t,e,i){"use strict";var s="pagePlay",a=i(5),n=i(2),o=i(4),r=new a({$node:document.getElementById(s)});r.addListener("keydown",function(t){switch(t.code){case n.back:document.body.classList.remove("noBackground"),o.back()}}),t.exports=r},function(t,e,i){"use strict";function s(t){t=t||{},this.size=t.pageSize,this.stepSize=t.stepSize||1,this.data=[],this.head=0,this.tail=0,this.pos=t.pos||0,this.cacheSize=(t.cacheSize||2)*this.size,this.config=t.request||{},this.botEmptyLine=!1,this.maxCount=t.count||0,this.headItem=t.headItem,this.cycle=t.cycle,this.getter=t.getter,n=!1,o=0}var a=i(2),n=!1,o=0;s.prototype.constructor=s,s.prototype.get=function(t,e){var i=this,s=!1,r=[];switch(t){case null:n=!0,this.config.offset?(this.head=this.config.offset,this.config.limit=2*this.cacheSize):this.config.limit=this.cacheSize,this.getter(function(t,s,a){i.headItem&&!i.config.offset&&(s.unshift(i.headItem),o=1),t||(i.maxCount=a,i.data=s,i.tail=i.head+s.length,s.length<i.config.limit?i.botEmptyLine=!0:i.checkNext()),n=!1,r=i.data.slice(i.pos,i.pos+i.size),e(t,r)},this.config);break;case a.right:case a.down:if(n)break;this.pos+=this.stepSize,this.pos+this.size<this.data.length?(r=this.data.slice(this.pos,this.pos+this.size),e(s,r),this.checkNext()):this.checkNext(e);break;case a.pageDown:if(n)break;this.pos+=this.size-1,this.pos+this.size<this.data.length?(r=this.data.slice(this.pos,this.pos+this.size),e(s,r),this.checkNext()):this.checkNext(e);break;case a.left:case a.up:if(n)break;this.pos-=this.stepSize,this.pos>=0?(r=this.data.slice(this.pos,this.pos+this.size),e(s,r),this.checkPrev()):this.checkPrev(e);break;case a.pageUp:if(n)break;this.pos-=this.size-1,this.pos>0?(r=this.data.slice(this.pos,this.pos+this.size),e(s,r),this.checkPrev()):this.checkPrev(e);break;case a.home:if(n)break;this.goHome(e);break;case a.end:if(n)break;this.goEnd(e)}},s.prototype.checkNext=function(t){var e=this.cacheSize+this.pos-this.data.length,i=this;if(this.botEmptyLine){if(this.pos>this.data.length-this.size){if(this.cycle)return void this.goHome(t);this.pos=this.data.length-this.size,this.pos<0&&(this.pos=0)}return void(t&&t(!1,this.data.slice(this.pos,this.pos+this.size)))}if(e>=this.size){if(this.maxCount&&e+this.tail>this.maxCount&&(e=this.maxCount-this.tail,0>=e))return i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0)),t&&t(!1,i.data.slice(i.pos,i.pos+i.size)),void(this.botEmptyLine=!0);this.config.limit=e,this.config.offset=this.tail-o,t&&(n=!0),this.getter(function(s,a,o){s||(i.maxCount=o,a.length<e&&(i.botEmptyLine=!0),a.length&&(i.data=i.data.concat(a),e=i.data.length-2*i.cacheSize,i.tail+=a.length,e>0&&(i.data.splice(0,e),i.pos-=e,i.head+=e)),i.pos>i.data.length-i.size&&(i.pos=i.data.length-i.size,i.pos<0&&(i.pos=0))),t&&t(s,i.data.slice(i.pos,i.pos+i.size)),n=!1},this.config)}},s.prototype.checkPrev=function(t){var e=this.cacheSize-this.pos,i=this;if(this.head>0)e>=this.size&&(e>this.head&&(e=this.head),this.config.offset=this.head-e-o,this.config.offset<0&&(this.config.offset=0,e-=o),this.config.limit=e,t&&(n=!0),this.getter(function(s,a,o){s||(i.maxCount=o,i.data=a.concat(i.data),0===i.config.offset&&i.headItem&&i.data[0]!==i.headItem&&i.data.unshift(i.headItem),i.tail-=a.length,i.pos+=a.length,e=i.data.length-2*i.cacheSize,i.head-=e,e>0&&(i.data.splice(-e),i.botEmptyLine=!1)),t&&t(s,i.data.slice(i.pos,i.pos+i.size)),n=!1},this.config));else{if(this.headItem&&this.data[0]!==this.headItem&&this.data.unshift(this.headItem),this.pos<0){if(this.cycle)return void this.goEnd(t);this.pos=0}t&&t(!1,i.data.slice(i.pos,i.pos+i.size))}},s.prototype.goHome=function(t){var e=[],i=this;0===this.head?(this.pos=0,e=this.data.slice(this.pos,this.pos+this.size),t(!1,e,0)):(n=!0,this.pos=0,this.head=0,this.config.offset=0,this.config.limit=this.cacheSize,this.getter(function(s,a,o){s||(i.maxCount=o,i.data=a,i.headItem&&i.data[0]!==i.headItem&&i.data.unshift(i.headItem),i.tail=i.data.length,e=i.data.slice(i.pos,i.pos+i.size),n=!1,i.botEmptyLine=!1),t(s,e,0)},this.config))},s.prototype.goEnd=function(t){var e,i=[],s=this;this.maxCount?this.tail===this.maxCount?(s.pos=s.data.length-s.size,s.pos<0&&(s.pos=0),i=s.data.slice(s.pos,s.pos+s.size),e=i.length-1,0>e&&(e=0),s.botEmptyLine=!0,t(!1,i,e)):(n=!0,this.head=this.maxCount-2*this.cacheSize,this.head<0&&(this.head=0),this.tail=this.maxCount,this.config.offset=this.head,this.config.limit=2*this.cacheSize,this.getter(function(a,o,r){a||(s.maxCount=r,s.data=o,s.pos=s.data.length-s.size,s.pos<0&&(s.pos=0),i=s.data.slice(s.pos,s.pos+s.size),e=i.length-1,0>e&&(e=0),s.botEmptyLine=!0,n=!1),t(a,i,e)},this.config)):t(!0)},t.exports=s},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(3),gettext=new Emitter,meta=null,data=null;gettext.load=function(t,e){var i=new XMLHttpRequest;t.ext=t.ext||"json",t.path=t.path||"lang",i.responseType="text",i.onload=function(){var t;try{t=JSON.parse(i.responseText),meta=t.meta,data=t.data,e(null,data)}catch(s){meta=null,data=null,i.onerror(s)}gettext.events.load&&gettext.emit("load")},i.onerror=function(t){e(t),gettext.events.error&&gettext.emit("error")},i.open("GET",t.path+"/"+t.name+"."+t.ext,!0),i.send(null)},window.gettext=function(t){return data&&data[""][t]?data[""][t]:t},window.pgettext=function(t,e){return data&&data[t][e]?data[t][e]:e},window.ngettext=function(msgId,plural,value){return data&&meta?data[""][msgId][eval("var n = "+value+"; "+meta.plural)]:1===value?msgId:plural},module.exports=gettext},function(t,e,i){"use strict";function s(t){a.call(this),this.data=t||{}}var a=i(3);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.idName="id",s.prototype.clear=function(){var t=this.data;return Object.keys(t).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:t}),!0):!1},s.prototype.init=function(t){return t?(this.clear(),this.data=t,this.events.init&&this.emit("init",{data:t}),!0):!1},s.prototype.has=function(t){return this.data.hasOwnProperty(t)},s.prototype.get=function(t){return this.data[t]},s.prototype.set=function(t,e){var i=t in this.data,s={name:t,curr:e};return i?(s.prev=this.data[t],e!==s.prev?(this.data[t]=e,this.events.change&&this.emit("change",s),!0):!1):(this.data[t]=e,this.events.change&&this.emit("change",s),!0)},s.prototype.unset=function(t){var e,i=t in this.data;return i?(e={name:t,prev:this.data[t]},delete this.data[t],this.events.change&&this.emit("change",e),!0):!1},t.exports=s},function(t,e){"use strict";if(!("classList"in document.documentElement)){var i=Array.prototype,s=i.indexOf,a=i.slice,n=i.push,o=i.splice,r=i.join;window.DOMTokenList=function(t){if(this._element=t,t.className!==this._classCache){if(this._classCache=t.className,!this._classCache)return;var e,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(e=0;e<i.length;e++)n.call(this,i[e])}},window.DOMTokenList.prototype={add:function(t){this.contains(t)||(n.call(this,t),this._element.className=a.call(this,0).join(" "))},contains:function(t){return-1!==s.call(this,t)},item:function(t){return this[t]||null},remove:function(t){var e=s.call(this,t);-1!==e&&(o.call(this,e,1),this._element.className=a.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(t){return this.contains(t)?this.remove(t):this.add(t),this.contains(t)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(t,e,i){"use strict";function s(t){t=t||{},t.className="button "+(t.className||""),a.call(this,t),t.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+t.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),t.value&&(this.$text.innerText=t.value)}var a=i(1),n=i(2);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.clickDuration=200,s.prototype.defaultEvents={click:function(){var t=this;this.$node.classList.add("click"),setTimeout(function(){t.$node.classList.remove("click")},this.clickDuration)},keydown:function(t){t.code===n.ok&&this.events.click&&this.emit("click",{event:t})}},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},t.className="checkBox "+(t.className||""),this.value=!!t.value,this.value&&(t.className+=" checked"),a.call(this,t),this.group=null,t.group&&(this.group=t.group,void 0===o[t.group]?o[t.group]=[this]:o[t.group].push(this))}var a=i(1),n=i(2),o={};s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.defaultEvents={click:function(){this.set(!this.value)},keydown:function(t){t.code===n.ok&&this.set(!this.value)}},s.prototype.set=function(t){var e,i;if(this.value!==t){if(!this.value&&null!==this.group)for(e=0,i=o[this.group].length;i>e;e++)o[this.group][e].set(!1);return this.value=!this.value,this.$node.classList.toggle("checked"),this.events.change&&this.emit("change",{value:this.value}),!0}return!1},t.exports=s},function(t,e,i){"use strict";function s(t){function e(){var t=new Date,e=(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours()),s=t.getMinutes();i.innerText=(e>9?e:"0"+e)+":"+(s>9?s:"0"+s)}var i=document.createElement("div");t=t||{},t.focusable=!1,t.className="clock "+(t.className||""),t.visible=t.visible||!0,a.call(this,t),e(),setInterval(e,1e3),this.$node.appendChild(i)}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){"use strict";function s(t){var e;t=t||{},t.focusable=!1,t.className="footer "+(t.className||""),t.visible=t.visible||!1,t.$body=document.createElement("div"),t.$body.className="body",a.call(this,t),this.tabs=[],this.tab=0,this.$node.appendChild(o.tag("table",{},o.tag("tr",{},o.tag("td",{},o.tag("div",{className:"icon menu"})),o.tag("td",{className:"central"},this.tabs[0]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[1]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[2]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[3]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})))),o.tag("td",{},this.$info=o.tag("div",{className:"icon info"}))))),this.init(t.data),e=this,this.parent.addListener("keydown",function(t){var i=e.tabs[e.tab];if(e.visible)switch(t.code){case n.f1:i.f1&&"function"==typeof i.f1.action&&i.f1.action();break;case n.f2:i.f2&&"function"==typeof i.f2.action&&i.f2.action();break;case n.f3:i.f3&&"function"==typeof i.f3.action&&i.f3.action();break;case n.f4:i.f4&&"function"==typeof i.f4.action&&i.f4.action();break;case n.menu:i.menu&&"function"==typeof i.menu.action&&i.menu.action();break;case n.info:"none"!==e.$info.style.display&&(i.classList.contains("hidden")?i.classList.remove("hidden"):i.classList.add("hidden"))}})}var a=i(1),n=(i(5),i(2)),o=i(7);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.init=function(t){var e,i=!this.tabs[this.tab].classList.contains("hidden"),s=0;for(t=t||[],this.tabs[this.tab].classList.add("hidden"),this.$info.style.display="none",t.forEach(function(t){-1!==["f1","f2","f3","f4"].indexOf(t.type)&&s++}),this.tab=0===s?0:s-1,s=0,e=0;e<t.length;e++)this.tabs[this.tab][t[e].type]={action:t[e].action},"menu"!==t[e].type&&(this.tabs[this.tab].children[s].children[0].className="iconImg "+t[e].type,this.tabs[this.tab].children[s].children[1].innerText=t[e].title,s++);s&&(this.$info.style.display="block"),i&&s&&this.tabs[this.tab].classList.remove("hidden")},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.value="",this.type=this.TYPE_TEXT,t.className="input "+(t.className||""),t.maxlength=t.maxlength||0,a.call(this,t),this.$line=this.$body.appendChild(document.createElement("div")),this.$line.className="line",this.$caret=this.$line.appendChild(document.createElement("div")),this.$caret.className="caret",this.$placeholder=this.$line.appendChild(document.createElement("div")),this.$placeholder.className="placeholder",this.$caret.index=0,this.init(t)}var a=i(1),n=i(2);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.TYPE_TEXT=0,s.prototype.TYPE_PASSWORD=1,s.prototype.defaultEvents={keypress:function(t){this.addChar(String.fromCharCode(t.keyCode),this.$caret.index)},keydown:function(t){switch(t.code){case n["delete"]:this.removeChar(this.$caret.index);break;case n.back:this.removeChar(this.$caret.index-1);break;case n.left:this.setCaretPosition(this.$caret.index-1);break;case n.right:this.setCaretPosition(this.$caret.index+1);break;case n.end:case n.down:this.setCaretPosition(this.value.length);break;case n.home:case n.up:this.setCaretPosition(0)}}},s.prototype.init=function(t){t.type&&(this.type=t.type),t.value&&this.setValue(t.value),t.placeholder&&(this.$placeholder.innerText=t.placeholder),this.maxlength=t.maxlength,this.$line.dir=t.direction||"ltr"},s.prototype.addChar=function(t,e){var i=document.createElement("div");e=void 0===e?this.$caret.index:e,0===this.value.length&&this.$line.removeChild(this.$placeholder),(!this.maxlength||e<=this.maxlength)&&(i.className="char",this.value=this.value.substring(0,e)+t+this.value.substring(e,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?i.innerText="*":" "===t?i.innerHTML="&nbsp;":i.innerText=t,e>=this.value.length?(this.$line.appendChild(i),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$line.insertBefore(i,this.$caret)),this.events.input&&this.emit("input",{value:this.value}))},s.prototype.removeChar=function(t){var e=this.value;t=void 0===t?this.$caret.index-1:t,this.value.length>0&&(this.$caret.index===t&&t<this.value.length?this.$line.removeChild(this.$line.children[t+1]):this.$caret.index>t&&(--this.$caret.index,this.$line.removeChild(this.$line.children[t])),this.value=this.value.substring(0,t)+this.value.substring(t+1,this.value.length),this.events.input&&e!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},s.prototype.setCaretPosition=function(t){t>=0&&t<=this.value.length&&this.$caret.index!==t&&(this.$line.removeChild(this.$caret),t===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$caret.index=t)},s.prototype.setValue=function(t){var e,i,s=this.value.length,a=t.length,n=0;if(t!==this.value){if(a>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),a!==s)if(i=a-s,i>0)for(n=0;i>n;n++)e=this.$line.appendChild(document.createElement("div")),e.className="char";else for(n=0;n>i;n--)this.$line.removeChild(this.$line.lastChild);for(n=0;a>n;n++)e=this.$line.children[n],this.type===this.TYPE_PASSWORD?e.innerHTML="*":" "===t[n]?e.innerHTML="&nbsp;":e.innerText=t[n];this.value=t,this.$caret.index=a,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder),this.$caret.index=0;this.events.input&&this.emit("input",{value:this.value})}},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.focusIndex=0,t.className="layout "+(t.className||""),this.data=[],n.call(this,t),this.init(t),this.addListener("keydown",function(t){switch(t.code){case o.right:this.children.length&&this.focusIndex<this.children.length-1&&this.children[++this.focusIndex].focus();break;case o.left:this.children.length&&this.focusIndex>0&&this.children[--this.focusIndex].focus();break;case o.back:this.parent.focus(),this.parent&&this.$parentItem&&this.parent.focusItem(this.$parentItem)}})}function a(t){var e,i;for(e=0;e<t.length;e++)i=t[e],"object"!=typeof i?t[e]={value:t[e],wrap:!0}:i instanceof n||i instanceof HTMLElement?t[e]={value:i,wrap:!1}:t[e].wrap=!0;return t}var n=i(1),o=i(2);s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.init=function(t){for(var e,i,s,o=this,r=a(t.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);for(this.data=r,s=0;s<r.length;s++)e=r[s],"string"==typeof e.value?(i=document.createElement("div"),i.textContent=e.value,e.className&&(i.className=e.className),this.$node.appendChild(i)):e.value instanceof HTMLElement?e.wrap?(i=document.createElement("div"),e.className&&(i.className=e.className),i.appendChild(e.value),this.$node.appendChild(i)):this.$node.appendChild(e.value):e.value instanceof n&&(e.value.propagate=!0,e.value.index=this.children.length,e.value.addListener("click",function(){o.focusIndex=this.index}),e.wrap?(i=document.createElement("div"),e.className&&(i.className=e.className),i.appendChild(e.value.$node),this.$node.appendChild(i),this.children.push(e.value),e.value.parent=this):this.add(e.value))},t.exports=s},function(t,e,i){"use strict";function s(t){
var e;t=t||{},this.size=1,this.main=!1,this.index=0,t.className="panelEx "+(t.className||""),t.$body=document.createElement("div"),t.$body.className="body",a.call(this,t),t.size&&(this.size=t.size,this.$node.classList.add("size"+t.size)),t.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),t.title&&(this.$title=document.createElement("div"),this.$title.className="title",this.$title.innerText=t.title,this.$node.appendChild(this.$title)),this.$node.appendChild(this.$body),e=document.createElement("div"),e.className="overlay",this.$node.appendChild(e)}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},s.prototype.focus=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),a.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand"))},s.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),a.prototype.blur.call(this)},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},t.focusable=t.focusable||!1,t.className="panel "+(t.className||""),a.call(this,t)}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,t.exports=s},function(t,e,i){"use strict";function s(t){function e(t){switch(t.code){case n.left:s.focusIndex>0&&s.panels[s.focusIndex-1].focus();break;case n.right:s.focusIndex<s.panels.length-1&&s.panels[s.focusIndex+1].focus()}}var i,s=this;for(t=t||{},t.focusable=t.focusable||!1,t.className="panelSet "+(t.className||""),a.call(this,t),this.panels=t.panels,this.focusIndex=0,t.panels&&!t.panels[0].main&&(t.panels[0].$node.classList.add("left"),t.panels[0].$node.classList.add("expand")),t.panels&&t.panels[1]&&t.panels[1].main&&t.panels[1].$node.classList.add("position-right"),t.panels&&t.panels[2]&&t.panels[1].main&&t.panels[2].$node.classList.add("right"),t.panels&&this.add.apply(this,t.panels),i=0;i<this.panels.length;i++)this.panels[i].addListeners({keydown:e}),this.panels[i].index=i}var a=i(1),n=i(2);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.drawShadow=function(){var t,e,i;for(t=0;t<this.panels.length;t++)t>0&&(this.panels[t].$node.classList.add("leftShadow"),e=this.panels[t-1].$node.offsetHeight,i=this.panels[t-1].$node.offsetTop-this.panels[t].$node.offsetTop,this.panels[t].$node.offsetHeight>e?(this.panels[t].$shadow.left.style.height=this.panels[t-1].$node.offsetHeight+"px",this.panels[t].$shadow.left.style.top=i+"px"):this.panels[t].$shadow.left.style.height=this.panels[t].$node.offsetHeight+"px"),t<this.panels.length-1&&(this.panels[t].$node.classList.add("rightShadow"),e=this.panels[t+1].$node.offsetHeight,i=this.panels[t+1].$node.offsetTop-this.panels[t].$node.offsetTop,this.panels[t].$node.offsetHeight>e?(this.panels[t].$shadow.right.style.height=this.panels[t-1].$node.offsetHeight+"px",this.panels[t].$shadow.right.style.top=i+"px"):this.panels[t].$shadow.right.style.height=this.panels[t].$node.offsetHeight+"px")},s.prototype.focus=function(){a.prototype.focus.call(this),this.panels[this.focusIndex].focus()},s.prototype.blur=function(){this.panels[this.focusIndex].blur()},t.exports=s},function(t,e,i){"use strict";function s(t){var e=this;this.group="group "+o++,this.$checkedData=null,t.className="radioList "+(t.className||""),a.call(this,t),this.addListener("click:item",function(t){var i=t.$item;i.checkBox.set(!0),i.state=i.checkBox.value,i.data.state=i.checkBox.value,e.$checkedData!==i.data&&(e.emit("select",{$last:e.$checkedData,$curr:i}),e.$checkedData.state=!1,e.$checkedData=i.data)})}var a=i(9),n=i(20),o=0;s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.group=0,s.prototype.renderItemDefault=function(t,e){var i=document.createElement("table"),s=document.createElement("tr"),a=document.createElement("td"),o=new n({group:this.group});t.innerHTML="",e.state&&o.set(!0),i.appendChild(s),a.appendChild(o.$node),a.className="checkBoxWrapper",s.appendChild(a),a=document.createElement("td"),a.className="title",a.innerText=e.title||"",s.appendChild(a),t.checkBox=o,t.state=o.value,t.value=e.value,t.appendChild(i)},s.prototype.setData=function(t){var e;for(a.prototype.setData.call(this,t),e=0;e<this.data.length;e++)if(this.data[e].state){this.$checkedData=this.data[e];break}},s.prototype.renderItem=s.prototype.renderItemDefault,t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},t.className=" scrollArea "+(t.className||""),t.$body=document.createElement("div"),t.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,a.call(this,t),this.$node.appendChild(this.$body),this.init(t)}var a=i(1),n=i(6),o=i(2);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.defaultEvents={keydown:function(t){switch(t.code){case o.up:case o.down:this.move(t.code)}}},s.prototype.move=function(t){if(!(this.realHeight<=this.viewHeight))switch(t){case o.down:if(this.topPosition-this.step*n.data.metrics.height/100<this.viewHeight-this.realHeight)return this.topPosition=this.viewHeight-this.realHeight,this.$body.style.top=this.topPosition+"px",this.emit("overflow",{direction:t}),void(this.scroll&&this.scroll.scrollTo(-this.topPosition));this.topPosition-=this.step*n.data.metrics.height/100,this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case o.up:if(this.topPosition+this.step*n.data.metrics.height/100>0)return this.topPosition=0,this.$body.style.top=this.topPosition+"px",this.emit("overflow",{direction:t}),void(this.scroll&&this.scroll.scrollTo(-this.topPosition));this.topPosition+=this.step*n.data.metrics.height/100,this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}},s.prototype.init=function(t){t=t||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",t.scroll&&(this.scroll=t.scroll),t.step&&(this.step=t.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,t.focusable=t.focusable||!1,t.className="scrollBar "+(t.className||""),t.type&&(this.type=t.type),this.type===this.TYPE_HORIZONTAL&&(t.className+=" horizontal"),a.call(this,t),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(t)}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.TYPE_VERTICAL=1,s.prototype.TYPE_HORIZONTAL=2,s.prototype.init=function(t){t=t||{},void 0!==t.realSize&&(this.realSize=t.realSize),void 0!==t.viewSize&&(this.viewSize=t.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==t.value&&this.scrollTo(t.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},s.prototype.scrollTo=function(t){return this.value!==t?(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*t/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*t/(this.realSize-this.viewSize)+"px",this.events.change&&this.emit("change",{curr:t,prev:this.value}),t>=this.realSize&&(t=this.realSize,this.events.done&&this.emit("done")),this.value=t,!0):!1},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},t.focusable=t.focusable||!1,t.className="tabItem hidden "+(t.className||""),t.visible=null,a.call(this,t),this.visible=!1}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.show=function(t){var e=null;return this.visible?!0:(this.parent.current&&(e=this.parent.current,e.hide(t)),a.prototype.show.call(this,t),this.parent.current=this,!0)},s.prototype.hide=function(){return a.prototype.hide.call(this)?(this.parent.current=null,!0):!0},s.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},t.exports=s},function(t,e,i){"use strict";function s(t){t=t||{},this.current=null,t.focusable=t.focusable||!1,t.className="tabList "+(t.className||""),a.call(this,t),t.current&&t.current.show()}var a=i(1);s.prototype=Object.create(a.prototype),s.prototype.constructor=s,s.prototype.focus=function(){a.prototype.focus.call(this),this.current.focusable&&this.current.focus()},t.exports=s},function(t,e){"use strict";t.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}}]);