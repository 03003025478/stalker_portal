<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<!-- $Revision$ -->
<!-- $Id$ -->
<title>stalker_portal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script language="JavaScript" type="text/javascript" src="event.js"></script>
<style type="text/css">
body {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 20px;
    font-weight: bold;
    /*background: url("i/bg_main.jpg");*/
}

input, .input_passive  {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
	font-weight: bold;
    border: 2px solid #003399;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
}

.input_active {
    border: 2px solid #FFCC33;
}

img{
    border: 0px
}
a, td {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    text-decoration: none;
    outline:none;
}
div{
    outline:none;
}

td, table{
    empty-cells: show;
}

.a_menu{
    color: #FFFFFF;
}

/*.play_txt_all {
    font-size: 20px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	color: #103268;
}
.play_txt_wk {
    font-size: 20px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	color: #ffffff;
	border: 1px solid #ff0000;
}*/

#play {
	position:absolute;
	width: 655px;
	height: 126px;
	z-index:1000;
	/*top: 446px;*/
	bottom: 0px;
	left: 0px;
	padding-left: 65px;
	padding-top: 13px;
	/*border: 0px;
	border: 1px solid #ff0000;*/
	white-space: pre;
	overflow:hidden;
	
	font-size: 20px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
}

.play_osd_all {
    background-color: #99BBFF;
	color: #103268;
}

.play_osd_wk {
    background-image: url("i/osd_menu_mag200_bg.png");
	color: #ffffff;
}

#language_menu {
	position:absolute;
	width:150px;
	height:80px;
	z-index:997;
	top: 100px;
	left: 450px;
}
#web_bar {
	position:absolute;
	z-index:998;
	top: 100px;
	left: 45px;
}
#web_bar_tip {
	position:absolute;
	z-index:1002;
	top: 400px;
	left: 400px;
}
#web_bar_url {
    font-size: 18px;
	font-family: Arial, Helvetica, sans-serif;
}
.seek_bar{
    position: absolute;
    z-index: 878;
    height: auto;
    width: auto;
    top: 0px;
    left: 0px;
}
.seek_bar_time{
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 16px;
	font-weight: bold;
	color:#020202;
	background-image: url("i/seek_bar_sides_bg.gif");
	text-align: left;
	padding-right: 3px;
	padding-left:  15px;
	background-color: #FFFFFF;
    -moz-border-radius-topright: 3px;
    -moz-border-radius-bottomright: 3px;
    -webkit-border-top-right-radius: 3px;
    -webkit-border-bottom-right-radius: 3px;
}
.seek_bar_left{
    background-image: url("i/seek_bar_sides_bg.gif");
    -moz-border-radius-topleft: 3px;
    -moz-border-radius-bottomleft: 3px;
    -webkit-border-top-left-radius: 3px;
    -webkit-border-bottom-left-radius: 3px;
}
.mute {
    position: absolute;
    z-index: 1009;
    height: auto;
    width: auto;
    top: 0px;
    left: 0px;
}
#black {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 870;
    height: 576px;
    width: 720px;
    /*border: 2px solid #FF0000;*/
}

.black_all {
    background-color: #000000;
}

.black_wk { 
}

.main {
    position: absolute;
    z-index: 1;
    width: 720;
    height: 576;
    top: 0px;
    left: 0px;
    background-image: url("i/bg_main.jpg");
}
.menu_table {
    background-image: url("i/bg.png");
    border: 2px solid #E0E0E0;
}
.menu_table_col1{
    color:DeepPink;
}
.menu_table_col2{
    color:DarkBlue;
}

.alert {
    position: absolute;
    z-index: 997;
    height: auto;
    width: auto;
}

.d_menu {
    position: absolute;
    z-index: 998;
    top: 0px;
    left: 0px;
}

#cur_year {
    position: absolute;
    z-index: 999;
    width:95px;
	height:110px;
}

#cur_day {
    position: absolute;
    z-index: 1000;
    width:95px;
	height:110px;
}

#cur_month {
    position: absolute;
    z-index: 1001;
    width:95px;
	height:110px;
}

#cur_day_of_week {
    position: absolute;
    z-index: 1002;
    width:95px;
	height:110px;
}

.cur_weather {
    /*position: absolute;
    left: 230;
    top: 0px;
    text-align: center;
    width: 240px;
    height: 195px;
    background-image: url('i/white_bg.png');
    background-repeat: no-repeat;
    */
    color: #003b89;
}

#abc_video_search {
    position: absolute;
    z-index: 800;
    top: 46px;
    left: 35px;
}

.volume {
    position: absolute;
    z-index: 1999;
    top: 46px;
    left: 0px;
}

.ch_list {
    font-weight: bold;
    font-size: 24px;
    font-family: Arial, Helvetica, sans-serif;
    position: absolute;
    z-index: 8;
    height: auto;
    width: auto;
    top: 10px;
    left: 10px;
}
.ch_list_new {
    font-weight: bold;
    font-size: 24px;
    font-family: Arial, Helvetica, sans-serif;
    position: absolute;
    z-index: 8;
    height: auto;
    width: auto;
    top: 0px;
    left: 0px;
}
.ch_num {
    font-weight: bold;
    font-size: 24px;
    font-family: Arial, Helvetica, sans-serif;
    position: absolute;
    z-index: 1000;
    height: auto;
    width: auto;
    top: 400px;
    left: 309px;
}
.ch_num_txt{
    font-weight: bold;
    font-size: 28px;
    font-family: Arial, Helvetica, sans-serif;
    color: DarkBlue;
    border: 2px solid #FFCC33;
    text-align:center;
}
.channel {
    position: absolute;
    z-index: 6;
    height: auto;
    width: auto;
}
.epg {
    position: absolute;
    z-index: 7;
    height: 480;
    width: 640;
    background: url("i/bg_epg.jpg")
}
.pad{
    position:absolute;
    top:218;
    left:350;
    height:65;
    width:260;
    z-index:20;
}
.vol_bar {
    border-top-color: #FFFFFF;
    border-right-color: #FFFFFF;
    border-bottom-color: #FFFFFF;
    border-left-color: #FFFFFF;
    border-color:#0000FF;
    border-style:solid;
}
.vol_bar_td {
    border-style:solid;
}

/*KA --------------------------------------------------------------*/

.tv_epgView{
    position: absolute;
    left: 20px;
    top: 10px;
    display: yes;
}
.tv_epgList{
    position: absolute;
    left: 40px;
    top: 277px;
    display: yes;
    z-index: 21;
}
.tv_epgProg{
    position: absolute;
    left: 360px;
    top: 277px;
    display: yes;
    z-index: 21;
}
.tv_epgInfo{
    position: absolute;
    left: 360px;
    top: 20px;
    display: yes;
}
.epg_info_text{
    font-size:18px;
    color:#F5F5F5;
    overflow:hidden;
    text-overflow:ellipsis;
    z-index: 20;
}
.epg_tv_tbl{
    position: relative;
    left: 0;
    top: 0;
    z-index: 20;
    height: 165;
    width: 240;
    display: yes;
    border-width: 2px;
    border-style: solid;
    border-color: #E5E5E5;
}
.epg_tbl_row{
    height: auto;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    color: #F5F5F5;
    width: auto;
}
.epg_tbl_bar{
    background-color: #EDEDED;
    width: 18px;
}
.slider_chan{
    position: absolute;
    top: 279;
    left: 261;
    z-index: 22;
    display: yes;
}
.slider_prog{
    position: absolute;
    top: 279;
    left: 581;
    z-index: 22;
    display: yes;
}
.slider_list{
    position: absolute;
    top: 222;
    left: 201;
    z-index: 22;
    display: yes;
}
.ch_list_opt{
    background-color: #1E90FF;
    position: absolute;
    left: 10;
    top: 220;
    z-index: 20;
    height: auto;
    width: 210;
    display: yes;
    border-width: 2px;
    border-style: solid;
    border-color: #E5E5E5;
}
.style1 {
	font-size: 18px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	color: #184b9b;
}
.style2 {
	font-size: 20px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	color: #103268;
}
/*Keyboard*/
.tbl_keyboard{
  position: absolute;
  top: 140px;
  left:20px;
  z-index:1000;
  background:#0000CC;
  border: 1px solid DarkBlue;
  color: WhiteSmoke;
}
.tbl_3x3{
  font-family: Arial, Helvetica, sans-serif;
  font-size: 18px;
  font-weight: bold;
  text-align:center;
  color: WhiteSmoke;
}
#kbd_res{
  position: absolute;
  top: 360px;
  left:340px;
  height:25px;
  width:280px;
  z-index:1000;
  background:LightBlue;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 14px;
  font-weight: bold;
  text-align:center;
  color:DarkRed;
  border: 2px solid WhiteSmoke;
}
/**/

/* ABC VIDEO SEARCH */
.style1 {
	font-size: 18px;
	font-weight: bold;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	color: #ffdc00}
.style3 {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 15px;
	font-weight: bold;
	color: #ffdc00;
}
#video_info {
	position:absolute;
	z-index:1;
	left: 10px;
	top: 320px;
}
#cover {
	position:absolute;
	width:190px;
	height:250px;
	z-index:2;
	left: 439px;
	top: 52px;
}
#abc_select {
	position:absolute;
	width:190px;
	height:250px;
	z-index:2;
	left: 50px;
	top: 20px;
}
.video_td {
    font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 20px; 
    font-weight: bold; 
    color: #ffdc00
}
.video_div {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 20px; font-weight: bold; color: #000000}

.video_div_inv {font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 20px; font-weight: bold; color: #ffffff; background-color: #000000;}

.video_row_hover{
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 20px;
    font-weight: bold;
    background-image:url(i/hover1.png); 
    color: #444444;
}
.letters{
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    background-color: #000000;
    color: #ffffff;
    border: 2px solid #FFFFFF;
}
#genres_select {
	position:absolute;
	z-index:799;
	left: 35px;
	top: 46px;
}
#speed_title, #atrack_info {
    position:absolute;
    z-index: 871;
	left: 585px;
	top: 66px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 28px;
	color: #00CC00;
	font-weight:bold
}

#atrack_info {
    color: #ffffff;
    left: auto;
    right: 100px;
    font-size: 20px;
}

#rec_bar {
    position:absolute;
    z-index: 871;
	left: 585px;
	top: 66px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	/*font-size: 54px;*/
	color: #CC0000;
	font-weight:bold
}

/* TV BY NUMBER */
#tv_page {
	position:absolute;
	z-index:799;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#main_bar_tv_by_number {
	position:absolute;
	left: 24px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#info_tv_by_number {
	position:absolute;
	left: 260px;
	top: 15px;
}
#tv_switch_bar {
	position:absolute;
	left: 8px;
	top: 75px;
}
#tv_by_number_con_menu {
	position:absolute;
	z-index:803;
	top: 280px;
	left: 235px;
}

/* TV BY CHANNEL */ 
#tv_by_channel {
	position:absolute;
	z-index:799;
	left: 30px;
	top: 46px;
	width:640px;
	height:480px;
	border: 2px solid #CCCCCC;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background-color: #FFFFFF;
	color: #000000;
}
#main_bar_tv_by_channel {
	position:absolute;
	left: 24px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#day_bar_tv_by_channel {
	position:absolute;
	left: 8px;
	top: 210px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#info_tv_by_channel {
	position:absolute;
	left: 260px;
	top: 15px;
	border: 2px solid #CCCCCC;
}
#tv_by_channel_con_menu {
	position:absolute;
	z-index:802;
	left: 170px;
	top: 280px;
	border: 2px solid #CCCCCC;
}
/* TV BY THEME */
#main_bar_tv_by_theme {
	position:absolute;
	left: 155px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#theme_bar_tv_by_theme {
	position:absolute;
	left: 24px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
/* TV BY PROGRAM */ 
#tv_program {
	position:absolute;
	z-index:800;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#main_bar_tv_program {
	position:absolute;
	left: 146px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 160px;
	font-weight: bold;
}
#day_bar_tv_program {
	position:absolute;
	left: 24px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#info_tv_program {
	position:absolute;
	left: 260px;
	top: 15px;
}
#tv_program_con_menu {
	position:absolute;
	z-index:803;
	left: 220px;
	top: 280px;
}
/**/

.td_nowrap {
    padding-left: 1em; 
    text-overflow: ellipsis; 
    overflow: hidden; 
    white-space: nowrap;
}

/* CLUB */
#club {
	position:absolute;
	z-index:799;
	left: 30px;
	top: 46px;
	width:640px;
	height:480px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#club_menu {
	position:absolute;
	left: 70px;
	/*top: 100px;*/
	bottom: 100px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
/*.club_menu tr, .club_menu td{
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
}*/
#club_declaration {
	position:absolute;
	left: 70px;
	top: 390px;
	width:500px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    border: 2px solid #3f81cc;
    color:#3f81cc;
    padding: 5px;
    padding-top: 7px;
    padding-bottom: 7px;
    text-align:center;
    -webkit-border-radius: 3px;
    -moz-border-radius: 3px;
}

/*#club_declaration td {
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
    font-weight: bold;
    border: 2px solid #3f81cc;
    color:#3f81cc;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
}*/
#video_records_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#main_bar_video_records_by_addtime{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_my_video_records{
	position:absolute;
	left: 23px;
	top: 149px;
}
#video_club_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#city_info_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#anec_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#mastermind_game{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#mastermind_rules{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#mastermind_control{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#mastermind_rating{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
.mastermind_num{
    position:absolute;
    top:200px;
    text-align:center;
    width:30px;
    height:50px;
    font-size: 30px;
    font-weight: bold;
    padding-top: 10px;
    border: 2px solid #3f81cc;
    background-color: #3f81cc;
    -webkit-border-radius: 2px;
    -moz-border-radius: 2px;
}
#mastermind_steps{
	position:absolute;
	left: 60px;
	top: 180px;
}
#mastermind_menu{
	position:absolute;
	z-index:803;
	top: 270px;
	left: 270px;
}
#mastermind_rating_table{
	position:absolute;
	left: 60px;
	top: 180px;
}
#mastermind_rating_table tr td{
    text-align:right;
    padding-right:3px;
}
#main_bar_anec_blog{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_main_city_info{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_other_city_info{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_help_city_info{
	position:absolute;
	left: 23px;
	top: 149px;
}

#recipe_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

#recipe_cat_bar{
	position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;	
}

#recipes_by_cat{
    position:absolute;
	left: 183px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

#recipe_con_menu{
	position:absolute;
	z-index:803;
	top: 270px;
	left: 300px;
}

#recipe_info_page{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

#recipe_info_page_descr{
    position:absolute;
    left: 20px;
	top: 130px;
	width:600px;
	height:301px;
	font-size: 18px;
	font-weight: bold;
	text-align: justify;
	padding-top: 3px;
	padding-left: 3px;
	padding-right: 16px;
	background-color: #66aaee; 
    color: #103268;
    overflow:auto;
    outline:none;
}

#video_clips_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#abc_bar_video_club{
	position:absolute;
	left: 26px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#abc_bar_video_clips{
	position:absolute;
	left: 26px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

#main_bar_video_clips_by_name{
	position:absolute;
	left: 78px;
	top: 149px;
}
#main_bar_video_club_by_name{
	position:absolute;
	left: 78px;
	top: 149px;
}
#main_bar_video_club_by_search{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_vclub_not_ended{
	position:absolute;
	left: 23px;
	top: 139px;
}

#media_browser_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

#media_browser{
    position:absolute;
	left: 23px;
	top: 139px;
}

#search_kbd{
    position:absolute;
    z-index:801;
	left: 48px;
	/*top: 43px;*/
	bottom: 420px;
}

#search_kbd td, .search_kbd_table td {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold;
    height: 16px;
    width: 22px;
    text-align: center;
    background-color: #3399FF;
    padding-left: 2px;
    padding-right: 2px;
    padding-top: 2px;
    /*padding-bottom: 2px;*/
}

#search_kbd input {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold;
    width: 327px;
}

#search_kbd .kbd_selected {
    background-color: #FF9090;
}


#main_bar_video_club_by_top{
	position:absolute;
	left: 23px;
	top: 149px;
}
#main_bar_video_club_by_add_time{
	position:absolute;
	left:130px;
	top: 149px;
}
#video_club_add_time_bar{
	position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#video_club_switch_bar{
	position:absolute;
	left: 8px;
	top: 75px;
}
#info_video_club{
	position:absolute;
	left: 260px;
	top: 15px;	
}
#video_club_con_menu{
	position:absolute;
	z-index:803;
	left: 240px;
	top: 280px;
}
#video_clips_con_menu{
	position:absolute;
	z-index:803;
	left: 240px;
	top: 280px;
}

/* VIDEO CLUB INFO */
#video_club_info{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_vclub_info.jpg");
}
#video_club_info_descr{
	position:absolute;
	
	height:326px;
    width: 375px;
    
	left: 3px;
	top: 137px;
	
	overflow: hidden;
	
}
#video_club_info_descr_txt{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 18px;
	font-weight: bold;
	color: #003b89;
	text-align: justify;
	padding: 3px;
	padding-right: 6px;
}
#anec_blog_body{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 18px;
	font-weight: bold;
	text-align: justify;
	padding-top: 3px;
	padding-left: 3px;
	padding-right: 16px;
	background-color: #66aaee; 
    color: #103268;
}
#video_attributes{
    position:absolute;
	left: 22px;
	top: 70px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#video_club_info_name{
    position:absolute;
	left: 5px;
	top: 65px;
	width:640px;
	color: #ffffff;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 30px;
	font-weight: bold;
}
#video_club_info_screen{
    position:absolute;
	left: 410px;
	top: 140px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#video_club_info_con_menu{
	position:absolute;
	z-index:805;
	left: 280px;
	top: 190px;
}
#video_record_con_menu{
	position:absolute;
	z-index:805;
	left: 270px;
	top: 235px;
}

/* GENRE CLUB BAR */
#genre_bar_video_club{
	position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;	
}

#main_bar_video_club_by_genre{
	position:absolute;
	left: 219px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
.vclub_genre_nowrap {
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:127px;
}

/* YEAR CLUB BAR */
#year_bar_video_club{
	position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

/* VIDEO CLUB BY YEAR */
#main_bar_video_club_by_year{
	position:absolute;
	left: 154px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

#under_construction{
    position:absolute;
	left: 180px;
	top: 210px;
	z-index:1000;
	width:350px; 
	/*height:46px;*/
	padding: 5px;
	padding-top: 20px;
	padding-bottom: 20px;
	border: 4px solid #cccccc;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 18px;
	font-weight: bold;
	background-color: #3399FF;
	color: #FFFFFF;
	-webkit-border-radius: 3px;
    -moz-border-radius: 3px;
}

#warning_message{
    position:absolute;
	left: 155px;
	top: 210px;
	z-index:1000;
	width:400px; 
	/*height:46px;*/
	padding: 5px;
	border: 4px solid #cccccc;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 18px;
	font-weight: bold;
	background-color: #3399FF;
	color: #FFFFFF;
	-webkit-border-radius: 3px;
    -moz-border-radius: 3px;
}

/* PASSWORD INPUT */
#password_input{
    position:absolute;
	left: 250px;
	top: 310px;
	z-index:1000;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 18px;
	font-weight: bold;
}
#password_input_txt{
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
	font-weight: bold;
}
/* CON MENU */
.con_menu_passive {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	font-size: 14px;
	padding-left:3px;
	background: url("i/bg.gif");
}
.con_menu_active {
    font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-weight: bold; 
    font-size: 14px; 
    color: #fcdb00; 
    padding-left:3px; 
    background-color: #000000;
}

/* TOP MARKS IN MENU */
.top_marks_style1, .passive_punct  .punct_main {
	font-family: Verdana, Arial, Helvetica, sans-serif;
    font-weight: bold;
	font-size: 18px;
	color: #000000;
	background-color:#66AAEE;
	white-space: nowrap;
	text-align:center;
}

.top_marks_style1_img_b_l, .active_punct .punct_l_side {
    background: url("i/insert_b_l.png");
    width:10px;
    display:block;
    padding:0px;
    white-space: nowrap;
}
.top_marks_style1_img_b_r, .active_punct .punct_r_side {
    background: url("i/insert_b_r.png");
    width:10px;
    display:block;
    padding:0px;
    white-space: nowrap;
}

.top_marks_style1_img_l, .passive_punct .punct_l_side{
    background: url("i/insert_l.png");
    width:10px;
    display:block;
    padding:0px;
    white-space: nowrap;
}
.top_marks_style1_img_r, .passive_punct .punct_r_side {
    background: url("i/insert_r.png");
    width:10px;
    display:block;
    padding:0px;
    white-space: nowrap;
}

.top_marks_style3, .active_punct .punct_main{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-weight: bold;
	font-size: 18px;
	color: #66aaee;
	background-color:#000000;
	white-space: nowrap;
	text-align:center;
}

.menu_style1 {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px !important;
	font-weight: bold;
	color: #000000;
}
.menu_style2{
    font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 14px; 
    background-color:#000000; 
    color: #fcdb00;  
}
#con_alpha_layer{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px; 
	height:576px;
	background: url("i/checker.gif");
}
#con_alpha_layer_wk{
	position:absolute;
	z-index:802;
	left: 0px;
	top: 0px;
	width:720px; 
	height:576px;
	background: url("i/25alfa_20.png");
}
#con_alpha_layer_top{
	position:absolute;
	z-index:1100;
	left: 0px;
	top: 0px;
	width:720px; 
	height:576px;
	background: url("i/checker.gif");
}
#con_alpha_layer_top_wk{
	position:absolute;
	z-index:1100;
	left: 0px;
	top: 0px;
	width:720px; 
	height:576px;
	background: url("i/25alfa.png");
}

/* SETTING PAGE */
#setting_page{
    position: absolute;
    z-index: 998;
    top: 46px;
    left: 35px;
    width:640px; 
	height:480px;
}
#setting_page_menu{
    position: absolute;
    top: 150px;
    left: 170px;
}

/* PARENT PASSWORD PAGE */
#parent_password_page{
    position: absolute;
    z-index: 999;
    top: 46px;
    left: 35px;
    width:640px; 
	height:480px;
}
#parent_password_form{
    position: absolute;
    top: 150px;
    left: 120px;
}
.parent_password_input{
    font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;
	font-weight: bold;
}

/* VIDEO OUT SETTING */
#video_out_setting_page{
    position: absolute;
    z-index: 999;
    top: 46px;
    left: 35px;
    width:640px; 
	height:480px;
}
/*#bright_bar{
    position: absolute;
    top: 120px;
    left: 128px;
    
    width:400px; 
	height:10px;
}

#bright_button{
    position:absolute;
    left: 128px;
    top: 115px;
    width:10px; 
	height:20px;
}*/

.video_out_label{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold;
    color: #000099;
    width: 130px;
    text-align:right;
}

#bright_setting_bar, #contrast_setting_bar, #saturation_setting_bar{
    display:block;
    position:absolute;
    left: -8px;
}

#saturation_setting_bar{
    top: 230px;
}

#contrast_setting_bar{
    top: 170px;
}

#bright_setting_bar{
    top: 120px;
}

#bright_bar, #contrast_bar, #saturation_bar{
    position:relative;
    width:400px;
	height:10px;
	left: 135px;
	top: -15px;
}

.active_setting_bar{
    background-color:#ffcc33;
}

.passive_setting_bar{
    background-color:#2222aa;
}

#bright_button, #contrast_button, #saturation_button{
    position:relative;
    left: 135px;
    top: -30px;
    width:10px; 
	height:20px;
}


.label{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold;
    color: #3f81cc
}
.label1{
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: bold;
    color: #000099
}

/* IDENTIFICATION PAGE */
#identification_page{
    position: absolute;
    z-index: 999;
    top: 46px;
    left: 35px;
    width:640px; 
	height:480px;
}

/* ACTIVE && PASSIVE HIGHTLIGHTER*/
table tr .black_row, table tr .grey_row, table tr .hover_black_row , table tr .hover_grey_row {
    font-size: 16px;
}

.content_table{
    table-layout: fixed;
}

.content_table tr td{
    padding-left: 3px;
    white-space: pre;
    height: 25px;
    /*font-family: Verdana, Arial, Helvetica, sans-serif; */
    font-size: 18px;
    text-overflow: ellipsis;
    overflow:hidden;
    background-color: #66aaee; 
}

.content_table tr th{
    /*font-family: Verdana, Arial, Helvetica, sans-serif;*/
    font-size: 16px;
    height: 20px;
    text-align: center;
    font-weight: bold;
    background-color: #ffffff;
    color: #000001;
}

.grey_row, .grey_row td {
    /*font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 18px;*/
    background-color: #66aaee !important; 
    color: #444444;
}

.black_row, .black_row td{
    /*font-family: Verdana, Arial, Helvetica, sans-serif;
    font-size: 18px;*/
    background-color: #66aaee !important; 
    color: #000001;
}

.hover_grey_row, .hover_grey_row td {
    /*font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 18px;*/
    background-color:#000001 !important; 
    color: #1979d8;
}

.hover_black_row, .hover_black_row td {
    /*font-family: Verdana, Arial, Helvetica, sans-serif; 
    font-size: 18px;*/
    background-color: #000001 !important; 
    color: #66aaee;
}

/**/
.vclub_title{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 30px;
	font-weight: bold;
	color: #3f81cc;
}

#tv_program_title{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 24px;
	font-weight: bold;
	color: #3f81cc;
}

/**/
.td_nowrap_80{
    padding-left: 6px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:67px;
}
.td_nowrap_155{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:142px;
}
.td_nowrap_270{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:258px;
}
.td_nowrap_288{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:276px;
}
.td_nowrap_505{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:493px;
}
.wordwrap {
    white-space: normal;
}
.td_nowrap_435{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:423px;
}
.td_nowrap_200{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:188px;
}
.td_nowrap_210{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:198px;
}
.td_nowrap_220{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:208px;
}
.td_nowrap_240{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:228px;
}
.td_nowrap_280{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:268px;
}
.td_nowrap_160{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display:block;
    width:148px;
}
.td_nowrap_302{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display: block;
    width: 290px;
}
.td_nowrap_322{
    padding-left: 3px; 
    text-overflow: ellipsis;
    overflow: hidden; 
    white-space: nowrap;
    display: block;
    width: 310px;
}
/**/

/* LOADING MARK */
#loading_mark{
    position:absolute;
    z-index:2000;
    left: 50px;
	top: 66px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	color: #FF0000;
	font-size: 24px;
	font-weight: bold;
}
/**/

/* KARAOKE PAGE */
#karaoke_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#main_bar_karaoke_by_name{
    position:absolute;
	left: 78px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#abc_bar_karaoke{
	position:absolute;
	left: 26px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#genre_bar_karaoke{
	position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;	
}
#karaoke_con_menu{
	position:absolute;
	z-index:805;
	left: 280px;
	top: 240px;
}

#main_bar_karaoke_by_singer{
    position:absolute;
	left: 298px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#karaoke_singer_bar{
    position:absolute;
	left: 78px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#video_clips_singer_bar{
    position:absolute;
	left: 78px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
/**/
#incoming_message{
	position:absolute;
	width:716px;
	height:135px;
	z-index:1001;
	/*top: 446px;*/
	left: 0px;
	bottom: 0px;
	overflow: hidden;
	border: 2px solid #497CBA;
	background-color: #99BBFF;
}
#full_incoming_message{
	position:absolute;
	width:716px;
	height:auto;
	z-index:2001;
	/*top: 446px;*/
	left: 0px;
	bottom: 0px;
	overflow: hidden;
}

.full_incoming_message_all{
    border: 2px solid #497CBA;
	background-color: #99BBFF;
	color: #103268;
}

.full_incoming_message_wk{
    background-image: url("i/osd_menu_mag200_bg.png");
	color: #ffffff;
}

.full_incoming_message_wk font{
    color: #77ccff;
}

.full_incoming_message_all font{
    color: #050505;
}

#rec_notice{
	position:absolute;
	width:720px;
	height:80px;
	z-index:1001;
	top: 446px;
	left: 0px;
}

/* COLOR BUTTON */

.color_button_bar{
    font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 20px;
	font-weight: bold;
}
.yellow_button_horizontal_passive{
    background: url('i/btn_yellow_1.png');
	color: #00326e;
	padding-left: 55px;
    padding-top: 15px;
    background-repeat: no-repeat;
}
.yellow_button_horizontal_active{
    background: url('i/btn_yellow_2.png');
	color: #FFFFFF;
	padding-left: 55px;
    padding-top: 15px;
    background-repeat: no-repeat;
}

.blue_button_horizontal_passive{
    background: url('i/btn_blue_1.png');
    color: #00326e;
    padding-left: 55px;
    padding-top: 15px;
	background-repeat: no-repeat;
}

.blue_button_horizontal_active{
    background: url('i/btn_blue_2.png');
    color: #FFFFFF;
    padding-left: 55px;
    padding-top: 15px;
	background-repeat: no-repeat;
}

.green_button_horizontal_passive{
    background: url('i/btn_green_1.png');
    color: #FFFFFF;
    padding-left: 55px;
    padding-top: 15px;
	background-repeat: no-repeat;
}

/* AUDIO CLUB PAGE */
#audio_club_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#main_bar_audio_club_by_name{
    position:absolute;
	left: 98px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#abc_bar_audio_club{
	position:absolute;
	left: 26px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#audio_club_con_menu{
	position:absolute;
	z-index:805;
	left: 255px;
	top: 240px;
}
#main_bar_audio_club_by_singer{
    position:absolute;
	left: 318px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#main_bar_video_clips_by_singer{
    position:absolute;
	left: 347px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#audio_club_singer_bar{
    position:absolute;
	left: 98px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}
#main_bar_audio_club_playlist{
    position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

/* RADIO PAGE */
#radio_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}
#radio_con_menu{
	position:absolute;
	z-index:805;
	left: 255px;
	top: 240px;
}
#main_bar_radio_by_name{
    position:absolute;
	left: 23px;
	top: 149px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
}

/* CUT OFF */
#cut_off{
    position:absolute;
	z-index:2000;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 30px;
	font-weight: bold;
	background: url("i/bg_main.jpg");
}

/* WIDGET PAGE */
#widget_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_main.jpg");
}

.widget_menu_row_1{
	position:absolute;
    top: 120px;
}

.widget_menu_row_2{
    position:absolute;
    top: 250px;
}

.widget_menu_row_3{
    position:absolute;
    top: 380px;
}

.widget_menu_col_1{
    left: 50px;
}

.widget_menu_col_2{
    left: 250px;
}

.widget_menu_col_3{
    left: 450px;
}

/* WEATHER PAGE */
#weather_page{
	position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

.weather_row_1{
    position:absolute;
    top: 149px;
    width: 156px;
    height: 282px;
    background-color: #66aaee;
    padding-top: 2px;
    padding-left: 0px;
    padding-right: 0px;
}

.weather_col_1{
    left: 15px;
}

.weather_col_2{
    left: 173px;
}

.weather_col_3{
    left: 331px;
}

.weather_col_4{
    left: 489px;
}

.day_weather_layer_1{
    position:absolute;
    top: 160px;
    left: 0px;
    width: 150px;
    z-index:802;
}

.day_weather_layer_2{
    position:absolute;
    top: 160px;
    left: 0px;
    width: 150px;
    z-index:803;
}

.day_weather_layer_3{
    position:absolute;
    top: 160px;
    left: 0px;
    width: 150px;
    z-index:804;
}

.day_weather_temp{
    position:absolute;
    top: 168px;
    right: 0px;
    z-index:805;
}

/* ANEC PAGE BOX */
#anec_page_box {
    font-weight: bold;
    font-size: 24px;
    font-family: Arial, Helvetica, sans-serif;
    position: absolute;
    z-index: 1000;
    height: auto;
    width: auto;
    top: 410px;
    left: 300px;
}

#horoscope_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_main.jpg");
}

.horoscope_menu_row_1{
    position:absolute;
    top: 360px;
}
/*.horoscope_menu_row_2{
    position:absolute;
    top: 380px;
}
.horoscope_menu_row_3{
    position:absolute;
    top: 460px;
}*/

.horoscope_menu_col_1{
    left: 80px;
}

.horoscope_menu_col_2{
    left: 270px;
}

.horoscope_menu_col_3{
    left: 460px;
}

/*.horoscope_menu_col_4{
    left: 540px;
}
*/

#horoscope_sign_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

#course_page{
    position:absolute;
	z-index:801;
	left: 0px;
	top: 0px;
	width:720px;
	height:576px;
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size: 16px;
	font-weight: bold;
	background: url("i/bg_page.jpg");
}

#vclub_vote{
	position:absolute;
	z-index:1101;
	left: 175px;
	top: 200px;
}
#portal_loading_bar{
	position:absolute;
	z-index:801;
	left: 185px;
	top: 250px;
}


</style>
<script language="JavaScript" src="js.js" type="text/javascript"></script>
<script language="JavaScript" src="lang/lang_ru.js" type="text/javascript"></script>
<script language="JavaScript" type="text/javascript">
var debug = 0
var alex_debug = 0
var log_on = 1

const ver = '3.37.0'

var revision = '$Revision$'

//const use_ctrl_alt = 1 // использование ctrl+alt в lirc для power, mute и mic
var record = 0
var show_watchdog_debug = 0

//var serv_ip = ''

var _GET = {}

var dom_cache = {}
//var images = new Array;

//var stb_params = {}
//var stb_type

var media_browser
var atrack_switch

var cur_place = ''
var cur_place_num = 0
//var user
var key_lock = 1
var cur_partition = ''
//var serv_path = ''
var ch_idx = 0  // channel index in user channels array
var show_playing_on = 0
var last_vclub_played_id = 0;
var last_vclub_played_id_for_vote = 0;
var link_resp_storage_id = 0;
var last_vclub_pos_time = 0;
var _continue_play = 0
var cur_pos_time = 0
var vclub_play_auto_ended = 0

var fav_idx = -1

var aspect_idx = 0

var cur_weather

var additional_services_on = 1

var l = 0
var m = 0
var pause = 0
var speed = 1
var max_speed = 4 // 4=>8x  5=>16x
var speed_arr = {'-5' : '-16x', '-4' : '-8x', '-3' : '-4x', '-2' : '-2x', '-1' : '-1x', '2' : '2x',  '3' : '4x', '4' : '8x', '5' : '16x'}
var volume = 100
var mute = 0
var cur_page_items, cur_page = 1, total_pages
var cur_type='itv', prev_type = ''
var stb
var gSTB
var timeout = 200
var t_id = 0  // Timer id
var t1_id = 0, t2_id = 0
var action = ''
var home_dir = '/media/'
var channels
var c_id=0 // channel id in db
var tc_id=0, tc=1000
var tv_list_on = 0
var cur_ch = 0 // channel index in SELECT
var epg_on = 0
var program
var cur_epg_ch = 0
var cur_epg_prog = 0
var cur_bur_right = 0
var prev_in_focus
var max_page_items
var tlp_id = 0, tsi_id = 0, tlp = 1000
var mode_one = 0
var hist_ch = new Array(2)
var hist_ch_idx = new Array(0,0)
var hist_f_ch_idx = new Array(0,0)
var ch_by_num_on = 0 // флаг включенного окна ввода номера канала
var black_on = 0 // флаг включенного черного слоя
var tusb_id = 0 // флаг...

var time_seek = 10 // интервал перемотки
var time_seek_sum = 0 // суммарное время перемотки
var total_time_seek_sum = 0
var t_id_seek = 0 // id таймера для seek
var t_seek = 1000 // таймер до срабатывания seek

var seek_bar_on = 0 // флаг включенного seek_bar

var cur_playing_time = 0 // длительность по времени текущего файла
var cur_playing_str = ''
var media_type // file or stream
var vod_list // список видео
var itv_list // список тв каналов

var start_time // время начала проигрывания файла

var seek = 0 // 1 - ffwd; 0 - rew
var ss_seek

var cur_time // текущее место проигрывания
var total_paused_time = 0
var pause_length = 0
var time_start_pause // время, когда была нажата пауза

var curr_dir

var t_hide_ch_id // id таймера для скрытия выбора канала по номеру

var t_hide_ch_list // id таймера для скрытия выбора канала по списку

var to_send_played
var r_time_send_played
var cur_time_send_played = 0
var cur_played_time_wo_seek = 0

var time_send_played
var pause_start
var t_send_itv_id

var new_tv_list_on = 0
var new_cur_ch_idx = 1
var new_ch_list
var t_id_hide_new_ch_list
//var new_prev_ch_idx

//var manual_itv_set = 0 // флаг ручной настройки каналов itv

var cfg

var power_off = 0
var video_out
var player_on = 0 // 0 - не включен; 1 - включен плеер
var last_ch_idx = -1

var lang_menu_on = 0
var lang_l
var max_lang_l
var languages

var fav_channels = new Array()
var fav_channels_ids = new Array()
var f_ch_idx=0

var web_bar_on = 0

// delay for play
var to_play_id = 0
var t_play = 700

// Types of objects: 'chan', 'prog', 'list'
//-----------------------------------------
// total length of path:
const chan_path_len = 140
const prog_path_len = 140
const list_path_len = 198
// размер таблицы (строк)
const chanTbl_Size = 7
const progTbl_Size = 7
const listTbl_Size = 10
// свойство TOP для каждого типа
const chanTop      = 279
const progTop      = 279
const listTop      = 222
//
var array_chan = new Array()        // массив ТВ-каналов. Properties: (index, name)
var chanTbl_index = 0               // индекс текущей строки в таблице
var lastchanTbl_index = 0               // последний индекс текущей строки в таблице
var chanArray_startIdx = 0          // индекс в массиве ТВ-каналов, кот.занимает в таблице 1-ю строку
var offs_chan = 0                   // расстояние в пикселах над ползунком от начала скролл-бара
//
var array_prog = new Array()        // массив ТВ-программ. Properties: (index, name, sel)
var progTbl_index = 0
var progArray_startIdx = 0
var offs_prog = 0
//
var array_list = new Array()        // массив ТВ-каналов для быстрого переключения: (index, name)
var listTbl_index = 0
var listArray_startIdx = 0
var offs_list = 0

// KEYBOARD
//var kbd_On = 0
var phase = 0
var table = ''
var currH = ''
var currL = ''
var result = ''
var id_result = ''
//
var N = 0           // index of symbol in array
var symb_Eng = new Array('1','2','3','0','A','B','I','J','K',
                     '4','5','6','C','D','E','L','M','N',
                     '7','8','9','F','G','H','O','P','Q',
                     'R','S','T','a','b','c','j','k','l',
                     'U','V','W','d','e','f','m','n','o',
                     'X','Y','Z','g','h','i','p','q','r',
                     's','t','u','"','#','$',',','-','.',
                     'v','w','x','%','&','(','/',':',';',
                     'y','z','@',')','*','+',' ','Pyc','BS')

var symb_Pyc = new Array('1','2','3','0','А','Б','И','Й','К',
                     '4','5','6','В','Г','Д','Л','М','Н',
                     '7','8','9','Е','Ж','З','О','П','Р',
                     'С','Т','У','Ъ','Ы','Ь','г','д','е',
                     'Ф','Х','Ц','Э','Ю','Я','ж','з','и',
                     'Ч','Ш','Щ','а','б','в','й','к','л',
                     'м','н','о','х','ц','ч','ю','я','?',
                     'п','р','с','ш','щ','ъ','<','=','>',
                     'т','у','ф','ы','ь','э',' ','Eng','BS')

    
    var symbols = symb_Eng
    
    //------------------------------------------------------------------

    // 2D MENU
var curr_menu = 'main_menu'
var prev_menu

var img_src = new Array('a', 'b')

var img_idx = 0
var slide_timer
var restart_timer

var curr_menu_idx = 0
var cur_menu_row = 1
var cur_menu_col = 1

var menu_on = 0

var prev_menu_row = 1
var prev_menu_col = 1

var main_menu = ['dummy', 'dummy', 'dummy', 'club_menu', 'tv_menu', 'radio_menu', 'karaoke_menu', 'setting_menu', 'widget_menu']

var club_menu = 'hide_menu();show_club()'

var tv_menu = 'hide_menu();show_tv_page()'

var karaoke_menu = 'hide_menu();show_karaoke_page()'

//var radio_menu = 'dummy("radio_menu")'
var radio_menu = 'hide_menu();show_radio_page()'

var help_page = 'dummy("help_page")'

var widget_menu = 'hide_menu();show_widget_page()'

var setting_menu = 'hide_menu();show_setting_page()'

    //------------------------------------------------------------------
    // ABC VIDEO SEARCH
    
//var abc = new Array()
//abc['Английский'] = 'ABCDIFGHIJKLMNOPQRSTUVWXYZ'
//abc['Русский'] = 'АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЭЮЯABCDIFGHIJKLMNOPQRSTUVWXYZ0123456789'
//abc['Русский'] = 'АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЭЮЯ0123456789'
var cur_abc = 'Русский'
var cur_letter_idx = 0

var video_dir = '/media/'

var arrow_timer

var cur_video_list_row = 0
var prev_video_list_row = 1
var max_video_rows

var max_video_pages = 1
var cur_video_page = 1
var total_videos
var videos_per_page = 9
var total_video_pages = 1
var tmp_video_rows = new Array()

var abc_video_search_on = 0
var need_to_show_abc_video_search = 0
var video_info_on = 0
var empty_video_info = 1
var t_show_video_info = 1200
var t_show_video_info_id

var video_cover_path = '/stalker_portal/client/cover/'
var t_show_cover = 1000
var t_show_cover_id

var cover_on = 0

var reboot_after_ok = 0
    //------------------------------------------------------------------
    // GENRES
    
/* ABC BAR */
//var abc_arr = ['*','А','Б','В','Г','Д','Е','Ё','Ж','З','И','Й','К','Л','М','Н','О','П','Р','С','Т','У','Ф','Х','Ц','Ч','Ш','Щ','Ъ','Ы','Ь','Э','Ю','Я','0-9']

var cur_genre = 0
var cur_genres_select_row = 0
var prev_genres_select_row = 1
var total_genres_rows = 15
var genres_select_on = 0

// TV PAGE
var tv_page_on = 0
var prev_tv_page = ''
var dont_hide_con_alpha_layer = 0

// TV BY NUMBER
var tv_by_number_on = 0
var total_rows_tv_by_number = 10
var cur_row_tv_by_number = 0
var prev_row_tv_by_number = 1
var tv_by_number_con_menu = 0
var tv_by_num_per_page = 10
var max_tv_by_num_rows = 0
var cur_tv_by_num_page = 1
var total_tv_by_num_pages = 1
var tmp_tv_by_number_arr = new Array()
var t_show_tv_by_number_info_id = 0
var need_tv_by_number_row_focus = 0
var need_show_tv_by_number_cur_row = 0
var do_not_tv_by_number = 0
var tv_by_number_td_ids = []
var tv_by_number_page_dir = 1

var need_save_fav_channels = 0
var need_fill_row_after_reload = 0
var tmp_fav_ch_arr

var prev_row_tv_by_number_con_menu = 1
var cur_row_tv_by_number_con_menu = 0
var total_rows_tv_by_number_con_menu = 5
var func_tv_by_number = new Array('start_play_tv_by_number();hide_tv_page()','show_program();hide_tv_page()','add_to_fav_itv();hide_tv_by_number_con_menu()','dummy()','hide_tv_by_number_con_menu()')

// TV BY CHANNEL
var tv_by_channel_on = 0
var total_rows_tv_by_channel = 10
var cur_row_tv_by_channel = 0
var prev_row_tv_by_channel = 1
var tv_by_channel_con_menu = 0

var prev_row_tv_by_channel_con_menu = 1
var cur_row_tv_by_channel_con_menu = 0
var total_rows_tv_by_channel_con_menu = 4
var func_tv_by_channel = new Array('start_play_tv_by_channel();hide_tv_page()','show_program();hide_tv_page()','add_to_fav_itv();hide_tv_by_number_con_menu()','dummy()','hide_tv_by_number_con_menu()')

var cur_day_bar = 0
var prev_row_tv_day = 1
var cur_row_tv_day = 0
var total_rows_tv_day = 7
var lighted_row_tv_program_day = 0
var tmp_week_days

var max_program_by_channel_rows = 0
var cur_tv_by_ch_page = 1
var total_tv_by_ch_pages = 1
var total_tv_by_ch = 0
var tv_by_ch_per_page = 10
var total_tv_by_num
var t_show_tv_by_channel_info_id = 0
var tmp_tv_by_channel_arr
var tmp_tv_program_by_channel_arr
var need_vclub_by_channel_row_focus = 0

// PROGRAM
var tv_program_on = 0
var prev_row_tv_program = 1
var cur_row_tv_program = 0
var total_rows_tv_program = 0
var cur_tv_prog_page = 1
var total_tv_prog_pages = 1
var tv_program_con_menu = 0
var prev_row_tv_program_con_menu = 1
var cur_row_tv_program_con_menu = 0
var total_rows_tv_program_con_menu = 4
var ch_id_for_program
var func_tv_program = new Array('dummy()','dummy()','dummy()','hide_tv_program_con_menu()')
var need_tv_program_row_focus = 0
var need_tv_program_row_cur_focus = 0

// TV BY THEME
var tv_by_theme_on = 0
var total_rows_tv_by_theme = 10
var cur_row_tv_by_theme = 0
var prev_row_tv_by_theme = 1
var cur_row_tv_by_theme = 0
var cur_tv_by_theme_page = 1
var total_tv_by_theme_pages = 1
var max_tv_by_theme_rows = 0
var func_tv_by_theme = new Array('start_play_tv_by_theme();hide_tv_page()','show_program();hide_tv_page()','add_to_fav_itv();hide_tv_by_number_con_menu()','dummy()','hide_tv_by_number_con_menu()')
var cur_theme_id = 1
var tv_by_theme_per_page = 10
var lighted_row_tv_by_theme = 0
var need_tv_by_theme_row_focus = 0

/* THEME BAR */
var cur_theme_bar = 0
var prev_row_tv_theme = 1
var cur_row_tv_theme = 0
var total_rows_tv_theme = 10
var themes_id = new Array(3, 4, 5, 1, 2, 6, 7, 8, 9, 10)

/* CLUB */
var club_on = 0
var prev_row_club = 1
var cur_row_club = 0
var total_rows_club = 11
var func_club_menu = new Array('hide_club();show_video_club(media_cats.all)', 'dummy()', 'hide_club();show_video_club(media_cats.animation)', 'hide_club();show_video_club(media_cats.our_film)', 'hide_club();show_video_club(media_cats.world_film)', 'hide_club();show_video_club(media_cats.doc_film)', 'hide_club();show_video_club(media_cats.humor)', 'hide_club();show_video_club(media_cats.liking)', 'hide_club();show_video_club(media_cats.owr_serial)', 'hide_club();show_video_club(media_cats.world_serial)' ,'hide_club();show_video_club(100)')
var media_cats = {}
var media_cats_txt = {}
var cur_cat_num
var show_vclub_hd = 0

/* MY RECORDS */
//var rec_channels_nums = new Array()
var rec_channels_ids = new Array()
var rec_ch_idx = 0
var my_video_records_on = 0
var cur_row_my_video_records = 0
var prev_row_my_video_records = 1
var total_rows_my_video_records = 10
var total_my_video_records_pages = 1
var cur_my_video_records_page = 1
var max_my_video_records_rows = 0
var my_video_records_per_page = 10
var func_my_video_records = new Array('start_play_my_video_records();hide_video_records()', 'stop_rec_my_video_records();hide_video_club_con_menu()', 'del_my_video_rec();hide_video_club_con_menu()', 'hide_video_club_con_menu()')

var time_stop_my_video = 0
var to_stop_my_video = 0
var delta_time_my_video_start = 0
var arr_time_start_my_video_not_ended = new Array()
var my_record_length_s = 0
var rec_bar_on = 0

/* VIDEO RECORD */
var video_records_on = 0
var prev_video_record_page = ''
var cur_row_video_record_con_menu = 0
var prev_row_video_record_con_menu = 1
var video_record_con_menu_on = 0
var total_rows_video_record_con_menu = 4

/* VIDEO RECORDS BY ADDTIME */
var video_records_by_addtime_on = 0
var prev_row_video_records_by_addtime = 1
var cur_row_video_records_by_addtime = 0
var total_rows_video_records_by_addtime = 3
var total_video_records_by_addtime_pages = 1
var cur_video_records_by_addtime_page = 1
var max_video_records_by_addtime_rows = 0
var video_records_by_addtime_per_page = 3
var tmp_video_records_by_addtime_arr

/* VIDEO CLUB */
var video_club_on = 0
var cur_row_vclub_con_menu = 0
var prev_row_vclub_con_menu = 1
var vclub_con_menu_on = 0
var total_rows_vclub_con_menu = 5
var series_cur_num = 0
var series_total = 0
var cur_id_for_series = 0
var tmp_series_arr
var fav_vclub_on = 0
var vclub_fav_need_reload = 0

/* VIDEO CLUB BY NAME */
var vclub_by_name_on = 0
var cur_row_vclub_by_name = 0
var prev_row_vclub_by_name = 1
var total_rows_vclub_by_name = 10
var total_vclub_by_name_pages = 1
var cur_vclub_by_name_page = 1
var max_vclub_by_name_rows = 0
var vclub_by_name_per_page = 10
var func_vclub_by_name = new Array('start_play_vclub_by_name();', 'continue_play();','show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var need_vclub_by_name_row_focus = 0

var abc_total_pages = Math.ceil(abc_arr.length/10)

/* ABC VIDEO CLIPS BAR */
var cur_abc_video_clips_bar = 0
var prev_row_video_clips_abc = 1
var cur_row_video_clips_abc = 0
var total_rows_video_clips_abc = 10
var lighted_row_video_clips_abc = 0
var cur_video_clips_abc_bar_page = 1
var total_video_clips_abc_bar_pages = abc_total_pages
var need_video_clips_abc_bar_focus = 0
/**/

/* ABC CLUB BAR */
var cur_abc_vclub_bar = 0
var prev_row_vclub_abc = 1
var cur_row_vclub_abc = 0
var total_rows_vclub_abc = 10
var lighted_row_vclub_abc = 0
var cur_vclub_abc_bar_page = 1
var total_vclub_abc_bar_pages = abc_total_pages
var need_vclub_abc_bar_focus = 0

/* VIDEO CLUB INFO */
var video_club_info_on = 0
var video_club_info_con_menu_on = 0
var prev_row_vclub_info_con_menu = 1
var cur_row_vclub_info_con_menu = 0
var total_rows_vclub_info_con_menu = 3
var func_vclub_info = new Array('start_play_vclub_info();','show_video_club();hide_video_club_info()','hide_video_club_info_con_menu()')
var item_for_vclub_info = new Array()
var prev_vclub_page = ''
var empty_vclub_info = 0

/* GENRE CLUB BAR */
var cur_genre_vclub_bar = 0
var prev_row_vclub_genre_bar = 1
var cur_row_vclub_genre_bar = 0
var total_rows_vclub_genre_bar = 10
var max_vclub_genre_bar_rows = 0
var cur_vclub_genre_bar_page = 1
var total_vclub_genre_bar_pages = 2
var genre_names = new Array()
var genre_names_id = new Array()
var tmp_vclub_genre_bar_arr
var lighted_row_vclub_genre = 0
var need_vclub_genre_bar_focus = 0

/* VIDEO CLUB BY GENRE */
var vclub_by_genre_on = 0
var prev_row_vclub_by_genre = 1
var cur_row_vclub_by_genre = 0
var max_vclub_by_genre_rows = 0
var cur_vclub_by_genre_page = 1
var total_vclub_by_genre_pages = 1
var func_vclub_by_genre = new Array('start_play_vclub_by_genre();','continue_play();','show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var vclub_by_genre_per_page = 10
var prev_genre_id = 0
var curr_genre_id = 1
var need_vclub_by_genre_row_focus = 0

/* YEAR CLUB BAR */
var cur_year_vclub_bar = 0
var prev_row_vclub_year_bar = 1
var cur_row_vclub_year_bar = 0
var total_rows_vclub_year_bar = 10
var lighted_row_vclub_year = 0
var cur_vclub_year_bar_page = 1
var total_vclub_year_bar_pages = 3
var need_year_bar_focus = 0

/* VIDEO CLUB BY YEAR */
var vclub_by_year_on = 0
var cur_row_vclub_by_year = 0
var prev_row_vclub_by_year = 1
var max_vclub_by_year_rows = 0
var cur_vclub_by_year_page = 1
var tmp_vclub_by_year_arr
var total_vclub_by_year_pages = 1
var vclub_by_year_per_page = 10
var func_vclub_by_year = new Array('start_play_vclub_by_year();','continue_play()','show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var need_vclub_by_year_focus = 0
var need_vclub_by_year_row_focus = 0

/* VIDEO CLUB BY ADD TIME */
var vclub_by_add_time_on = 0
var cur_row_vclub_by_add_time = 0
var prev_row_vclub_by_add_time = 1
var total_rows_vclub_by_add_time = 10
var total_vclub_by_add_time_pages = 1
var cur_vclub_by_add_time_page = 1
var max_vclub_by_add_time_rows = 0
var vclub_by_add_time_per_page = 10
var func_vclub_by_add_time = new Array('start_play_vclub_by_add_time();', 'continue_play()','show_video_club_info();hide_video_club()',  'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var need_vclub_by_add_time_row_focus = 0

/* VIDEO CLUB BY TOP */
var vclub_by_top_on = 0
var cur_row_vclub_by_top = 0
var prev_row_vclub_by_top = 1
var total_rows_vclub_by_top = 10
var total_vclub_by_top_pages = 1
var cur_vclub_by_top_page = 1
var max_vclub_by_top_rows = 0
var vclub_by_top_per_page = 10
var func_vclub_by_top = new Array('start_play_vclub_by_top();', 'continue_play()','show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')

/* VIDEO CLUB BY SEARCH */
var vclub_by_search_on = 0
var cur_row_vclub_by_search = 0
var prev_row_vclub_by_search = 1
var total_rows_vclub_by_search = 10
var total_vclub_by_search_pages = 1
var cur_vclub_by_search_page = 1
var max_vclub_by_search_rows = 0
var vclub_by_search_per_page = 10
var func_vclub_by_search = new Array('start_play_vclub_by_search();', 'continue_play();','show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var need_vclub_by_search_row_focus = 0

/* NOT ENDED VIDEO */
var vclub_not_ended_on = 0
var cur_row_vclub_not_ended = 0
var prev_row_vclub_not_ended = 1
var total_rows_vclub_not_ended = 10
var total_vclub_not_ended_pages = 1
var cur_vclub_not_ended_page = 1
var max_vclub_not_ended_rows = 0
var vclub_not_ended_per_page = 10
var func_vclub_not_ended = new Array('continue_play(1);', 'start_play_vclub_not_ended();', 'show_video_club_info();hide_video_club()', 'add_del_to_vclub_fav();hide_video_club_con_menu()', 'hide_video_club_con_menu()')
var need_vclub_not_ended_row_focus = 0

/* VIRTUAL KEYBOARD FOR SEARCH */
var cur_kbd_row = 1
var cur_kbd_col = 3
var prev_kbd_row = 0
var prev_kbd_col = 0
var kbd_map_ru = new Array(12, 12, 10, 11)
var kbd_full_map_ru = new Array('Й','Ц','У','К','Е','Н','Г','Ш','Щ','З','Х','Ъ','Ф','Ы','В','А','П','Р','О','Л','Д','Ж','Э','lang','Я','Ч','С','М','И','Т','Ь','Б','Ю',' ','1','2','3','4','5','6','7','8','9','0', 'del')
var kbd_map_en = new Array(12, 12, 10, 11)
var kbd_full_map_en = new Array('Q','W','E','R','T','Y','U','I','O','P','—','-','A','S','D','F','G','H','J','K','L',':',';','lang','Z','X','C','V','B','N','M',',','.',' ','1','2','3','4','5','6','7','8','9','0', 'del')
var kbd_map
var kbd_full_map
var kbd_lang = 'ru'
var kbd_prev_id
var kbd_input_id
var kbd_on = 0
var kbd_active = 0
var kbd_init_filled = 0

/* VIDEO CLIP PAGE */
var video_clips_on = 0
var cur_row_video_clips_con_menu = 0
var prev_row_video_clips_con_menu = 1
var video_clips_con_menu_on = 0
var total_rows_video_clips_con_menu = 3
var fav_video_clips_on = 0
var video_clips_fav_need_reload = 0
var prev_video_clips_page = ''

/* VIDEO CLIPS BY NAME */
var video_clips_by_name_on = 0
var cur_row_video_clips_by_name = 0
var prev_row_video_clips_by_name = 1
var total_rows_video_clips_by_name = 10
var total_video_clips_by_name_pages = 1
var cur_video_clips_by_name_page = 1
var max_video_clips_by_name_rows = 0
var video_clips_by_name_per_page = 10
var func_video_clips_by_name = new Array('start_play_video_clips_by_name();hide_video_clips()', 'add_del_to_video_clips_fav()', 'hide_video_clips_con_menu()')
var need_video_clips_by_name_row_focus = 0

/* VIDEO CLIPS BY SINGER */
var video_clips_by_singer_on = 0
var cur_row_video_clips_by_singer = 0
var prev_row_video_clips_by_singer = 1
var total_rows_video_clips_by_singer = 10
var total_video_clips_by_singer_pages = 1
var cur_video_clips_by_singer_page = 1
var max_video_clips_by_singer_rows = 0
var video_clips_by_singer_per_page = 10
var func_video_clips_by_singer = new Array('start_play_video_clips_by_singer();hide_video_clips()', 'add_del_to_video_clips_fav()', 'hide_video_clips_con_menu()')
var need_video_clips_by_singer_row_focus = 0

/* VIDEO CLIPS SINGER BAR*/
var cur_video_clips_singer_bar = 0
var prev_row_video_clips_singer_bar = 1
var cur_row_video_clips_singer_bar = 0
var max_video_clips_singer_bar_rows = 0
var total_rows_video_clips_singer_bar = 10
var lighted_row_video_clips_singer_bar = 0
var cur_video_clips_singer_bar_page = 1
var total_video_clips_singer_bar_pages = 1
var need_video_clips_bar_focus = 0
var tmp_video_clips_singer_bar_arr
var video_clips_singer_bar_per_page = 10

/* VIDEO CLIPS BY GENRE */
var video_clips_by_genre_on = 0

/* VIDEO CLIPS BY ADD TIME */
var video_clips_by_add_time_on = 0

/* VIDEO CLIPS BY TOP */
var video_clips_by_top_on = 0

/* ADD TIME BAR */ 
var cur_add_time_vclub_bar = 0
var prev_row_vclub_add_time = 1
var cur_row_vclub_add_time = 0
var total_rows_vclub_add_time = 10
var lighted_row_vclub_add_time = 0

/* UNDER CONSTRUCTION */
var to_under_c_id = 0

/* WARNING MESSAGE */
var to_warn_msg_id = 0

/* PASSWORD INPUT */
var password_input_on = 0
var pass_item = ''
var pass_action = ''

/* SETTING PAGE */
var setting_page_on = 0
var prev_row_setting_page = 1
var cur_row_setting_page = 0
var total_rows_setting_page = 2
//var func_setting_page = new Array('hide_setting_page();show_parent_password_page()', 'hide_setting_page();show_video_out_setting_page()', 'hide_setting_page();show_identification_page()')
var func_setting_page = new Array('hide_setting_page();show_parent_password_page()', 'hide_setting_page();show_video_out_setting_page()')

/* PARENT PASSWORD PAGE */
var parent_password_page_on = 0
var cur_parent_password_item = 0
var prev_parent_password_item = 1
var total_parent_password_items = 3

/* IDENTIFICATION PAGE */
var identification_page_on = 0

/* WIDGET PAGE */
var cur_widget_menu_row = 2
var cur_widget_menu_col = 2
var prev_widget_menu_row = 0
var prev_widget_menu_col = 0
//var widget_menu_map = [1,3,3]
var widget_menu_map = [3,3]
var widget_menu_prev_id
var widget_page_on = 0
//var widget_menu_action_map = ['hide_widget_page();show_recipe_page();','hide_widget_page();show_city_info_page();','hide_widget_page();show_anec_page();','hide_widget_page();show_weather_page();', 'hide_widget_page();show_horoscope_page();', 'hide_widget_page();show_game_page();', 'hide_widget_page();show_course_page();']
var widget_menu_action_map = ['hide_widget_page();show_city_info_page();','hide_widget_page();show_anec_page();','hide_widget_page();show_weather_page();', 'hide_widget_page();show_horoscope_page();', 'hide_widget_page();show_game_page();', 'hide_widget_page();show_course_page();']
var reset_widget_menu = 0

/* CITY INFO PAGE */
var city_info_page_on = 0

/* MAIN CITY INFO */
var main_city_info_on = 0
var cur_row_main_city_info = 0
var prev_row_main_city_info = 1
var total_rows_main_city_info = 5
var total_main_city_info_pages = 1
var cur_main_city_info_page = 1
var max_main_city_info_rows = 0
var main_city_info_per_page = 5
var need_main_city_info_row_focus = 0

/* OTHER CITY INFO */
var other_city_info_on = 0
var cur_row_other_city_info = 0
var prev_row_other_city_info = 1
var total_rows_other_city_info = 5
var total_other_city_info_pages = 1
var cur_other_city_info_page = 1
var max_other_city_info_rows = 0
var other_city_info_per_page = 5
var need_other_city_info_row_focus = 0

/* HELP CITY INFO */
var help_city_info_on = 0
var cur_row_help_city_info = 0
var prev_row_help_city_info = 1
var total_rows_help_city_info = 5
var total_help_city_info_pages = 1
var cur_help_city_info_page = 1
var max_help_city_info_rows = 0
var help_city_info_per_page = 5
var need_help_city_info_row_focus = 0

/* ANECDOTE PAGE */
var anec_page_on = 0
var readed_anec = 0
var cur_anec_id = 0
var anec_bookmark_page = 0
var need_open_bookmark_page = 0

/* HOPOSCOPE PAGE */
var horoscope_page_on = 0
var cur_horoscope_menu_row = 1
var cur_horoscope_menu_col = 1
var prev_horoscope_menu_row = 0
var prev_horoscope_menu_col = 0
var horoscope_menu_map = [4,4,4]
var reset_horoscope_menu = 0
var horoscope_arr
var cur_horoscope_menu_page = 1
var total_horoscope_menu_pages = 4
var tmp_horoscope_menu_col = 0

var horoscope_sign_page_on = 0

/* COURSE PAGE */
var course_page_on = 0
var total_course_values = 0

/* WEATHER PAGE */
var weather_page_on = 0
var day_weather_on = 0

/* ANEC BLOG */
var anec_blog_on = 0
var total_rows_anec_blog = 1
var total_anec_blog_pages = 1
var cur_anec_blog_page = 1
var max_anec_blog_rows = 0
var anec_blog_per_page = 1
var last_vote_anec_id = 0

/* ANEC PAGE BOX */
var anec_page_box_on = 0

/* GAME PAGE */
var game_page_on = 0

/* MASTERMIND GAME */
var mastermind_game_on = 0
var cur_mastermind_num = 1
var mastermind_arrow_map = [310,390,470,550]
var mastermind_secret_number = []
var mastermind_try_number = []
var cur_mastermind_step = 0
var cows  = 0
var bulls = 0
var mastermind_log = []
var cur_mastermind_log_page = 1
var total_mastermind_pages = 1
var cur_mastermind_try_number = []
var mastermind_winner_alert_on = 0
var start_mastermind_game_time = 0
var total_mastermind_game_time = 0

var mastermind_menu_on = 0
var cur_mastermind_menu_row = 0
var prev_mastermind_menu_row = 1
var total_mastermind_menu_rows = 6
var func_mastermind_menu = ['hide_mastermind_menu()','init_mastermind_game();hide_mastermind_menu()','show_mastermind_rules();hide_mastermind_menu()','show_mastermind_control();hide_mastermind_menu()','show_mastermind_rating();hide_mastermind_menu()','hide_game_page();show_widget_page()']

var mastermind_rules_on = 0
var mastermind_control_on = 0

var mastermind_rating_on = 0
var cur_row_mastermind_rating = 0
var prev_row_mastermind_rating = 1
var total_rows_mastermind_rating = 10
var total_mastermind_rating_pages = 1
var cur_mastermind_rating_page = 1
var max_mastermind_rating_rows = 0
var mastermind_rating_per_page = 10
var need_mastermind_rating_row_focus = 0

/* RECIPE PAGE */
var recipe_page_on = 0
var recipe_con_menu_on = 0
var cur_recipe_con_menu_row = 0
var prev_recipe_con_menu_row = 1
var total_recipe_con_menu_rows = 3
var func_recipe_con_menu = ['show_recipe_info_page();hide_recipe_con_menu()','add_del_to_recipes_fav();hide_recipe_con_menu()','hide_recipe_con_menu()']
var prev_recipe_page = ''

/* ALL RECIPES BY CAT */
var recipes_by_cat_on = 0
var cur_row_recipes_by_cat = 0
var prev_row_recipes_by_cat = 1
var total_rows_recipes_by_cat = 10
var total_recipes_by_cat_pages = 1
var cur_recipes_by_cat_page = 1
var max_recipes_by_cat_rows = 0
var recipes_by_cat_per_page = 10
var need_recipes_by_cat_row_focus = 0
var tmp_recipes_by_cat_arr

/* RECIPE CATEGORY BAR */
var cur_recipes_cat_bar = 0
var prev_row_recipes_cat_bar = 1
var cur_row_recipes_cat_bar = 0
var total_rows_recipes_cat_bar = 10
var max_recipes_cat_bar_rows = 0
var cur_recipes_cat_bar_page = 1
var total_recipes_cat_bar_pages = 1
var recipe_cats = new Array()
var recipe_cats_id = new Array()
var tmp_recipes_cat_bar_arr
var lighted_row_recipes_cat = 0
var need_recipes_cat_bar_focus = 0

/* RECIPE INFO PAGE */
var recipe_info_page_on = 0
var item_for_recipe_info_page
var recipe_info_offset = 0
var fav_recipes_on = 0

/* VCLUB VOTE */
var vclub_vote_on = 0
var vclub_vote_step = 1
var need_show_vclub_vote = 0

/* KARAOKE PAGE */
var karaoke_page_on = 0
var cur_row_karaoke_con_menu = 0
var prev_row_karaoke_con_menu = 1
var karaoke_con_menu_on = 0
var total_rows_karaoke_con_menu = 2
var prev_karaoke_page = ''
var tmp_karaoke_by_name_arr

/* ABC KARAOKE BAR */
var cur_abc_karaoke_bar = 0
var prev_row_karaoke_abc = 1
var cur_row_karaoke_abc = 0
var total_rows_karaoke_abc = 10
var lighted_row_karaoke_abc = 0
var cur_karaoke_abc_bar_page = 1
var total_karaoke_abc_bar_pages = abc_total_pages
var need_karaoke_abc_bar_focus = 0

/* KARAOKE BY NAME */
var karaoke_by_name_on = 0
var cur_row_karaoke_by_name = 0
var prev_row_karaoke_by_name = 1
var total_rows_karaoke_by_name = 10
var total_karaoke_by_name_pages = 1
var cur_karaoke_by_name_page = 1
var max_karaoke_by_name_rows = 0
var karaoke_by_name_per_page = 10
var func_karaoke_by_name = new Array('start_play_karaoke_by_name()','hide_karaoke_con_menu()')
var need_karaoke_by_name_row_focus = 1

/* GENRE KARAOKE BAR */
var cur_genre_karaoke_bar = 0
var prev_row_karaoke_genre_bar = 1
var cur_row_karaoke_genre_bar = 0
var total_rows_karaoke_genre_bar = 10
var max_karaoke_genre_bar_rows = 0
var cur_karaoke_genre_bar_page = 1
var total_karaoke_genre_bar_pages = 1
var karaoke_genre_names = new Array(words['karaoke_genre_0'],words['karaoke_genre_1'],words['karaoke_genre_2'],words['karaoke_genre_3'],words['karaoke_genre_4'],words['karaoke_genre_5'],words['karaoke_genre_6'],words['karaoke_genre_7'],words['karaoke_genre_8'])
var tmp_karaoke_genre_bar_arr
var lighted_row_karaoke_genre = 0

/* KARAOKE BY SINGER */
var karaoke_by_singer_on = 0
var cur_row_karaoke_by_singer = 0
var prev_row_karaoke_by_singer = 1
var total_rows_karaoke_by_singer = 10
var total_karaoke_by_singer_pages = 1
var cur_karaoke_by_singer_page = 1
var max_karaoke_by_singer_rows = 0
var karaoke_by_singer_per_page = 10
var func_karaoke_by_singer = new Array('start_play_karaoke_by_singer()','hide_karaoke_con_menu()')
var need_karaoke_by_singer_row_focus = 0

/* KARAOKE SINGER BAR */
var cur_karaoke_singer_bar = 0
var prev_row_karaoke_singer_bar = 1
var cur_row_karaoke_singer_bar = 0
var max_karaoke_singer_bar_rows = 0
var lighted_row_karaoke_singer = 0
var cur_karaoke_singer_bar_page = 1
var total_karaoke_singer_bar_pages = 1
var karaoke_singer_bar_per_page = 10
var tmp_karaoke_singer_bar_arr
var lighted_row_karaoke_singer_bar = 0
var need_karaoke_singer_bar_row_focus = 0

/* INCOMING MESSAGE */
var show_incoming_msg_on = 0
var full_incoming_msg_on = 0
var incoming_msg_str

/* REC NOTICE */
var rec_notice_on = 0

/* VIDEO OUT SETTING */
var video_out_setting_page_on = 0
var bright_pos = 0

var video_out_setting_map = ['bright']
var video_out_cur_bar_idx = 0;
var video_out_prev_bar_idx = 0;
var video_out_button_pos = [0]

/* EVENTS */
var event_need_confirm = 0
var event_id = 0
var event_active_id = 0

/* FAVORITE ITV */
var fav_itv_on = 0
var save_fav_itv_need_reload = 0

/* CUT OFF */
var cut_off_on = 0

/* AUDIO CLUB PAGE */
var prev_row_audio_club_con_menu = 1
var cur_row_audio_club_con_menu = 0
var audio_club_con_menu_on = 0
var audio_club_page_on = 0
var total_rows_audio_club_con_menu = 4
var prev_audio_club_page = ''

/* ABC AUDIO CLUB BAR */
var cur_abc_audio_club_bar = 0
var prev_row_audio_club_abc = 1
var cur_row_audio_club_abc = 0
var total_rows_audio_club_abc = 10
var lighted_row_audio_club_abc = 0

/* AUDIO CLUB BY NAME */
var audio_club_by_name_on = 0
var cur_row_audio_club_by_name = 0
var prev_row_audio_club_by_name = 1
var total_rows_audio_club_by_name = 10
var total_audio_club_by_name_pages = 1
var cur_audio_club_by_name_page = 1
var max_audio_club_by_name_rows = 0
var audio_club_by_name_per_page = 10
//var func_audio_club_by_name = new Array('start_play_audio_club_by_name();hide_audio_club_page()','hide_audio_club_con_menu()')
var func_audio_club_by_name = new Array('start_play_audio_club_by_name()', 'add_del_to_audio_playlist()', 'dummy()', 'hide_audio_club_con_menu()')
var audio_club_by_name_abc = 0
var tmp_audio_club_by_name_arr

/* AUDIO CLUB BY SINGER */
var audio_club_by_singer_on = 0
var cur_row_audio_club_by_singer = 0
var prev_row_audio_club_by_singer = 1
var total_rows_audio_club_by_singer = 10
var total_audio_club_by_singer_pages = 1
var cur_audio_club_by_singer_page = 1
var max_audio_club_by_singer_rows = 0
var audio_club_by_singer_per_page = 10
var func_audio_club_by_singer = new Array('start_play_audio_club_by_singer()', 'add_del_to_audio_playlist()', 'dummy()', 'hide_audio_club_con_menu()')
var tmp_audio_club_by_singer_arr

/* AUDIO CLUB SINGER BAR */
var cur_audio_club_singer_bar = 0
var prev_row_audio_club_singer_bar = 1
var cur_row_audio_club_singer_bar = 0
var max_audio_club_singer_bar_rows = 0
var lighted_row_audio_club_singer = 0
var cur_audio_club_singer_bar_page = 1
var total_audio_club_singer_bar_pages = 1
var audio_club_singer_bar_per_page = 10
var tmp_audio_club_singer_bar_arr
var lighted_row_audio_club_singer_bar = 0

/* AUDIO CLUB PLAYLIST */
var audio_club_playlist_on = 0
var cur_row_audio_club_playlist = 0
var prev_row_audio_club_playlist = 1
var total_rows_audio_club_playlist = 10
var total_audio_club_playlist_pages = 1
var cur_audio_club_playlist_page = 1
var max_audio_club_playlist_rows = 0
var audio_club_playlist_per_page = 10
var func_audio_club_playlist = new Array('start_play_audio_club_playlist()', 'add_del_to_audio_playlist()', 'dummy()', 'hide_audio_club_con_menu()')
var cur_page_audio_playlist_play = 0
var cur_audio_playlist_play = 1
var prev_audio_playlist_play = 0
var t_next_play_id
var play_on_next_page = 0
var continue_on_next_page = 0

/* RADIO PAGE */
var prev_row_radio_con_menu = 1
var cur_row_radio_con_menu = 0
var radio_con_menu_on = 0
var radio_page_on = 0
var total_rows_radio_con_menu = 2
var prev_radio_page = ''

/* RADIO BY NAME */
var radio_by_name_on = 0
var cur_row_radio_by_name = 0
var prev_row_radio_by_name = 1
var total_rows_radio_by_name = 10
var total_radio_by_name_pages = 1
var cur_radio_by_name_page = 1
var max_radio_by_name_rows = 0
var radio_by_name_per_page = 10
var func_radio_by_name = new Array('start_play_radio_by_name()', 'hide_radio_con_menu()')
var prev_radio_by_name_play = 0
var cur_radio_by_name_play = 1
var cur_page_radio_by_name_play = 0

    //------------------------------------------------------------------
    
    menu = new Array('itv', 'iradio', 'vod', 'aod', 'web', 'game', 'dir')
    x_scale = new Array(10, 20, 100, 200, 100, 400, 430)
    
    var browser = get_user_browser()

    /* SYSTEM */
    window.onerror = error_handler
    
    get_params()
    
    if (_GET.hasOwnProperty('debug')){
        alex_debug = 1
    }
    
    /* Remove \n\r from string */
    String.prototype.clearnl = function(){
        return this.replace(/(\n(\r)?)/g, '');
    }
    
    if (browser == 'webkit'){ // MAG200 WK
        
        Object.prototype.toSource = function(){
            return 'WebKit Object not support toSource method'
        }
        
        Array.prototype.toSource = function(){
            // WebKit Array not support toSource method
            return '[' + this.join( ', ' ) + ']';
        }
                
    } //else if (browser == 'firefox'){ // MAG100
        
        win_focus()
        
    //}

/*  XPCOM STB CONSTRUCTOR  */

function common_xpcom(){
    
    this.user = {}
    this.mac = ''
    this.ip  = ''
    this.hd  = 0
    this.type  = ''
    this.version    = ''
    this.serv_ip    = ''
    this.serv_path  = ''
    this.images   = []
    this.storages = {}
    this.mounted_storage = ''
    this.menu_clock = new main_menu_clock()
    
    this.get_server_params = function(){
        _debug('get_server_params')
        
        var pattern = /http:\/\/([\w\.\-]*)\/([\w]+)*\/client\/index.html(.)*/

        this.serv_ip   = document.URL.replace(pattern, "$1")
        this.serv_path = '/'+document.URL.replace(pattern, "$2")+'/server/'
        
        _debug('stb.serv_ip: '+this.serv_ip)
        _debug('stb.serv_path: '+this.serv_path)
    }
    
    this.get_stb_params = function (){
        try{
            this.mac = stb.RDir('MACAddress').toUpperCase().clearnl()
            
            this.ip  = stb.RDir('IPAddress').clearnl()
            
            this.type = stb.RDir('Model').clearnl()
            
            this.version = 'PORTAL version: '+ver+'; '+stb.Version()
            
            if (this.type == 'MAG200'){
                this.hd = 1
            }else{
                this.hd = 0
            }
        }catch(e){
            _debug(e)
        }
        _debug('this.mac: '+this.mac)
        _debug('this.ip: '+this.ip)
        _debug('this.type: '+this.type)
        _debug('this.version: '+this.version)
        _debug('this.hd: '+this.hd)
    }
    
    this.set_cookie = function(name,val){
        document.cookie = name + '=' + escape(val) + '; path=/;'
    }
    
    this.preload_images = function(){
        doLoad('preload_images',0)
    }
    
    this.get_user_profile = function(){
        doLoad('get_profile', 0, {'hd':this.hd, 'ver':this.version})
        portal_loading_bar(30)
    }
    
    this.check_image_version = function(){
        if (this.type == 'MAG200'){
            var cur_version = stb.RDir('ImageVersion').clearnl()
            _debug('cur_version: '+cur_version)
            _debug('stb.user.image_version: '+stb.user['image_version'])
            if (cur_version != stb.user['image_version'] && stb.user['image_version'] != '0'){
                _debug('RebootDHCP')
                stb.ExecAction('RebootDHCP')
                return 0
            }
        }
        return 1
    }
    
    this.user_init = function(user_data){
        
        this.user = user_data
        
        _debug('this.user: '+this.user.toSource())
        
        if (this.user['status'] == 0){
            
            if (this.type == 'MAG200'){
                
                total_rows_club = 11
                func_club_menu = new Array('hide_club();show_video_club(media_cats.all)','hide_club();show_video_club(101)', 'hide_club();show_video_club(media_cats.animation)', 'hide_club();show_video_club(media_cats.our_film)', 'hide_club();show_video_club(media_cats.world_film)', 'hide_club();show_video_club(media_cats.doc_film)', 'hide_club();show_video_club(media_cats.humor)', 'hide_club();show_video_club(media_cats.liking)', 'hide_club();show_video_club(media_cats.owr_serial)', 'hide_club();show_video_club(media_cats.world_serial)' ,'hide_club();show_video_club(100)')
                document.getElementById('club_row_1').style.display = ''
                
                if (browser == 'webkit'){
                    total_rows_club = 12
                    
                    document.getElementById('club_row_11').style.display = ''
                    
                    media_browser = new media_browser()
                    
                    atrack_switch = new atrack_switch()
                    
                    func_club_menu.push('if(media_browser.is_drive_mounted()){hide_club(); media_browser.show()}')
                    
                    document.getElementById('play').className = 'play_osd_wk';
                    document.getElementById('black').className = 'black_wk';
                    
                    document.getElementById('full_incoming_message').className = 'full_incoming_message_wk';
                    
                    
                    /* VIDEO OUT SETTINGS */
                    video_out_setting_map = ['bright', 'contrast', 'saturation']
                    video_out_button_pos = [0,0,0]
                    
                    document.getElementById('contrast_setting_bar').style.display = ''
                    document.getElementById('saturation_setting_bar').style.display = ''
                    document.getElementById('video_out_help').style.display = ''
                    document.getElementById('change_video_out_row').style.display = 'none'
                    document.getElementById('video_out_table').style.display = 'none'
                    
                    
                }else{
                    func_setting_page = new Array('hide_setting_page();show_parent_password_page()')
                }
                
                if (!this.check_image_version()){
                    return;
                }
            }
            
            fav_itv_on = parseInt(this.user['fav_itv_on'])
            volume = parseInt(this.user['volume'])
            rec_channels_ids = this.user['my_rec_ch']
            init_volume_osd()
            mount_home_dir(this.user['storages'])
            set_additional_services(this.user['additional_services_on'])
            this.preload_images()
            load_channels()
            load_fav_channels()
            load_fav_itv()
            isset_channels()
            key_lock = 0
            
            cur_weather = this.user['cur_weather']
            
            set_updated_places(this.user['updated'])
            set_video_out_options()
            set_video_out()
            get_media_cats()
            run_watchdog()
            epg_loader.start()
        }else if(this.user['status'] == 1){
            cut_off()
            run_watchdog()
        }
        portal_loading_bar(40)
    }
    
    this.Mount = function(link_cmd){
        /*_debug('stb.Mount('+link_cmd+')')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        this.mounted_storage = link_cmd.replace( /[\s\S]*\/media\/(\S+)\/(\S+)/ , "$1")
        _debug('stb.mounted_storage: '+this.mounted_storage)
        try{
            //this.mounted_storage = storage_name
            gSTB.ExecAction('make_dir /media/'+this.mounted_storage)
            var mount_cmd = '"' + this.storages[this.mounted_storage]['storage_ip'] + ':' + this.storages[this.mounted_storage]['nfs_home_path'] + this.mac + '" /media/' + this.mounted_storage
            gSTB.ExecAction('mount_dir '+mount_cmd)
        }catch(e){
            _debug(e)
        }*/
    }
    
    this.Umount = function(){
        /*_debug('stb.Umount()')
        _debug('stb.mounted_storage: '+this.mounted_storage)
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        if (this.mounted_storage){
            try{
                gSTB.ExecAction('umount_dir /media/'+this.mounted_storage)
                this.mounted_storage = ''
            }catch(e){
                _debug(e)
            }
        }*/
    }
}

function webkit_xpcom(){
    
    this.StandBy = function(par){
        gSTB.StandBy(par)
        panel = '.200'
        if (par){
            panel = '....'
        }
        _debug('front_panel caption ' + panel)
        gSTB.ExecAction('front_panel caption ' + panel)
    }
    
    this.SetBrightness = function(val){
        _debug('SetBrightness('+val+')')
        gSTB.SetBrightness(val)
    }
    
    this.SetSaturation = function(val){
        _debug('SetSaturation('+val+')')
        gSTB.SetSaturation(val)
    }
    
    this.SetContrast = function(val){
        _debug('SetContrast('+val+')')
        val = val-127
        _debug('val: '+val)
        gSTB.SetContrast(val)
    }
    
}

function firefox_xpcom(){

    this.__noSuchMethod__ = function(name, args){
        return gSTB[name].apply(gSTB, args)
    }
    
    this.IgnoreUpdates = function(val){
        return true;
    }
    
    this.GetMediaLen = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        var x = {}
        gSTB.GetMediaLen(x)
        return x.value
    }
    
    this.Version = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        var x = {}
        gSTB.Version(x)
        return x.value
    }
    
    this.RDir = function(param){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        var x={}
        gSTB.RDir(param, x)
        return x.value
    }
    
    this.GetPosTime = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        var x = {}
        gSTB.GetPosTime(x)
        return x.value
    }
    
    this.StandBy = function(par){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        if (stb.type == 'MAG100'){
            if (par){
                gSTB.SetDefaultFlicker(1)
                gSTB.ExecAction('SetVideoOut off');
            }else{
                video_out = read_video_out()
                gSTB.ExecAction('SetVideoOut '+video_out)
            }
        }else{
            gSTB.StandBy(par)
            panel = '.200'
            if (par){
                panel = '....'
            }
            _debug('front_panel caption ' + panel)
            gSTB.ExecAction('front_panel caption ' + panel)
        }
    }
    
    this.SetBrightness = function(val){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        val = Dec2Hex(val)
        _debug('SetBrightness('+val+')')
        gSTB.ExecAction('bright '+val);
    }
    
    this.SetContrast = function(val){}
    
    this.SetSaturation = function(val){}
    
    this.GetAudioPIDs = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        var x={}
        gSTB.GetAudioPIDs(x)
        return x.value
    }
    
    this.GetAudioPID = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        var x={}
        gSTB.GetAudioPID(x)
        return x.value
    }
    
    this.SetAudioPID = function(val){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        gSTB.SetAudioPID(val)
    }
    
    this.GetSubtitlePIDs = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        var x={}
        gSTB.GetSubtitlePIDs(x)
        return x.value
    }
    
    this.GetSubtitlePID = function(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        var x={}
        gSTB.GetSubtitlePID(x)
        return x.value
    }
    
    this.SetSubtitlePID = function(val){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        gSTB.SetSubtitlePID(val)
    }
    
}

/*  */

    function init(){
        try{
            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        }catch(ee){
            _alert(ee)
        }

        if(debug){
            document.getElementById('debug').style.display = ''
            document.getElementById('xpcom').style.display = ''
        }
        if(ver){
            document.getElementById('ver').innerHTML = ver+'&nbsp;'
        }
        portal_loading_bar(5)
        initXpcom()
        
        try{
            stb.InitPlayer()
            _debug('stb.InitPlayer()')
        }catch(er){
            _debug(er)
        }
        
        _debug('browser: '+browser)
        
        try{
            _debug('finish:'+finish)
        }catch(e){
            _debug(e)
            _debug('!!!LOADING NOT FINISHED!!!')
        }
        
        try{
            if(browser != 'webkit'){
                stb.SetChromaKey(0, 0xffffff)
            }else{
                stb.SetTopWin(0);
            }
            
            stb.SetupRTSP(2, 0x29)
            stb.SetAspect(0x10)
            stb.SetPIG(1, -1, -1, -1)
            stb.SetUserFlickerControl(1)
            stb.SetDefaultFlicker(1)
            stb.SetLoop(0)
            stb.SetMicVolume(100)
            stb.get_server_params()
            stb.get_stb_params()
            stb.set_cookie('mac',stb.mac)
        }catch(e){
            _debug(e)
        }
        try{
            _debug('finish:'+finish)
        }catch(e){
            _log('loading_fail', '')
            window.setTimeout("reload()", 2000)
            return
        }
        
        _debug('init()')
        _log('init()')
        portal_loading_bar(20)
        stb.get_user_profile()
    }
    
    function mount_home_dir(storages){
        _debug('mount_home_dir('+storages.toSource()+')')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        for(var i in storages){
            if (storages.hasOwnProperty(i)){
                stb.ExecAction('make_dir /media/'+storages[i]['storage_name'])
                
                mount_cmd = '"'+storages[i]['storage_ip']+':'+storages[i]['nfs_home_path']+stb.mac+'" /media/'+storages[i]['storage_name']
                _debug('mount_cmd: '+mount_cmd)
            
                try{
                    stb.ExecAction('mount_dir '+mount_cmd)
                }catch(e){
                    _debug(e)
                }
            }
        }
    }
    
    function mount_all_storages(str){
        _debug('mount_all_storages('+str+')')
        try{
            mount_home_dir(eval('('+str+')'))
        }catch(e){
            _debug(e)
        }
    }
    
    /*function preload_images(){
        doLoad('preload_images',0)
    }*/
    
    function image_cache(arr){
        _debug('image_cache('+arr+')')
        for (var i=0; i<arr.length; i++){
            stb.images[i] = new Image();
            stb.images[i].src = arr[i];
        	stb.images.onload = function(){}
        }
        portal_loading_bar(80)
    }
    
    function reload(){
        _debug('reload()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        stb.ExecAction('reload')
    }
    
    function get_params(){
        var get = new String(window.location)
        var x = get.indexOf('?');
        if (x!=-1){
            var l = get.length;
            get = get.substr(x+1, l-x);
            l = get.split('&');
            x = 0;
            for(i in l){
                if (l.hasOwnProperty(i)){
                    get = l[i].split('=');
                    _GET[get[0]] = get[1]
                    x++;
                }
            }
        }
    }
    
    function get_user_browser(){
        ua = navigator.userAgent.toLowerCase();
        
        if (ua.indexOf("webkit") != -1) {
            return "webkit"
        }else if (ua.indexOf("firefox") != -1){
            return "firefox"
        }
        
    }
    
    function error_handler(msg, url, lno){
        str = 'line: '+lno+'; msg: "'+msg+'" url: '+url
        try{
            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
            stb.Debug(str)
        }catch(err){
            _alert(err)
        }
        return true
    }
    
    function get_element(id){
        tmp_obj = dom_cache[id]
        if (tmp_obj){
            return tmp_obj
        }else{
            return document.getElementById(id)
        }
    }

    // Запуск приложения из фрейма
    function set_src(src) {
        f_frame  = document.getElementById('fframe')
        f_frame.src = src
    }

    function initXpcom(){
        try {
            
            if (browser == 'firefox'){
                netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
                gSTB = Components.classes["@mydomain.com/XPCOMSample/MyComponent;1"].createInstance().QueryInterface(Components.interfaces.IMyComponent)
                
                firefox_xpcom.prototype = new common_xpcom()
                stb = new firefox_xpcom()
                
            }else if (browser == 'webkit'){
                webkit_xpcom.prototype = gSTB
                common_xpcom.prototype = new webkit_xpcom()
                stb = new common_xpcom()
            }
            
        } catch (err) {
            document.getElementById('xpcom').innerHTML = err
        }

        _debug('initXpcom()')
        
        try{
            initEvents()
        }catch(e){
            _debug('Events not inited: '+e)
        }
        
        stbEvent.onEvent = EventTest
        portal_loading_bar(10)
    }
    
    function EventTest(e){
        netscape.security.PrivilegeManager.enablePrivilege('UniversalXPConnect');
        _debug('EventTest: '+e)
        switch(parseInt(e)){
            case 1:  // end
            {
                if(media_type == 'file'){
                    vclub_play_auto_ended = 1
                    stop()
                    hide_black()
    	            stb.SetDefaultFlicker(1)
    	            if (prev_vclub_page == 'video_club'){
                        show_video_club()
                    }else if (prev_video_record_page == 'video_records'){
                        show_video_records()
                    }else if (prev_karaoke_page == 'karaoke_page'){
                    	show_karaoke_page()
                    }else if (media_browser.hidden){
                        media_browser.show()
                    }else{
                        show_menu()
                    }
                    
    	            _continue_play = 0
                    last_vclub_played_id = 0
    	            speed = 1
	            }else{
	                _debug('stream error')
	                log_stream_error()
	            }
	            
	            break
	        }
	        case 2:
	        {
	            //if (){
                atrack_switch.get_all_pids();
	            //}
	            
	            break
	        }
	        case 4:
	        {
	            tmp_cur_id = get_cur_vclub_id()
	            
                _debug('_continue_play: '+_continue_play)
                _debug('vclub_not_ended_on: '+vclub_not_ended_on)
                
                if ((_continue_play == 1 && last_vclub_played_id != 0 && last_vclub_played_id == tmp_cur_id && last_vclub_pos_time > 0) || (_continue_play == 1 && vclub_not_ended_on)){
                    _debug('stb.SetPosTime('+last_vclub_pos_time+')')
                    stb.SetPosTime(last_vclub_pos_time)
                    _continue_play = 0
                    
                    //cur_pos_time = parseInt(last_vclub_pos_time)
                    start_time = start_time - parseInt(last_vclub_pos_time)
                    
                    cur_playing_time = stb.GetMediaLen()
                    
                    _debug('cur_pos_time: '+cur_pos_time)
                    _debug('cur_playing_time: '+cur_playing_time)
                    
                }else{
                    
                    if(my_video_records_on == 1){
                        _debug('tmp_my_video_records_arr: '+tmp_my_video_records_arr.toSource())
                        
                        cur_pos_time     = parseInt(tmp_my_video_records_arr[cur_row_my_video_records].files_t_start)
                        var my_rec_ch_id = parseInt(tmp_my_video_records_arr[cur_row_my_video_records].ch_id)

                        delta_time_my_video_start = cur_pos_time
                        
                        _debug('delta_time_my_video_start: '+delta_time_my_video_start)
                        
                        if (cur_pos_time > 0){
                            _debug('SetPosTime('+cur_pos_time+')')
                            stb.SetPosTime(cur_pos_time)
                            cur_pos_time = 0
                        }
                        
                        if (tmp_my_video_records_arr[cur_row_my_video_records].ended == 1){
                            
                            window.clearTimeout(to_stop_my_video)
                            to_stop_my_video = 0

                            time_stop_my_video = cur_playing_time*1000
                            to_stop_my_video = window.setTimeout(stop_my_video, time_stop_my_video)
                            _debug('to_stop_my_video: '+to_stop_my_video)
                        }else{
                            arr_time_start_my_video_not_ended[my_rec_ch_id] = Date.parse(new Date())/1000
                            _debug('arr_time_start_my_video_not_ended[my_rec_ch_id]: '+arr_time_start_my_video_not_ended[my_rec_ch_id])
                        }
                    }else{
                        if(media_type == 'file'){
                            get_pos_time()
                            cur_pos_time = 0
                            _debug('tmp_cur_id: '+tmp_cur_id)
                            if (tmp_cur_id){
                                window.clearTimeout(to_send_played)
                                to_send_played = 0
                                
                                _debug('series_total: '+series_total)
                                _debug('tmp_series_arr[series_cur_num]: '+tmp_series_arr[series_cur_num])
                                
                                if (series_total > 0 && tmp_series_arr[series_cur_num] > 1){
                                    _debug('not send play')
                                }else{
                                    time_send_played = (cur_playing_time-cur_playing_time*0.3)*1000
                                    _debug('time_send_played: '+time_send_played)
                                    to_send_played = window.setTimeout(send_played_video, time_send_played, tmp_cur_id)
                                }
                            }
                        }
                    }
                }
                
	            _debug('cur_pos_time: '+cur_pos_time)
	            _debug('cur_playing_time: '+cur_playing_time)
	            
	            if (stb.type == 'MAG100'){
	               show_black()
	            }
	            stb.SetDefaultFlicker(0)
	            speed = 1
	            pause = 0
	            break
	        }
	    }
    }
    
    function get_media_cats(){
        _debug('get_media_cats()')
        doLoad('get_media_cats', 0)
    }
    
    /*function get_version(){
        /*netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        x={}
        stb.Version(x)
        result = 'PORTAL version: '+ver+', '+x.value*/
        /*result = 'PORTAL version: '+ver+', '+stb.Version()
        return result
    }*/
    
    /*function get_mac(){
        _debug('get_mac()')*/
        /*netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        if (browser == 'firefox'){
            x={}
            stb.RDir('ifconfig', x)
            x.value
            pat2 = /[\n\w\S\s]*HWaddr (\S+)[\n\w\S\s]*/
            /*return x.value.replace(pat2, "$1")
        }else{
            return stb.RDir('MACAddress')
        }*/
        /*return stb.RDir('MACAddress').toUpperCase()
    }*/
    
    /*function get_stb_ip(){
        _debug('get_stb_ip()')*/
        /*netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        if (browser == 'firefox'){
            x={}
            stb.RDir('ifconfig', x)
            pat2 = /[\n\w\S\s]*inet addr:((\d+).(\d+).(\d+).(\d+))[\n\w\S\s]*/
            /*return x.value.replace(pat2, "$1")
        }else{
            return stb.RDir('IPAddress')
        }*/
        /*return stb.RDir('IPAddress')
    }*/
    
    /*function set_cookie(name,val){
        document.cookie = name + '=' + escape(val) + '; path=/;'
    }*/
    
    /*function read_cfg(){
        _debug('read_cfg()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        x = {}
        try{
            stb.ReadCFG(x)
        }catch(e){
            _debug(e)
        }
        cfg = x.value
        
        return cfg
    }*/

    //function get_server_ip(){
        /*pat2 = /[\n\w\S\s]*PORTAL_IP="(\S+)"[\n\w\S\s]*/
        /*if(cfg){
            str = cfg
        }else{
            str = read_cfg()
        }
        return str.replace(pat2, "$1")*/
        //pattern = /http:\/\/([\d\w\.\-]*)(\/[\S]+)*\/client\/index.html[\n\w\S\s]*/
        /*doc_url = document.URL
        return doc_url.replace(pattern, "$1")
    }*/
    
    /*function get_server_path(){
        pattern = /http:\/\/[\d\w\.\-]+(\/[\S]+)*\/client\/index.html[\n\w\S\s]*/
        /*doc_url = document.URL
        _debug('doc_url: '+doc_url)
        portal_loading_bar(15)
        return doc_url.replace(pattern, "$1")+'/server/'
    }*/
    
    /*function get_date(){
    	doLoad('date',1)
    }*/
    
    /*function get_itv_str(){
        pat_itv_str = /[\n\w\S\s]*ITV_CH="([\S]*)"[\n\w\S\s]*/
        
        /*if(cfg){
            str = cfg
        }else{
            str = read_cfg()
        }
        
        return  atob(str.replace(pat_itv_str, "$1"))
    }
    
    function get_itv_arr(){
        _debug('get_itv_arr()')
        
        itv_arr = get_itv_str()
        
        _debug('itv_arr: '+itv_arr)
        if(itv_arr != ''){
            manual_itv_set = 1
            innerScript(itv_arr)
            isset_channels()
        }else{
            load_channels()
        }
    }*/
    
    /*function set_bright(){
        _debug('set_bright()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        tmp_bri=read_bri()
        _debug('tmp_bri: '+tmp_bri)
        if(tmp_bri){
            stb.ExecAction('bright '+Dec2Hex(tmp_bri))
        }
    }*/
    
    function set_video_out_options(){
        _debug('set_video_out_options()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        try{
            stb.SetBrightness(stb.user['bright'])
            stb.SetContrast(stb.user['contrast'])
            stb.SetSaturation(stb.user['saturation'])
        }catch(e){
            _debug(e)
        }
        
    }
    
    /*function set_sat(sat){
        _debug('set_sat('+sat+')')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        tmp_sat=read_sat()
        if(tmp_sat){
            stb.ExecAction('saturation '+Dec2Hex(sat));
        }
    }
    
    function read_sat(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        pat2 = /[\n\w\S\s]*(SAT=)"(\S+)*"[\n\w\S\s]*/
        
        /*if(cfg){
            str = cfg
        }else{
            str = read_cfg()
        }
        
        if(sstr.replace(pat2, "$1") == 'SAT=' && str.replace(pat2, "$2") != ''){
            _debug("'"+str.replace(pat2, "$2")+"'")
            return str.replace(pat2, "$2")
        }
        else{
            return 128
        }
    }*/
        
    function read_bri(){
        _debug('read_bri()')
        str = stb.user['bright']

        if(str){
            return str
        }
        else{
            return 128
        }
    }
    
    function set_video_out(){
        _debug('set_video_out()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        video_out = read_video_out()
        _debug('video_out: '+video_out)
        stb.ExecAction('SetVideoOut '+video_out)
    }
    
    function read_video_out(){
        _debug('read_video_out()')
        str =  stb.user['video_out']
        
        if(str){
            return str
        }
        else{
            return 'rca'
        }
    }
    
    function change_aspect(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        aspect_array = [
            {alias: 'fit', mode: 0x10},
            {alias: 'big', mode: 0x40},
            {alias: 'opt', mode: 0x50},
            {alias: 'exp', mode: 0x00}
        ]
        aspect_idx++
        if (aspect_idx==aspect_array.length){
            aspect_idx = 0
        }
        _debug('SetAspect: '+aspect_array[aspect_idx].alias)
        try{
            stb.SetAspect(aspect_array[aspect_idx].mode)
        }catch(e){
            _debug(e)
        }
    }
    
    function slice_itv(page){
        
        _debug('slice_itv('+page+')')
        
        begin = (page-1)*4
        end = (page)*4
        _debug('slice begin: '+begin)
        _debug('slice end: '+end)
        _debug('slice: '+channels.slice(begin,end))
        return channels.slice(begin,end)
    }
    
    function getkeydown(e){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        var es = e.shiftKey
        
        _debug('getkeydown() keyCode:'+e.keyCode+'; which:'+e.which)
        _debug('es:'+es)
        
        
        switch (e.keyCode){
            
            case 9: // Channel+  Channel- Shift+Tab
            {
                //if (browser == 'firefox'){
                    win_focus()
                //}
                
                
                if (media_browser.on || recipe_info_page_on || main_city_info_on || other_city_info_on || recipes_by_cat_on || anec_page_on){
                    break
                }
                
                if (media_browser.hidden && !media_browser.is_audio){
                    if (es){ // Shift+Tab (-)
                        atrack_switch.shift(1);
                    }else{  // (+)
                        atrack_switch.shift(-1);
                    }
                    break
                }
                
                if ((vclub_by_name_on || vclub_by_genre_on || vclub_by_year_on || vclub_by_add_time_on || vclub_by_top_on || vclub_by_search_on || vclub_not_ended_on) && mode_one){
                    if (es){ // Shift+Tab (-)
                        atrack_switch.shift(1);
                    }else{  // (+)
                        atrack_switch.shift(-1);
                    }
                    break
                }
                
                _debug('keyCode 9')
                
                if (tv_by_number_on && mode_one == 0 && fav_itv_on){
                    if (es){ // Shift+Tab (-)
                        move_fav_ch(1)
                    }else{  // (+)
                        move_fav_ch(-1)
                    }
                    break
                }
                                
                if (!karaoke_by_singer_on && !karaoke_by_name_on && !video_club_info_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && radio_page_on == 0 && karaoke_page_on == 0 && video_out_setting_page_on == 0 && setting_page_on == 0 && club_on == 0 && parent_password_page_on == 0 && video_club_on == 0 && tv_page_on == 0 && web_bar_on == 0 && menu_on == 0 && tv_program_on == 0 && vclub_by_name_on == 0 && vclub_by_genre_on == 0 && vclub_by_year_on == 0 && video_records_by_addtime_on == 0 && my_video_records_on == 0){
                    
                    if (es){ // Shift+Tab
                        if (fav_itv_on){
                            if (f_ch_idx > 0){
                                f_ch_idx--
                            }else{
                                f_ch_idx = fav_channels.length-1
                            }
                            _debug('f_ch_idx : '+f_ch_idx)
                            pause=0
                            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                            chech_rec_ch(fav_channels[f_ch_idx].id)
                            play(''+fav_channels[f_ch_idx].cmd)
                        }else{
                            if (ch_idx > 0){
                                ch_idx--
                            }else{
                                ch_idx = channels.length-1
                            }
                            _debug('ch_idx : '+ch_idx)
                            pause=0
                            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                            chech_rec_ch(channels[ch_idx].id)
                            play(''+channels[ch_idx].cmd)
                        }
                        break
                    }
                    else{ // Tab
                        if (fav_itv_on){
                            if (f_ch_idx < (fav_channels.length-1)){
                                f_ch_idx++
                            }else{
                                f_ch_idx = 0
                            }
                            _debug('f_ch_idx: '+f_ch_idx)
                            pause=0
                            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                            chech_rec_ch(fav_channels[f_ch_idx].id)
                            play(''+fav_channels[f_ch_idx].cmd)
                        }else{
                            if (ch_idx < (channels.length-1)){
                                ch_idx++
                            }else{
                                ch_idx = 0
                            }
                            _debug('ch_idx: '+ch_idx)
                            pause=0
                            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                            chech_rec_ch(channels[ch_idx].id)
                            play(''+channels[ch_idx].cmd)
                        }
                        break 
                    }
                }
                break
            }
            
        }
    }
    
    function getkeypress(e) {
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        var code
        var chanNumber = 0
        var progId = 0

        _debug('getkeypress() keyCode:'+e.keyCode+'; which:'+e.which)
        if (cut_off_on == 1 && e.keyCode != 13 && !full_incoming_msg_on){
            _debug('cut_off_on')
            return
        }
        
        if (key_lock == 1 && e.keyCode != 13 && !full_incoming_msg_on){
            _debug('key locked')
            return 
        }
        
        /*if(power_off == 1 && e.which != 117){
            _log('power', 'on') 
            video_out = read_video_out()
            _debug('SetVideoOut '+video_out)
            stb.ExecAction('SetVideoOut '+video_out)
            power_off = 0
            
            if (last_ch_idx >= 0){
                pause=0
                show_black()
                stb.SetDefaultFlicker(0)
                if (fav_itv_on){
                    play(''+fav_channels[f_ch_idx].cmd)
                    show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                }else{
                    play(''+channels[ch_idx].cmd)
                    show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                }
            }
            last_ch_idx = -1
            return
        }*/
       
        ec = e.keyCode
        ew = e.which
        es = e.shiftKey
       
        _debug('event.altKey  : '+e.altKey)
        _debug('event.ctrlKey  : '+e.ctrlKey)

        switch (ec){

            case 0:
                break
            case 27: // Exit - Escape
            {
                exit_btn()

                break
            }
            case 13: // OK - Enter
            {
                
                continue_on_next_page = 0
                play_on_next_page = 0
                
                if(full_incoming_msg_on){
                    hide_full_incoming_message()
                    break
                }
                
                if (vclub_vote_on){
                    return
                }
                
                if (media_browser.on){
                    if (!player_on || media_browser.is_audio){
                        media_browser.action();
                    }
                    break;
                }
                
                if (media_browser.hidden && !media_browser.is_audio){
                    atrack_switch.shift(1);
                    break;
                }
                
                if ((vclub_by_name_on || vclub_by_genre_on || vclub_by_year_on || vclub_by_add_time_on || vclub_by_top_on || vclub_by_search_on || vclub_not_ended_on) && mode_one){
                    atrack_switch.shift(1);
                    break;
                }
                
                if ((tv_by_number_on || tv_by_channel_on || tv_by_theme_on) && mode_one){
                    atrack_switch.shift(1);
                    break;
                }
                
                /*if (media_browser.hidden && player_on){
                    atrack_switch.get_all_pids();
                    break;
                }
                
                if (vclub_by_name_on && mode_one == 1){
                    atrack_switch.get_all_pids();
                    break;
                }*/
                
                if (horoscope_page_on){
                    horoscope_menu_action()
                    break
                }
                
                if (course_page_on){
                    break
                }
                
                if (mastermind_rating_on || mastermind_rules_on || mastermind_control_on){
                    break
                }
                
                if (mastermind_game_on && mastermind_menu_on){
                    call_mastermind_menu_func()
                    break
                }
                
                if (mastermind_winner_alert_on){
                    init_mastermind_game()
                    break
                }
                
                if (mastermind_game_on){
                    check_mastermind_number()
                    break
                }
                
                if(show_incoming_msg_on){
                    show_full_incoming_message()
                    break
                }
                
                if (kbd_on && kbd_active){
                    kbd_add_char()
                    break
                }
                
                if (lang_menu_on == 1){
                    _debug('lang_l: '+lang_l)
                    _debug('pid: '+languages[lang_l-1].pid)
                    break
                }
                
                if (rec_notice_on == 1){
                    hide_rec_notice()
                    break
                }
                
                if(video_out_setting_page_on == 1){
                    save_video_out_setting()
                    break
                }
                
                if (widget_page_on){
                    widget_menu_action()
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if(recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        cur_row_recipes_by_cat = 0
                        prev_row_recipes_by_cat = 1
                        cur_recipes_by_cat_page = 1
                        load_recipes_by_cat(0)
                    }else{
                        if(recipe_con_menu_on){
                            call_recipe_con_menu_func()
                        }else{
                            show_recipe_con_menu()
                        }
                    }
                    break
                }
                
                if (anec_page_box_on && anec_page_box_on){
                    load_anec_page_by_box()
                    break
                }
                
                if (main_city_info_on){
                    break
                }
                
                if (other_city_info_on){
                    break
                }
                
                if(seek_bar_on){
                    break
                }
                
                if (web_bar_on){
                    open_browser()
                    break
                }
                if (password_input_on == 1){
                    check_password()
                    break
                }
                
                if (setting_page_on == 1){
                    call_setting_page_func()
                    break
                }
                
                if (parent_password_page_on == 1){
                    check_parent_password()
                    break
                }
                
                if (menu_on == 1){
                    build_2d_menu(eval(curr_menu)[cur_menu_row*3 + cur_menu_col], 0)
                    break
                }
                
                if (video_records_by_addtime_on){
                    start_play_video_records_by_addtime()
                    break
                }
                
                if (new_tv_list_on){
                    _debug('new_cur_ch_idx: '+new_cur_ch_idx)
                    _debug('ch: '+new_ch_list[new_cur_ch_idx-1].id+' '+new_ch_list[new_cur_ch_idx-1].name+' '+new_ch_list[new_cur_ch_idx-1].cmd)
                    show_playing(new_ch_list[new_cur_ch_idx-1].id + '. ' + new_ch_list[new_cur_ch_idx-1].name, search_idx_in_ch(new_ch_list[new_cur_ch_idx-1].id))
                    play('' + new_ch_list[new_cur_ch_idx-1].cmd)
                }
                
                if (genres_select_on == 1 && abc_video_search_on == 0){
                    cur_genre = cur_genres_select_row
                    hide_genres_select()
                    show_abc_video_search()
                    break
                }
                
                if (club_on == 1){
                    call_club_menu_func()
                    break
                }
                
                if (tv_program_on == 1){
                    
                    if (cur_day_bar == 1){
                        cur_tv_prog_page = 1
                        prev_row_tv_program = 1
                        cur_row_tv_program = 0
                        load_program_by_channel(0)
                    }else{
                        if (tv_program_con_menu == 0){
                            show_tv_program_con_menu()
                        }else if (tv_program_con_menu == 1){
                            call_con_menu_tv_program_func()
                        }
                    }
                    break
                }
                
                if (tv_by_number_on == 1 && tv_page_on == 1){
                    if (tv_by_number_con_menu == 0){
                        show_tv_by_number_con_menu()
                    }else if (tv_by_number_con_menu == 1){
                        call_con_menu_tv_by_number_func()
                    }
                    break
                }
                
                if (tv_by_channel_on == 1 && tv_page_on == 1){
                    if (tv_by_number_con_menu == 0){
                        show_tv_by_number_con_menu()
                    }else if (tv_by_number_con_menu == 1){
                        call_con_menu_tv_by_channel_func()
                    }
                    break
                }
                
                if (video_club_info_on == 1){
                    if (video_club_info_con_menu_on == 0){
                        show_video_club_info_con_menu()
                    }else if (video_club_info_con_menu_on == 1){
                        call_con_menu_vclub_info_func()
                    }
                    break
                }
                
                if (vclub_by_name_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0){
                        if (vclub_con_menu_on == 0 && max_vclub_by_name_rows > 0){
                            show_video_club_con_menu()
                        }else if (vclub_con_menu_on == 1){
                            call_con_menu_vclub_by_name_func()
                        }
                    }else{
                        cur_vclub_by_name_page = 1
                        cur_row_vclub_by_name = 0
                        prev_row_vclub_by_name = 1
                        load_vclub_by_name(0)
                    }
                    break
                }
                
                if (vclub_by_genre_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                        if (vclub_con_menu_on == 0 && max_vclub_by_genre_rows > 0){
                            show_video_club_con_menu()
                        }else if (vclub_con_menu_on == 1){
                            call_con_menu_vclub_by_genre_func()
                        }
                    }else{
                        cur_vclub_by_genre_page = 1
                        cur_row_vclub_by_genre = 0
                        prev_row_vclub_by_genre = 1
                        load_vclub_by_genre(0)
                    }
                    break
                }
                
                if (vclub_by_year_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                        if (vclub_con_menu_on == 0 && max_vclub_by_year_rows > 0){
                            show_video_club_con_menu()
                        }else if (vclub_con_menu_on == 1){
                            call_con_menu_vclub_by_year_func()
                        }
                    }else{
                        cur_vclub_by_year_page = 1
                        cur_row_vclub_by_year = 0
                        prev_row_vclub_by_year = 1
                        load_vclub_by_year(0)
                    }
                    break
                }
                
                if (vclub_by_add_time_on == 1 && video_club_on == 1){
                    if (cur_add_time_vclub_bar == 0){
                        if (vclub_con_menu_on == 0 && max_vclub_by_add_time_rows > 0){
                            show_video_club_con_menu()
                        }else if (vclub_con_menu_on == 1){
                            call_con_menu_vclub_by_add_time_func()
                        }
                    }else{
                        cur_vclub_by_add_time_page = 1
                        cur_row_vclub_by_add_time = 0
                        prev_row_vclub_by_add_time = 1
                        load_vclub_by_add_time(0)
                    }
                    break
                }
                
                if (vclub_by_top_on == 1 && video_club_on == 1){
                    if (vclub_con_menu_on == 0 && max_vclub_by_top_rows > 0){
                        show_video_club_con_menu()
                    }else if (vclub_con_menu_on == 1){
                        call_con_menu_vclub_by_top_func()
                    }
                    break
                }
                
                if (vclub_by_search_on == 1 && video_club_on == 1){
                    if (vclub_con_menu_on == 0 && max_vclub_by_search_rows > 0){
                        show_video_club_con_menu()
                    }else if (vclub_con_menu_on == 1){
                        call_con_menu_vclub_by_search_func()
                    }
                    break
                }
                
                if (vclub_not_ended_on == 1 && video_club_on == 1){
                    if (vclub_con_menu_on == 0 && max_vclub_not_ended_rows > 0){
                        show_video_club_con_menu()
                    }else if (vclub_con_menu_on == 1){
                        call_con_menu_vclub_not_ended_func()
                    }
                    break
                }
                
                if (video_clips_by_name_on == 1  && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0){
                        if (video_clips_con_menu_on == 0 && max_video_clips_by_name_rows > 0){
                            show_video_clips_con_menu()
                        }else if (video_clips_con_menu_on == 1){
                            call_con_menu_video_clips_by_name_func()
                        }
                    }else{
                        cur_video_clips_by_name_page = 1
                        cur_row_video_clips_by_name = 0
                        prev_row_video_clips_by_name = 1
                        load_video_clips_by_name(0)
                    }
                    break
                }
                
                if (video_clips_by_singer_on == 1  && video_clips_on == 1){
                    _debug('cur_abc_video_clips_bar: '+cur_abc_video_clips_bar)
                    _debug('cur_video_clips_singer_bar: '+cur_video_clips_singer_bar)
                    
                    if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 0){
                        if (video_clips_con_menu_on == 0 && max_video_clips_by_singer_rows > 0){
                            show_video_clips_con_menu()
                        }else if (video_clips_con_menu_on == 1){
                            call_con_menu_video_clips_by_singer_func()
                        }
                    }else if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 1){
                        cur_video_clips_by_singer_page = 1
                        cur_row_video_clips_by_singer = 0
                        prev_row_video_clips_by_singer = 1
                        load_video_clips_by_singer(0)
                    }else if(cur_abc_video_clips_bar == 1 && cur_video_clips_singer_bar == 0){
                        cur_video_clips_singer_bar_page = 1
                        cur_row_video_clips_singer_bar = 0
                        prev_row_video_clips_singer_bar = 1
                        del_video_clips_by_singer()
                        load_video_clips_singer_bar(0)
                    }
                    break
                }
                
                if (my_video_records_on == 1){
                    if (video_record_con_menu_on == 0 && max_my_video_records_rows > 0){
                        show_video_record_con_menu()
                    }else if (video_record_con_menu_on == 1){
                        call_con_menu_my_video_records_func()
                    }
                    break
                }
                
                if (karaoke_by_name_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                        if (karaoke_con_menu_on == 0 && max_karaoke_by_name_rows > 0){
                            show_karaoke_con_menu()
                        }else if (karaoke_con_menu_on == 1){
                            call_con_menu_karaoke_by_name_func()
                        }
                    }else{
                        cur_row_karaoke_by_name = 0
                        prev_row_karaoke_by_name = 1
                        load_karaoke_by_name(0)
                    }
                    break
                }
                
                if (karaoke_by_singer_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 0){
                        if (karaoke_con_menu_on == 0 && max_karaoke_by_singer_rows > 0){
                            show_karaoke_con_menu()
                        }else if (karaoke_con_menu_on == 1){
                            call_con_menu_karaoke_by_singer_func()
                        }
                    }else if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 1){
                        cur_karaoke_by_singer_page = 1
                        cur_row_karaoke_by_singer = 0
                        prev_row_karaoke_by_singer = 1
                        load_karaoke_by_singer(0)
                    }else if(cur_abc_karaoke_bar == 1 && cur_karaoke_singer_bar == 0){
                        cur_karaoke_singer_bar_page = 1
                        cur_row_karaoke_singer_bar = 0
                        prev_row_karaoke_singer_bar = 1
                        del_karaoke_by_singer()
                        load_karaoke_singer_bar(0)
                    }
                    break
                }
                
                if (audio_club_by_name_on == 1){
                    if (cur_abc_audio_club_bar == 0){
                        if (audio_club_con_menu_on == 0 && max_audio_club_by_name_rows > 0){
                            show_audio_club_con_menu()
                        }else if (audio_club_con_menu_on == 1){
                            call_con_menu_audio_club_by_name_func()
                        }
                    }else{
                        cur_audio_club_by_name_page = 1
                        cur_row_audio_club_by_name = 0
                        prev_row_audio_club_by_name = 1
                        load_audio_club_by_name(0)
                    }
                    break
                }
                
                if (audio_club_by_singer_on == 1){
                    if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 0){
                        if (audio_club_con_menu_on == 0 && max_audio_club_by_singer_rows > 0){
                            show_audio_club_con_menu()
                        }else if (audio_club_con_menu_on == 1){
                            call_con_menu_audio_club_by_singer_func()
                        }
                    }else if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 1){
                        cur_audio_club_by_singer_page = 1
                        cur_row_audio_club_by_singer = 0
                        prev_row_audio_club_by_singer = 1
                        load_audio_club_by_singer(0)
                    }else if(cur_abc_audio_club_bar == 1 && cur_audio_club_singer_bar == 0){
                        cur_audio_club_singer_bar_page = 1
                        cur_row_audio_club_singer_bar = 0
                        prev_row_audio_club_singer_bar = 1
                        del_audio_club_by_singer()
                        load_audio_club_singer_bar(0)
                    }
                    break
                }
                
                if (audio_club_playlist_on == 1){
                    if (audio_club_con_menu_on == 0 && max_audio_club_playlist_rows > 0){
                        show_audio_club_con_menu()
                    }else if (audio_club_con_menu_on == 1){
                        call_con_menu_audio_club_playlist_func()
                    }
                    break
                }
                
                if (radio_by_name_on == 1){
                    if (radio_con_menu_on == 0 && max_radio_by_name_rows > 0){
                        show_radio_con_menu()
                    }else if (radio_con_menu_on == 1){
                        call_con_menu_radio_by_name_func()
                    }
                    break
                }
                
                if (tv_by_theme_on == 1  && tv_page_on == 1){
                    if (cur_theme_bar == 0){
                        if (tv_by_number_con_menu == 0  && max_tv_by_theme_rows > 0){
                            show_tv_by_number_con_menu()
                        }else if (tv_by_number_con_menu == 1){
                            call_con_menu_tv_by_theme_func()
                        }
                    }else{
                        cur_row_tv_by_theme = 0
                        prev_row_tv_by_theme = 1
                        load_tv_by_theme(0)
                    }
                    break
                }

                if (tv_list_on == 1){
                    show_playing (array_list[listArray_startIdx+listTbl_index].index + '. ' + channels[listArray_startIdx + listTbl_index].name)
                    play('' + channels[listArray_startIdx + listTbl_index].cmd)
                }
                if (epg_on == 1){
                    if(!cur_bur_right){
                        c_id = chanArray_startIdx+chanTbl_index
                        _debug('c_id 1:'+c_id)
                        play(''+search_in_ch_cmd(array_chan[chanArray_startIdx+chanTbl_index].index))
                    }
                }
                if (ch_by_num_on == 1){
                    pause=0
                    ch_num_in = document.getElementById('ch_num_txt')
                    show_playing(ch_num_in.value + '. ' + search_in_ch(ch_num_in.value))
                    window.clearTimeout(t_hide_ch_id)
                    play('' + search_in_ch_cmd(ch_num_in.value))
                    hide_ch_num()
                }
                if(tv_list_on){
                	t_hide_channel_list()
                }
                _debug('abc_video_search_on: '+abc_video_search_on+'; menu_on: '+menu_on)
                
                if(abc_video_search_on == 1 && menu_on == 0){
                    if (cur_video_list_row == 0){
                        add_letter()
                    }else{
                        if(cur_video_list_row != 0){
                            show_playing(tmp_video_rows[cur_video_list_row-1].name)
                            play(video_dir+tmp_video_rows[cur_video_list_row-1].id+'.mpg')
                            hide_abc_video_search()
                            need_to_show_abc_video_search = 1
                        }
                    }
                }
                
                if (mode_one){
                    atrack_switch.shift(1);
                    break;
                }
                
                break
            }
/*     Menu navigation  */
            case 39: // Right
            {
                if (kbd_on && kbd_active){
                    kbd_horizontal_move(1)
                    break
                }
                
                if (media_browser.on){
                    if(!player_on || media_browser.is_audio){
                        media_browser.action(1)
                    }
                    break;
                }
                
                if (vclub_vote_on){
                    return
                }
                
                if (course_page_on){
                    break
                }
                
                if (horoscope_page_on){
                    horoscope_menu_horizontal_move(1)
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    shift_mastermind_arrow(1)
                    break
                }
                
                if(video_out_setting_page_on){
                    //change_bright(1)
                    video_out_shift_active_button(1)
                    break
                }
                
                if (password_input_on == 1){
                    break
                }
                
                if (widget_page_on){
                    widget_menu_horizontal_move(1)
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if(recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        cur_recipes_cat_bar = 0
                        set_active_recipes_by_cat_row()
                        set_passive_all_recipes_cat_bar_row()
                    }
                    break
                }
                
                if (anec_blog_on){
                    shift_anec(1)
                    break
                }
                
                if (vclub_con_menu_on == 1 && !vclub_not_ended_on){
                    shift_series_video_club_con_menu(1)
                    break
                }
                if (video_club_info_con_menu_on == 1){
                    shift_series_video_club_info_con_menu(1)
                    break
                }
                if (parent_password_page_on == 1){
                    break
                }
                if (tv_program_on == 1 && tv_program_con_menu == 1){
                    break
                }
                
                if (menu_on == 1){
                    shift_2d_menu(0, 1)
                    start_slide()
                }
                
                if (abc_video_search_on == 1){
                    disable_active_video_row()
                    rotate_abc('right')
                }
                
                if (tv_program_on == 1){
                    if (cur_day_bar == 1){
                        cur_day_bar = 0
                        set_active_tv_program_row()
                        set_passive_all_tv_day_row()
                    }
                    break
                }
                
                if (tv_by_theme_on == 1){
                    if (cur_theme_bar == 1){
                        cur_theme_bar = 0
                        set_active_tv_by_theme_row()
                        set_passive_all_tv_theme_row()
                    }
                    break
                }
                
                if (vclub_by_name_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 1){
                        cur_abc_vclub_bar = 0
                        set_active_vclub_by_name_row()
                        set_passive_all_vclub_abc_row()
                    }
                    break
                }
                
                if (vclub_by_genre_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 1){
                        cur_abc_vclub_bar = 1
                        cur_genre_vclub_bar = 0
                        set_active_vclub_abc_row()
                        set_passive_all_vclub_genre_bar_row()
                    }else if (cur_abc_vclub_bar == 1 && cur_genre_vclub_bar == 0){
                        cur_abc_vclub_bar = 0
                        cur_genre_vclub_bar = 0
                        set_active_vclub_by_genre_row()
                        set_passive_all_vclub_abc_row()
                    }
                    break
                }
                
                if (vclub_by_year_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 1){
                        cur_abc_vclub_bar = 1
                        cur_year_vclub_bar = 0
                        set_active_vclub_abc_row()
                        set_passive_all_vclub_year_bar_row()
                    }else if (cur_abc_vclub_bar == 1 && cur_year_vclub_bar == 0){
                        cur_abc_vclub_bar = 0
                        cur_year_vclub_bar = 0
                        set_active_vclub_by_year_row()
                        set_passive_all_vclub_abc_row()
                    }
                    break
                }
                
                if (vclub_by_add_time_on == 1 && video_club_on == 1){
                    if (cur_add_time_vclub_bar == 1){
                        cur_add_time_vclub_bar = 0
                        set_active_vclub_by_add_time_row()
                        set_passive_all_vclub_add_time_row()
                    }
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 1){
                        cur_abc_video_clips_bar = 0
                        set_active_video_clips_by_name_row()
                        set_passive_all_video_clips_abc_row()
                    }
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 1){
                        cur_video_clips_singer_bar = 0
                        set_active_video_clips_by_singer_row()
                        set_passive_all_video_clips_singer_bar_row()
                    }else if (cur_abc_video_clips_bar == 1 && cur_video_clips_singer_bar == 0){
                        cur_video_clips_singer_bar = 1
                        cur_abc_video_clips_bar = 0
                        set_active_video_clips_singer_bar_row()
                        set_passive_all_video_clips_abc_row()
                    }
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_page_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 1){
                        //cur_abc_karaoke_bar = 1
                        //cur_genre_karaoke_bar = 0
                        //set_active_karaoke_abc_row()
                        //set_passive_all_karaoke_genre_bar_row()
                    }else if (cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                        cur_abc_karaoke_bar = 0
                        cur_genre_karaoke_bar = 0
                        set_active_karaoke_by_name_row()
                        set_passive_all_karaoke_abc_row()
                    }
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_page_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 1){
                        cur_karaoke_singer_bar = 0
                        set_active_karaoke_by_singer_row()
                        set_passive_all_karaoke_singer_bar_row()
                    }else if (cur_abc_karaoke_bar == 1 && cur_karaoke_singer_bar == 0){
                        cur_karaoke_singer_bar = 1
                        cur_abc_karaoke_bar = 0
                        set_active_karaoke_singer_bar_row()
                        set_passive_all_karaoke_abc_row()
                    }
                    break
                }
                
                if (audio_club_con_menu_on == 1){
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_page_on == 1){
                    if (cur_abc_audio_club_bar == 1){
                        cur_abc_audio_club_bar = 0
                        set_active_audio_club_by_name_row()
                        set_passive_all_audio_club_abc_row()
                    }
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_page_on == 1){
                    if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 1){
                        cur_audio_club_singer_bar = 0
                        set_active_audio_club_by_singer_row()
                        set_passive_all_audio_club_singer_bar_row()
                    }else if (cur_abc_audio_club_bar == 1 && cur_audio_club_singer_bar == 0){
                        cur_audio_club_singer_bar = 1
                        cur_abc_audio_club_bar = 0
                        set_active_audio_club_singer_bar_row()
                        set_passive_all_audio_club_abc_row()
                    }
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_page_on == 1){
                    break
                }
                
                if (radio_by_name_on == 1){
                    break
                }
                
                if (new_tv_list_on == 0 && epg_on == 0 && menu_on == 0 && abc_video_search_on == 0){
                    hide_mute()
                
                    if(volume < 100){
                       volume+=5
                       document.getElementById("vol_"+volume).bgColor = "blue"
                    }
                    try{
                        stb.SetVolume(volume)
                    }catch(err){
                        _debug(err)
                    }
                    osd_volume(volume)
                    break
                    
                }
                
                if (new_tv_list_on){
                    if(new_cur_ch_idx < cur_page_items){
                        normlight_ch(new_cur_ch_idx)
                        new_cur_ch_idx++
                        hightlight_ch(new_cur_ch_idx)
                    }
                    else{
                        if (cur_page<total_pages){
                            normlight_ch(new_cur_ch_idx)
                            new_cur_ch_idx = 1
                            cur_page++
                            doLoad('itv',cur_page)
                            hightlight_ch(new_cur_ch_idx)
                        }
                    }
                    t_hide_new_ch_list()
                }
                
                if (tv_list_on == 0 && epg_on == 0 && ch_by_num_on == 0){
                    if (m < menu.length-1){
                        m++
                    }
                    else if(m == menu.length-1){
                        m = 0
                    }
                }
                if (epg_on){
                    cur_epg_ch = chanArray_startIdx + chanTbl_index
                    if (!cur_bur_right && array_prog.length){
                        cur_bur_right = 1
                        menuTbl_SetPassive('chan')
                        to_show_epg_info(array_prog[progArray_startIdx+progTbl_index].index)
                        menuTbl_SetFocus('prog')
                    }
                }              
                break
            }
            case 37: // Left
            {
                if (kbd_on && kbd_active){
                    kbd_horizontal_move(-1)
                    break
                }
                
                if (media_browser.on){
                    if(!player_on || media_browser.is_audio){
                        media_browser.out_dir()
                    }
                    break;
                }
                
                if (vclub_vote_on){
                    return
                }
                
                if (course_page_on){
                    break
                }
                
                if (horoscope_page_on){
                    horoscope_menu_horizontal_move(-1)
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    shift_mastermind_arrow(-1)
                    break
                }
                
                if(video_out_setting_page_on){
                    //change_bright(-1)
                    video_out_shift_active_button(-1)
                    break
                }
                
                if (password_input_on == 1){
                    break
                }
                
                if (widget_page_on){
                    widget_menu_horizontal_move(-1)
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if(recipes_by_cat_on){
                    if (!cur_recipes_cat_bar){
                        cur_recipes_cat_bar = 1
                        set_active_recipes_cat_bar_row()
                        set_passive_all_recipes_by_cat_row()
                    }
                    break
                }

                if (anec_blog_on){
                    shift_anec(-1)
                    break
                }
                
                if (vclub_con_menu_on == 1 && !vclub_not_ended_on){
                    shift_series_video_club_con_menu(-1)
                    break
                }
                if (video_club_info_con_menu_on == 1){
                    shift_series_video_club_info_con_menu(-1)
                    break
                }
                if (parent_password_page_on == 1){
                    break
                }
                if (tv_program_on == 1 && tv_program_con_menu == 1){
                    break
                }
                
                if (menu_on == 1){
                    shift_2d_menu(0, -1)
                    start_slide()
                }
                
                if (abc_video_search_on == 1){
                    disable_active_video_row()
                    rotate_abc('left')
                }
                
                if (tv_program_on == 1){
                    if (cur_day_bar == 0){
                        cur_day_bar = 1
                        set_active_tv_day_row()
                        set_passive_all_tv_program_row()
                    }
                    break
                }
                
                if (tv_by_theme_on == 1){
                    if (cur_theme_bar == 0){
                        cur_theme_bar = 1
                        set_active_tv_theme_row()
                        set_passive_all_tv_by_theme_row()
                    }
                    break
                }
                
                if (vclub_by_name_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0){
                        cur_abc_vclub_bar = 1
                        set_active_vclub_abc_row()
                        set_passive_all_vclub_by_name_row()
                    }
                    break
                }
                
                if (vclub_by_genre_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                        cur_abc_vclub_bar = 1
                        set_active_vclub_abc_row()
                        set_passive_all_vclub_by_genre_row()
                    }else if (cur_abc_vclub_bar == 1 && cur_genre_vclub_bar == 0){
                        cur_abc_vclub_bar = 0
                        cur_genre_vclub_bar = 1
                        set_active_vclub_genre_bar_row()
                        set_passive_all_vclub_abc_row()
                    }
                    break
                }
                
                if (vclub_by_year_on == 1 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                        cur_abc_vclub_bar = 1
                        set_active_vclub_abc_row()
                        set_passive_all_vclub_by_year_row()
                    }else if (cur_abc_vclub_bar == 1 && cur_year_vclub_bar == 0){
                        cur_abc_vclub_bar = 0
                        cur_year_vclub_bar = 1
                        set_active_vclub_year_bar_row()
                        set_passive_all_vclub_abc_row()
                    }
                    break
                }
                
                if (vclub_by_add_time_on == 1 && video_club_on == 1){
                    if (cur_add_time_vclub_bar == 0){
                        cur_add_time_vclub_bar = 1
                        set_active_vclub_add_time_row()
                        set_passive_all_vclub_by_add_time_row()
                    }
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0){
                        cur_abc_video_clips_bar = 1
                        set_active_video_clips_abc_row()
                        set_passive_all_video_clips_by_name_row()
                    }
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 0){
                        
                        cur_video_clips_singer_bar = 1
                        set_active_video_clips_singer_bar_row()
                        set_passive_all_video_clips_by_singer_row()
                        
                    }else if(cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 1){
                        cur_abc_video_clips_bar = 1
                        cur_video_clips_singer_bar = 0
                        set_active_video_clips_abc_row()
                        set_passive_all_video_clips_singer_bar_row()
                    }
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_page_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                        cur_abc_karaoke_bar = 1
                        set_active_karaoke_abc_row()
                        set_passive_all_karaoke_by_name_row()
                    }else if (cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                        //cur_abc_karaoke_bar = 0
                        //cur_genre_karaoke_bar = 1
                        //set_active_karaoke_genre_bar_row()
                        //set_passive_all_karaoke_abc_row()
                    }
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_page_on == 1){
                    if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 0){
                        
                        cur_karaoke_singer_bar = 1
                        set_active_karaoke_singer_bar_row()
                        set_passive_all_karaoke_by_singer_row()
                        
                    }else if(cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 1){
                        cur_abc_karaoke_bar = 1
                        cur_karaoke_singer_bar = 0
                        set_active_karaoke_abc_row()
                        set_passive_all_karaoke_singer_bar_row()
                    }
                    break
                }
                
                if (audio_club_con_menu_on == 1){
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_page_on == 1){
                    if (cur_abc_audio_club_bar == 0){
                        cur_abc_audio_club_bar = 1
                        set_active_audio_club_abc_row()
                        set_passive_all_audio_club_by_name_row()
                    }
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_page_on == 1){
                    if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 0){
                        cur_audio_club_singer_bar = 1
                        set_active_audio_club_singer_bar_row()
                        set_passive_all_audio_club_by_singer_row()
                        
                    }else if(cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 1){
                        cur_abc_audio_club_bar = 1
                        cur_audio_club_singer_bar = 0
                        set_active_audio_club_abc_row()
                        set_passive_all_audio_club_singer_bar_row()
                    }
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_page_on == 1){
                    break
                }
                
                if (radio_by_name_on == 1){
                    break
                }
                
                if (new_tv_list_on == 0 && epg_on == 0 && menu_on == 0 && abc_video_search_on == 0){
                    hide_mute()
                
                    if(volume > 0) {
                       document.getElementById("vol_"+volume).bgColor = ""
                       volume -= 5
                    }
                    try{
                        stb.SetVolume(volume)
                    }catch(err){
                        _debug(err)
                    }
                    osd_volume(volume)
                    break
                }
                
                
                if (new_tv_list_on){
                    if(new_cur_ch_idx > 1){
                        normlight_ch(new_cur_ch_idx)
                        new_cur_ch_idx--
                        hightlight_ch(new_cur_ch_idx)
                    }
                    else{
                        if(cur_page>1){
                            normlight_ch(new_cur_ch_idx)
                            new_cur_ch_idx = 4
                            cur_page--
                            doLoad('itv',cur_page)
                            hightlight_ch(new_cur_ch_idx)
                        }
                    }
                    t_hide_new_ch_list()
                }
                if (tv_list_on == 0 && epg_on == 0 && ch_by_num_on == 0){
                    if (m > 0){
                        m--
                    }
                    else if(m == 0){
                        m = menu.length-1
                    }
                }

                if (epg_on){
                    cur_epg_prog = 0
                    if (cur_bur_right){
                        document.getElementById('epg_info').innerHTML = ''
                        menuTbl_SetPassive('prog')
                        window.clearTimeout(tsi_id)
                        menuTbl_SetFocus('chan')
                    }
                    cur_bur_right = 0
                    document.getElementById('epg_prog').blur()
                }
                break
            }
            case 38: // Up
            {
                if (kbd_on && kbd_active){
                    kbd_vertical_move(-1)
                    break
                }
                
                if (video_out_setting_page_on){
                    video_out_shift_active_bar(-1)
                    break
                }
                
                if (vclub_vote_on){
                    break
                }
                
                if (course_page_on){
                    break
                }
                
                if (media_browser.on){
                    if (!player_on || media_browser.is_audio){
                        media_browser.shift_row(-1);
                    }
                    break;
                }
                
                if (media_browser.hidden){
                    break;
                }
                
                if (anec_blog_on){
                    shift_anec_blog_body(-1, 20)
                }
                
                if (horoscope_page_on){
                    shift_common_horoscope(-1)
                    break
                }
                
                if (mastermind_game_on && mastermind_menu_on){
                    shift_mastermind_menu(-1)
                    break
                }
                
                if (mastermind_game_on){
                    break
                }
                
                if (password_input_on == 1){
                    break
                }
                if (lang_menu_on == 1){
                    if (lang_l > 1) lang_l--
                    set_lang_focus(lang_l)
                    break
                }
                
                if (setting_page_on == 1){
                    shift_setting_page_menu(-1)
                    break
                }
                
                if (parent_password_page_on == 1){
                    shift_parent_password_items(-1)
                    break
                }
                
                if (widget_page_on){
                    widget_menu_vertical_move(-1)
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if(recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        shift_recipes_cat_bar(-1)
                    }else{
                        if (recipe_con_menu_on){
                            shift_recipe_con_menu(-1)
                        }else{
                            shift_recipes_by_cat(-1)
                        }
                    }
                    break
                }
                
                if (main_city_info_on){
                    shift_main_city_info(-1)
                    break
                }
                
                if (other_city_info_on){
                    shift_other_city_info(-1)
                    break
                }
                
                if (help_city_info_on){
                    shift_help_city_info(-1)
                    break
                }
                
                if (anec_page_on){
                    break
                }
                
                if (weather_page_on){
                    break
                }
                
                if (tv_list_on == 0 && epg_on == 0 && menu_on == 0 && abc_video_search_on == 0){
                    if(l > 1) l--
                }
                
                if(menu_on == 1){
                    shift_2d_menu(-1, 0)
                    start_slide()
                }
                
                if (club_on == 1){
                    shift_club(-1)
                    break
                }
                
                if(abc_video_search_on == 1){
                    shift_video_list(-1)
                }
                
                if (tv_program_on == 1 && tv_program_con_menu == 0){
                    if (cur_day_bar == 0){
                        shift_tv_program(-1)
                    }else{
                        shift_tv_day(-1)
                    }
                    break
                }
                if (tv_program_on == 1 && tv_program_con_menu == 1){
                    shift_tv_program_con_menu(-1)
                    break
                }
                
                if(genres_select_on == 1 && abc_video_search_on == 0){
                    shift_genres_select(-1)
                }
                //
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_number(-1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_channel(-1)
                    break
                }
                
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 1){
                    shift_video_club_info_con_menu(-1)
                    break
                }
                
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 0){
                    shift_video_club_info(-1, 20)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(-1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(-1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(-1)
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(-1)
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 1){
                    shift_video_clips_con_menu(-1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_con_menu_on == 1){
                    shift_video_clips_con_menu(-1)
                    break
                }
                
                if (my_video_records_on == 1 && video_record_con_menu_on == 1){
                    shift_video_record_con_menu(-1)
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 1){
                    shift_karaoke_con_menu(-1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_con_menu_on == 1){
                    shift_karaoke_con_menu(-1)
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(-1)
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(-1)
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(-1)
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 1){
                    shift_radio_con_menu(-1)
                    break
                }
                
                if (video_records_on == 1 && video_records_by_addtime_on == 1){
                    shift_video_records_by_addtime(-1)
                    break
                }
                
                if (video_records_on == 1 && my_video_records_on == 1){
                    shift_my_video_records(-1)
                    break
                }
                
                if (video_records_on == 0 && video_records_by_addtime_on == 1){
                    break
                }
                
                //
                if (tv_program_on == 1 && tv_program_con_menu == 0){
                    if (cur_day_bar == 0){
                        shift_tv_program(-1)
                    }else{
                        shift_tv_day(-1)
                    }
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 0){
                    if (cur_theme_bar == 0){
                        shift_tv_by_theme(-1)
                    }else{
                        shift_tv_theme(-1)
                    }
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0){
                        shift_vclub_by_name(-1)
                    }else{
                        shift_vclub_abc(-1)
                    }
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                        shift_vclub_by_genre(-1)
                    }else if(cur_abc_vclub_bar == 1 && cur_genre_vclub_bar == 0){
                        shift_vclub_abc(-1)
                    }else if(cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 1){
                        shift_vclub_genre_bar(-1)
                    }
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                        shift_vclub_by_year(-1)
                    }else if(cur_abc_vclub_bar == 1 && cur_year_vclub_bar == 0){
                        shift_vclub_abc(-1)
                    }else if(cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 1){
                        shift_vclub_year_bar(-1)
                    }
                    break
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_add_time_vclub_bar == 0){
                        shift_vclub_by_add_time(-1)
                    }else{
                        shift_vclub_add_time(-1)
                    }
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_by_top(-1)
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_by_search(-1)
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_not_ended(-1)
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 0 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0){
                        shift_video_clips_by_name(-1)
                    }else{
                        shift_video_clips_abc(-1)
                    }
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_con_menu_on == 0 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 0){
                        shift_video_clips_by_singer(-1)
                    }else if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 1){
                        shift_video_clips_singer_bar(-1)
                    }else if(cur_abc_video_clips_bar == 1 && cur_video_clips_singer_bar == 0){
                        shift_video_clips_abc(-1)
                    }
                    break
                }

                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0){
                    if (cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                        shift_karaoke_by_name(-1)
                    }else if(cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                        shift_karaoke_abc(-1)
                    }else if(cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 1){
                        shift_karaoke_genre_bar(-1)
                    }
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_con_menu_on == 0){
                    if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 0){
                        shift_karaoke_by_singer(-1)
                    }else if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 1){
                        shift_karaoke_singer_bar(-1)
                    }else if(cur_abc_karaoke_bar == 1 && cur_karaoke_singer_bar == 0){
                        shift_karaoke_abc(-1)
                    }
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 0){
                    if (cur_abc_audio_club_bar == 0){
                        shift_audio_club_by_name(-1)
                    }else if(cur_abc_audio_club_bar == 1){
                        shift_audio_club_abc(-1)
                    }
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 0){
                    if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 0){
                        shift_audio_club_by_singer(-1)
                    }else if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 1){
                        shift_audio_club_singer_bar(-1)
                    }else if(cur_abc_audio_club_bar == 1 && cur_audio_club_singer_bar == 0){
                        shift_audio_club_abc(-1)
                    }
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 0){
                    shift_audio_club_playlist(-1)
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 0){
                    shift_radio_by_name(-1)
                    break
                }
                
                if(video_club_info_on == 1){
                    break
                }
                
                if(web_bar_on == 0 && menu_on == 0 && tv_program_on == 0 && vclub_by_name_on == 0 && vclub_by_genre_on == 0 && vclub_by_year_on == 0){
                    if (fav_itv_on){
                        if (f_ch_idx < (fav_channels.length-1)){
                            f_ch_idx++
                        }else{
                            f_ch_idx = 0
                        }
                        _debug('f_ch_idx: '+f_ch_idx)
                        pause=0
                        cur_playing_str = fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name + '<br>' + fav_channels[f_ch_idx].desc
                        chech_rec_ch(fav_channels[f_ch_idx].id)
                        play_not_to(''+fav_channels[f_ch_idx].cmd)
                    }else{
                        if (ch_idx < (channels.length-1)){
                            ch_idx++
                        }else{
                            ch_idx = 0
                        }
                        _debug('ch_idx: '+ch_idx)
                        pause=0
                        cur_playing_str = channels[ch_idx].number + '. ' + channels[ch_idx].name + '<br>' + channels[ch_idx].desc
                        chech_rec_ch(channels[ch_idx].id)
                        play_not_to(''+channels[ch_idx].cmd)
                    }
                    break
                }
                
                if (tv_list_on == 1 && epg_on == 0){
                    if (listTbl_index > 0) {
                       menuTbl_LoseFocus('list')
                       listTbl_index--
                       menuTbl_SetFocus('list')
                    }
                    else{
                       if (listArray_startIdx > 0) {
                          listArray_startIdx--
                          menuTbl_fill('list')
                       }
                    }
                    listId = listArray_startIdx + listTbl_index
                    slider('list')
                }
                if (epg_on && cur_bur_right==0){
                    if(chanTbl_index>0){
                       menuTbl_LoseFocus('chan')
                       chanTbl_index--
                       menuTbl_SetFocus('chan')
                    }
                    else{
                       if(chanArray_startIdx>0){
                          chanArray_startIdx--
                          menuTbl_fill('chan')
                       }
                    }
                    chanNumber = chanArray_startIdx + chanTbl_index
                    to_load_program(array_chan[chanNumber].index)
                    slider('chan')
                }

                if (epg_on && cur_bur_right==1){
                    if (progTbl_index > 0) {
                       menuTbl_LoseFocus('prog')
                       progTbl_index--
                       menuTbl_SetFocus('prog')
                    }
                    else{
                       if(progArray_startIdx > 0){
                          progArray_startIdx--
                          menuTbl_fill('prog')
                       }
                    }
                    progId = progArray_startIdx + progTbl_index
                    to_show_epg_info(array_prog[progArray_startIdx+progTbl_index].index)
                    slider('prog')
                    Out('curr = '+progId)
                }
                if(tv_list_on){
                	t_hide_channel_list()
                }
                break
            }
            case 40: // Down
            {
                if (kbd_on && kbd_active){
                    kbd_vertical_move(1)
                    break
                }
                
                if (video_out_setting_page_on){
                    video_out_shift_active_bar(1)
                    break
                }
                
                if (vclub_vote_on){
                    return
                }
                
                if (course_page_on){
                    break
                }
                
                if (media_browser.on){
                    if (!player_on || media_browser.is_audio){
                        media_browser.shift_row(1);
                    }
                    break;
                }
                
                if (media_browser.hidden){
                    break;
                }
                
                if (anec_blog_on){
                    shift_anec_blog_body(1, 20)
                }
                
                if (horoscope_page_on){
                    shift_common_horoscope(1)
                    break
                }
                
                if (mastermind_game_on && mastermind_menu_on){
                    shift_mastermind_menu(1)
                    break
                }
                
                if (mastermind_game_on){
                    break
                }
                
                if (password_input_on == 1){
                    break
                }
                if (lang_menu_on == 1){
                    if (lang_l < max_lang_l) lang_l++
                    set_lang_focus(lang_l)
                    break
                }
                
                if (setting_page_on == 1){
                    shift_setting_page_menu(1)
                    break
                }
                
                if (parent_password_page_on == 1){
                    shift_parent_password_items(1)
                    break
                }
                
                if (widget_page_on){
                    widget_menu_vertical_move(1)
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if(recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        shift_recipes_cat_bar(1)
                    }else{
                        if (recipe_con_menu_on){
                            shift_recipe_con_menu(1)
                        }else{
                            shift_recipes_by_cat(1)
                        }
                    }
                    break
                }

                if (main_city_info_on){
                    shift_main_city_info(1)
                    break
                }
                
                if (other_city_info_on){
                    shift_other_city_info(1)
                    break
                }
                
                if (help_city_info_on){
                    shift_help_city_info(1)
                    break
                }
                
                if (anec_page_on){
                    break
                }
                
                if (weather_page_on){
                    break
                }
                
                if (tv_list_on == 0 && epg_on == 0 && menu_on ==0 && abc_video_search_on == 0){
                    if(l != (cur_page_items)) l ++
                }

                if(menu_on == 1){
                    shift_2d_menu(1, 0)
                    start_slide()
                }
                
                if (club_on == 1){
                    shift_club(1)
                    break
                }
                
                if(abc_video_search_on == 1){
                    shift_video_list(1)
                }
                if (tv_program_on == 1 && tv_program_con_menu == 0){
                    if (cur_day_bar == 0){
                        shift_tv_program(1)
                    }else{
                        shift_tv_day(1)
                    }
                    break
                }
                if (tv_program_on == 1 && tv_program_con_menu == 1){
                    shift_tv_program_con_menu(1)
                    break
                }
                
                if(genres_select_on == 1 && abc_video_search_on == 0){
                    shift_genres_select(1)
                }
                
                //
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_number(1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_channel(1)
                    break
                }
                
                //
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 1){
                    shift_video_club_info_con_menu(1)
                    break
                }
                
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 0){
                    shift_video_club_info(1, 20)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 1){
                    shift_tv_by_number_con_menu(1)
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 1 && video_club_info_on == 0){
                    shift_video_club_con_menu(1)
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 1){
                    shift_video_clips_con_menu(1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_con_menu_on == 1){
                    shift_video_clips_con_menu(1)
                    break
                }
                
                if (my_video_records_on == 1 && video_record_con_menu_on == 1){
                    shift_video_record_con_menu(1)
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 1){
                    shift_karaoke_con_menu(1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_con_menu_on == 1){
                    shift_karaoke_con_menu(1)
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(1)
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(1)
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 1){
                    shift_audio_club_con_menu(1)
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 1){
                    shift_radio_con_menu(1)
                    break
                }
                
                if (video_records_on == 1 && video_records_by_addtime_on == 1){
                    shift_video_records_by_addtime(1)
                    break
                }
                
                if (video_records_on == 1 && my_video_records_on == 1){
                    shift_my_video_records(1)
                    break
                }
                
                if (video_records_on == 0 && video_records_by_addtime_on == 1){
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 0){
                    if (cur_theme_bar == 0){
                        shift_tv_by_theme(1)
                    }else{
                        shift_tv_theme(1)
                    }
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0){
                        shift_vclub_by_name(1)
                    }else{
                        shift_vclub_abc(1)
                    }
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                        shift_vclub_by_genre(1)
                    }else if(cur_abc_vclub_bar == 1 && cur_genre_vclub_bar == 0){
                        shift_vclub_abc(1)
                    }else if(cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 1){
                        shift_vclub_genre_bar(1)
                    }
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                        shift_vclub_by_year(1)
                    }else if(cur_abc_vclub_bar == 1 && cur_year_vclub_bar == 0){
                        shift_vclub_abc(1)
                    }else if(cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 1){
                        shift_vclub_year_bar(1)
                    }
                    break
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    if (cur_add_time_vclub_bar == 0){
                        shift_vclub_by_add_time(1)
                    }else{
                        shift_vclub_add_time(1)
                    }
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_by_top(1)
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_by_search(1)
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && video_club_on == 1){
                    shift_vclub_not_ended(1)
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 0 && video_clips_on == 1){
                    if (cur_abc_video_clips_bar == 0){
                        shift_video_clips_by_name(1)
                    }else{
                        shift_video_clips_abc(1)
                    }
                    break
                }
                
                if (video_clips_by_singer_on == 1 && video_clips_con_menu_on == 0){
                    if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 0){
                        shift_video_clips_by_singer(1)
                    }else if (cur_abc_video_clips_bar == 0 && cur_video_clips_singer_bar == 1){
                        shift_video_clips_singer_bar(1)
                    }else if(cur_abc_video_clips_bar == 1 && cur_video_clips_singer_bar == 0){
                        shift_video_clips_abc(1)
                    }
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0){
                    if (cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                        shift_karaoke_by_name(1)
                    }else if(cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                        shift_karaoke_abc(1)
                    }else if(cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 1){
                        shift_karaoke_genre_bar(1)
                    }
                    break
                }
                
                if (karaoke_by_singer_on == 1 && karaoke_con_menu_on == 0){
                    if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 0){
                        shift_karaoke_by_singer(1)
                    }else if (cur_abc_karaoke_bar == 0 && cur_karaoke_singer_bar == 1){
                        shift_karaoke_singer_bar(1)
                    }else if(cur_abc_karaoke_bar == 1 && cur_karaoke_singer_bar == 0){
                        shift_karaoke_abc(1)
                    }
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 0){
                    if (cur_abc_audio_club_bar == 0){
                        shift_audio_club_by_name(1)
                    }else if(cur_abc_audio_club_bar == 1){
                        shift_audio_club_abc(1)
                    }
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 0){
                    if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 0){
                        shift_audio_club_by_singer(1)
                    }else if (cur_abc_audio_club_bar == 0 && cur_audio_club_singer_bar == 1){
                        shift_audio_club_singer_bar(1)
                    }else if(cur_abc_audio_club_bar == 1 && cur_audio_club_singer_bar == 0){
                        shift_audio_club_abc(1)
                    }
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 0){
                    shift_audio_club_playlist(1)
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 0){
                    shift_radio_by_name(1)
                    break
                }
                
                if(video_club_info_on == 1){
                    break
                }
                
                if(web_bar_on == 0 && menu_on ==0 && tv_program_on == 0 && vclub_by_name_on == 0 && vclub_by_genre_on == 0 && vclub_by_year_on == 0){
                    if (fav_itv_on){
                        if (f_ch_idx > 0){
                            f_ch_idx--
                        }else{
                            f_ch_idx = fav_channels.length-1
                        }
                        _debug('f_ch_idx : '+f_ch_idx)
                        pause=0
                        cur_playing_str = fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name + '<br>' + fav_channels[f_ch_idx].desc
                        chech_rec_ch(fav_channels[f_ch_idx].id)
                        play_not_to(''+fav_channels[f_ch_idx].cmd)
                    }else{
                        if (ch_idx > 0){
                            ch_idx--
                        }else{
                            ch_idx = channels.length-1
                        }
                        _debug('ch_idx : '+ch_idx)
                        pause=0
                        cur_playing_str = channels[ch_idx].number + '. ' + channels[ch_idx].name + '<br>' + channels[ch_idx].desc
                        chech_rec_ch(channels[ch_idx].id)
                        play_not_to(''+channels[ch_idx].cmd)
                    }
                    break
                }

                if (tv_list_on == 1 && epg_on == 0){              // no F10
                    if(listTbl_index < listTbl_Size-1){
                       menuTbl_LoseFocus('list')
                       listTbl_index++
                       menuTbl_SetFocus('list')
                    }
                    else{
                       if(listArray_startIdx < channels.length-listTbl_Size){
                          listArray_startIdx++
                          menuTbl_fill('list')
                       }
                    }
                    listId = listArray_startIdx + listTbl_index
                    slider('list')
                }

                if (epg_on && cur_bur_right==0){
                    if(chanTbl_index<chanTbl_Size-1){
                       menuTbl_LoseFocus('chan')
                       chanTbl_index++
                       menuTbl_SetFocus('chan')
                    }
                    else{
                       if(chanArray_startIdx<channels.length-chanTbl_Size){
                          chanArray_startIdx++
                          menuTbl_fill('chan')
                       }
                    }
                    chanNumber = chanArray_startIdx + chanTbl_index
                    to_load_program(array_chan[chanNumber].index)
                    slider('chan')
                }
                if (epg_on && cur_bur_right==1){
                    if (progTbl_index < progTbl_Size-1){
                       menuTbl_LoseFocus('prog')
                       progTbl_index++
                       menuTbl_SetFocus('prog')
                    }
                    else{
                       if (progArray_startIdx < program.length-progTbl_Size){
                          progArray_startIdx++
                          menuTbl_fill ('prog')
                       }
                    }
                    progId = progArray_startIdx + progTbl_index
                    to_show_epg_info(array_prog[progArray_startIdx+progTbl_index].index)
                    slider('prog')
                    Out('curr = '+progId)
                }
                if(tv_list_on){
                	t_hide_channel_list()
                }
                break
            }
            case 33: // PageUp
            {
                
                if (vclub_vote_on){
                    return
                }
                
                if (media_browser.on){
                    if (!player_on || media_browser.is_audio){
                        media_browser.shift_page(-1);
                    }
                    break;
                }
                
                if (anec_blog_on){
                    shift_anec_blog_body(-1, 200)
                    break;
                }
                
                if (horoscope_page_on){
                    shift_common_horoscope(-1)
                    break
                }
                
                if (mastermind_rating_on){
                    shift_mastermind_rating_page(-1)
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    shift_mastermind_log_page(-1)
                    break
                }

                if (main_city_info_on){
                    shift_main_city_info_page(-1)
                    break
                }
                
                if (other_city_info_on){
                    shift_other_city_info_page(-1)
                    break
                }
                
                if (help_city_info_on){
                    shift_help_city_info_page(-1)
                    break
                }
                
                if (weather_page_on){
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if (recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        shift_recipes_cat_bar_page(-1)
                    }else{
                        shift_recipes_by_cat_page(-1)
                    }
                    break
                }
                
                if (tv_program_on == 1 && tv_program_con_menu == 0 && cur_day_bar == 0){
                    //set_passive_all_tv_program_row()
                    shift_tv_program_page(-1)
                    //set_active_tv_program_row()
                    break
                }
                
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_number_page(-1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_channel_page(-1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 0 && cur_theme_bar == 0){
                    shift_tv_by_theme_page(-1)
                    break
                }
                
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 0){
                    shift_video_club_info(-1, 200)
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0){
                    //set_passive_all_vclub_by_name_row()
                    shift_vclub_by_name_page(-1)
                    //set_active_vclub_by_name_row()
                    break
                }
                
                if ((vclub_by_name_on == 1 || vclub_by_genre_on == 1 || vclub_by_year_on == 1) && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 1){
                    //set_passive_all_vclub_abc_row()
                    shift_vclub_abc_page(-1)
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                    //set_passive_all_vclub_by_genre_row()
                    shift_vclub_by_genre_page(-1)
                    //set_active_vclub_by_genre_row()
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 1){
                    shift_vclub_genre_bar_page(-1)
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                    //set_passive_all_vclub_by_year_row()
                    shift_vclub_by_year_page(-1)
                    //set_active_vclub_by_year_row()
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 1){
                    //set_passive_all_vclub_year_bar_row()
                    shift_vclub_year_bar_page(-1)
                    break
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0){
                    //set_passive_all_vclub_by_add_time_row()
                    shift_vclub_by_add_time_page(-1)
                    //set_active_vclub_by_add_time_row()
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){
                    set_passive_all_vclub_by_top_row()
                    shift_vclub_by_top_page(-1)
                    set_active_vclub_by_top_row()
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){
                    shift_vclub_by_search_page(-1)                    
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){                  
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 0){
                    shift_video_clips_by_name_page(-1)
                    break
                }
                
                if ((video_clips_by_name_on == 1 || video_clips_by_genre_on == 1 || video_clips_by_singer_on == 1) && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 1){
                    shift_video_clips_abc_page(-1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 0 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 0){
                    shift_video_clips_by_singer_page(-1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 0 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 1){
                    shift_video_clips_abc_page(-1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 1 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar ==0){
                    shift_video_clips_singer_bar_page(-1)
                    break
                }
                
                if (my_video_records_on == 1 && video_records_on == 1){
                    set_passive_all_my_video_records_row()
                    shift_my_video_records_page(-1)
                    set_active_my_video_records_row()
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                    shift_karaoke_by_name_page(-1)
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                    shift_karaoke_abc_page(-1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 0 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 0){
                    shift_karaoke_by_singer_page(-1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 0 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 1){
                    shift_karaoke_abc_page(-1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar ==0){
                    shift_karaoke_singer_bar_page(-1)
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 0 && cur_abc_audio_club_bar == 0){
                    set_passive_all_audio_club_by_name_row()
                    shift_audio_club_by_name_page(-1)
                    set_active_audio_club_by_name_row()
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 0 && cur_abc_audio_club_bar == 0){
                    set_passive_all_audio_club_by_singer_row()
                    shift_audio_club_by_singer_page(-1)
                    set_active_audio_club_by_singer_row()
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 0){
                    set_passive_all_audio_club_playlist_row()
                    shift_audio_club_playlist_page(-1)
                    set_active_audio_club_playlist_row()
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 0){
                    set_passive_all_radio_by_name_row()
                    shift_radio_by_name_page(-1)
                    set_active_radio_by_name_row()
                    break
                }
                
                break
            }
            case 34: // PageDown
            {
                
                if (vclub_vote_on){
                    return
                }
                
                if (media_browser.on){
                    if (!player_on || media_browser.is_audio){
                        media_browser.shift_page(1);
                    }
                    break;
                }
                
                if (anec_blog_on){
                    shift_anec_blog_body(1, 200)
                }
                
                if (horoscope_page_on){
                    shift_common_horoscope(1)
                    break
                }
                
                if (mastermind_rating_on){
                    shift_mastermind_rating_page(1)
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    shift_mastermind_log_page(1)
                    break
                }
                
                if (main_city_info_on){
                    shift_main_city_info_page(1)
                    break
                }
                
                if (other_city_info_on){
                    shift_other_city_info_page(1)
                    break
                }
                
                if (help_city_info_on){
                    shift_help_city_info_page(1)
                    break
                }
                
                if (weather_page_on){
                    break
                }
                
                if (recipe_info_page_on){
                    break
                }
                
                if (recipes_by_cat_on){
                    if (cur_recipes_cat_bar){
                        shift_recipes_cat_bar_page(1)
                    }else{
                        shift_recipes_by_cat_page(1)
                    }
                    break
                }
                
                if (tv_program_on == 1 && tv_program_con_menu == 0 && cur_day_bar == 0){
                    //set_passive_all_tv_program_row()
                    shift_tv_program_page(1)
                    //set_active_tv_program_row()
                    break
                }
                
                if (tv_page_on == 1 && tv_by_number_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_number_page(1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_channel_on == 1 && tv_by_number_con_menu == 0){
                    shift_tv_by_channel_page(1)
                    break
                }
                
                if (tv_page_on == 1 && tv_by_theme_on == 1 && tv_by_number_con_menu == 0 && cur_theme_bar == 0){
                    shift_tv_by_theme_page(1)
                    break
                }
                
                if (video_club_info_on == 1 && video_club_info_con_menu_on == 0){
                    shift_video_club_info(1, 200)
                    break
                }
                
                if (vclub_by_name_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0){
                    //set_passive_all_vclub_by_name_row()
                    shift_vclub_by_name_page(1)
                    //set_active_vclub_by_name_row()
                    break
                }
                
                if ((vclub_by_name_on == 1 || vclub_by_genre_on == 1 || vclub_by_year_on == 1) && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 1){
                    //set_passive_all_vclub_abc_row()
                    shift_vclub_abc_page(1)
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 0){
                    //set_passive_all_vclub_by_genre_row()
                    shift_vclub_by_genre_page(1)
                    //set_active_vclub_by_genre_row()
                    break
                }
                
                if (vclub_by_genre_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_genre_vclub_bar == 1){
                    shift_vclub_genre_bar_page(1)
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 0){
                    //set_passive_all_vclub_by_year_row()
                    shift_vclub_by_year_page(1)
                    //set_active_vclub_by_year_row()
                    break
                }
                
                if (vclub_by_year_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0 && cur_year_vclub_bar == 1){
                    //set_passive_all_vclub_year_bar_row()
                    shift_vclub_year_bar_page(1)
                    break
                }
                
                if (vclub_by_add_time_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0 && cur_abc_vclub_bar == 0){
                    //set_passive_all_vclub_by_add_time_row()
                    shift_vclub_by_add_time_page(1)
                    //set_active_vclub_by_add_time_row()
                    break
                }
                
                if (vclub_by_top_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){
                    set_passive_all_vclub_by_top_row()
                    shift_vclub_by_top_page(1)
                    set_active_vclub_by_top_row()
                    break
                }
                
                if (vclub_by_search_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){
                    shift_vclub_by_search_page(1)
                    break
                }
                
                if (vclub_not_ended_on == 1 && vclub_con_menu_on == 0 && video_club_info_on == 0){
                    break
                }
                
                if (video_clips_by_name_on == 1 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 0){
                    shift_video_clips_by_name_page(1)
                    break
                }
                
                if ((video_clips_by_name_on == 1 || video_clips_by_genre_on == 1 || video_clips_by_singer_on == 1) && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 1){
                    shift_video_clips_abc_page(1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 0 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 0){
                    shift_video_clips_by_singer_page(1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 0 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar == 1){
                    shift_video_clips_abc_page(1)
                    break
                }
                
                if (video_clips_by_singer_on == 1 && cur_video_clips_singer_bar == 1 && video_clips_con_menu_on == 0 && cur_abc_video_clips_bar ==0){
                    shift_video_clips_singer_bar_page(1)
                    break
                }
                
                if (my_video_records_on == 1 && video_records_on == 1){
                    set_passive_all_my_video_records_row()
                    shift_my_video_records_page(1)
                    set_active_my_video_records_row()
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 0 && cur_genre_karaoke_bar == 0){
                    shift_karaoke_by_name_page(1)
                    break
                }
                
                if (karaoke_by_name_on == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 1 && cur_genre_karaoke_bar == 0){
                    shift_karaoke_abc_page(1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 0 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 0){
                    shift_karaoke_by_singer_page(1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 0 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar == 1){
                    shift_karaoke_abc_page(1)
                    break
                }
                
                if (karaoke_by_singer_on == 1 && cur_karaoke_singer_bar == 1 && karaoke_con_menu_on == 0 && cur_abc_karaoke_bar ==0){
                    shift_karaoke_singer_bar_page(1)
                    break
                }
                
                if (audio_club_by_name_on == 1 && audio_club_con_menu_on == 0 && cur_abc_audio_club_bar == 0){
                    set_passive_all_audio_club_by_name_row()
                    shift_audio_club_by_name_page(1)
                    set_active_audio_club_by_name_row()
                    break
                }
                
                if (audio_club_by_singer_on == 1 && audio_club_con_menu_on == 0 && cur_abc_audio_club_bar == 0){
                    set_passive_all_audio_club_by_singer_row()
                    shift_audio_club_by_singer_page(1)
                    set_active_audio_club_by_singer_row()
                    break
                }
                
                if (audio_club_playlist_on == 1 && audio_club_con_menu_on == 0){
                    set_passive_all_audio_club_playlist_row()
                    shift_audio_club_playlist_page(1)
                    set_active_audio_club_playlist_row()
                    break
                }
                
                if (radio_by_name_on == 1 && radio_con_menu_on == 0){
                    set_passive_all_radio_by_name_row()
                    shift_radio_by_name_page(1)
                    set_active_radio_by_name_row()
                    break
                }
                
                break
            }
            case 122: // Menu F11
            {
                menu_btn()
                
                break
            }
            case 8:  // Back
            {
                /*if (menu_on == 1){
                    build_2d_menu(prev_menu, 0)
                    stop_all_slide()
                    start_slide()
                }*/
                
                if (media_browser.on){
                    if(!player_on || media_browser.is_audio){
                        media_browser.out_dir()
                    }
                    break;
                }
                
                if (ch_by_num_on){
                    del_ch_num_char()
                    break
                }
                
                if (password_input_on){
                    del_password_char()
                    break
                }
                
                if (parent_password_page_on){
                    del_parent_password_char()
                    break
                }
                
                if (anec_blog_on){
                    del_num_in_anec_page_box()
                    break
                }
                
                if (kbd_on && kbd_active){
                    kbd_del_char()
                    break
                }
                if (mode_one && media_type == 'stream'){
                    //play_not_to(hist_ch[0])
                    
                    if (fav_itv_on){
                        f_ch_idx = hist_f_ch_idx[0]
                        show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                    }else{
                        ch_idx = hist_ch_idx[0]
                        show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                    }
                    
                    play_not_to(hist_ch[0])
                }
                break
            }
            case 116:  // Refresh
            {
                
                if (mastermind_game_on){
                    //init_mastermind_game()
                    break
                }
                break
            }

//      Color Keys
            case 112: // Red
            {
                
                if(e.altKey){
                    media_browser.drive_mounted();
                    break
                }
                
                if (vclub_vote_on){
                    vclub_vote('bad')
                    break
                }
                
                if(video_out_setting_page_on == 1){
                    change_video_out()
                }
                break
            }
            case 113: // Green
            {
                
                if(e.altKey){
                    media_browser.drive_umounted();
                    break
                }
                
                if (vclub_vote_on){
                    vclub_vote('good')
                    break
                }
                
                if (anec_blog_on){
                    vote_anec()
                    break
                }
                
                if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_name()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_genre()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_year()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_top()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_add_time()
                    show_video_club_by_search()
                    break
                }
                break
            }
            case 114: // Yellow same as Pause?
            {
                if ((e.ctrlKey && browser == 'webkit') || browser == 'firefox'){
                    
                    if (anec_blog_on){
                        make_anec_bookmark()
                        break
                    }
                    
                    if (tv_page_on){
                        fav_itv_on = 0
                        if (tv_by_number_on){
                            need_tv_by_number_row_focus = 1
                            set_passive_all_tv_by_number_row()
                            cur_tv_by_num_page = 1
                            cur_row_tv_by_number = 0
                            prev_row_tv_by_number = 1
                            set_active_tv_by_number_row()
                        }else if(tv_by_channel_on){
                            need_vclub_by_channel_row_focus = 1
                            set_passive_all_tv_by_channel_row()
                            cur_tv_by_ch_page = 1
                            cur_row_tv_by_channel = 0
                            prev_row_tv_by_channel = 1
                            set_active_tv_by_channel_row()
                        }else if(tv_by_theme_on){
                            need_tv_by_theme_row_focus = 1
                            set_passive_all_tv_by_theme_row()
                            cur_tv_by_theme_page = 1
                            cur_row_tv_by_theme = 0
                            prev_row_tv_by_theme = 1
                            set_active_tv_by_theme_row()
                        }
                        load_tv()
                        if (need_save_fav_channels){
                            save_fav_itv()
                        }
                        break
                    }
                    
                    if (video_club_on && vclub_by_name_on){
                        fav_vclub_on = 0
                        if (vclub_by_name_on){
                            need_vclub_by_name_row_focus = 1
                            set_passive_all_vclub_by_name_row()
                            cur_vclub_by_name_page =1
                            cur_row_vclub_by_name = 0
                            prev_row_vclub_by_name = 1
                            set_passive_all_vclub_abc_row()
                            cur_abc_vclub_bar = 0
                            set_active_vclub_by_name_row()
                        }else if(vclub_by_genre_on){
                            need_vclub_by_genre_row_focus = 1
                            set_passive_all_vclub_by_genre_row()
                            cur_vclub_by_genre_page = 1
                            cur_row_vclub_by_genre = 0
                            prev_row_vclub_by_genre = 1
                            set_passive_all_vclub_abc_row()
                            set_passive_all_vclub_genre_bar_row()
                            cur_abc_vclub_bar = 0
                            cur_genre_vclub_bar = 0
                            set_active_vclub_by_genre_row()
                        }else if(vclub_by_year_on){
                            need_vclub_by_year_focus = 1
                            set_passive_all_vclub_by_year_row()
                            cur_vclub_by_year_page = 1
                            cur_row_vclub_by_year = 0
                            prev_row_vclub_by_year = 1
                            set_passive_all_vclub_abc_row()
                            set_passive_all_vclub_year_bar_row()
                            cur_abc_vclub_bar = 0
                            cur_year_vclub_bar = 0
                            set_active_vclub_by_year_row()
                        }else if(vclub_by_add_time_on){
                            need_vclub_by_add_time_row_focus = 1
                            set_passive_all_vclub_by_add_time_row()
                            cur_vclub_by_add_time_page = 1
                            cur_row_vclub_by_add_time = 0
                            prev_row_vclub_by_add_time = 1
                            set_passive_all_vclub_add_time_row()
                            cur_add_time_vclub_bar = 0
                            set_active_vclub_by_add_time_row()
                        }
                        load_vclub_fav()
                        break
                    }
                    
                    if (audio_club_page_on){
                        switch_audio_club_abc(1)
                        break
                    }
                    
                    if (kbd_on){
                        if (vclub_by_search_on){
                            if (kbd_active){
                                document.getElementById('search_kbd_btn').innerHTML = words['search']
                                set_active_vclub_by_search_row()
                                kbd_active = 0
                            }else{
                                document.getElementById('search_kbd_btn').innerHTML = words['list']
                                set_passive_all_vclub_by_search_row()
                                kbd_active = 1
                                cur_row_vclub_by_search = 0
                                prev_row_vclub_by_search = 1
                            }
                        }else if(recipes_by_cat_on){
                            if (kbd_active){
                                document.getElementById('search_recipe_kbd_btn').innerHTML = words['search']
                                set_active_recipes_by_cat_row()
                                kbd_active = 0
                            }else{
                                document.getElementById('search_recipe_kbd_btn').innerHTML = words['list']
                                set_passive_all_recipes_by_cat_row()
                                set_passive_all_recipes_cat_bar_row()
                                kbd_active = 1
                                cur_recipes_cat_bar = 0
                                cur_row_recipes_by_cat = 0
                                prev_row_recipes_by_cat = 1
                            }
                        }
                    }
                }
                break
            }
            case 115: // Blue same as Stop?
            {
                if ((e.ctrlKey && browser == 'webkit') || browser == 'firefox'){
                    if (anec_blog_on && anec_bookmark_page > 0){
                        need_open_bookmark_page = 1
                        get_anec_bookmark_page()
                        //load_anec_bookmark()
                        break
                    }
                    
                    if (tv_page_on){
                        fav_itv_on = 1
                        if (tv_by_number_on){
                            need_tv_by_number_row_focus = 1
                            set_passive_all_tv_by_number_row()
                            cur_tv_by_num_page = 1
                            cur_row_tv_by_number = 0
                            prev_row_tv_by_number = 1
                            set_active_tv_by_number_row()
                        }else if(tv_by_channel_on){
                            need_vclub_by_channel_row_focus = 1
                            set_passive_all_tv_by_channel_row()
                            cur_tv_by_ch_page = 1
                            cur_row_tv_by_channel = 0
                            prev_row_tv_by_channel = 1
                            set_active_tv_by_channel_row()
                        }else if(tv_by_theme_on){
                            need_tv_by_theme_row_focus = 1
                            set_passive_all_tv_by_theme_row()
                            cur_tv_by_theme_page = 1
                            cur_row_tv_by_theme = 0
                            prev_row_tv_by_theme = 1
                            set_active_tv_by_theme_row()
                        }
                        load_tv()
                        break
                    }
                    
                    if (video_club_on && vclub_by_name_on){
                        fav_vclub_on = 1
                        if (vclub_by_name_on){
                            need_vclub_by_name_row_focus = 1
                            set_passive_all_vclub_by_name_row()
                            cur_vclub_by_name_page =1
                            cur_row_vclub_by_name = 0
                            prev_row_vclub_by_name = 1
                            set_passive_all_vclub_abc_row()
                            cur_abc_vclub_bar = 0
                            set_active_vclub_by_name_row()
                        }else if(vclub_by_genre_on){
                            need_vclub_by_genre_row_focus = 1
                            set_passive_all_vclub_by_genre_row()
                            cur_vclub_by_genre_page = 1
                            cur_row_vclub_by_genre = 0
                            prev_row_vclub_by_genre = 1
                            set_passive_all_vclub_abc_row()
                            set_passive_all_vclub_genre_bar_row()
                            cur_abc_vclub_bar = 0
                            cur_genre_vclub_bar = 0
                            set_active_vclub_by_genre_row()
                        }else if(vclub_by_year_on){
                            need_vclub_by_year_focus = 1
                            set_passive_all_vclub_by_year_row()
                            cur_vclub_by_year_page = 1
                            cur_row_vclub_by_year = 0
                            prev_row_vclub_by_year = 1
                            set_passive_all_vclub_abc_row()
                            set_passive_all_vclub_year_bar_row()
                            cur_abc_vclub_bar = 0
                            cur_year_vclub_bar = 0
                            set_active_vclub_by_year_row()
                        }else if(vclub_by_add_time_on){
                            need_vclub_by_add_time_row_focus = 1
                            set_passive_all_vclub_by_add_time_row()
                            cur_vclub_by_add_time_page = 1
                            cur_row_vclub_by_add_time = 0
                            prev_row_vclub_by_add_time = 1
                            set_passive_all_vclub_add_time_row()
                            cur_add_time_vclub_bar = 0
                            set_active_vclub_by_add_time_row()
                        }
                        load_vclub_fav()
                        break
                    }
                    
                    if (audio_club_page_on){
                        switch_audio_club_abc(2)
                        break
                    }
                    
                    /*if(web_bar_on == 1){
                        if(!kbd_On){
                            keyb_On()
                        }
                        else{
                            keyb_Off()
                        }
                    }*/
                }
                break
            }

//     TV control
            /*case 9: // Channel+  Channel- Shift+Tab
            {
                win_focus()

                if (recipe_info_page_on || main_city_info_on || other_city_info_on || recipes_by_cat_on || anec_page_on){
                    break
                }
                
                _debug('keyCode 9')
                if (tv_by_number_on && mode_one == 0 && fav_itv_on){
                    if (es){ // Shift+Tab (-)
                        move_fav_ch(1)
                    }else{  // (+)
                        move_fav_ch(-1)
                    }
                }
                if (!vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && radio_page_on == 0 && karaoke_page_on == 0 && video_out_setting_page_on == 0 && setting_page_on == 0 && club_on == 0 && parent_password_page_on == 0 && video_club_on == 0 && tv_page_on == 0 && web_bar_on == 0 && menu_on == 0 && tv_program_on == 0 && vclub_by_name_on == 0 && vclub_by_genre_on == 0 && vclub_by_year_on == 0 && video_records_by_addtime_on == 0 && my_video_records_on == 0){
                    if (es){ // Shift+Tab
                        if (fav_itv_on){
                            if (f_ch_idx > 0){
                                f_ch_idx--
                            }else{
                                f_ch_idx = fav_channels.length-1
                            }
                            _debug('f_ch_idx : '+f_ch_idx)
                            pause=0
                            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                            chech_rec_ch(fav_channels[f_ch_idx].id)
                            play(''+fav_channels[f_ch_idx].cmd)
                        }else{
                            if (ch_idx > 0){
                                ch_idx--
                            }else{
                                ch_idx = channels.length-1
                            }
                            _debug('ch_idx : '+ch_idx)
                            pause=0
                            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                            chech_rec_ch(channels[ch_idx].id)
                            play(''+channels[ch_idx].cmd)
                        }
                        break
                    }
                    else{ // Tab
                        if (fav_itv_on){
                            if (f_ch_idx < (fav_channels.length-1)){
                                f_ch_idx++
                            }else{
                                f_ch_idx = 0
                            }
                            _debug('f_ch_idx: '+f_ch_idx)
                            pause=0
                            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                            chech_rec_ch(fav_channels[f_ch_idx].id)
                            play(''+fav_channels[f_ch_idx].cmd)
                        }else{
                            if (ch_idx < (channels.length-1)){
                                ch_idx++
                            }else{
                                ch_idx = 0
                            }
                            _debug('ch_idx: '+ch_idx)
                            pause=0
                            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                            chech_rec_ch(channels[ch_idx].id)
                            play(''+channels[ch_idx].cmd)
                        }
                        break 
                    }
                }
                break
            }*/

            case 120: // Serv
            {
                break
            }
            case 121: // Tv
            {
                /*if(pause == 1){
                    _debug('continue')
                    _log('continue', '', get_current_place())
                    try{
                        stb.Continue()
                        
                        continue_time_for_played_video()
                        
                        stb.SetDefaultFlicker(0)
                        hide_pause()
                    }catch(err){
                        _debug(err)
                    }
                   
                    pause = 0
                }*/
                if ((e.ctrlKey && browser == 'webkit') || browser == 'firefox'){
                    menu_btn()
                    exit_btn()
                }
                break
            }
            //case 122: // Phone
            case 119: // Phone F8
            {
                break
            }
            case 123: // Web
            {
                if (menu_on == 1 && new_tv_list_on == 0 && player_on == 0){
                    if(web_bar_on == 0){
                        //show_web_bar()
                    }else{
                        
                    }
                }
                break
            }

            case 117: // Frame
            {
                if (player_on == 1){
                    if (lang_menu_on == 0){
                        //show_language_menu()
                    }else{
                        //hide_language_menu()
                    }
                }
                
                if ((e.ctrlKey && browser == 'webkit') || browser == 'firefox'){
                    if (mode_one == 1){
                        change_aspect()
                        break
                    }
                }
                
                break
            }
        }

//    Which
        switch (ew){
            case 0:
                break

//     Video&Audio control
            case 43: // Vol+
            {
                    hide_mute()
                    
                    try{
                        if(volume < 100){
                           volume+=5
                           document.getElementById("vol_"+volume).bgColor = "blue"
                        }
                        stb.SetVolume(volume)
                    }catch(err){
                        _debug(err)
                    }
                    osd_volume(volume)
                break
            }
            case 45: // Vol-
            {
                    hide_mute()
                    
                    if(volume > 0) {
                       document.getElementById("vol_"+volume).bgColor = ""
                       volume -= 5
                    }
                    try{
                        stb.SetVolume(volume)
                    }catch(err){
                        _debug(err)
                    }
                    osd_volume(volume)
                break
            }
            case 98: // Rew
            {
                if (audio_club_page_on){
                    play_prev_audio()
                }
                if (media_type == 'file' && mode_one == 1){
                    if (pause == 0 && cur_playing_time){
                        _log('pause')
                        stb.Pause()
                        
                        pause_time_for_played_video()
                        
                        pause = 1
                        show_seek_bar()
                        //time_seek_sum = -time_seek
                        ss_seek = 0
                        
                        //cur_time = Date.parse(new Date())/1000 - start_time + cur_pos_time
                        //cur_time = get_cur_played_time()
                    }
                    else if(pause == 1 && cur_playing_time && seek_bar_on){
                        if(seek == 1 || seek == 0){
                            time_seek_sum -= time_seek
                            ss_seek = time_seek
                        }
                        else{
                            t_sum = cur_time + time_seek_sum
                            _debug('time_seek: '+time_seek)
                            _debug('ss_seek: '+ss_seek)
                            _debug('t_sum: '+t_sum)
                            _debug('cur_time: '+cur_time)
                            _debug('time_seek_sum: '+time_seek_sum)
                            if (t_sum<=0){
                                time_seek_sum = -cur_time
                            }
                            else if (t_sum>cur_playing_time){
                                time_seek_sum = cur_playing_time-cur_time -1
                            }
                            else{
                                time_seek_sum -= ss_seek
                                ss_seek += time_seek
                            }
                        }
                        _debug('t_sum: '+t_sum)
                        _debug('ss_seek: '+ss_seek)
                        _debug('time_seek_sum: '+time_seek_sum)
                        t_set_pos()
                    }
                    else{
                        //time_seek_sum = time_seek_sum - time_seek
                        //_debug('time_seek_sum: '+time_seek_sum)
                        //set_pos()
                    }
                    seek  = -1
                }
                /*if (media_type == 'file'){
                    if(speed > -max_speed) speed--;
                    if(speed == 0) speed--;
    
                    //stb.SetSpeed(speed);\
                    set_speed(speed)
                }*/

                break
            }
            case 102: // Ffwd
            {
                if (audio_club_page_on){
                    play_next_audio()
                }
                if (media_type == 'file' && mode_one == 1){
                    if (pause == 0 && cur_playing_time){
                        _log('pause')
                        stb.Pause()
                        
                        pause_time_for_played_video()
                        
                        pause = 1
                        show_seek_bar()
                        //time_seek_sum = time_seek
                        ss_seek = 0
                        
                        //cur_time = Date.parse(new Date())/1000 - start_time + cur_pos_time
                        //cur_time = get_cur_played_time()
                    }
                    else if(pause == 1 && cur_playing_time && seek_bar_on){
                        if(seek == -1 || seek == 0){
                            time_seek_sum += time_seek
                            ss_seek = time_seek
                        }
                        else{
                            t_sum = cur_time + time_seek_sum
                            _debug('time_seek: '+time_seek)
                            _debug('ss_seek: '+ss_seek)
                            _debug('t_sum: '+t_sum)
                            _debug('cur_time: '+cur_time)
                            _debug('time_seek_sum: '+time_seek_sum)
                            if (t_sum>cur_playing_time){
                                time_seek_sum = cur_playing_time-cur_time
                            }
                            else if (t_sum<=0){
                                time_seek_sum = -cur_time+1
                            }
                            else{
                                time_seek_sum += ss_seek
                                ss_seek += time_seek
                            }
                        }
                        _debug('ss_seek: '  +ss_seek)
                        _debug('time_seek_sum: '+time_seek_sum)
                        t_set_pos()
                    }
                    else{
                        //time_seek_sum += time_seek
                        //_debug('time_seek_sum: '+time_seek_sum)
                        //set_pos()
                    }
                    seek = 1
                }
                /*if (media_type == 'file'){
                    if(speed < max_speed) speed++
                    if(speed == 0) speed++;
                    
                    //stb.SetSpeed(speed);
                    set_speed(speed)
                }*/
                
                //time_seek_sum += time_seek
                //t_set_pos()
                
                break
            }
            case 115: // Stop
            {
                if ((e.altKey && browser == 'webkit') || browser == 'firefox'){
                    if (vclub_vote_on){
                        return
                    }
                    
                    if(pause == 1){
                        break
                    }
                    if(ew){
                        speed = 1
                        pause = 0
                        try{
                            speed = 1
                            stop()
                            stb.SetDefaultFlicker(1)
                            
                            if(audio_club_page_on){
                                if (audio_club_playlist_on == 1){
                                    window.clearTimeout(t_next_play_id)
                                    hide_all_audio_playlist_play()
                                }
                                break
                            }
                            if(radio_page_on){
                                hide_all_radio_by_name_play()
                                break
                            }
                            
                            if (mode_one == 1){
                                hide_black()
                                if (prev_vclub_page == 'video_club'){
                                    show_video_club()
                                }else if(prev_karaoke_page == 'karaoke_page'){
                                    show_karaoke_page()
                                }else if(prev_tv_page == 'tv_page'){
                                    show_tv_page()
                                }else if( prev_video_record_page == 'video_records'){
                                    show_video_records()
                                }else if(media_browser.on){
                                }else{
                                    show_menu()
                                }
                            }
                            
                        }catch(err){
                            _debug(err)
                        }
                        if(seek_bar_on){
                            hide_seek_bar()
                        }
                    }
                }
                break
            }
            case 114: // Pause - Continue
            {
                if ((e.altKey && browser == 'webkit') || browser == 'firefox'){
                    if (vclub_vote_on){
                        return
                    }
                    
                    if (video_club_on){
                        if (vclub_by_name_on){
                            start_play_vclub_by_name()
                        }else if (vclub_by_genre_on){
                            start_play_vclub_by_genre()
                        }else if (vclub_by_year_on){
                            start_play_vclub_by_year()
                        }else if (vclub_by_add_time_on){
                            start_play_vclub_by_add_time()
                        }else if (vclub_by_top_on){
                            start_play_vclub_by_top()
                        }else if (vclub_by_search_on){
                            start_play_vclub_by_search()
                        }else if (vclub_not_ended_on){
                            start_play_vclub_not_ended()
                        }
                    }
                        
                    if (media_type == 'file' && mode_one == 1){
                        /*if (epg_on){
    
                        }
                        else{
                            speed = 1
                            if (pause == 0){
                                _debug('pause')
                               try{
                                   stb.Pause()
                                   stb.SetDefaultFlicker(1)
                               }catch(err){
                                   _debug(err)
                               }
                               time_start_pause = Date.parse(new Date())/1000
                               _debug('pos_time: '+(time_start_pause-start_time))
                               _debug('time_start_pause: '+time_start_pause)
                               pause = 1
                            }
                            else {
                               _debug('continue')
                               try{
                                   stb.Continue()
                                   stb.SetDefaultFlicker(0)
                               }catch(err){
                                   _debug(err)
                               }
                               _debug('pos_time: '+(time_start_pause-start_time))
                               
                               start_time = Date.parse(new Date())/1000 - (time_start_pause-start_time)
                               
                               _debug('start_time: '+start_time)
                               pause = 0
                            }
                        }*/                    
                        
                        if(seek_bar_on == 1){
                            set_pos()
                            
                            continue_time_for_played_video()
                            
                            _log('set_pos()', '', get_current_place())
                            _log('continue', '', get_current_place())
                            break
                        }
                        
                        if (speed != 1){
                            speed = 1
                            set_speed(1)
                        }else{
                            if (pause == 0){
                                _debug('pause')
                                _log('pause')
                               try{
                                   stb.Pause()
                                   
                                   pause_time_for_played_video()
                                   
                                   stb.SetDefaultFlicker(1)
                                   show_pause()
                               }catch(err){
                                   _debug(err)
                               }
                               
                               pause = 1
                            }
                            else {
                               _debug('continue')
                               _log('continue', '', get_current_place())
                               try{
                                   stb.Continue()
                                   
                                   continue_time_for_played_video()
                                   
                                   stb.SetDefaultFlicker(0)
                                   hide_pause()
                               }catch(err){
                                   _debug(err)
                               }
                               
                               pause = 0
                            }
                        }
                    }
                }
                break
            }
            case 119: // Rec
            {
                if (record){
                    if (media_type == 'stream' && mode_one == 1){
                        if (fav_itv_on){
                            rec_ch_idx = f_ch_idx
                            rec_ch = fav_channels
                        }else{
                            rec_ch_idx = ch_idx
                            rec_ch = channels
                        }
                        _debug('rec_ch_idx: '+rec_ch_idx)
                        _debug('channel: '+rec_ch[rec_ch_idx].toSource())
                        
                        var cur_rec_idx = rec_channels_ids.indexOf(rec_ch[rec_ch_idx].id)
                        
                        if (cur_rec_idx < 0){
                            rec_channels_ids[rec_channels_ids.length] = rec_ch[rec_ch_idx].id
                            send_start_rec(rec_ch[rec_ch_idx].id)
                            show_rec_bar()
                        }else{
                            removed = rec_channels_ids.splice(cur_rec_idx, 1)
                            send_stop_rec(rec_ch[rec_ch_idx].id)
                            hide_rec_bar()
                        }
                        
                        _debug('rec_channels_ids: '+rec_channels_ids.toSource())
                    }
                }
                break
            }
            case 32:  // Mic
            {
                break
            }
            case 96:  // Mute
            {
                //if (check_ctrl_alt(e)){
                if (e.altKey){
                    if(mute == 0){
                        show_mute()
                    }
                    else{
                        hide_mute()
                    }
    
                    try{
                        stb.SetMute(mute)
                    }catch(err){
                        _debug(err)
                    }
                }
                break
            }
            case 117: // Power
            {
                _debug('video_out: '+video_out)
                //if (check_ctrl_alt(e)){
                if (e.altKey){
                    if(power_off == 1){ // ON
                        /*_log('power', 'on') 
                        video_out = read_video_out()
                        _debug('SetVideoOut '+video_out)
                        stb.ExecAction('SetVideoOut '+video_out)
                        power_off = 0
                        
                        if (last_ch_idx >= 0){
                            pause=0
                            show_black()
                            stb.SetDefaultFlicker(0)
                            if (fav_itv_on){
                                play(''+fav_channels[f_ch_idx].cmd)
                                show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
                            }else{
                                play(''+channels[ch_idx].cmd)
                                show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
                            }
                        }
                        last_ch_idx = -1*/
                        _debug('StandBy '+0)
                        _log('power', 'on')
                        stb.StandBy(0)
                        
                        power_off = 0
                        
                    }else{ // OFF
                        /*_debug('SetVideoOut off')
                        _log('power', 'off')
                        _debug('player_on: '+player_on)
                        _debug('fav_itv_on: '+fav_itv_on)
                        if (player_on == 1){
                            if (fav_itv_on){
                                last_ch_idx = f_ch_idx
                            }else{
                                last_ch_idx = ch_idx
                            }
                        }
                        _debug('last_ch_idx: '+last_ch_idx)
                        _debug('player_on: '+player_on)
                        
                        speed = 1
                        stop()
                        
                        hide_black()
                        stb.SetDefaultFlicker(1)
    
                        stb.ExecAction('SetVideoOut off');
                        power_off = 1*/
                        _debug('StandBy '+1)
                        _log('power', 'off')

                        menu_btn()
                        
                        stb.StandBy(1)
                        power_off = 1
                    }
                }
                break
            }
            case 121: // Info: no "Y"
            {
                //_debug('epg_on: '+epg_on+'; tv_list_on: '+tv_list_on)
                
                /*if (tv_list_on == 0 && new_tv_list_on == 0 && web_bar_on == 0){
                    if (epg_on == 1){
                        hide_epg()
                        stb.SetDefaultFlicker(0)
                    }
                    else{
                        show_epg()
                        stb.SetDefaultFlicker(1)
                    }
                }
                if (abc_video_search_on == 1){
                    if (video_info_on == 0){
                        //show_video_info()
                    }else{
                        //hide_video_info()
                    }
                }
                */
                
                if ((e.altKey && browser == 'webkit') || browser == 'firefox'){
                    
                    if (mode_one == 1){
                        show_playing(cur_playing_str)
                        break
                    }
                    
                    if(vclub_by_name_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_by_genre_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_by_year_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_by_add_time_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_by_top_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_by_search_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if(vclub_not_ended_on && mode_one == 0){
                        show_video_club_info()
                        hide_video_club()
                        break
                    }
                    
                    if (tv_by_number_on && mode_one == 0){
                        show_program()
                        hide_tv_page()
                        break
                    }
                    
                    if (tv_by_channel_on && mode_one == 0){
                        show_program()
                        hide_tv_page()
                        break
                    }
                    
                    if (tv_by_theme_on && mode_one == 0){
                        show_program()
                        hide_tv_page()
                        break
                    }
                    
                }
                
                break
            }
            case 107: // Spec
            {
                break
            }

            case 49: // number 1
            {
                
                if (recipes_by_cat_on && fav_recipes_on){
                    show_recipes_by_cat()
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(1)
                    break
                }
                
                if (password_input_on){
                    add_password_char(1)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(1)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(1)
                    break
                }
                
                if(tv_by_channel_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_channel()
                    show_tv_by_number()
                    break
                }
                if(tv_by_theme_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_theme()
                    show_tv_by_number()
                    break
                }
                
                /*if (cur_cat_num == 0){
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_name()
                        break
                    }
                }else{*/
                    if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_genre()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_name()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_name()
                        break
                    }
                //}
                
                if(video_clips_by_singer_on == 1 && mode_one == 0){
                    hide_video_clips_by_singer()
                    show_video_clips_by_name()
                    break
                }
                
                if (my_video_records_on == 1 && mode_one == 0){
                    hide_my_video_records()
                    show_video_records_by_addtime()
                    break
                }
                
                if(karaoke_by_singer_on == 1 && mode_one == 0){
                    hide_karaoke_by_singer()
                    show_karaoke_by_name()
                    break
                }
                
                if(audio_club_by_singer_on == 1){
                    hide_audio_club_by_singer()
                    show_audio_club_by_name()
                    break
                }
                
                if(audio_club_playlist_on == 1){
                    hide_audio_club_playlist()
                    show_audio_club_by_name()
                    break
                }
                
                if (other_city_info_on == 1){
                    hide_other_city_info()
                    show_main_city_info()
                    break
                }
                
                if (help_city_info_on == 1){
                    hide_help_city_info()
                    show_main_city_info()
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(1)
                    //t_hide_ch_num()
                    add_ch_num_char(1)
                }
                /*if(kbd_On){
                    kbdDigitProc('00')
                }*/
                break
            }
            case 50: // number 2
            {
                
                if (recipes_by_cat_on && !fav_recipes_on){
                    show_fav_recipes()
                    break
                }
                
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(2)
                    break
                }
                
                if (password_input_on){
                    add_password_char(2)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(2)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(2)
                    break
                }
                
                if(tv_by_number_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_number()
                    show_tv_by_channel()
                    break
                }
                if(tv_by_theme_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_theme()
                    show_tv_by_channel()
                    break
                }
                
                /*if (cur_cat_num == 0){
                     if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_year()
                        break
                    }
                }else{*/
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_genre()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_genre()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_genre()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_genre()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_genre()
                        break
                    }
                //}
                
                if (video_records_by_addtime_on && mode_one == 0){
                    hide_video_records_by_addtime()
                    show_my_video_records()
                    break
                }
                
                if(video_clips_by_name_on == 1 && mode_one == 0){
                    hide_video_clips_by_name()
                    show_video_clips_by_singer()
                    break
                }
                
                if(karaoke_by_name_on == 1 && mode_one == 0){
                    hide_karaoke_by_name()
                    show_karaoke_by_singer()
                    break
                }
                
                if(audio_club_by_name_on == 1){
                    hide_audio_club_by_name()
                    show_audio_club_by_singer()
                    break
                }
                
                if(audio_club_playlist_on == 1){
                    hide_audio_club_playlist()
                    show_audio_club_by_singer()
                    break
                }
                
                if (main_city_info_on == 1){
                    hide_main_city_info()
                    show_help_city_info()
                    break
                }
                
                if (other_city_info_on == 1){
                    hide_other_city_info()
                    show_help_city_info()
                    break
                }
                
                if (media_browser.on){
                    break
                }
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(2)
                    //t_hide_ch_num()
                    add_ch_num_char(2)
                }
                /*if(kbd_On){
                    kbdDigitProc('01')
                }*/
                break
            }
            case 51: // number 3
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(3)
                    break
                }
                
                if (password_input_on){
                    add_password_char(3)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(3)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(3)
                    break
                }
                
                if(tv_by_number_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_number()
                    show_tv_by_theme()
                    break
                }
                if(tv_by_channel_on == 1 && mode_one == 0 && !tv_program_on){
                    hide_tv_by_channel()
                    show_tv_by_theme()
                    break
                }
                
                /*if (cur_cat_num == 0){
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_top()
                        break
                    }
                }else{*/
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_genre()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_year()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_year()
                        break
                    }
                //}
                
                if(karaoke_by_name_on == 1 && mode_one == 0){
                    hide_karaoke_by_name()
                    show_karaoke_by_author()
                    break
                }
                
                if(audio_club_by_name_on == 1){
                    hide_audio_club_by_name()
                    show_audio_club_playlist()
                    break
                }
                
                if(audio_club_by_singer_on == 1){
                    hide_audio_club_by_singer()
                    show_audio_club_playlist()
                    break
                }
                
                if (main_city_info_on == 1){
                    hide_main_city_info()
                    show_other_city_info()
                    break
                }
                
                if (help_city_info_on == 1){
                    hide_help_city_info()
                    show_other_city_info()
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(3)
                    //t_hide_ch_num()
                    add_ch_num_char(3)
                }
                /*if(kbd_On){
                    kbdDigitProc('02')
                }*/
                break
            }
            case 52: // number 4
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(4)
                    break
                }
                
                if (password_input_on){
                    add_password_char(4)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(4)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(4)
                    break
                }
                
                /*if (cur_cat_num == 0){
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_add_time()
                        break
                    }
                }else{*/
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_genre()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_add_time()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_top()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_top()
                        break
                    }
                //}
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(4)
                    //t_hide_ch_num()
                    add_ch_num_char(4)
                }
                /*if(kbd_On){
                    kbdDigitProc('10')
                }*/
                break
            }
            case 53: // number 5
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(5)
                    break
                }
                
                if (password_input_on){
                    add_password_char(5)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(5)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(5)
                    break
                }
                
                //if (cur_cat_num != 0){
                    if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_name()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_genre()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_top()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_year()
                        show_video_club_by_add_time()
                        break
                    }
                    
                    if(vclub_by_search_on == 1 && !video_club_info_on && mode_one == 0){
                        hide_video_club_by_search()
                        show_video_club_by_add_time()
                        break
                    }
                //}
                
                if (media_browser.on){
                    break
                }
                    
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(5)
                    //t_hide_ch_num()
                    add_ch_num_char(5)
                }
                /*if(kbd_On){
                    kbdDigitProc('11')
                }*/
                break
            }
            case 54: // number 6
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(6)
                    break
                }
                
                if (password_input_on){
                    add_password_char(6)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(6)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(6)
                    break
                }
                
                /*if(vclub_by_name_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_name()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_genre_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_genre()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_year_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_year()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_top_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_top()
                    show_video_club_by_search()
                    break
                }
                
                if(vclub_by_add_time_on == 1 && !video_club_info_on && mode_one == 0){
                    hide_video_club_by_add_time()
                    show_video_club_by_search()
                    break
                }*/
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(6)
                    //t_hide_ch_num()
                    add_ch_num_char(6)
                }
                /*if(kbd_On){
                    kbdDigitProc('12')
                }*/
                break
            }
            case 55: // number 7
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(7)
                    break
                }
                
                if (password_input_on){
                    add_password_char(7)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(7)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(7)
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(7)
                    //t_hide_ch_num()
                    add_ch_num_char(7)
                }
                /*if(kbd_On){
                    kbdDigitProc('20')
                }*/
                break
            }
            case 56: // number 8
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(8)
                    break
                }
                
                if (password_input_on){
                    add_password_char(8)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(8)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(8)
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(8)
                    //t_hide_ch_num()
                    add_ch_num_char(8)
                }
                /*if(kbd_On){
                    kbdDigitProc('21')
                }*/
                break
            }
            case 57: // number 9
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(9)
                    break
                }
                
                if (password_input_on){
                    add_password_char(9)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(9)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(9)
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(9)
                    //t_hide_ch_num()
                    add_ch_num_char(9)
                }
                /*if(kbd_On){
                    kbdDigitProc('22')
                }*/
                break
            }
            case 48: // number 0
            {
                if (mastermind_game_on && !mastermind_menu_on && !mastermind_rules_on && !mastermind_control_on && !mastermind_rating_on){
                    mastermind_fill_num(0)
                    break
                }
                
                if (password_input_on){
                    add_password_char(0)
                    break
                }
                
                if (parent_password_page_on){
                    add_parent_password_char(0)
                    break
                }
                
                if (anec_blog_on){
                    set_anec_page_box(0)
                    break
                }
                
                if (media_browser.on){
                    break
                }
                
                //if (!recipe_info_page_on && !recipes_by_cat_on && !vclub_vote_on && !course_page_on && !horoscope_sign_page_on && !horoscope_page_on && !mastermind_game_on && !widget_page_on && !weather_page_on && !anec_page_on && !city_info_page_on && !video_clips_on && !my_video_records_on && !video_records_by_addtime_on && !vclub_by_name_on && !vclub_by_genre_on && !vclub_by_add_time_on && !vclub_by_top_on && !seek_bar_on && !radio_page_on && !audio_club_page_on && !video_out_setting_page_on && !setting_page_on && !tv_program_on && !video_club_info_on && !club_on && !karaoke_page_on && !video_club_on && !tv_page_on && !ch_by_num_on && !epg_on && !tv_list_on && !web_bar_on && !abc_video_search_on && !menu_on){
                if (player_on && media_type == 'stream'){
                    //show_ch_num(0)
                    //t_hide_ch_num()
                    add_ch_num_char(0)
                }
                break
            }
        }
    }

    function menu_btn(){
        
        if(pause == 1){
            _debug('continue')
            _log('continue', '', get_current_place())
            try{
                stb.Continue()
                
                continue_time_for_played_video()
                
                stb.SetDefaultFlicker(0)
                hide_pause()
            }catch(err){
                _debug(err)
            }
            pause = 0
        }
        
        if (menu_on == 1){
            return
        }
        
        if(media_browser.on && !player_on){
            media_browser.hide()
            show_menu()
            return
        }
        
        if (vclub_vote_on){
            return
        }

        if (password_input_on == 1){
            dont_hide_con_alpha_layer = 0
            hide_password_input()
            return
        }
        
        if (widget_page_on){
            hide_widget_page(1)
            show_menu()
            return
        }
        
        if (city_info_page_on){
            reset_widget_menu = 1
            hide_city_info_page()
            show_menu()
            return
        }
        
        /*if (game_page_on){
            reset_widget_menu = 1
            hide_game_page()
            show_menu()
            return
        }*/
        
        if (mastermind_rating_on){
            hide_mastermind_rating()
            return
        }
        
        if (mastermind_rules_on){
            hide_mastermind_rules()
            return
        }
        
        if (mastermind_control_on){
            hide_mastermind_control()
            return
        }
        
        if (mastermind_game_on && mastermind_menu_on){
            hide_mastermind_menu()
            return
        }
        
        if (mastermind_game_on){
            show_mastermind_menu()
            return
        }
        
        if (anec_page_on){
            reset_widget_menu = 1
            hide_anec_page()
            show_menu()
            return
        }
        
        if (weather_page_on){
            reset_widget_menu = 1
            hide_weather_page()
            show_menu()
            return
        }
        
        if (horoscope_page_on){
            reset_widget_menu = 1
            hide_horoscope_page()
            reset_horoscope_menu = 1
            show_menu()
            return
        }
        
        if (horoscope_sign_page_on){
            reset_widget_menu = 1
            reset_horoscope_menu = 1
            hide_horoscope_sign_page()
            show_menu()
            return
        }
        
        if (course_page_on){
            reset_widget_menu = 1
            hide_course_page()
            show_menu()
            return
        }
        
        if (recipe_info_page_on){
            reset_widget_menu = 1
            hide_recipe_info_page()
            hide_recipe_page()
            show_menu()
            return
        }
        
        if (recipe_page_on){
            reset_widget_menu = 1
            hide_recipe_page()
            show_menu()
            return
        }
        
        
        
        if (rec_bar_on){
            hide_rec_bar()
        }
        
        if(pause == 1){
            return
        }
        if(seek_bar_on){
            hide_seek_bar()
            return
        }
        
        if(video_record_con_menu_on == 1){
            hide_video_record_con_menu()
        }
        
        if(tv_page_on == 1 && mode_one == 0 && tv_program_on == 0){
            hide_tv_page()
            show_menu()
        }else if(club_on == 1 && mode_one == 0){
            hide_club(1)
            show_menu()
        }else if(video_club_on == 1){
            hide_video_club()
            show_menu()
        }else if(video_clips_on == 1){
            hide_video_clips()
            show_menu()
        }else if(video_records_on == 1){
            hide_video_records()
            show_menu()
        }else if(karaoke_page_on == 1 && mode_one == 0){
            hide_karaoke_page()
            show_menu()
        }else if(audio_club_page_on == 1 && mode_one == 0){
            if (audio_club_playlist_on == 1){
                window.clearTimeout(t_next_play_id)
                hide_all_audio_playlist_play()
            }
            hide_audio_club_page()
            show_menu()
        }else if(radio_page_on == 1 && mode_one == 0){
            hide_radio_page()
            show_menu()
        }else if(tv_program_on == 1){
            hide_tv_page()
            hide_program()
            show_menu()
        }else if(video_club_info_on == 1){
            hide_video_club_info()
            hide_video_club()
            show_menu()
        }else if(setting_page_on == 1){
            hide_setting_page()
            show_menu()
        }else if(parent_password_page_on == 1){
            hide_parent_password_page()
            show_menu()
        }else if(video_out_setting_page_on == 1){
            hide_video_out_setting_page()
            show_menu()
        }else if (menu_on == 1){
            hide_menu()
            default_playing()
        }else{
            speed = 1
            stop()
            hide_black()
            stb.SetDefaultFlicker(1)
            
            if(tv_by_number_on == 1 || tv_by_channel_on == 1 || tv_by_theme_on == 1){
                hide_tv_page()
                prev_tv_page = ''
            }
            
            if(vclub_by_name_on == 1 || vclub_by_genre_on == 1 || vclub_by_year_on == 1 || vclub_by_add_time_on == 1 || vclub_by_top_on == 1){
                hide_video_club()
                prev_tv_page = ''
            }
            
            if(video_clips_by_name_on == 1 || video_clips_by_genre_on == 1 || video_clips_by_singer_on == 1 || video_clips_by_add_time_on == 1 || video_clips_by_top_on == 1){
                hide_video_clips()
                prev_video_clips_page = ''
            }
            
            if (video_records_by_addtime_on == 1 || my_video_records_on == 1){
                hide_video_records()
                prev_video_record_page = ''
            }
            
            if(karaoke_by_name_on == 1 || karaoke_by_singer_on == 1){
                hide_karaoke_page()
                prev_karaoke_page = ''
            }
            
            if(audio_club_by_name_on == 1){
                hide_audio_club_page()
                prev_audio_club_page = ''
            }
            
            if(radio_by_name_on == 1){
                hide_radio_page()
                prev_radio_page = ''
            }
            
            /*if (media_browser.on){
                media_browser.hide()
            }*/
            
            if (media_browser.hidden){
                media_browser.hidden = 0
                media_browser.hide()
            }
            
            if (media_browser.on){
                media_browser.hide()
            }

            show_menu()
        }
    }
    
    function exit_btn(){
        
        if(media_browser.on && !player_on){
            media_browser.hide()
            show_club()
            return
        }
        
        if (vclub_vote_on){
            return
        }
        
        if (rec_bar_on){
            hide_rec_bar()
        }
        
        if (media_type == 'file' && show_playing_on == 1){
            return
        }
        
        if (widget_page_on){
            hide_widget_page(1)
            show_menu()
            return
        }
        
        if (anec_page_box_on){
            hide_anec_page_box()
            return
        }
        
        if (city_info_page_on){
            hide_city_info_page()
            show_widget_page()
            return
        }
        
        /*if (game_page_on){
            hide_game_page()
            show_widget_page()
            return
        }*/
        
        if (mastermind_rating_on){
            hide_mastermind_rating()
            return
        }
        
        if (mastermind_rules_on){
            hide_mastermind_rules()
            return
        }
        
        if (mastermind_control_on){
            hide_mastermind_control()
            return
        }
        
        if (mastermind_game_on && mastermind_menu_on){
            hide_mastermind_menu()
            return
        }
        
        if (mastermind_game_on){
            show_mastermind_menu()
            return
        }
        
        if (recipe_info_page_on){
            hide_recipe_info_page()
            show_recipe_page()
            return
        }
        
        if (recipe_con_menu_on){
            hide_recipe_con_menu()
            return
        }
        
        if (recipe_page_on){
            hide_recipe_page()
            show_widget_page()
            return
        }
        
        if (anec_page_on){
            hide_anec_page()
            show_widget_page()
            return
        }
        
        if (weather_page_on){
            hide_weather_page()
            show_widget_page()
            return
        }
        
        if (horoscope_page_on){
            hide_horoscope_page(1)
            show_widget_page()
            return
        }
        
        if (horoscope_sign_page_on){
            hide_horoscope_sign_page()
            show_horoscope_page()
            return
        }
        
        if (course_page_on){
            hide_course_page()
            show_widget_page()
            return
        }
        
        if(seek_bar_on){
            hide_seek_bar()
            _debug('continue')
            _log('continue', '', get_current_place())
            stb.Continue()
            pause = 0
            continue_time_for_played_video()
            return
        }
        
        if (web_bar_on == 1){
            hide_web_bar()
            return
        }
        
        if(video_record_con_menu_on == 1){
            hide_video_record_con_menu()
            return
        }
        
        if(pause == 1){
            _debug('continue')
            _log('continue', '', get_current_place())
            try{
                stb.Continue()
                
                continue_time_for_played_video()
                
                stb.SetDefaultFlicker(0)
                hide_pause()
            }catch(err){
                _debug(err)
            }
           
            pause = 0
            return
        }
        
        if (vclub_con_menu_on){
            hide_video_club_con_menu()
            return
        }
        
        if (video_clips_con_menu_on){
            hide_video_clips_con_menu()
            return
        }
        
        if (tv_by_number_con_menu){
            hide_tv_by_number_con_menu()
            return
        }
        
        if (karaoke_con_menu_on){
            hide_karaoke_con_menu()
            return
        }
        
        if (password_input_on == 1){
            dont_hide_con_alpha_layer = 0
            hide_password_input()
            return
        }
        
        _debug('mode_one: '+mode_one)
        
        if(video_info_on == 1){
            hide_video_info()
            return
        }
        
        if (video_records_on){
            hide_video_records()
            show_club()
            return
        }
        
        if(tv_page_on == 1 && mode_one == 0 && tv_program_on == 0){
            hide_tv_page()
            show_menu()
        }else if(club_on == 1 && mode_one == 0){
            hide_club(1)
            show_menu()
        }else if(video_club_on == 1 && mode_one == 0){
            hide_video_club()
            show_club()
        }else if(video_clips_on == 1 && mode_one == 0){
            hide_video_clips()
            show_club()
        }else if(karaoke_page_on == 1 && mode_one == 0){
            hide_karaoke_page()
            show_menu()
        }else if(audio_club_page_on == 1){
            if (player_on == 0){
                hide_audio_club_page()
                show_club()
            }else{
                stop()
                window.clearTimeout(t_next_play_id)
                if (audio_club_playlist_on == 1){
                    hide_all_audio_playlist_play()
                }
            }
        }else if(radio_page_on == 1){
            if (player_on == 0){
                hide_radio_page()
                show_menu()
            }else{
                stop()
                hide_all_radio_by_name_play()
            }
        }else if(tv_program_on == 1){
            show_tv_page()
            hide_program()
        }else if(video_club_info_on == 1){
            show_video_club()
            hide_video_club_info()
        }else if(setting_page_on == 1){
            hide_setting_page()
            show_menu()
        }else if(parent_password_page_on == 1){
            hide_parent_password_page()
            show_setting_page()
        }else if(video_out_setting_page_on == 1){
            hide_video_out_setting_page()
            show_setting_page()
        }else if (menu_on == 1){
            hide_menu()
            default_playing()
        }else{
            speed = 1
            stop()
            hide_black()
            stb.SetDefaultFlicker(1)
            _debug('prev_vclub_page: '+prev_vclub_page)
            _debug('prev_tv_page: '+prev_tv_page)
            _debug('prev_karaoke_page: '+prev_karaoke_page)
            _debug('prev_video_record_page: '+prev_video_record_page)
            _debug('prev_video_clips_page: '+prev_video_clips_page)
            
            if (prev_vclub_page == 'video_club'){
                show_video_club()
            }else if (prev_video_clips_page == 'video_clips'){
                show_video_clips()
            }else if(prev_tv_page == 'tv_page'){
                show_tv_page()
            }else if(prev_video_record_page == 'video_records'){
                show_video_records()
            }else if(prev_karaoke_page == 'karaoke_page'){
                show_karaoke_page()
            }else if(prev_audio_club_page == 'audio_club_page'){
                show_audio_club_page()
            }else if(prev_radio_page == 'radio_page'){
                show_radio_page()
            }else if(media_browser.hidden){
                media_browser.show()
            }else if(media_browser.on){
                
            }else{
                if (tv_page_on == 0){
                    need_show_tv_by_number_cur_row = 1
                    show_tv_page()
                }else{
                    show_menu()
                }
            }
        }
    }
    
    
    function Out(string){
        if (debug){
            document.getElementById('tmp').innerHTML = string
        }
    }

    function set_focus(){
        var line = document.getElementById(menu[m] + l)
        line.focus()
    }

    function hightlight(id){

        try{
            document.getElementById('i_'+id.id).src = 'i/'+id.id+'_1.gif'
        }catch(e){
        }

        if(prev_type.substring(0, 3) != id.id.substring(0, 3)){
            try{
                document.getElementById('i_'+prev_type).src = 'i/'+prev_type+'_0.gif'                
            }catch(e){
            }
            prev_type = id.id
        }

        try{
            document.getElementById('tr_'+menu[m] + l).style.background = '#EFEFEF'
        }
        catch(ee){
        }
    }

    function normlight(id){
        id.style.background = ''

        try{
            document.getElementById('tr_'+id.id).style.background = ''
        }
        catch(ee){
        }
    }
    
    /*function check_ctrl_alt(ev){
        if (use_ctrl_alt){
            if (ev.ctrlKey && ev.altKey && !ev.shiftKey){
                return 1
            }else{
                return 0
            }
        }else{
            return 1
        }
    }*/
    
    /*function check_alt(ev){
        if (use_ctrl_alt){
            if (ev.altKey && !ev.shiftKey){
                return 1
            }else{
                return 0
            }
        }else{
            return 1
        }
    }*/

    function doLoad(type, page, data) {
        if(type != 'watchdog'){
            _debug('doLoad('+type+', '+page+')')
        }

        pat = /^(\w+)\&(\w+)=(\d+)/
        pat2 = /^(\w+)\&l=(\w)/
        pat3 = /^(itv&action=tv_by_theme&genre_id)=(\d+)/
        pat4 = /^(vod&action)=(\d+)(&cat_num)=(\d+)(&hd)=(\d+)/
        pat5 = /^(vod&action)=(\d+)(&genre_id)=(\d+)(&cat_num)=(\d+)(&hd)=(\d+)/
        pat6 = /^(vod&action)=(\d+)(&year_range)=(\d+)(&cat_num)=(\d+)(&hd)=(\d+)/
        pat7 = /^(create_link&action=)(\w+)/
        pat8 = /^(karaoke&action)=(\d+)&(karaoke_by_name)/
        //pat9 = /^(karaoke&action)=(\d+)&(karaoke_by_singer)&(\w)/
        pat9 = /^(karaoke&action)=(\d+)&(karaoke_by_singer)&singer=[\s\S]*/
        pat10 = /^(karaoke&action)=(\d+)&(karaoke_singer_bar)/
        pat11 = /^(audio_club&action)=(\d+)&(audio_club_by_name)&abc=(\d+)/
        pat12 = /^(audio_club&action)=(\d+)&(audio_club_singer_bar)&abc=(\d+)/
        pat13 = /^(audio_club&action)=(\d+)&(audio_club_by_singer)&singer=[\s\S]*/
        pat14 = /^(vod&vclub_by_add_time&action)=(\d+)(&cat_num)=(\d+)(&hd)=(\d+)/
        pat15 = /^(video_clip&action)=(\d+)/
        pat16 = /^(video_clip&action)=(\d+)&(video_clips_singer_bar)/
        pat17 = /^(video_clip&action)=(\d+)&(video_clips_by_singer)&singer=[\s\S]*/
        pat18 = /^(vod&s)=[А-Я\s\S]*(&cat_num)=(\d+)(&hd)=(\d+)/
        pat19 = /^(vod&vclub_by_top&cat_num)=(\d+)(&hd)=(\d+)/
        pat20 = /^(recipes_by_cat&s)=[А-Я\s\S]*/
        /*if (type != 'itv&action=all' && type.replace(pat, "$1") != 'epg'){
            l = 0
            cur_type = type
            cur_page = page
            m = menu.indexOf(type)
        }*/

        /*if(type == 'dir'){
            read_dir(page)
            return
        }
        
        if (type == 'itv' && manual_itv_set){
            _debug('manual_itv_set: '+manual_itv_set)
            
            total_items = channels.length;
            max_page_items = 4
            
            total_pages = Math.ceil(total_items/max_page_items)
            if (cur_page<total_pages){
                cur_page_items = max_page_items
            }
            else {
                cur_page_items = total_items-(total_pages-1)*max_page_items
            }
            t1_id = 0
        	return
        }*/

        var req = new Subsys_JsHttpRequest_Js()
        
        req.onreadystatechange = function() {
            if (req.readyState == 4) {
                if (req.responseJS) {
                    
                    if (type == 'itv&action=all'){
                        if (data == 1){
                            fav_channels = req.responseJS.data
                        }else{
                            channels = req.responseJS.data
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if(type == 'vod'){
                        vod_list = req.responseJS.data
                        tmp_video_rows = vod_list
                        total_videos = req.responseJS.total_items
                        total_video_pages = Math.ceil(total_videos/videos_per_page)
                        if(vod_list != null){
                            _debug('vod_list: '+vod_list.toSource())
                            fill_abc_video_list(vod_list)
                        }else{
                            del_abc_video_list()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'itv&action=tv_by_number'){
                        tv_by_num_list = req.responseJS.data
                        
                        if (need_show_tv_by_number_cur_row && parseInt(req.responseJS.selected_item)>0){
                            cur_tv_by_num_page   = req.responseJS.cur_page
                            cur_row_tv_by_number = req.responseJS.selected_item - 1
                        }
                        
                        tmp_tv_by_num_rows = tv_by_num_list
                        total_tv_by_num = req.responseJS.total_items
                        total_tv_by_num_pages = Math.ceil(total_tv_by_num/tv_by_num_per_page)
                        if(tv_by_num_list != null){
                            _debug('tv_by_num_list: '+tv_by_num_list.toSource())
                            fill_tv_by_number(tv_by_num_list)
                            _debug('need_fill_row_after_reload: '+need_fill_row_after_reload)
                            if (need_fill_row_after_reload == 1){
                                fill_fav_ch_after_reload()
                                //need_fill_row_after_reload = 0
                            }
                        }else{
                            del_tv_by_number()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'itv&action=tv_by_channel'){
                        tv_by_ch_list = req.responseJS.data
                        tmp_tv_by_ch_rows = tv_by_ch_list
                        total_tv_by_ch = req.responseJS.total_items
                        total_tv_by_ch_pages = Math.ceil(total_tv_by_ch/tv_by_ch_per_page)
                        if(tv_by_ch_list != null){
                            _debug('tv_by_num_list: '+tv_by_ch_list.toSource())
                            fill_tv_by_channel(tv_by_ch_list)
                        }else{
                            del_tv_by_channel()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat3, "$1") == 'itv&action=tv_by_theme&genre_id'){
                        _debug('doLoad - tv_by_theme')
                        tv_by_theme_list = req.responseJS.data
                        total_tv_by_theme = req.responseJS.total_items
                        total_tv_by_theme_pages = Math.ceil(total_tv_by_theme/tv_by_theme_per_page)
                        if(tv_by_theme_list != null){
                            _debug('tv_by_num_list: '+tv_by_theme_list.toSource())
                            fill_tv_by_theme(tv_by_theme_list)
                        }else{
                            fill_tv_by_theme()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    //if (type.replace(pat4, "$1") == 'vod&action' && type.replace(pat4, "$3") == '&cat_num'){
                    if (type.replace(pat4, "$1") == 'vod&action'){
                        _debug('doLoad - video_club_by_name')
                        vclub_by_name_list = req.responseJS.data
                        total_vclub_by_name = req.responseJS.total_items
                        total_vclub_by_name_pages = Math.ceil(total_vclub_by_name/vclub_by_name_per_page)
                        if(vclub_by_name_list != null){
                            _debug('vclub_by_name_list: '+vclub_by_name_list.toSource())
                            fill_vclub_by_name(vclub_by_name_list)
                        }else{
                            del_vclub_by_name()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat5, "$1") == 'vod&action' && type.replace(pat5, "$3") == '&genre_id'){
                        _debug('doLoad - video_club_by_genre')
                        vclub_by_genre_list = req.responseJS.data
                        total_vclub_by_genre = req.responseJS.total_items
                        total_vclub_by_genre_pages = Math.ceil(total_vclub_by_genre/vclub_by_genre_per_page)
                        if(vclub_by_genre_list != null){
                            _debug('vclub_by_genre_list: '+vclub_by_genre_list.toSource())
                            fill_vclub_by_genre(vclub_by_genre_list)
                        }else{
                            del_vclub_by_genre()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat6, "$1") == 'vod&action' && type.replace(pat6, "$3") == '&year_range'){
                        _debug('doLoad - video_club_by_year')
                        vclub_by_year_list = req.responseJS.data
                        total_vclub_by_year = req.responseJS.total_items
                        total_vclub_by_year_pages = Math.ceil(total_vclub_by_year/vclub_by_year_per_page)
                        if(vclub_by_year_list != null){
                            _debug('vclub_by_genre_list: '+vclub_by_year_list.toSource())
                            fill_vclub_by_year(vclub_by_year_list)
                        }else{
                            del_vclub_by_year()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    //if (type == 'vod&vclub_by_add_time'){
                    if (type.replace(pat14, "$1") == 'vod&vclub_by_add_time&action'){
                        _debug('doLoad - video_club_by_add_time')
                        vclub_by_add_time_list = req.responseJS.data
                        total_vclub_by_add_time = req.responseJS.total_items
                        total_vclub_by_add_time_pages = Math.ceil(total_vclub_by_add_time/vclub_by_add_time_per_page)
                        if(vclub_by_add_time_list != null){
                            _debug('vclub_by_add_time_list: '+vclub_by_add_time_list.toSource())
                            fill_vclub_by_add_time(vclub_by_add_time_list)
                        }else{
                            del_vclub_by_add_time()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    //if (type == 'vod&vclub_by_top'){
                    if (type.replace(pat19, "$1") == 'vod&vclub_by_top&cat_num'){
                        _debug('doLoad - video_club_by_top')
                        vclub_by_top_list = req.responseJS.data
                        total_vclub_by_top = req.responseJS.total_items
                        total_vclub_by_top_pages = Math.ceil(total_vclub_by_top/vclub_by_top_per_page)
                        if(vclub_by_top_list != null){
                            _debug('vclub_by_top_list: '+vclub_by_top_list.toSource())
                            fill_vclub_by_top(vclub_by_top_list)
                        }else{
                            del_vclub_by_top()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat18, "$1") == 'vod&s'){
                        _debug('doLoad - video_club_by_top')
                        vclub_by_search_list = req.responseJS.data
                        total_vclub_by_search = req.responseJS.total_items
                        total_vclub_by_search_pages = Math.ceil(total_vclub_by_search/vclub_by_search_per_page)
                        if(vclub_by_search_list != null){
                            _debug('vclub_by_search_list: '+vclub_by_search_list.toSource())
                            fill_vclub_by_search(vclub_by_search_list)
                        }else{
                            del_vclub_by_search()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'vod&get_vclub_not_ended'){
                        _debug('doLoad - vclub_not_ended')
                        vclub_not_ended_list = req.responseJS.data
                        total_vclub_not_ended = req.responseJS.total_items
                        total_vclub_not_ended_pages = Math.ceil(total_vclub_not_ended/vclub_not_ended_per_page)
                        if(vclub_not_ended_list != null){
                            _debug('vclub_not_ended_list: '+vclub_not_ended_list.toSource())
                            fill_vclub_not_ended(vclub_not_ended_list)
                        }else{
                            del_vclub_not_ended()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'main_city_info'){
                        _debug('doLoad - main_city_info')
                        main_city_info_list = req.responseJS.data
                        total_rows_main_city_info = req.responseJS.total_items
                        total_main_city_info_pages = Math.ceil(total_rows_main_city_info/main_city_info_per_page)
                        if(main_city_info_list != null){
                            _debug('main_city_info_list: '+main_city_info_list.toSource())
                            fill_main_city_info(main_city_info_list)
                        }else{
                            del_main_city_info()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'other_city_info'){
                        _debug('doLoad - other_city_info')
                        other_city_info_list = req.responseJS.data
                        total_rows_other_city_info = req.responseJS.total_items
                        total_other_city_info_pages = Math.ceil(total_rows_other_city_info/other_city_info_per_page)
                        if(other_city_info_list != null){
                            _debug('other_city_info_list: '+other_city_info_list.toSource())
                            fill_other_city_info(other_city_info_list)
                        }else{
                            del_other_city_info()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'help_city_info'){
                        _debug('doLoad - help_city_info')
                        help_city_info_list = req.responseJS.data
                        total_rows_help_city_info = req.responseJS.total_items
                        total_help_city_info_pages = Math.ceil(total_rows_help_city_info/help_city_info_per_page)
                        if(help_city_info_list != null){
                            _debug('help_city_info_list: '+help_city_info_list.toSource())
                            fill_help_city_info(help_city_info_list)
                        }else{
                            del_help_city_info()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'anec'){
                        _debug('doLoad - anec')
                        anec_list = req.responseJS.data
                        total_rows_anec_blog = req.responseJS.total_items
                        total_anec_blog_pages = Math.ceil(total_rows_anec_blog/anec_blog_per_page)
                        if(anec_list != null){
                            _debug('anec_list: '+anec_list.toSource())
                            fill_anec_blog(anec_list)
                        }else{
                            del_anec_blog()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat15, "$1") == 'video_clip&action'){
                        _debug('doLoad - video_clips_by_name')
                        video_clips_by_name_list = req.responseJS.data
                        total_video_clips_by_name = req.responseJS.total_items
                        total_video_clips_by_name_pages = Math.ceil(total_video_clips_by_name/video_clips_by_name_per_page)
                        if(video_clips_by_name_list != null){
                            _debug('video_clips_by_name_list: '+video_clips_by_name_list.toSource())
                            fill_video_clips_by_name(video_clips_by_name_list)
                        }else{
                            del_video_clips_by_name()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat16, "$3") == 'video_clips_singer_bar'){
                        _debug('doLoad - video_clips_singer_bar')
                        video_clips_singer_bar_list = req.responseJS.data
                        total_video_clips_singer_bar = req.responseJS.total_items
                        total_video_clips_singer_bar_pages = Math.ceil(total_video_clips_singer_bar/video_clips_singer_bar_per_page)
                        if(video_clips_singer_bar_list != null){
                            _debug('video_clips_singer_bar_list: '+video_clips_singer_bar_list.toSource())
                            fill_video_clips_singer_bar(video_clips_singer_bar_list)
                        }else{
                            del_video_clips_singer_bar()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat17, "$3") == 'video_clips_by_singer'){
                        _debug('doLoad - video_clips_by_singer')
                        video_clips_by_singer_list = req.responseJS.data
                        total_video_clips_by_singer = req.responseJS.total_items
                        total_video_clips_by_singer_pages = Math.ceil(total_video_clips_by_singer/video_clips_by_singer_per_page)
                        if(video_clips_by_singer_list != null){
                            _debug('video_clips_by_singer_list: '+video_clips_by_singer_list.toSource())
                            fill_video_clips_by_singer(video_clips_by_singer_list)
                        }else{
                            del_video_clips_by_singer()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat9, "$3") == 'karaoke_by_singer'){
                        _debug('doLoad - karaoke_by_singer')
                        karaoke_by_singer_list = req.responseJS.data
                        total_karaoke_by_singer = req.responseJS.total_items
                        total_karaoke_by_singer_pages = Math.ceil(total_karaoke_by_singer/karaoke_by_singer_per_page)
                        if(karaoke_by_singer_list != null){
                            _debug('karaoke_by_singer_list: '+karaoke_by_singer_list.toSource())
                            fill_karaoke_by_singer(karaoke_by_singer_list)
                        }else{
                            del_karaoke_by_singer()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat10, "$3") == 'karaoke_singer_bar'){
                        _debug('doLoad - karaoke_singer_bar')
                        karaoke_singer_bar_list = req.responseJS.data
                        total_karaoke_singer_bar = req.responseJS.total_items
                        total_karaoke_singer_bar_pages = Math.ceil(total_karaoke_singer_bar/karaoke_singer_bar_per_page)
                        if(karaoke_singer_bar_list != null){
                            _debug('karaoke_singer_bar_list: '+karaoke_singer_bar_list.toSource())
                            fill_karaoke_singer_bar(karaoke_singer_bar_list)
                        }else{
                            del_karaoke_singer_bar()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat8, "$3") == 'karaoke_by_name'){
                        _debug('doLoad - karaoke_by_name')
                        karaoke_by_name_list = req.responseJS.data
                        total_karaoke_by_name = req.responseJS.total_items
                        total_karaoke_by_name_pages = Math.ceil(total_karaoke_by_name/karaoke_by_name_per_page)
                        if(karaoke_by_name_list != null){
                            _debug('karaoke_by_name_list: '+karaoke_by_name_list.toSource())
                            fill_karaoke_by_name(karaoke_by_name_list)
                        }else{
                            del_karaoke_by_name()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    if (type.replace(pat11, "$3") == 'audio_club_by_name'){
                        _debug('doLoad - audio_club_by_name')
                        audio_club_by_name_list = req.responseJS.data
                        total_audio_club_by_name = req.responseJS.total_items
                        total_audio_club_by_name_pages = Math.ceil(total_audio_club_by_name/audio_club_by_name_per_page)
                        if(audio_club_by_name_list != null){
                            _debug('audio_club_by_name_list: '+audio_club_by_name_list.toSource())
                            fill_audio_club_by_name(audio_club_by_name_list)
                        }else{
                            del_audio_club_by_name()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat12, "$3") == 'audio_club_singer_bar'){
                        _debug('doLoad - audio_club_singer_bar')
                        audio_club_singer_bar_list = req.responseJS.data
                        total_audio_club_singer_bar = req.responseJS.total_items
                        total_audio_club_singer_bar_pages = Math.ceil(total_audio_club_singer_bar/audio_club_singer_bar_per_page)
                        if(audio_club_singer_bar_list != null){
                            _debug('audio_club_singer_bar_list: '+audio_club_singer_bar_list.toSource())
                            fill_audio_club_singer_bar(audio_club_singer_bar_list)
                        }else{
                            del_audio_club_singer_bar()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat13, "$3") == 'audio_club_by_singer'){
                        _debug('doLoad - audio_club_by_singer')
                        audio_club_by_singer_list = req.responseJS.data
                        total_audio_club_by_singer = req.responseJS.total_items
                        total_audio_club_by_singer_pages = Math.ceil(total_audio_club_by_singer/audio_club_by_singer_per_page)
                        if(audio_club_by_singer_list != null){
                            _debug('audio_club_by_singer_list: '+audio_club_by_singer_list.toSource())
                            fill_audio_club_by_singer(audio_club_by_singer_list)
                        }else{
                            del_audio_club_by_singer()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'audio_club&playlist'){
                        _debug('doLoad - audio_club_playlist')
                        audio_club_playlist_list = req.responseJS.data
                        total_audio_club_playlist = req.responseJS.total_items
                        total_audio_club_playlist_pages = Math.ceil(total_audio_club_playlist/audio_club_playlist_per_page)
                        if(audio_club_playlist_list != null){
                            _debug('audio_club_playlist_list: '+audio_club_playlist_list.toSource())
                            fill_audio_club_playlist(audio_club_playlist_list)
                        }else{
                            del_audio_club_playlist()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'radio&radio_by_name'){
                        _debug('doLoad - radio_by_name')
                        radio_by_name_list = req.responseJS.data
                        total_radio_by_name = req.responseJS.total_items
                        total_radio_by_name_pages = Math.ceil(total_radio_by_name/radio_by_name_per_page)
                        if(radio_by_name_list != null){
                            _debug('radio_by_name_list: '+radio_by_name_list.toSource())
                            fill_radio_by_name(radio_by_name_list)
                        }else{
                            del_radio_by_name()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'start_rec'){
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'stop_rec'){
                        _debug('doLoad: stop_rec')
                        if (my_video_records_on == 1){
                            load_my_video_records(cur_my_video_records_page)
                        }
                        _debug(req.responseText)
                        return
                    }
                    if (type == 'del_my_video_rec'){
                        _debug('doLoad: del_my_video_rec')
                        if (my_video_records_on == 1){
                            load_my_video_records(cur_my_video_records_page)
                        }
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'get_anec_bookmark_page'){
                        _debug('doLoad: get_anec_bookmark_page')
                        anec_bookmark_page = parseInt(req.responseJS.data)
                        _debug('anec_bookmark_page: '+anec_bookmark_page)
                        if (anec_bookmark_page > 0){
                            document.getElementById('anec_blue_btn').style.display = ''
                            document.getElementById('anec_bookmark_page').innerHTML = anec_bookmark_page
                            if (need_open_bookmark_page){
                                load_anec_bookmark()
                            }
                        }else{
                            document.getElementById('anec_blue_btn').style.display = 'none'
                        }
                        need_open_bookmark_page = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'make_anec_bookmark'){
                        _debug('doLoad: make_anec_bookmark')
                        get_anec_bookmark_page();
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'vote_anec'){
                        _debug('doLoad: vote_anec')
                        last_vote_anec_id = parseInt(req.responseJS.data)
                        _debug('last_vote_anec_id: '+last_vote_anec_id)
                        _debug('cur_anec_id: '+cur_anec_id)
                        _debug('vote_anec: '+document.getElementById('anec_rating').innerHTML)
                        if (last_vote_anec_id == cur_anec_id){
                            document.getElementById('anec_green_btn').style.display = 'none'
                            document.getElementById('anec_rating').innerHTML = parseInt(document.getElementById('anec_rating').innerHTML)+1
                        }
                        _debug(req.responseText)
                        return
                    }

                    if (type == 'week'){
                        week_days = req.responseJS.data
                        if(week_days != null){
                            feel_week_days(week_days)
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'get_profile'){
                        if(req.responseJS.data != null){
                            stb.user_init(req.responseJS.data)
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if(type == 'set_parent_password'){
                        parent_password_error_msg(words['pass_saved'])
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if(type == 'set_bright'){
                        video_out_error_msg(words['seting_saved'])
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if(type == 'set_video_out'){
                        video_out_error_msg(words['seting_saved'])
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'vod&action=year_bar'){
                        year_bar = req.responseJS.data
                        if(year_bar != null){
                            total_vclub_year_bar_pages = parseInt(year_bar['total_year_pages'])
                            _debug('total_vclub_year_bar_pages: '+total_vclub_year_bar_pages)
                            feel_vclub_year_bar(year_bar['years'])
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'watchdog'){
                        tmp_watchdog = req.responseJS.data
                        if(tmp_watchdog != null){
                            dog_result(tmp_watchdog)
                        }
                        t1_id = 0
                        if (show_watchdog_debug){
                            _debug(req.responseText)
                        }
                        return
                    }
                    
                    if (type == 'event_confirm'){
                        _debug('event_confirm: '+req.responseJS.data)
                        _debug('event_confirm resp: '+req.responseText)
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'get_id'){
                        /*try{
                            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
                            _debug('reboot!')
                            stb.ExecAction('reboot')
                            _debug('!!reboot!')
                        }catch(e){
                            _debug(e)
                        }*/
                        portal_loading_bar(99)
                        if(req.responseJS.last_id){
                            play_last_ch(req.responseJS.last_id)
                        }else{
                            play_last_ch(0)
                        }
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'fav_itv'){
                        _debug('fav_itv')
                        tmp_fav = req.responseJS.data
                        _debug('typeof(tmp_fav): '+typeof(tmp_fav))
                        if (typeof(tmp_fav) == 'object'){
                            set_fav_itv(req.responseJS.data)
                        }else{
                            fav_channels_ids = new Array()
                            fav_itv_on = 0
                        }
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'save_fav'){
                        _debug('save_fav: "'+data+'"')
                        load_fav_channels()
                        if (save_fav_itv_need_reload){
                            load_tv()
                        }
                        save_fav_itv_need_reload = 0
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'del_vclub_fav'){
                        _debug('del_vclub_fav')
                        load_vclub_fav()
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'all_vclub_genres'){
                        _debug('all_vclub_genres')
                        get_genre_names_from_raw(req.responseJS.data)
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'all_recipe_cats'){
                        _debug('all_recipe_cats')
                        get_recipe_cats_from_raw(req.responseJS.data)
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat20, "$1") == 'recipes_by_cat&s'){
                        _debug('recipes_by_cat')
                        recipes_by_cat_list = req.responseJS.data
                        total_recipes_by_cat = req.responseJS.total_items
                        total_recipes_by_cat_pages = Math.ceil(total_recipes_by_cat/recipes_by_cat_per_page)
                        if(recipes_by_cat_list != null){
                            _debug('recipes_by_cat_list: '+recipes_by_cat_list.toSource())
                            fill_recipes_by_cat(recipes_by_cat_list)
                        }else{
                            del_recipes_by_cat()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'del_recipes_fav'){
                        _debug('del_recipes_fav')
                        load_recipes_by_cat(cur_recipes_by_cat_page)
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'video_records&video_records_by_addtime'){
                        _debug('video_records&video_records_by_addtime')
                        video_records_by_addtime_list = req.responseJS.data
                        total_video_records_by_addtime = req.responseJS.total_items
                        total_video_records_by_addtime_pages = Math.ceil(total_video_records_by_addtime/video_records_by_addtime_per_page)
                        if(video_records_by_addtime_list != null){
                            _debug('video_records_by_addtime_list: '+video_records_by_addtime_list.toSource())
                            fill_video_records_by_addtime(video_records_by_addtime_list)
                        }else{
                            del_video_records_by_addtime()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'my_video_records'){
                        _debug('my_video_records')
                        my_video_records_list = req.responseJS.data
                        total_my_video_records = req.responseJS.total_items
                        
                        total_my_video_records_pages = Math.ceil(total_my_video_records/my_video_records_per_page)
                        if(my_video_records_list != null){
                            _debug('my_video_records_list: '+my_video_records_list.toSource())
                            fill_my_video_records(my_video_records_list)
                        }else{
                            del_my_video_records()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat7, "$1") == 'create_link&action='){
                        _debug('create_link_resp')
                        _debug('req.responseText: '+req.responseText)
                        _debug('req.responseJS.data.error: '+req.responseJS.data['error'])
                        if (req.responseJS.data['error'] == 'limit'){
                            show_warning_message(words['vclub_limit'])
                            return
                        }else if(req.responseJS.data['error'] == 'nothing_to_play'){
                            show_warning_message(words['nothing_to_play'])
                            return
                        }else if(req.responseJS.data['error'] == 'link_fault'){
                            show_warning_message(words['link_fault'])
                            return
                        }else{
                            if (video_club_info_on){
                                show_playing(item_for_vclub_info.name, item_for_vclub_info.id)
                                hide_video_club_info_con_menu()
                                hide_video_club_info()
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_name_on){
                                _debug('vclub_by_name_on_section')
                                show_playing(tmp_vclub_by_name_arr[cur_row_vclub_by_name].name, tmp_vclub_by_name_arr[cur_row_vclub_by_name].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_genre_on){
                                show_playing(tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].name, tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_year_on){
                                show_playing(tmp_vclub_by_year_arr[cur_row_vclub_by_year].name, tmp_vclub_by_year_arr[cur_row_vclub_by_year].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_add_time_on){
                                show_playing(tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].name, tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_top_on){
                                show_playing(tmp_vclub_by_top_arr[cur_row_vclub_by_top].name, tmp_vclub_by_top_arr[cur_row_vclub_by_top].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_by_search_on){
                                show_playing(tmp_vclub_by_search_arr[cur_row_vclub_by_search].name, tmp_vclub_by_search_arr[cur_row_vclub_by_search].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (vclub_not_ended_on){
                                show_playing(tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].name, tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].id)
                                hide_video_club_con_menu()
                                hide_video_club()
                            }else if (karaoke_by_name_on){
                                show_playing(tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].name, tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].id)
                                hide_karaoke_con_menu()
                                hide_karaoke_page()
                            }else if (karaoke_by_singer_on){
                                show_playing(tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].name, tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].id)
                                hide_karaoke_con_menu()
                                hide_karaoke_page()
                            }
                        }
                        
                        link_resp_cmd = req.responseJS.data['cmd']
                        link_resp_id = req.responseJS.data['id']
                        link_resp_storage_id = req.responseJS.data['storage_id']
                        
                        _debug('link_resp_cmd: '+link_resp_cmd)
                        _debug('link_resp_id: '+link_resp_id)
                        
                        cur_playing_time = parseInt(req.responseJS.data['length_s'])
                        my_record_length_s = cur_playing_time
                        
                        _debug('doLoad cur_playing_time: '+cur_playing_time)
                        
                        last_vclub_played_id = link_resp_id
                        last_vclub_played_id_for_vote = link_resp_id
                        _debug('last_vclub_played_id: '+last_vclub_played_id)
                        _debug('create_link: "'+link_resp_cmd+'"')
                        _log('create_link',link_resp_cmd)
                        if (link_resp_cmd){
                            stb.Mount(link_resp_cmd)
                            to_play_now(link_resp_cmd)
                        }else{
                            _log("doLoad create_link responseText",req.responseText)
                        }
                        _debug('prev_vclub_page: '+prev_vclub_page)
                        t1_id = 0
                        //_debug(req.responseText)
                        return
                    }
                    
                    if (type.replace(pat, "$1") == 'epg'){
                        tmp_tv_program_by_channel = req.responseJS.data
                        if (need_tv_program_row_cur_focus && parseInt(req.responseJS.selected_item)>0){
                            cur_tv_prog_page   = req.responseJS.cur_page
                            cur_row_tv_program = req.responseJS.selected_item - 1
                        }
                        total_tv_by_ch = req.responseJS.total_items
                        total_tv_prog_pages = Math.ceil(total_tv_by_ch/tv_by_ch_per_page)
                        
                        if(tmp_tv_program_by_channel != null){
                            fill_program_by_channel(tmp_tv_program_by_channel)
                        }else{
                            del_program_by_channel()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'epg_info'){
                        epg_loader.set_epg(req.responseJS.data)
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'day_weather'){
                        fill_day_weather(req.responseJS.data)
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'horoscope'){
                        fill_common_horoscope(req.responseJS.data)
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'course'){
                        fill_course(req.responseJS.data)
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'set_volume'){
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'stream_error'){
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'get_media_cats'){
                        if (req.responseJS.data != null){
                            media_cats = req.responseJS.data
                        }
                        if (req.responseJS.data2 != null){
                            media_cats_txt = req.responseJS.data2
                        }
                        _debug('media_cats: '+media_cats.toSource())
                        _debug('media_cats_txt: '+media_cats_txt.toSource())
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'mastermind_rating'){
                        _debug('doLoad - mastermind_rating')
                        mastermind_rating_list = req.responseJS.data
                        if (req.responseJS.cur_page > 0){
                            cur_mastermind_rating_page = req.responseJS.cur_page
                        }
                        total_rows_mastermind_rating = req.responseJS.total_items
                        total_mastermind_rating_pages = Math.ceil(total_rows_mastermind_rating/mastermind_rating_per_page)
                        if(mastermind_rating_list != null){
                            _debug('mastermind_rating_list: '+mastermind_rating_list.toSource())
                            fill_mastermind_rating(mastermind_rating_list)
                        }else{
                            del_mastermind_rating()
                        }
                        t1_id = 0
                        _debug(req.responseText)
                        return
                    }
                    
                    if (type == 'vclub_vote'){
                        _debug('doLoad - vclub_vote')
                        vclub_vote_next_step()
                        _debug(req.responseText)
                        return 
                    }
                    
                    if (type == 'preload_images'){
                        _debug('doLoad - preload_images')
                        portal_loading_bar(60)
                        image_cache(req.responseJS.data)
                        _debug(req.responseText)
                        return 
                    }
                    
                    _debug(req.responseText)
                    //Доступные свойства
                    //req.responseJS.total_items - всего элементов
                    //req.responseJS.max_page_items - элементов на странице
                    //req.responseJS.data - полезные данные
                    //req.responseText - отладочная информация  

                    //if (alex_debug){
                    //    _debug(req.responseText)
                    //}               
                   /* if (manual_itv_set){
                        
                        total_items = channels.length;
                        max_page_items = 4
                        
                    }else{
                        _debug(req.responseText)
                        
                            
                    }*/
                   
                    /*total_items = req.responseJS.total_items
                    max_page_items = req.responseJS.max_page_items
                    total_pages = Math.ceil(total_items/max_page_items)
                        
                    _debug('total_pages: '+total_pages+' ;max_page_items: '+max_page_items+' ;cur_page: '+cur_page)
                    
                    if (cur_page<total_pages){
                        cur_page_items = max_page_items
                    }
                    else {
                        cur_page_items = total_items-(total_pages-1)*max_page_items
                    }
                    t1_id = 0*/
                    //_debug(req.responseText)
                }
            }
        }
        if (epg_on){
            req.caching = false
        }
        else{
            req.caching = false
        }

        req.open('GET', 'http://'+stb.serv_ip+stb.serv_path+'load.php?type='+type+'&p='+page, true)
        if (!show_watchdog_debug && type == 'watchdog'){
            
        }else{
            _debug('http://'+stb.serv_ip+stb.serv_path+'load.php?type='+type+'&p='+page)
        }
        
        req.send({data: data})
    }

    function open_url(url){

        _debug(url)

        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        try{
            stb.LoadURL(url)
        }catch(e){
            _debug(e)
        }
    }

    function strip_line(str, num){

        if (str.length>num){
            return str.substring(0, num)+'...'
        }
        else{
            return str
        }
    }
    
    function compareNumbers(a, b)
    {
        return a - b;
    }

    function load_channels(){
        _debug('load_channels()')
        doLoad('itv&action=all',1,0)
    }
    
    function load_fav_channels(){
        _debug('load_fav_channels()')
        doLoad('itv&action=all',1,1)
    }

    function win_focus(){
        window.setTimeout(window.focus, 10)
    }

    function show_epg(){
        
        _debug('c_id 8: '+c_id)
    	if(c_id>3 && c_id<channels.length-3){
    	    chanArray_startIdx = c_id - 3
    	    chanTbl_index = 3
    	}else if(c_id>=channels.length-3){
    	    chanArray_startIdx = channels.length - 7
    	    chanTbl_index = 7-(channels.length - c_id)
    	}else if (c_id<=3){
    	    chanArray_startIdx = 0
    	    chanTbl_index = c_id
    	}
        menuTbl_fill('chan')
        
        epg_on = 1            
        _debug('chanArray_startIdx: '+chanArray_startIdx)
        _debug('chanTbl_index: '+chanTbl_index)
        _debug('index: '+(chanArray_startIdx -(-chanTbl_index)))
        
        to_load_program(array_chan[chanArray_startIdx -(-chanTbl_index)].index)
        document.getElementById('epg_info').innerHTML = ''
        document.getElementById('epg').style.display = ''
        document.getElementById('main').style.display = 'none'
        document.getElementById('epg_ch').selectedIndex = cur_ch
        document.getElementById('epg_ch').focus()

        set_asp_and_pig()

        _debug('show_epg()')
    }

    function set_asp_and_pig(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        set_mode(2)
        _debug('set_asp_and_pig()')
        stb.SetPIG(0, 80, 81, 73)
    }

    function hide_epg(){
        _debug('hide_epg()')
        try {
            stb.SetPIG(1, -1, -1, -1)
        }
        catch(err){
            _debug(err)
        }

        epg_on = 0
        save_fav_channels()
        document.getElementById('epg').style.display = 'none'
        
        for(i=0; i<7; i++){
            document.getElementById('epg_chan_row' + i).bgColor = ''
            _debug('epg_chan_row: ' + i)
        }

        if(!black_on){
            show_black()
        }
        window.setTimeout(function(){set_mode(1)},500)
    }

    function isset_channels(){

        if (typeof(channels) == 'undefined'){
            window.setTimeout(isset_channels,50)
        }
        else{
            _debug('channels exist!')
            
            get_last_id_play()
            
            _debug('isset_channels() end')
            return 1
        }
    }

// *************************************************************************************************
// Объект, который является элементом 2-мерного массива array_chan
function tvChannel(index, name){
   this.index = index
   this.name = name
}
// Объект, который является элементом 3-мерного массива array_prog
function tvProgram(index, name, sel){
   this.index = index
   this.name = name
   this.sel = sel
}
// Объект, который является элементом 2-мерного массива array_list
function tvChanList(index, name){
   this.index = index
   this.name = name
}
function fill_channel_list(){
  _debug('fill_channel_list()')

  for (i=0; i<channels.length; i++){
    array_chan[i] = new tvChannel(channels[i].id, '&nbsp;'+channels[i].id+'. '+channels[i].name)
    array_list[i] = new tvChanList(channels[i].id,'&nbsp;'+ strip_line(channels[i].id+'. '+channels[i].name, 18))
  }
  chanArray_startIdx = 0
  menuTbl_fill('chan')
  
  listArray_startIdx = 0
  menuTbl_fill('list')
  menuTbl_SetFocus('list')

}

// Filling the TABLE of menu (former SELECT) with data from array "array_+type"
// start_index in Array is: type+'Array_startIdx'
// Notes: i - index in Array, n - index in Table
function menuTbl_fill (type) {
  _debug('menuTbl_fill('+type+')')
  var n = 0
  _debug('length: '+eval('array_'+type+'.length'))
  _debug('Array_startIdx: '+eval(type+'Array_startIdx'))
  _debug('Tbl_Size: '+eval(type+'Tbl_Size'))
  for (i=eval(type+'Array_startIdx'); i<eval(type+'Array_startIdx')+eval(type+'Tbl_Size'); i++){
    _debug(typeof(eval('array_'+type+'[i]')))
    if(typeof(eval('array_'+type+'[i]')) != 'undefined'){
        _debug('i: '+i)
        _debug(eval('array_'+type+'[i].name'))
        document.getElementById('epg_' + type + '_row' + n).innerHTML = eval('array_'+type+'[i].name')
        
        if(type == 'chan'){
            if(new_fav_channels_ids.indexOf(array_chan[i].index)>=0){
                document.getElementById('epg_chan_row' + n).style.color = '#00EE00'
            }
            else{
                document.getElementById('epg_chan_row' + n).style.color = '#FFFFFF'
            }
        }
        n++
    }else{
        return
    }
  }
}

function menuTbl_SetFocus(type) {
   _debug(type+'Tbl_index: '+eval(type+'Tbl_index'))
   _debug('menuTbl_SetFocus('+type+')')
   document.getElementById('epg_' + type + '_row' + eval(type+'Tbl_index')).bgColor = 'DarkBlue'
}
function menuTbl_LoseFocus(type) {
   _debug(type+'Tbl_index: '+eval(type+'Tbl_index'))
   _debug('menuTbl_LoseFocus('+type+')')
   document.getElementById('epg_' + type + '_row' + eval(type+'Tbl_index')).bgColor = ''
}
function menuTbl_SetPassive(type) {
   document.getElementById('epg_' + type + '_row' + eval(type+'Tbl_index')).bgColor = '#7D7879'
}
function slider (type) {
   var curr = eval(type+'Array_startIdx') + eval(type+'Tbl_index')        // index of the current item
   if (eval('array_'+type+'.length') > eval(type+'Tbl_Size')) {
      if (curr >= 0 && curr < eval('array_'+type+'.length')){
         offs = Math.floor((curr * eval(type+'_path_len')) / (eval('array_'+type+'.length')-1))
      }
   document.getElementById('slider_'+type).style.top = offs + eval(type+'Top')
   }
}
//==============================================================================================
    function fill_program_list(){
        _debug('fill_program_list()')
        var sel_id = 0
        for (i=0; i<program.length; i++){
            var sel = false
            if (program[i].sel == 1){
                sel = true
                sel_id = i
            }
            array_prog[i] = new tvProgram(program[i].id, strip_line(program[i].cmd+' '+program[i].name, 20), sel)
        }
        
        if(sel_id>3 && sel_id<array_prog.length-3){
    	    progArray_startIdx = sel_id - 3
    	    progTbl_index = 3
    	}else if(sel_id>=array_prog.length-3){
    	    progArray_startIdx = array_prog.length - 7
    	    progTbl_index = 7-(array_prog.length - sel_id)
    	}else if (sel_id<=3){
    	    progArray_startIdx = 0
    	    progTbl_index = sel_id
    	}
        
        _debug('progArray_startIdx: '+progArray_startIdx)
        _debug('progTbl_index: '+progTbl_index)
        _debug('sel_id: '+sel_id)
        
        menuTbl_fill('prog')
        menuTbl_SetPassive('prog')
        slider('prog')
    }
    
    function get_languages(){
        /*netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        x={}
        try{
            stb.GetAugioPID(x)
        }(err){
            _debug(err)
        }
        return x.value*/
        x = '[{pid:114, lang:["rus", "eng"]}, {pid:115, lang:["eng", "fra"]}]';
        xx = eval(x)
        return xx
    }
    
    function fill_language_menu(){
        _debug('fill_language_list()')
        languages = get_languages()
        
        lang_l = 1
        max_lang_l = languages.length
        
        _debug('languages: '+languages)
        table = '<table width="150" bgcolor="#5F4B56">'
        for (i=1; i<=languages.length; i++){
            table += '<tr><td id="lang_'+i+'" style="color:#002277">'+languages[i-1].lang[0]+'</td></tr>'
        }
        table += '</table>'
        _debug('table: '+table)
        document.getElementById('language_table').innerHTML = table
    }
    
    function show_language_menu(){
        _debug('show_language_bar()')
        lang_menu_on = 1
        fill_language_menu()
        document.getElementById('language_menu').style.display = ''
        set_lang_focus(lang_l)
    }
    
    function hide_language_menu(){
        _debug('show_language_bar()')
        lang_menu_on = 0
        document.getElementById('language_menu').style.display = 'none'
    }
    
    function set_lang_focus(l){
        _debug('set_lang_focus()')
        for (i=1; i<=max_lang_l; i++){
            if (i==l){
                document.getElementById('lang_'+i).bgColor = '#A26F87'
            }else{
                document.getElementById('lang_'+i).bgColor = '#5F4B56'
            }
        }
    }
    
	function delete_program_list(){
		array_prog.splice(0)
		for (i=0; i<progTbl_Size; i++){
			document.getElementById('epg_prog_row'+i).innerHTML = '&nbsp;'
		}
		document.getElementById('epg_info').innerHTML = ''
		menuTbl_LoseFocus('prog')
		if (epg_on == 1){
		    menuTbl_SetFocus('chan')
		}
		cur_bur_right = 0
		document.getElementById('slider_prog').style.top = progTop
		return 1
	}

    function show_channel_list(){
        tv_list_on = 1
        var ch_l = document.getElementById('ch_list_opt')
        document.getElementById('ch_list').style.display = ''
        document.getElementById('ch_list_opt').focus()
        ch_l.selectedIndex = cur_ch
        t_hide_ch_list = 0
        t_hide_channel_list()
    }

    function hide_channel_list(){
        tv_list_on = 0
        document.getElementById('ch_list').style.display = 'none'
        t_hide_ch_list = 0
    }
    	
    function t_hide_channel_list(){
    	if (!t_hide_ch_list){
            t_hide_ch_list = window.setTimeout("hide_channel_list()", 5000)
        }
        else{
            window.clearTimeout(t_hide_ch_list)
            t_hide_ch_list = window.setTimeout("hide_channel_list()", 5000)
        }
    }

    function to_show_epg_info(id){
        _debug('to_show_epg_info('+id+')')
        if (!tsi_id){
            tsi_id = window.setTimeout(function(){show_epg_info(id)}, tlp)
        }
        else{
            window.clearTimeout(tsi_id)
            tsi_id = window.setTimeout(function(){show_epg_info(id)}, tlp)
        }
    }

    function show_epg_info(id){
        var epg_info = document.getElementById('epg_info')
        epg_info.innerHTML=''+search_in_ch(array_chan[chanArray_startIdx+chanTbl_index].index)+'<br><br>'+search_in_info(id)
    }

    function search_in_info(id){
        for (i=0; i<program.length; i++){
            if (program[i].id == id){
                return program[i].cmd+' '+program[i].name+'<br><br>'+program[i].desc
            }
        }
    }

    function search_in_ch(id){
        for (i=0; i<channels.length; i++){
            if (channels[i].id == id){
                return channels[i].name
            }
        }
    }
    
    function search_in_desc(id){
        for (i=0; i<channels.length; i++){
            if (channels[i].id == id){
                return channels[i].desc
            }
        }
    }

    function search_in_ch_cmd(id){
        for (i=0; i<channels.length; i++){
            if (channels[i].id == id){
                return channels[i].cmd
            }
        }
    }

    function load_program(ch_id){

        delete_program_list()
        program = undefined

        doLoad('epg&action='+ch_id,1)
        tlp_id = 0
        isset_program()
    }

    function isset_program(){
        if (typeof(program) == 'undefined'){
            window.setTimeout(isset_program,50)
            _debug("program == 'undefined'")
        }
        else{
            fill_program_list()
            return 1
        }
    }

    function to_load_program(ch_id){
        if (!tlp_id){
            tlp_id = window.setTimeout(function(){load_program(ch_id)}, tlp)
            }
        else{
            window.clearTimeout(tlp_id)
            tlp_id = window.setTimeout(function(){load_program(ch_id)}, tlp)
        }
    }

    function create_link(str){
        _debug('create_link: '+str)
        if (!additional_services_on){
            show_warning_message(words['disabled_additional_services'])
        }else{
            _log('create_link()', str)
            if (video_club_on || video_club_info_on){
                if (series_total>0){
                    tmp_series_num = tmp_series_arr[series_cur_num]
                }else{
                    tmp_series_num = 0
                }
            }else{
                tmp_series_num = 0
            }
            
            if (my_video_records_on == 1){
                data_arr = {'cmd' : str, 'cur' : 'my_video_records'}
            }else{
                data_arr = {'cmd' : str, 'series' : tmp_series_num}
            }
            
            _debug('data_arr: '+data_arr.toSource())
            doLoad('create_link&action='+cur_partition, 1, data_arr)
        }
    }
    
    function play(str, t_length){
        
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        if (t_length){
            cur_playing_time = t_length
        }
        else{
            cur_playing_time = 0
        }
        media_type = define_media_type(str)
        _debug('cur_playing_time: '+cur_playing_time)
        
        _debug('play('+str+', '+t_length+')')

        hist_ch.push(str)
        hist_ch.shift()
        
        _debug('hist_ch_idx: '+hist_ch_idx.toSource())
        _debug('hist_f_ch_idx: '+hist_f_ch_idx.toSource())
        
        try{
            if (media_type == 'stream'){
                if (fav_itv_on){
                    hist_f_ch_idx.push(f_ch_idx)
                    hist_f_ch_idx.shift()
                }else{
                    if (channels[ch_idx]){
                        hist_ch_idx.push(ch_idx)
                        hist_ch_idx.shift()
                    }
                }
            }
        }catch(e){
            _debug(e)
        }
        
        _debug('hist_ch_idx: '+hist_ch_idx.toSource())
        _debug('hist_f_ch_idx: '+hist_f_ch_idx.toSource())
        
        if (media_type == 'stream'){
            if (!to_play_id){
                to_play_id = window.setTimeout(function(){play_now(str)}, t_play)
            }
            else{
                window.clearTimeout(to_play_id)
                //to_play_id = 0
                to_play_id = window.setTimeout(function(){play_now(str)}, t_play)
            }
        }else{
            create_link(str)
        }
        tc_id = 0
        _debug('tc_id = 0')
    }
    
    function play_not_to(str, t_length){
        
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        if (t_length){
            cur_playing_time = t_length
        }
        else{
            cur_playing_time = 0
        }
        media_type = define_media_type(str)
        _debug('cur_playing_time: '+cur_playing_time)
        
        _debug('play_not_to('+str+', '+t_length+')')
        //_log('play_not_to()', str, get_current_place())
        //_log('play', str, get_current_place())

        hist_ch.push(str)
        hist_ch.shift()
        
        _debug('hist_ch_idx: '+hist_ch_idx.toSource())
        _debug('hist_f_ch_idx: '+hist_f_ch_idx.toSource())
        
        if (media_type == 'stream'){
            if (fav_itv_on){
                hist_f_ch_idx.push(f_ch_idx)
                hist_f_ch_idx.shift()
            }else{
                if (channels[ch_idx]){
                    hist_ch_idx.push(ch_idx)
                    hist_ch_idx.shift()
                }
            }
        }
        
        _debug('hist_ch_idx: '+hist_ch_idx.toSource())
        _debug('hist_f_ch_idx: '+hist_f_ch_idx.toSource())
        
        play_now(str)
        tc_id = 0
        
        _debug('tc_id = 0')
        /*if (media_type == 'stream'){
            if (fav_itv_on){
                send_last_id(fav_channels[f_ch_idx].number)
            }else{
                if (channels[ch_idx]){
                    send_last_id(channels[ch_idx].number)
                }
            }
        }*/
    }
    
    function to_play_now(str){
        _debug('to_play_now('+str+')')
        if (!to_play_id){
            to_play_id = window.setTimeout(function(){play_now(str)}, t_play)
        }
        else{
            window.clearTimeout(to_play_id)
            to_play_id = window.setTimeout(function(){play_now(str)}, t_play)
        }
    }
    
    function play_now(str){
        _debug('play_now('+str+')')
        //_log('play_now()', str, get_current_place())
        if (media_type == 'stream'){
            cur_place = 'itv'
        }
        player_on = 1
        _log('play', str, get_current_place())
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        try{
            stb.Play(str)
            window.clearTimeout(to_play_id)
            if(epg_on == 1){
                stb.SetPIG(0, 80, 81, 73)
            }
            else{
                stb.SetPIG(1, -1, -1, -1)
            }
            
            start_time = Date.parse(new Date())/1000;
            _debug('start_time: '+start_time)
        }catch(err){
            _debug(err)
        }
        if (media_type == 'stream'){
            if (fav_itv_on){
                //send_last_id(fav_channels[f_ch_idx].number)
                send_last_id(fav_channels[f_ch_idx].id)
            }else{
                if (channels[ch_idx]){
                    //send_last_id(channels[ch_idx].number)
                    send_last_id(channels[ch_idx].id)
                }
            }
        }
    }
    
    function play_audio(str){        
        _debug('play_audio('+str+')')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        media_type = 'file'
        //_log('play_not_to()', str, get_current_place())
        //_log('play', str, get_current_place())
        player_on = 1
        create_link(str)
        start_time = Date.parse(new Date())/1000;
    }
    
    function play_radio(str){        
        _debug('play_radio('+str+')')
        if (!additional_services_on){
            show_warning_message(words['disabled_additional_services'])
        }else{
            media_type = 'stream'
            player_on = 1
            _log('play', str, get_current_place())
            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
            stb.Play('fm '+str)
            start_time = Date.parse(new Date())/1000;
        }
    }
    
    function define_media_type(play_str){
        _debug('define_media_type('+play_str+')')
        //media_types_stream = new Array('rtp', 'rtpmpeg4', 'rtpmpeg4_aac')
        media_types_file   = new Array('mpegps', 'mpegts', 'mp4', 'auto')
        
        type_patt = /(\S+)\s[\S\s]*/
        media_type = play_str.replace(type_patt, "$1")
        if (media_types_file.indexOf(media_type) >= 0){
            media_type = 'file' 
        }else{
            media_type = 'stream' 
        }
        _debug('media_type: '+media_type)
        return media_type
    }
    
    function get_pos_time(){
        //netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        try{
            /*if (browser == 'firefox'){
                x = {}
                stb.GetPosTime(x)
                cur_pos_time = x.value
                
                z = {}
                stb.GetMediaLen(z)
                cur_playing_time = z.value
                
            }else if (browser == 'webkit'){
                cur_pos_time = stb.GetPosTime()
                cur_playing_time = stb.GetMediaLen()
            }*/
            
            cur_pos_time = stb.GetPosTime()
            cur_playing_time = stb.GetMediaLen()
            
            _debug('GetPosTime: '+cur_pos_time)
            _debug('GetMediaLen: '+cur_playing_time)
        }catch(e){
            _debug(e)
        }
    }
    
    function stop(){
        _debug('stop()')
        _log('stop')
        
        last_vclub_pos_time = get_cur_played_time()
        _debug('last_vclub_pos_time: '+last_vclub_pos_time)
        
        total_paused_time = 0
        total_time_seek_sum = 0
        pause_length = 0
        cur_place_num = 0
        
        window.clearTimeout(to_send_played)
        to_send_played = 0
        
        window.clearTimeout(to_stop_my_video)
        to_stop_my_video = 0
        
        window.clearTimeout(t_send_itv_id)
        t_send_itv_id = 0
        
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        try{
            //x = {}
            //stb.GetPosTime(x)
            //last_vclub_pos_time = x.value
            //last_vclub_pos_time = get_cur_played_time()
            //_debug('last_vclub_pos_time: '+last_vclub_pos_time)
            
            stb.Stop()
            stb.Umount()
            //cur_place = ''
            
            window.clearTimeout(to_play_id)
            hide_pause()
            //hide_speed_title()
        }catch(err){
            _debug(err)
        }
        player_on = 0
        _debug('media_type: '+media_type)
        _debug('cur_place: '+cur_place)
        _debug('vclub_play_auto_ended: '+vclub_play_auto_ended)
        if (media_type == 'file' && cur_place == 'vclub' && !vclub_play_auto_ended){
            if (series_total>0){
                tmp_series_num = tmp_series_arr[series_cur_num]
            }else{
                tmp_series_num = 0
            }
            _debug('video_id: '+last_vclub_played_id)
            _debug('tmp_series_num: '+tmp_series_num)
            _debug('last_vclub_pos_time: '+last_vclub_pos_time)
            
            doLoad('vclub_not_ended',0,{video_id: last_vclub_played_id, series: tmp_series_num, end_time: last_vclub_pos_time})
            vclub_play_auto_ended = 0
        }
        _debug('cur_place: '+cur_place)
        
        if (cur_place == 'vclub' && need_show_vclub_vote){
            show_vclub_vote()
        }
        need_show_vclub_vote = 0
        cur_place = ''
    }

    function foo(it){
        doLoad(it, 1)
    }

    function on_focus(it){
        hightlight(it)
        if (!t1_id){
            if(it.id == 'dir'){
                tusb_id = 1
            }
            t1_id = window.setTimeout("foo('"+it.id+"')", timeout)
        }
        else{
            tusb_id = 0
            window.clearTimeout(t1_id)
            t1_id = window.setTimeout("foo('"+it.id+"')", timeout)
        }
    }

    function pageBar(max_page_items, total_items, cur_page){

        var text = words['page']+' '
        var total_pages = Math.ceil(total_items/max_page_items)
        text += cur_page
        text += ' '+words['from']+' ' + total_pages

        return text
    }

    function show_black(){
        _debug('show_black()')
        if(mode_one == 0){
            document.getElementById('black').style.display = ''
            document.getElementById('main').style.display = 'none'
            set_mode(1)
            mode_one=1
        }
    }

    function hide_black(){
        _debug('hide_black()')
        if(mode_one == 1){
            document.getElementById('main').style.display = ''
            document.getElementById('black').style.display = 'none'
            set_mode(2)
            mode_one=0
        }
    }

    function search_in_arr(arr, name){
        for (i=0; i<arr.length; i++){
            if (arr[i].id+'. '+arr[i].name == name){
                c_id = arr[i].id-1
                return i
            }
        }
        return 0
    }

    // Black screen + playing
    function show_playing(ip, id, type){
        
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        _debug('show_playing('+ip+', '+id+')')
     
        var t2 = 4000
        var patter =  /^(\S+)\.(\S+)$/
        
        if (id >= 0){
            c_id = id
            chanTbl_index = id
        }
        
        var ext = ip.replace(patter, "$2")
        ext = ext.toLowerCase()
        
        //if(cur_type != 'aod' && ext != 'mp3' && ext != 'pcm' && ext != 'mpa' && ext != 'aac' && ext != 'ogg' && ext != 'mp3*' && ext != 'pcm*' && ext != 'mpa*' && ext != 'aac*' && ext != 'ogg*'){
        if(type == 'audio'){
            stb.SetDefaultFlicker(1)
        }else{
            show_black()
            stb.SetDefaultFlicker(0)
        }
        
        if(epg_on){
            return 1
        }
        
        show_playing_on = 1
        
        _debug('cur_place: '+cur_place)
        
        if (video_club_on || video_club_info_on){
            if (series_total>0){
                tmp_series_num = tmp_series_arr[series_cur_num]
            }else{
                tmp_series_num = 0
            }
        }else{
            tmp_series_num = 0
        }
        
        if (tmp_series_num>0){
            ip = ip+'  '+tmp_series_num+' серия'
        }
        
        cur_playing_str = ip
        
        if(cur_place == 'vclub'){
            _debug('cur_playing_time: '+cur_playing_time)
            if (cur_playing_time){
                total_time_len = get_seek_bar_time(cur_playing_time)
                /*x = {}
                stb.GetPosTime(x)
                cur_time_len = get_seek_bar_time(x.value)*/
                cur_time_len = get_seek_bar_time(get_cur_played_time())
                
                ip = ip+'<br>'+cur_time_len+' / '+total_time_len;
            }
            
        }
        
        try{
            var id = 0
            if (fav_itv_on){
                id = fav_channels[f_ch_idx].id
            }else{
                id = channels[ch_idx].id
            }
        }catch(e){
            _debug(e)
        }
        
        if (cur_place == 'itv'){
            ip = ip+'<br><span style="font-size:18px;">'+epg_loader.get_epg(id)+'</span>'
        }
        
        //document.getElementById('play_txt').innerHTML = ip
        document.getElementById('play').innerHTML = ip
        document.getElementById('play').style.display = ''
        
        if (!t2_id){
            t2_id = window.setTimeout("hide_playing()", t2)
        }
        else{
            window.clearTimeout(t2_id)
            t2_id = window.setTimeout("hide_playing()", t2)
        }
    }

    function hide_playing(){
        
    	_debug('hide_playing()')
        document.getElementById('play').style.display = 'none'
        //document.getElementById('play_txt').innerHTML = ''
        document.getElementById('play').innerHTML = ''
        show_playing_on = 0
    }

    // Alert
    function _alert(text){
        if (debug == 1){
            document.getElementById('alert_txt').innerHTML = text
            document.getElementById('alert').style.display = ''
            document.getElementById('alert_ok').focus()
        }
    }

    function set_mode(num){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")

        _debug('set_mode('+num+')')

        try{
            if(browser != 'webkit'){
                stb.SetMode(num)
            }
        }catch(err){
            _debug(err)
        }
    }
    
    function t_set_pos(){
        
        _debug('t_set_pos()')
		
        t_sum = cur_time + time_seek_sum
        
        if(t_sum<0){
            t_sum=1
            ss_seek = 0
        }
        if(t_sum>cur_playing_time){
            t_sum=cur_playing_time
            ss_seek = 0
        }
        
        if(cur_playing_time){
            set_seek_button(t_sum)
        }
    }
    
    function set_pos(){
        _debug('set_pos()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")

        if (!cur_playing_time){
            //cur_time = Date.parse(new Date())/1000 - start_time
            //cur_time = get_cur_played_time()
        }
        
        t_sum = cur_time + time_seek_sum
        
        _debug('cur_time: '+cur_time)
        _debug('time_seek_sum: '+time_seek_sum)
        _debug('t_sum: '+t_sum)
        
        total_time_seek_sum = total_time_seek_sum + time_seek_sum

        _debug('total_time_seek_sum: '+total_time_seek_sum)
        
        if(t_sum<0)t_sum=0
        
        if(t_sum>cur_playing_time && cur_playing_time)t_sum=cur_playing_time

        //start_time = Date.parse(new Date())/1000 - t_sum

        cur_time = t_sum
        
        if (my_video_records_on == 1){
            tmp_seek_pos = delta_time_my_video_start+t_sum
        }else{
            tmp_seek_pos = t_sum
        }
        
        _debug('stb.SetPosTime('+t_sum+')')
        
        stb.SetPosTime(tmp_seek_pos)

        _debug('set_pos('+tmp_seek_pos+')')

        time_seek_sum = 0
        t_id_seek = 0
        if(cur_playing_time){
            stb.Continue()
            pause = 0
            hide_seek_bar()
        }
    }
    
    function show_seek_bar(){
        _log('show_seek_bar()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        _debug('show_seek_bar()')
        stb.SetDefaultFlicker(1)

        _debug('cur_pos_time: '+cur_pos_time)
        
        cur_time = get_cur_played_time()
        if(my_video_records_on == 1){
            
            var my_rec_ch_id = parseInt(tmp_my_video_records_arr[cur_row_my_video_records].ch_id)
            //var my_rec_length = parseInt(tmp_my_video_records_arr[cur_row_my_video_records].length_s)

            if (parseInt(tmp_my_video_records_arr[cur_row_my_video_records].ended) == 0){
                
                delta_time_from_start_my_video = Date.parse(new Date())/1000 - arr_time_start_my_video_not_ended[my_rec_ch_id]
                cur_playing_time = my_record_length_s + delta_time_from_start_my_video
                _debug('delta_time_from_start_my_video: '+delta_time_from_start_my_video)
            }
        }
        
        _debug('my_record_length_s: '+my_record_length_s)
        _debug('my_rec_ch_id: '+my_rec_ch_id)
        _debug('arr_time_start_my_video_not_ended[my_rec_ch_id]: '+arr_time_start_my_video_not_ended[my_rec_ch_id])
        
        _debug('cur_playing_time: '+cur_playing_time)
        _debug('start_time: '+start_time)
        _debug('cur_time: '+cur_time)
        
        set_seek_button(cur_time)
        _debug('show_seek_bar pos: '+ cur_time)
        
        document.getElementById('seek_bar').style.display = ''
        seek_bar_on = 1
    }
    
    function get_cur_played_time(){
        _debug('get_cur_played_time()')
        tmp_pause_length = pause_length
        _debug('total_paused_time: '+total_paused_time)
        total_paused_time = tmp_pause_length
        tmp_pause_length = 0
        _debug('pause_length: '+pause_length)
        _debug('total_paused_time: '+total_paused_time)
        _debug('Date.parse(new Date())/1000: '+Date.parse(new Date())/1000)
        _debug('start_time: '+start_time)
        _debug('cur_pos_time: '+cur_pos_time)
        _debug('total_paused_time: '+total_paused_time)
        _debug('total_time_seek_sum: '+total_time_seek_sum)
        
        cur_played_time = Date.parse(new Date())/1000 - start_time + cur_pos_time - total_paused_time + total_time_seek_sum
        cur_played_time_wo_seek = Date.parse(new Date())/1000 - start_time + cur_pos_time - total_paused_time
        return cur_played_time
    }
    
    function hide_seek_bar(){
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        _debug('hide_seek_bar()')
        document.getElementById('seek_bar').style.display = 'none'
        stb.SetDefaultFlicker(0)
        seek_bar_on = 0
        time_seek_sum = 0
    }
    
    function set_seek_button(pos){
        _debug('set_seek_button('+pos+')')

        left = (400*pos)/cur_playing_time + 66
        if (left>473) left = 473
        document.getElementById('seek_button').style.left = left
        
        pos_time = get_seek_bar_time(pos)
        _debug('pos_time: '+pos_time)
        document.getElementById('seek_bar_time').innerHTML = pos_time
        
        _debug('set_seek_button: '+left)
    }
    
    function get_seek_bar_time(time){
        _debug('get_seek_bar_time('+time+')')
        h = Math.floor(time/3600)
        m = Math.floor(time/60 - h*60)
        s = Math.floor(time - m*60 - h*3600)
        if (h<10)h='0'+h
        if (m<10)m='0'+m
        if (s<10)s='0'+s
        
        return h+':'+m+':'+s
    }

    function osd_volume(lev){
        _debug('osd_volume('+lev+')')
        var t = 2500
        document.getElementById('volume').style.display = ''

        if (!t_id){
            t_id = window.setTimeout("hide_volume()", t)
        }
        else{
            window.clearTimeout(t_id)
            t_id = window.setTimeout("hide_volume()", t)
        }
    }

    function hide_volume(){
        _debug('hide_volume()')
        document.getElementById('volume').style.display = 'none'
        save_volume()
        t_id = 0
    }
    
    function init_volume_osd(){
        _debug('init_volume_osd()')
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        stb.SetVolume(volume)
        for(i=1; i<=20; i++){
            tmp_cur_vol = i*5
            if (tmp_cur_vol > volume){
                document.getElementById("vol_"+tmp_cur_vol).bgColor = ""
            }
        }
    }
    
    function save_volume(){
        _debug('save_volume()')
        _debug('volume: '+volume)
        if (volume == NaN){
            volume = 100
        }
        doLoad('set_volume', 0, volume)
    }

    function Dec2Hex(Dec){
        _debug('Dec2Hex('+Dec+')')
        var hexChars = "0123456789ABCDEF"
        var a = Dec % 16
        var b = (Dec - a)/16
        hex = "0x" + hexChars.charAt(b) + hexChars.charAt(a)
        _debug('Hex: '+hex)
        return hex
    }
    
    function innerScript(text){

        _debug('innerScript('+text+')')
        
        var span_r = document.createElement('SCRIPT')
        document.body.insertBefore(span_r, document.body.lastChild)
        span_r.innerHTML = text

    }

    /*function read_dir(page, c_dir){
        
        netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
        
        if(!c_dir && !curr_dir){
            c_dir = home_dir
            _debug('!c_dir')
        }else if(!c_dir && curr_dir){
            c_dir = curr_dir            
        }
        
        curr_dir = c_dir
            
        _debug('read_dir('+page+', '+c_dir+')')
                
        x={}
        
        stb.RDir(c_dir, x)
        
        _debug('c_dir: '+c_dir)
        
        innerScript(x.value)
        isset_var_f_d(page, c_dir)
    }*/

    function isset_var_f_d(page, c_dir){
        
        var pp = page
        if (typeof(files) == 'undefined' || typeof(dirs) == 'undefined'){
            window.setTimeout(isset_var_f_d,10,page,c_dir)
        }
        else{
            show_dir(c_dir,page)
        }
    }

    function show_dir(c_dir, page){
        _debug('show_dir('+c_dir+')') 
        var max_page_i = 6
        var tab = '<table class="menu_table">'
        var j=1
        var c=1
        var cur_p = page
        l = 0
        var test1
        var up_dir = 0
        var pattern = /(\w+)\/(\w+)\/$/

        if (debug){
            document.getElementById('debug').innerHTML = page
        }

        var arr_items = new Array(dirs.length + files.length -2)

        if (c_dir != home_dir){
            var up_dir = 1
        }

        for (i=0; i<dirs.length-1+up_dir; i++){
            if (up_dir){
                arr_items[j] = '<tr id="tr_dir'+c+'"><td><a href="#" class="menu_table_col2" id="dir'+c+'" onclick="read_dir(1,\''+c_dir.replace(pattern, "$1/")+'\')" onblur="normlight(this)" onfocus="hightlight(this)">..</a></td><td></td></tr>'
                up_dir=0
            }
            else {
                arr_items[j] = '<tr id="tr_dir'+c+'"><td><a href="#" class="menu_table_col2" id="dir'+c+'" onclick="read_dir(1,\''+c_dir+dirs[i]+'\')" onblur="normlight(this)" onfocus="hightlight(this)">'+dirs[i]+'</a></td><td></td></tr>'
            }
            j++
            c++
            if (c>max_page_i){
                c=1
            }
        }

        for (i=0; i<files.length-1+up_dir; i++){

            if (up_dir){
                arr_items[j] = '<tr id="tr_dir'+c+'"><td><a href="#" class="menu_table_col2" id="dir'+c+'" onclick="read_dir(1,\''+c_dir.replace(pattern, "$1/")+'\')" onblur="normlight(this)" onfocus="hightlight(this)">..</a></td><td></td></tr>'
                up_dir=0
            }
            else {
                arr_items[j] = '<tr id="tr_dir'+c+'"><td><a href="#" class="menu_table_col2" id="dir'+c+'" onclick="pause=0; show_playing(\''+c_dir+files[i].name+'\'); play(\'auto '+c_dir+files[i].name+'\')" onblur="normlight(this)" onfocus="hightlight(this)">'+files[i].name+'</a></td><td></td></tr>'
            }
            j++
            c++
            if (c>max_page_i){
                c=1
            }
        }

        total_i = arr_items.length-1

        total_pages = Math.ceil(total_i/max_page_i)

        if (cur_p<total_pages){
            cur_page_items = max_page_i
        }
        else {
            cur_page_items = total_i-(total_pages-1)*max_page_i
        }

        var min_items = (cur_p-1)*max_page_i

        if (cur_page<total_pages){
            var max_items = max_page_i
        }
        else {
            var max_items = min_items+total_i-(total_pages-1)*max_page_i
        }

        if (arr_items.length){
            for (i=min_items; i<max_items; i++){
                tab += arr_items[i+1]
            }
        }
        else{
            tab += 'Empty'
        }
        tab += '</table>'

        tab += '<table>'
        tab += '<tr><td class="menu_table_col2">'
        tab += pageBar(max_page_i, total_i, cur_p)
        tab += '</td></tr>'
        tab += '</table>'

        files = undefined
        dirs  = undefined
        
        _debug('rdir_span empty')
        
        isset_tab_dir(tab)
    }
    function isset_tab_dir(tab){

        if (typeof(tab) == 'undefined'){

            window.setTimeout(isset_tab_dir,50)
        }
        else{
            if (tusb_id == 1){
                document.getElementById('result').style.left = x_scale[m]
                document.getElementById('result').innerHTML = tab
                t1_id=0
            }
            return 1
        }
    }
    
    function search_idx_in_ch(id){
        for (i=0; i<channels.length; i++){
            if (channels[i].id == id){
                return i
            }
        }
    }
    
    function search_idx_in_by_num(num){
        for (i=0; i<channels.length; i++){
            if (channels[i].number == num){
                return i
            }
        }
    }
    
    function search_id_in_by_num(num){
        for (i=0; i<channels.length; i++){
            if (channels[i].number == num){
                return channels[i].id
            }
        }
    }
    
    function search_idx_in_fav_by_num(num){
        for (i=0; i<fav_channels.length; i++){
            if (fav_channels[i].number == num){
                return i
            }
        }
    }
    
    function search_idx_in_fav_by_id(id){
        for (i=0; i<fav_channels.length; i++){
            if (fav_channels[i].id == id){
                return i
            }
        }
    }
    
/*  CHANNEL BY NUMBER  */
    
    function show_ch_num(){
        _debug('show_ch_num()')
        ch_by_num_on = 1
        //var ch_num = document.getElementById('ch_num')
        //var num_ = document.getElementById('ch_num_txt')
        document.getElementById('ch_num').style.display = ''
        //num_.value = txt
        //num_.focus()
    }
    
    function hide_ch_num(){
        //var num_ = document.getElementById('ch_num_txt')
        document.getElementById('ch_num').style.display = 'none'
        ch_by_num_on = 0
        //num_.blur()
        
        pause=0
        t_hide_ch_id = 0
        ch_num_in = document.getElementById('ch_num_txt')
        
        ch_num_txt = Math.ceil(ch_num_in.value)
        ch_num_in.value = ''
        
        if (fav_itv_on){
            tmp_ch_idx = search_idx_in_fav_by_num(ch_num_txt)
            _debug('tmp_ch_id: '+tmp_ch_idx)
            
            if (typeof(fav_channels[tmp_ch_idx]) != 'object'){
                tmp_ch_idx = 0
            }
            
            f_ch_idx = tmp_ch_idx
            
            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
            play(''+fav_channels[f_ch_idx].cmd)
        }else{
            tmp_ch_idx = search_idx_in_by_num(ch_num_txt)
            _debug('tmp_ch_id: '+tmp_ch_idx)
            
            if (typeof(channels[tmp_ch_idx]) != 'object'){
                tmp_ch_idx = 0
            }
            
            ch_idx = tmp_ch_idx
            
            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
            play(''+channels[ch_idx].cmd)
        }
    }
    
    function t_hide_ch_num(){
    	if (!t_hide_ch_id){
            t_hide_ch_id = window.setTimeout("hide_ch_num()", 1500)
        }
        else{
            window.clearTimeout(t_hide_ch_id)
            t_hide_ch_id = window.setTimeout("hide_ch_num()", 1500)
        }
    }
    
    function add_ch_num_char(ch){
        _debug('add_ch_num_char('+ch+')')
        if (!ch_by_num_on){
            show_ch_num()
        }
        item_obj = document.getElementById('ch_num_txt')
        item_obj.value = item_obj.value+''+ch
        t_hide_ch_num()
    }
    
    function del_ch_num_char(){
        _debug('del_ch_num_char()')
        item_obj = document.getElementById('ch_num_txt')
        item_obj.value = item_obj.value.substr(0,item_obj.value.length-1)
    }
    
/*    */
    
    function _debug(_t){
      if(alex_debug){
        
        try{
            netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
            stb.Debug(_t)
        }catch(_e){
            _alert(_e+'::'+_t)
        }
      }
    }
    
    function show_mute(){
        _debug('show_mute() t_id='+t_id)
        mute = 1
        window.clearTimeout(t_id)
        hide_volume()
        document.getElementById('mute').style.display = ''
    }
    
    function hide_mute(){
        _debug('hide_mute()')
        _debug('mute: '+mute)
        if(mute == 1){
            mute = 0
            document.getElementById('mute').style.display = 'none'
        }
    }
    
    function show_new_ch_list(){
        _debug('show_new_ch_list()')
        
        page = Math.ceil((c_id-(-1))/4)
        
        _debug('c_id 9: '+c_id)
        _debug('page: '+page)
        
        doLoad('itv',page)
        
        hi_id = (c_id-(-1))- 4*(page-1)
        new_cur_ch_idx = hi_id
        
        _debug('hi_id: '+hi_id)
        for (i=1; i<=4; i++){
            if(i == hi_id){
                hightlight_ch(i)
            }else{
                normlight_ch(i)
            }
        }
        
        document.getElementById('ch_list_new').style.display = ''
        new_tv_list_on = 1
    }
    
    function hide_new_ch_list(){
        _debug('hide_new_ch_list()')
        new_tv_list_on = 0
        document.getElementById('ch_list_new').style.display = 'none'
    }
    
    function t_hide_new_ch_list(){
        _debug('t_hide_new_ch_list()')
        
        if(!t_id_hide_new_ch_list){
            t_id_hide_new_ch_list = window.setTimeout("hide_new_ch_list()", 10000)
        }else{
            window.clearTimeout(t_id_hide_new_ch_list)
            t_id_hide_new_ch_list = window.setTimeout("hide_new_ch_list()", 10000)
        }
    }
    
    function hightlight_ch(id){
        document.getElementById('ch_bar_'+id).style.backgroundImage = 'url(i/scroll2.png)'
    }
    
    function normlight_ch(id){
        document.getElementById('ch_bar_'+id).style.backgroundImage = 'url(i/scroll1.png)'
    }
    
    function send_last_id(id){
        _debug('send_last_id('+id+')')
        if (id >= 0 ){
            doLoad('set_id&id='+id, cur_page)
            to_send_played_itv(id)
        }
    }
    
    function to_send_played_itv(id){
        window.clearTimeout(t_send_itv_id)
        //tmp_id = search_id_in_by_num(num)
        t_send_itv_id =  window.setTimeout(send_played_itv, 1800000, id)
    }
    
    function send_played_itv(id){
        _debug('send_played_itv('+id+')')
        doLoad('played_itv', 1, id)
    }
    
    function get_last_id_play(){
        portal_loading_bar(97)
        doLoad('get_id', 1)
    }
    
    /*function play_last_ch(num){
        _debug('play_last_ch('+num+')')
        if(fav_itv_on){
            f_ch_idx = search_idx_in_fav_by_num(num)
            if (typeof(fav_channels[f_ch_idx]) != 'object'){
                f_ch_idx = 0
            }
            
            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
            chech_rec_ch(fav_channels[f_ch_idx].id)
            play(''+fav_channels[f_ch_idx].cmd)
        }else{
            ch_idx = search_idx_in_by_num(num)
            if (typeof(channels[ch_idx]) != 'object'){
                ch_idx = 0
            }
            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
            chech_rec_ch(channels[ch_idx].id)
            play(''+channels[ch_idx].cmd)
        }
        return
    }*/
    
    function play_last_ch(id){
        _debug('play_last_ch('+id+')')

        hide_portal_loading_bar()
        
        cur_place = 'itv'
        
        if(fav_itv_on){
            f_ch_idx = search_idx_in_fav_by_id(id)
            if (typeof(fav_channels[f_ch_idx]) != 'object'){
                f_ch_idx = 0
            }
            
            show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
            chech_rec_ch(fav_channels[f_ch_idx].id)
            play(''+fav_channels[f_ch_idx].cmd)
        }else{
            ch_idx = search_idx_in_ch(id)
            if (typeof(channels[ch_idx]) != 'object'){
                ch_idx = 0
            }
            show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
            chech_rec_ch(channels[ch_idx].id)
            play(''+channels[ch_idx].cmd)
        }
        return
    }
    
    function show_web_bar(){
        _log('show_web_bar()')
        web_bar_on = 1
        document.getElementById('web_bar').style.display = ''
        document.getElementById('web_bar_tip').style.display = ''
        document.getElementById('web_bar_url').focus()
        _debug('web_bar_url: focus()')
    }
    
    function focus_web_bar(){
        if (document.getElementById('web_bar').style.display == ''){
            document.getElementById('web_bar_url').focus()
            _debug('web_bar_url: focus()')
        }
    }
    
    function hide_web_bar(){
        web_bar_on = 0
        document.getElementById('web_bar_url').blur()
        document.getElementById('web_bar_url').value = ''
        document.getElementById('web_bar').style.display = 'none'
        document.getElementById('web_bar_tip').style.display = 'none'
        /*if(kbd_On == 1){
            keyb_Off()
        }*/
    }
    
    function open_browser(){
        tmp_url = document.getElementById('web_bar_url').value
        _log('open_browser()', tmp_url)
        //document.getElementById('web_bar_url').blur();
        //hide_web_bar()
        result = ''
        tmp_url_1 = 'http://www.google.com.ua/search?hl=ru&q='+tmp_url+'&btnI=%D0%9C%D0%BD%D0%B5+%D0%BF%D0%BE%D0%B2%D0%B5%D0%B7%D1%91%D1%82%21&meta='
        //tmp_url_1 = tmp_url
        document.getElementById('web_bar_url').value = ''
        open_url(tmp_url_1)
    }
    
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - KEYBOARD
    function buildTbl_3x3(i,j)
      {
        table += '<table class="tbl_3x3" align="center" cellspacing="0" cellpadding="0" border="2" bordercolor="LightSkyBlue">'
        for(k=0; k<3; k++)
        {
          table += '<tr>'
          for(l=0; l<3; l++)
          {
            table += '<td width=30 align="center" id='+i+j+k+l+'>'
            table += symbols[N]
            N++
            table += '</td>'
          }
          table += '</tr>'
        }
        table += '</table>'
      }
    
    function buildKeyboardTbl()
      { //
        N = 0
        table += '<table class="tbl_keyboard" cellspacing="0" cellpadding="0">'
        for(i=0; i<3; i++)
        {
          table += '<tr>'
          for(j=0; j<3; j++)
          {
            table += '<td id='+i+j+'>'
            buildTbl_3x3(i,j)
            table += '</td>'
          }
          table += '</tr>'
        }
        table += '</table>'
        document.getElementById('div_keyboard').innerHTML = table
      }
    
    function deleteKeyboardTbl()
      {
        document.getElementById('div_keyboard').innerHTML = ''
    //    document.getElementById('kbd_res').innerHTML = ''
        table = ''
        result= ''
        currH = ''
        currL = ''
        phase = 0
      }
    
    function takeSymbol()
      {
        document.getElementById(currH).bgColor = ''
        document.getElementById(currL).bgColor = ''
        symb = document.getElementById(currL).innerHTML
        //symb = symb_Pyc[4]
        //symb = "?"
        //symb = symb_Eng[4]
        _debug('symb: "'+symb+'"')
        if(symb == 'BS'){
          symb = ''
          result = result.substring(0, result.length-1)
        }
        else if(symb == 'Pyc'){
          symb = ''
          symbols = symb_Pyc
          document.getElementById('kbd').style.display = 'none'
          table = ''
          currH = ''
          currL = ''
          phase = 0
          keyb_On()
        }
        else if(symb == 'Eng'){
          symb = ''
          symbols = symb_Eng
          document.getElementById('kbd').style.display = 'none'
          table = ''
          currH = ''
          currL = ''
          phase = 0
          keyb_On()
        }
        else{
          // Проверка длины ввода
          max_len = 50          // maxName
          if(result.length < max_len){
            result += symb
          }
        }
        //document.getElementById('Input').value = result
        document.getElementById('web_bar_url').value = result
        //document.getElementById('web_bar_url').value = symb_Pyc[4]
        _debug('currH: '+currH)
        _debug('currL: '+currL)
        _debug('result: '+result)
        currH = ''
        currL = ''
      }
    
    function kbdDigitProc(n)
      {
        if(!phase){
          phase = 1
          currH = n
          document.getElementById(currH).bgColor = 'LightSkyBlue'
        }
        else{
          phase = 0
          document.getElementById(currH).bgColor = ''
          currL = currH + n
          document.getElementById(currL).bgColor = 'LightSkyBlue'
          window.setTimeout(takeSymbol,150)
        }
      }
    
    function keyb_On()
      {
        kbd_On = 1
        buildKeyboardTbl()
        document.getElementById('kbd').style.display = ''
        //document.getElementById('kbd_res').style.display = ''
        //document.getElementById('btn_blue').innerHTML = '&nbsp;ВЫКЛ.клавиатуру'
        document.getElementById('Input').value = '|'
        document.getElementById('web_bar_url').blur()
        document.getElementById('web_bar_url').readonly = true
        // здесь мы просто переводим фокус на "пустое" место:
        //document.getElementById('chanNumber').focus()
      }
    
    function keyb_Off()
      {
        if(kbd_On){
          kbd_On = 0
          deleteKeyboardTbl()
          document.getElementById('kbd').style.display = 'none'
          document.getElementById('web_bar_url').focus()
          document.getElementById('web_bar_url').readonly = false
        }
      }
    // - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - /KEYBOARD
    function test_c(e){
        _debug('TEST!')
        _debug('key: '+e.keyCode)
    }

/* 2D MENU */
function shift_2d_menu(shift_row, shift_col){
    _debug('shift_2d_menu('+shift_row+', '+shift_col+')')
    prev_menu_row = cur_menu_row
    prev_menu_col = cur_menu_col
    if(shift_row != 0){
        if(shift_row > 0){
            if(shift_row + cur_menu_row > 2){
                cur_menu_row = 0
            }else{
                cur_menu_row++
            }
        }else if(shift_row < 0){
            if(shift_row + cur_menu_row < 0){
                cur_menu_row = 2
            }else{
                cur_menu_row --
            }
        }
    }else if (shift_col != 0){
        if(shift_col > 0){
            if(shift_col + cur_menu_col > 2){
                cur_menu_col = 0
            }else{
                cur_menu_col++
            }
        }else if(shift_col < 0){
            if(shift_col + cur_menu_col < 0){
                cur_menu_col = 2
            }else{
                cur_menu_col --
            }
        }
    }
    cur_punct=cur_menu_row*3+cur_menu_col
    _debug(cur_punct)
    if(eval(curr_menu)[cur_punct] != 'dummy'){
        set_active_punct()
    }else{
        cur_menu_row = prev_menu_row
        cur_menu_col = prev_menu_col
    }
    set_active_punct()
}

function set_active_punct(){
    set_passive_punct()
    document.getElementById('menu_'+cur_menu_row+'_'+cur_menu_col).bgColor = "Red"
}

function set_passive_punct(){
    document.getElementById('menu_'+prev_menu_row+'_'+prev_menu_col).bgColor = ""
}

function build_2d_menu(menu_name, menu_idx){
    if (typeof(eval(menu_name)) == 'object'){
        for(punct = 0; punct < eval(menu_name).length; punct++){
            menu_row = Math.floor(punct/3)
            menu_col = punct%3
            if (eval(menu_name)[punct] != 'dummy'){
                document.getElementById('menu_img_'+menu_row+'_'+menu_col).src = 'i/'+curr_menu+'_button'+menu_row+'-'+menu_col+'a_'+lang+'.jpg'
            }
            prev_menu = curr_menu
            curr_menu = menu_name
            curr_menu_idx = menu_idx
            prev_menu_row = cur_menu_row
            prev_menu_col = cur_menu_col
            cur_menu_row = 1
            cur_menu_col = 1
        }
    }else if(typeof(eval(menu_name)) == 'string' && eval(menu_name) != 'dummy'){
        eval(eval(menu_name))
    }
    
    set_active_punct()
}


function show_menu(){
    _debug('show_menu()')
    _log('show_menu()')
    build_2d_menu('main_menu', 0)
    document.getElementById('d_menu').style.display = ''
    start_slide()
    menu_on = 1
    stb.menu_clock.start()
    
    set_cur_weather(cur_weather)
}

function hide_menu(){
    _debug('hide_menu()')
    document.getElementById('menu_img_'+cur_menu_row+'_'+cur_menu_col).src = 'i/1x1.gif'
    stop_all_slide()
    stop_prev_slide()
    document.getElementById('d_menu').style.display = 'none'
    menu_on = 0
    stb.menu_clock.stop()
    curr_menu_idx = 0
    cur_menu_row = 1
    cur_menu_col = 1
}

/* SLIDE MENU */
function start_slide(){
    stop_prev_slide()
    //for gif animation
    document.getElementById('menu_img_'+cur_menu_row+'_'+cur_menu_col).src = 'i/'+curr_menu+'_button'+cur_menu_row+'-'+cur_menu_col+'b_'+lang+'.jpg'
}

function stop_prev_slide(){
    document.getElementById('menu_img_'+prev_menu_row+'_'+prev_menu_col).src = 'i/'+curr_menu+'_button'+prev_menu_row+'-'+prev_menu_col+'a_'+lang+'.jpg'
}

function stop_slide(){
    window.clearInterval(slide_timer)
    window.clearTimeout(restart_timer)
}

function stop_all_slide(){
    window.clearInterval(slide_timer)
    window.clearTimeout(restart_timer)
    img_idx = 0
}

function set_menu_slide(img_letter_in){
    document.getElementById('menu_img_'+cur_menu_row+'_'+cur_menu_col).src = 'i/'+curr_menu+'_button'+cur_menu_row+'-'+cur_menu_col+img_letter_in+'.png'
}

function slide_img(){
    set_menu_slide(img_src[img_idx])
    img_idx ++
}

function default_playing(){
    _debug('default_playing()')
    _debug('ch_idx: '+ch_idx)
    _debug('typeof: '+typeof(channels[ch_idx]))
    cur_place = 'itv'
    if (fav_itv_on){
        if(typeof(fav_channels[f_ch_idx]) != 'object'){
            f_ch_idx = 0
        }
        show_playing(fav_channels[f_ch_idx].number + '. ' + fav_channels[f_ch_idx].name, f_ch_idx)
        chech_rec_ch(fav_channels[f_ch_idx].id)
        play(''+fav_channels[f_ch_idx].cmd)
    }else{
        if(typeof(channels[ch_idx]) != 'object'){
            ch_idx = 0
        }
        show_playing(channels[ch_idx].number + '. ' + channels[ch_idx].name, ch_idx)
        chech_rec_ch(channels[ch_idx].id)
        play(''+channels[ch_idx].cmd)
    }
}
/*
function set_speed(speed){
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    _debug('set_speed('+speed+')')
    
    try{
        stb.SetSpeed(speed)
        if (speed != 1){
            show_speed_title()
        }else{
            hide_speed_title()
        }
    }catch(err){
        _debug(err)
    }
}

function show_speed_title(){
    _debug('show_speed_title()')
    document.getElementById('speed_title').style.display = ''
    //document.getElementById('speed_title').innerHTML = speed
    document.getElementById('speed_title').innerHTML = speed_arr[speed]
}

function hide_speed_title(){
    _debug('hide_speed_title()')
    document.getElementById('speed_title').style.display = 'none'
    document.getElementById('speed_title').innerHTML = ''
}
*/
function show_pause(){
    _debug('show_pause()')
    document.getElementById('speed_title').style.display = ''
    document.getElementById('speed_title').innerHTML = '||'
}

function hide_pause(){
    _debug('hide_pause()')
    document.getElementById('speed_title').style.display = 'none'
    document.getElementById('speed_title').innerHTML = ''
}

/* TV PAGE */
function show_tv_page(){
    _debug('show_tv_page()')
    _log('show_menu()')
    document.getElementById('tv_page').style.display = ''
    tv_page_on = 1
    
    _debug('prev_tv_page: '+prev_tv_page)
    _debug('tv_by_number_on: '+tv_by_number_on)
    _debug('tv_by_channel_on: '+tv_by_channel_on)
    _debug('tv_by_theme_on: '+tv_by_theme_on)
    
    _debug('fav_itv_on: '+fav_itv_on)
    
    if(fav_itv_on){
        set_active_tv_fav_btn()
    }else{
        set_active_tv_all_btn()
    }
    
    if (tv_by_number_on == 1 && !do_not_tv_by_number){
        need_tv_by_number_row_focus = 1
        need_show_tv_by_number_cur_row = 1
        load_tv_by_number(0)
    }
    if(prev_tv_page == ''){
        show_tv_by_number()
    }
    do_not_tv_by_number = 0
    prev_tv_page = ''
    cur_partition = 'itv'
}

function hide_tv_page(){
    _debug('hide_tv_page()')
    document.getElementById('tv_page').style.display = 'none'
    tv_page_on = 0
    
    if (tv_program_on == 0 && mode_one == 0){
        if (tv_by_number_on == 1){
            hide_tv_by_number()
        }else if (tv_by_channel_on == 1){
            hide_tv_by_channel()
        }else if (tv_by_theme_on == 1){
            hide_tv_by_theme()
        }
    }else{
        prev_tv_page = 'tv_page'
    }
    cur_partition = ''
    
    if (need_save_fav_channels){
        save_fav_itv()
    }
}

function switch_on_tv_page(page_num){
    document.getElementById('tv_punct_'+page_num).className = "active_punct"
}

function switch_off_tv_page(page_num){
    document.getElementById('tv_punct_'+page_num).className = "passive_punct"
}

/* SORT FAV CHANNELS IN TV BY NUMBER*/
function move_fav_ch(move_dir){
    _debug('move_fav_ch('+move_dir+')')
    
    _debug('move_dir: '+move_dir)
    _debug('cur_row_tv_by_number: '+cur_row_tv_by_number)
    _debug('max_tv_by_num_rows: '+max_tv_by_num_rows)
    _debug('cur_tv_by_num_page: '+cur_tv_by_num_page)
    _debug('total_tv_by_num_pages: '+total_tv_by_num_pages)
    _debug('need_fill_row_after_reload: '+need_fill_row_after_reload)
    
    tmp_fav_ch_arr = new Array() 
    if(move_dir > 0){
        if (cur_row_tv_by_number < max_tv_by_num_rows-1){
            tmp_fav_ch_arr = tmp_tv_by_number_arr[cur_row_tv_by_number+1]
            
            next_fav_number = tmp_tv_by_number_arr[cur_row_tv_by_number+1].number
            cur_fav_number = tmp_tv_by_number_arr[cur_row_tv_by_number].number
            
            tmp_tv_by_number_arr[cur_row_tv_by_number].number = next_fav_number
            tmp_tv_by_number_arr[cur_row_tv_by_number+1].number = cur_fav_number
            
            cur_fav_channels_id = tmp_tv_by_number_arr[cur_row_tv_by_number].id
            next_fav_channels_id = tmp_tv_by_number_arr[cur_row_tv_by_number+1].id
                
            cur_fav_channels_idx = fav_channels_ids.indexOf(cur_fav_channels_id)
            next_fav_channels_idx = fav_channels_ids.indexOf(next_fav_channels_id)
            
            if (cur_fav_channels_idx == -1 || next_fav_channels_idx == -1){
                _debug("!!!!!!!!!!!!!!!!!!!!!!!!!!!!-1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
            }
            
            fav_channels_ids[cur_fav_channels_idx] = next_fav_channels_id
            fav_channels_ids[next_fav_channels_idx] = cur_fav_channels_id
            
            _debug('fav_channels_ids: '+fav_channels_ids.toSource())
            
            fill_fav_ch_row(cur_row_tv_by_number+1, tmp_tv_by_number_arr[cur_row_tv_by_number])
            fill_fav_ch_row(cur_row_tv_by_number, tmp_fav_ch_arr)
            
        }else if(cur_tv_by_num_page < total_tv_by_num_pages){
            
            need_fill_row_after_reload = 1
            
            tmp_fav_ch_arr = tmp_tv_by_number_arr[9]
        }
        shift_tv_by_number(1)
    }else if(move_dir < 0){
        if (cur_row_tv_by_number > 0){
            tmp_fav_ch_arr = tmp_tv_by_number_arr[cur_row_tv_by_number-1]
            
            prev_fav_number = tmp_tv_by_number_arr[cur_row_tv_by_number-1].number
            cur_fav_number = tmp_tv_by_number_arr[cur_row_tv_by_number].number
            
            tmp_tv_by_number_arr[cur_row_tv_by_number].number = prev_fav_number
            tmp_tv_by_number_arr[cur_row_tv_by_number-1].number = cur_fav_number
            
            cur_fav_channels_id = tmp_tv_by_number_arr[cur_row_tv_by_number].id
            prev_fav_channels_id = tmp_tv_by_number_arr[cur_row_tv_by_number-1].id
            
            cur_fav_channels_idx = fav_channels_ids.indexOf(cur_fav_channels_id)
            prev_fav_channels_idx = fav_channels_ids.indexOf(prev_fav_channels_id)
            
            if (cur_fav_channels_idx == -1 || prev_fav_channels_idx == -1){
                _debug("!!!!!!!!!!!!!!!!!!!!!!!!!!!!-1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
            }
            
            fav_channels_ids[cur_fav_channels_idx] = prev_fav_channels_id
            fav_channels_ids[prev_fav_channels_idx] = cur_fav_channels_id

            _debug('fav_channels_ids: '+fav_channels_ids.toSource())
            
            fill_fav_ch_row(cur_row_tv_by_number-1, tmp_tv_by_number_arr[cur_row_tv_by_number])
            fill_fav_ch_row(cur_row_tv_by_number, tmp_fav_ch_arr)
        }else if (cur_tv_by_num_page > 1){
            need_fill_row_after_reload = 1
            
            tmp_fav_ch_arr = tmp_tv_by_number_arr[0]
        }
        shift_tv_by_number(-1)
    }
    _debug('need_fill_row_after_reload: '+need_fill_row_after_reload)
    need_save_fav_channels = 1
}

function fill_fav_ch_row(row, arr){
    _debug('fill_fav_ch_row()')
    tmp_tv_by_number_arr[row] = arr
    document.getElementById('num_'+row).innerHTML = arr.number+'.'
    document.getElementById('name_'+row).innerHTML = arr.name
    document.getElementById('theme_'+row).innerHTML = arr.desc
    document.getElementById('my_ch_'+row).innerHTML = arr.my_ch
    document.getElementById('prog_start_'+row).innerHTML = arr.time_start
    document.getElementById('prog_name_'+row).innerHTML = arr.cur_prog
}

function fill_fav_ch_after_reload(){
    _debug('fill_fav_ch_after_reload()')
    _debug('cur_row_tv_by_number: '+cur_row_tv_by_number)
    
    prev_fav_number = tmp_fav_ch_arr.number
    cur_fav_number = tmp_tv_by_number_arr[cur_row_tv_by_number].number
    
    tmp_fav_ch_arr.number = tmp_tv_by_number_arr[cur_row_tv_by_number].number
    
    cur_fav_channels_id = tmp_tv_by_number_arr[cur_row_tv_by_number].id
    prev_fav_channels_id = tmp_fav_ch_arr.id
    
    cur_fav_channels_idx = fav_channels_ids.indexOf(cur_fav_channels_id)
    prev_fav_channels_idx = fav_channels_ids.indexOf(prev_fav_channels_id)
    
    if (cur_fav_channels_idx == -1 || prev_fav_channels_idx == -1){
        _debug("!!!!!!!!!!!!!!!!!!!!!!!!!!!!-1!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")
    }
    
    fav_channels_ids[cur_fav_channels_idx] = prev_fav_channels_id
    fav_channels_ids[prev_fav_channels_idx] = cur_fav_channels_id

    fill_fav_ch_row(cur_row_tv_by_number, tmp_fav_ch_arr)
    
    need_fill_row_after_reload = 0
    save_fav_itv()
}
/**/

/* TV BY NUMBER */
function shift_tv_by_number(shift_row){
    _debug('shift_tv_by_number('+shift_row+')')
    //stb.IgnoreUpdates(true)
    prev_row_tv_by_number = cur_row_tv_by_number
    if(shift_row > 0){
        if(cur_row_tv_by_number < max_tv_by_num_rows-1){
            cur_row_tv_by_number++
            set_active_tv_by_number_row()
        }else{
            shift_tv_by_number_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_tv_by_number > 0){
            cur_row_tv_by_number --
            set_active_tv_by_number_row()
        }else{
            shift_tv_by_number_page(-1)
        }
    }
}

function shift_tv_by_number_page(dir){
    _debug('shift_tv_by_number_page('+dir+')')
   // stb.IgnoreUpdates(true)
    tv_by_number_page_dir = dir
    if (dir > 0){
        if (cur_tv_by_num_page < total_tv_by_num_pages){
            cur_tv_by_num_page++
            need_tv_by_number_row_focus = 1
            set_passive_all_tv_by_number_row()
            load_tv_by_number(cur_tv_by_num_page)
            cur_row_tv_by_number = 0
        }else{
            cur_tv_by_num_page = 1
            need_tv_by_number_row_focus = 1
            set_passive_all_tv_by_number_row()
            load_tv_by_number(cur_tv_by_num_page)
        }
    }else if (dir < 0){
        if (cur_tv_by_num_page > 1){
            cur_tv_by_num_page--
            need_tv_by_number_row_focus = 1
            set_passive_all_tv_by_number_row()
            load_tv_by_number(cur_tv_by_num_page)
            cur_row_tv_by_number = 9
        }else{
            cur_tv_by_num_page = total_tv_by_num_pages
            need_tv_by_number_row_focus = 1
            set_passive_all_tv_by_number_row()
            load_tv_by_number(cur_tv_by_num_page)
        }
    }
    if (need_save_fav_channels){
        save_fav_itv()
    }
}

function set_active_tv_by_number_row(){
    _debug('set_active_tv_by_number_row()')
    _debug('cur_row_tv_by_number: '+cur_row_tv_by_number)
    set_passive_tv_by_number_row()
    r_class_changer('row_', cur_row_tv_by_number, "hover")
    //stb.IgnoreUpdates(false)
}

function set_passive_tv_by_number_row(){
    _debug('set_passive_tv_by_number_row()')
    _debug('prev_row_tv_by_number: '+prev_row_tv_by_number)
    r_class_changer('row_', prev_row_tv_by_number, "unhover")
}

function set_passive_all_tv_by_number_row(){
    _debug('set_passive_tv_by_number_row()')
    r_class_changer('row_', cur_row_tv_by_number, "unhover")
}

function show_tv_by_number_con_menu(){
    _debug('show_tv_by_number_con_menu()')
    
    if (tv_by_number_on){
        tmp_censored  = tmp_tv_by_number_arr[cur_row_tv_by_number].censored
    }else if (tv_by_channel_on){
        tmp_censored  = tmp_tv_by_channel_arr[cur_row_tv_by_channel].censored
    }else if(tv_by_theme_on){
        tmp_censored  = tmp_tv_by_theme_arr[cur_row_tv_by_theme].censored
    }
    
    if (tmp_censored == 1){
        show_password_input('parent_password', "n_show_tv_by_number_con_menu()")
        dont_hide_con_alpha_layer = 1
    }else{
        n_show_tv_by_number_con_menu()
    }
}

function n_show_tv_by_number_con_menu(){
    _debug('n_show_tv_by_number_con_menu()')
    
    new_id = get_cur_itv_id()
    
    if (tv_by_number_on){
        tmp_open  = tmp_tv_by_number_arr[cur_row_tv_by_number].open
    }else if (tv_by_channel_on){
        tmp_open  = tmp_tv_by_channel_arr[cur_row_tv_by_channel].open
    }else if(tv_by_theme_on){
        tmp_open  = tmp_tv_by_theme_arr[cur_row_tv_by_theme].open
    }
    
    if (parseInt(tmp_open) == 1){
        document.getElementById('con_menu_row_0').className = 'black_row'
        //document.getElementById('con_menu_row_3').className = 'grey_row'
    }else{
        document.getElementById('con_menu_row_0').className = 'grey_row'
        //document.getElementById('con_menu_row_3').className = 'black_row'
    }
    
    try{
        fav_idx = fav_channels_ids.indexOf(new_id)
        _debug('fav_idx: '+fav_idx)
    }catch(e){
        _debug('error! fav_channels_ids')
        _debug('fav_channels_ids: '+fav_channels_ids.toSource())
    }
    
    if (fav_itv_on){
        document.getElementById('con_menu_row_2').className = 'black_row'
        document.getElementById('con_menu_row_2').innerHTML = words['del_from_fav']
    }else{
        document.getElementById('con_menu_row_2').innerHTML = words['add_to_fav']
        if (fav_idx < 0){
            document.getElementById('con_menu_row_2').className = 'black_row'
        }else{
            document.getElementById('con_menu_row_2').className = 'grey_row'
        }
    }

    document.getElementById('tv_by_number_con_menu').style.display = ''
    tv_by_number_con_menu = 1
    set_active_tv_by_number_con_menu_row()
    show_con_alpha_layer()
}

function hide_tv_by_number_con_menu(){
    _debug('hide_tv_by_number_con_menu()')
    if (tv_by_number_con_menu){
        document.getElementById('tv_by_number_con_menu').style.display = 'none'
        tv_by_number_con_menu = 0
        prev_row_tv_by_number_con_menu = cur_row_tv_by_number_con_menu
        set_passive_tv_by_number_con_menu_row()
        set_active_tv_by_number_row()
        prev_row_tv_by_number_con_menu = 1
        cur_row_tv_by_number_con_menu = 0
        hide_con_alpha_layer()
    }
}

function shift_tv_by_number_con_menu(shift_row){
    _debug('shift_tv_by_number_con_menu('+shift_row+')')
    prev_row_tv_by_number_con_menu = cur_row_tv_by_number_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_tv_by_number_con_menu > total_rows_tv_by_number_con_menu-1){
            cur_row_tv_by_number_con_menu = 0
        }else{
            cur_row_tv_by_number_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_tv_by_number_con_menu < 0){
            cur_row_tv_by_number_con_menu = total_rows_tv_by_number_con_menu-1
        }else{
            cur_row_tv_by_number_con_menu --
        }
    }
    set_active_tv_by_number_con_menu_row()
}

function set_active_tv_by_number_con_menu_row(){
    _debug('set_active_tv_by_number_con_menu_row()')
    set_passive_tv_by_number_con_menu_row()
    class_changer('con_menu_row_', cur_row_tv_by_number_con_menu, "hover")
}

function set_passive_tv_by_number_con_menu_row(){
    _debug('set_passive_tv_by_number_con_menu_row()')
    class_changer('con_menu_row_', prev_row_tv_by_number_con_menu, "unhover")
}

function dummy(txt){
    _debug('dummy()')
    _log('dummy()', txt)
    show_under_construction()
}

function call_con_menu_tv_by_number_func(){
    _debug('call_con_menu_tv_by_number_func(): '+(cur_row_tv_by_number_con_menu))    
    
    //if (func_tv_by_number[cur_row_tv_by_number_con_menu] == 'start_play_tv_by_number();hide_tv_page()' || func_tv_by_number[cur_row_tv_by_number_con_menu] == 'add_to_fav_itv();hide_tv_by_number_con_menu()'){
    if (func_tv_by_number[cur_row_tv_by_number_con_menu] == 'start_play_tv_by_number();hide_tv_page()'){
        if (parseInt(tmp_tv_by_number_arr[cur_row_tv_by_number].open) == 1){
            eval(func_tv_by_number[cur_row_tv_by_number_con_menu])
        }else{
            _debug('not open ch')
            show_warning_message(words['need_subscribe']) 
        }
    }else{
        eval(func_tv_by_number[cur_row_tv_by_number_con_menu])
    }
}

function start_play_tv_by_number(){
    _debug('start_play_tv_by_number()')
    cur_place = 'itv'
    ch_idx = search_idx_in_by_num(tmp_tv_by_number_arr[cur_row_tv_by_number].number)
    f_ch_idx = search_idx_in_fav_by_num(tmp_tv_by_number_arr[cur_row_tv_by_number].number)
    show_playing(tmp_tv_by_number_arr[cur_row_tv_by_number].number + '. ' + tmp_tv_by_number_arr[cur_row_tv_by_number].name, tmp_tv_by_number_arr[cur_row_tv_by_number].id)
    chech_rec_ch(tmp_tv_by_number_arr[cur_row_tv_by_number].id)
    play('' + tmp_tv_by_number_arr[cur_row_tv_by_number].cmd)
    hide_tv_by_number_con_menu()
}

function show_tv_by_number(){
    _debug('show_tv_by_number()')
    _log('show_tv_by_number()')
    document.getElementById('main_bar_tv_by_number').style.display = ''
    document.getElementById('title_bar_tv_by_number').style.display = ''
    switch_on_tv_page(1)
    tv_by_number_on = 1
    tv_by_number_con_menu = 0
    need_tv_by_number_row_focus = 1
    //need_show_tv_by_number_cur_row = 1
    if (need_show_tv_by_number_cur_row){
        load_tv_by_number(0)
    }else{
        load_tv_by_number(1)
    }
    tv_by_number_td_ids = ['num_','td_name_','td_theme_','my_ch_','prog_start_','td_prog_name_']
}

function hide_tv_by_number(){
    _debug('hide_tv_by_number()')
    document.getElementById('main_bar_tv_by_number').style.display = 'none'
    document.getElementById('title_bar_tv_by_number').style.display = 'none'
    switch_off_tv_page(1)
    tv_by_number_on = 0
    prev_row_tv_by_number = cur_row_tv_by_number
    set_passive_tv_by_number_row()
    cur_tv_by_num_page = 1
    cur_row_tv_by_number = 0
    prev_row_tv_by_number = 1
    hide_tv_by_number_con_menu()
    
    if (need_save_fav_channels){
        save_fav_itv()
    }
}

function load_tv_by_number(page){
    doLoad('itv&action=tv_by_number', page, fav_itv_on)
    //preload_tv_by_number(page+1)
}

function preload_tv_by_number(page){
    doLoad('itv&action=tv_by_number&preload', page, fav_itv_on)
}

function fill_tv_by_number(arr){
    tv_page_bar(cur_tv_by_num_page, total_tv_by_num_pages)
    tmp_tv_by_number_arr = arr
    //del_tv_by_number()
    _debug('fill_tv_by_number()')
    arr_length = max_tv_by_num_rows = arr.length
    _debug('max_tv_rows: '+max_tv_by_num_rows)
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        if (parseInt(arr[tv_n_i].open) == 1){
            //document.getElementById('row_'+tv_n_i).className = "black_row"
            
            //r_class_changer('row_', tv_n_i, "hover")

            change_class_by_ids('black_row', document.getElementById('row_'+tv_n_i))
            //document.getElementById('row_'+tv_n_i).className = ""
        }else{
            //document.getElementById('row_'+tv_n_i).className = "grey_row"
            
            //r_class_changer('row_', tv_n_i, "unhover")
            
            //document.getElementById('row_'+tv_n_i).className = ""
            change_class_by_ids('grey_row', document.getElementById('row_'+tv_n_i))
        }
        document.getElementById('num_'+(tv_n_i)).innerHTML = arr[tv_n_i].number+'.'
        document.getElementById('name_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
/*        document.getElementById('theme_'+(tv_n_i)).innerHTML = arr[tv_n_i].desc*/
        document.getElementById('my_ch_'+(tv_n_i)).innerHTML = arr[tv_n_i].my_ch
        /*document.getElementById('prog_start_'+(tv_n_i)).innerHTML = arr[tv_n_i].time_start
        document.getElementById('prog_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].cur_prog*/
        
        document.getElementById('prog_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].time_start+' '+arr[tv_n_i].cur_prog
        
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('num_'+(tv_i)).innerHTML = ''
            document.getElementById('name_'+(tv_i)).innerHTML = ''
/*            document.getElementById('theme_'+(tv_i)).innerHTML = ''*/
            document.getElementById('my_ch_'+(tv_i)).innerHTML = ''
/*            document.getElementById('prog_start_'+(tv_i)).innerHTML = ''*/
            document.getElementById('prog_name_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_tv_by_number_row_focus){
        if (!need_show_tv_by_number_cur_row){
            if (tv_by_number_page_dir < 0){
                cur_row_tv_by_number = max_tv_by_num_rows-1
            }else{
                cur_row_tv_by_number = 0
            }
        }
        set_active_tv_by_number_row()
        need_tv_by_number_row_focus = 0
    }
    need_show_tv_by_number_cur_row = 0
}

function del_tv_by_number(){
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('num_'+(tv_n_i)).innerHTML = ''
        document.getElementById('name_'+(tv_n_i)).innerHTML = ''
        document.getElementById('theme_'+(tv_n_i)).innerHTML = ''
        document.getElementById('my_ch_'+(tv_n_i)).innerHTML = ''
        document.getElementById('prog_start_'+(tv_n_i)).innerHTML = ''
        document.getElementById('prog_name_'+(tv_n_i)).innerHTML = ''
    }
    max_tv_by_num_rows = 0
}

function to_show_tv_by_number_info(){
    if (!t_show_tv_by_number_info_id){
        _debug('!t_show_tv_by_number_info_id')
        t_show_tv_by_number_info_id = window.setTimeout(function(){show_tv_by_number_info()}, 1000)
    }
    else{
        _debug('clearTimeout(t_show_tv_by_number_info_id)')
        window.clearTimeout(t_show_tv_by_number_info_id)
        t_show_tv_by_number_info_id = window.setTimeout(function(){show_tv_by_number_info()}, 1000)
    }
}

function show_tv_by_number_info(){
    _debug('show_tv_by_number_info()')
    tv_by_number_info  = words['channel_d']+': '+tmp_tv_by_number_arr[cur_row_tv_by_number].number+'. '+tmp_tv_by_number_arr[cur_row_tv_by_number].name+'<br>'
    tv_by_number_info += words['theme_d']+': '+tmp_tv_by_number_arr[cur_row_tv_by_number].desc
    document.getElementById('info_tv_by_number_txt').innerHTML = tv_by_number_info
}


/* TV BY CHANNEL */
function shift_tv_by_channel(shift_row){
    _debug('shift_tv_by_channel('+shift_row+')')
    prev_row_tv_by_channel = cur_row_tv_by_channel
    if(shift_row > 0){
        if(cur_row_tv_by_channel < max_tv_by_ch_rows-1){
            cur_row_tv_by_channel++
            set_active_tv_by_channel_row()
        }else{
            shift_tv_by_channel_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_tv_by_channel > 0){
            cur_row_tv_by_channel --
            set_active_tv_by_channel_row()
        }else{
            shift_tv_by_channel_page(-1)
        }
    }
}

function shift_tv_by_channel_page(dir){
     _debug('shift_tv_by_channel_page('+dir+')')
    if (dir > 0){
        if (cur_tv_by_ch_page < total_tv_by_ch_pages){
            cur_tv_by_ch_page++
            need_vclub_by_channel_row_focus = 1
            set_passive_all_tv_by_channel_row()
            load_tv_by_channel(cur_tv_by_ch_page)
            cur_row_tv_by_channel = 0
        }
    }else if (dir < 0){
        if (cur_tv_by_ch_page > 1){
            cur_tv_by_ch_page--
            need_vclub_by_channel_row_focus = 1
            set_passive_all_tv_by_channel_row()
            load_tv_by_channel(cur_tv_by_ch_page)
            cur_row_tv_by_channel = 9
        }
    }
}

function disable_tv_by_ch_row(){
    _debug('disable_tv_by_ch_row()')
    if(cur_row_tv_by_channel > 0 && cur_row_tv_by_channel <= max_tv_by_ch_rows){
        document.getElementById('ch_row_'+cur_row_tv_by_channel).className = 'video_td'
        cur_row_tv_by_channel = 0
        prev_row_tv_by_channel = 1
    }
}

function set_active_tv_by_channel_row(){
    _debug('set_active_tv_by_channel_row()')
    set_passive_tv_by_channel_row()
    r_class_changer('ch_row_', cur_row_tv_by_channel, "hover")
}

function set_passive_tv_by_channel_row(){
    _debug('set_passive_tv_by_channel_row()')
    r_class_changer('ch_row_', prev_row_tv_by_channel, "unhover")
}

function set_passive_all_tv_by_channel_row(){
    _debug('set_passive_tv_by_channel_row()')
    r_class_changer('ch_row_', cur_row_tv_by_channel, "unhover")
}

function hide_tv_by_channel_con_menu(){
    _debug('hide_tv_by_channel_con_menu()')
    document.getElementById('tv_by_number_con_menu').style.display = 'none'
    tv_by_channel_con_menu = 0
    prev_row_tv_by_channel_con_menu = cur_row_tv_by_channel_con_menu
    set_passive_tv_by_channel_con_menu_row()
    set_active_tv_by_channel_row()
    prev_row_tv_by_channel_con_menu = 1
    cur_row_tv_by_channel_con_menu = 0
    hide_con_alpha_layer()
}

function shift_tv_by_channel_con_menu(shift_row){
    _debug('shift_tv_by_channel_con_menu('+shift_row+')')
    prev_row_tv_by_channel_con_menu = cur_row_tv_by_channel_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_tv_by_channel_con_menu > total_rows_tv_by_channel_con_menu-1){
            cur_row_tv_by_channel_con_menu = 0
        }else{
            cur_row_tv_by_channel_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_tv_by_channel_con_menu < 0){
            cur_row_tv_by_channel_con_menu = total_rows_tv_by_channel_con_menu-1
        }else{
            cur_row_tv_by_channel_con_menu --
        }
    }
    set_active_tv_by_channel_con_menu_row()
}

function set_active_tv_by_channel_con_menu_row(){
    _debug('set_active_tv_by_channel_con_menu_row()')
    set_passive_tv_by_channel_con_menu_row()
    class_changer('con_menu_row_', cur_row_tv_by_channel_con_menu, "hover")
}

function set_passive_tv_by_channel_con_menu_row(){
    _debug('set_passive_tv_by_channel_con_menu_row()')
    class_changer('con_menu_row_', prev_row_tv_by_channel_con_menu, "unhover")
}

function call_con_menu_tv_by_channel_func(){
    _debug('call_con_menu_tv_by_channel_func(): '+(cur_row_tv_by_number_con_menu))
    
    if (func_tv_by_channel[cur_row_tv_by_number_con_menu] == 'start_play_tv_by_channel();hide_tv_page()' || func_tv_by_channel[cur_row_tv_by_number_con_menu] == 'add_to_fav_itv();hide_tv_by_number_con_menu()'){
        if (parseInt(tmp_tv_by_channel_arr[cur_row_tv_by_channel].open) == 1){
            eval(func_tv_by_channel[cur_row_tv_by_number_con_menu])
        }else{
            _debug('not open ch')
            show_warning_message(words['need_subscribe']) 
        }
    }else{
        eval(func_tv_by_number[cur_row_tv_by_number_con_menu])
    }
}

function start_play_tv_by_channel(){
    _debug('start_play_tv_by_channel()')
    cur_place = 'itv'
    ch_idx = search_idx_in_by_num(tmp_tv_by_channel_arr[cur_row_tv_by_channel].number)
    f_ch_idx = search_idx_in_fav_by_num(tmp_tv_by_number_arr[cur_row_tv_by_number].number)
    show_playing(tmp_tv_by_channel_arr[cur_row_tv_by_channel].number + '. ' + tmp_tv_by_channel_arr[cur_row_tv_by_channel].name, tmp_tv_by_channel_arr[cur_row_tv_by_channel].id)
    chech_rec_ch(tmp_tv_by_channel_arr[cur_row_tv_by_channel].id)
    play('' + tmp_tv_by_channel_arr[cur_row_tv_by_channel].cmd)
    hide_tv_by_number_con_menu()
}

function show_tv_by_channel(){
    _debug('show_tv_by_channel()')
    _log('show_tv_by_channel()')
    document.getElementById('main_bar_tv_by_channel').style.display = ''
    document.getElementById('title_bar_tv_by_channel').style.display = ''
    switch_on_tv_page(2)
    tv_by_channel_on = 1
    need_vclub_by_channel_row_focus = 1
    load_tv_by_channel(0)
}

function hide_tv_by_channel(){
    _debug('hide_tv_by_channel()')
    document.getElementById('main_bar_tv_by_channel').style.display = 'none'
    document.getElementById('title_bar_tv_by_channel').style.display = 'none'
    switch_off_tv_page(2)
    tv_by_channel_on = 0
    prev_row_tv_by_channel = cur_row_tv_by_channel
    set_passive_tv_by_channel_row()
    cur_tv_by_ch_page = 1
    cur_row_tv_by_channel = 0
    prev_row_tv_by_channel = 1
    hide_tv_by_channel_con_menu()
    hide_tv_by_number_con_menu()
}

function load_tv_by_channel(page){
    doLoad('itv&action=tv_by_channel', page, fav_itv_on)
}

function fill_tv_by_channel(arr){
    tv_page_bar(cur_tv_by_ch_page, total_tv_by_ch_pages)
    tmp_tv_by_channel_arr = arr
    del_tv_by_channel()
    _debug('fill_tv_by_channel()')
    max_tv_by_ch_rows = arr.length
    _debug('max_tv_rows: '+max_tv_by_ch_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        if (parseInt(arr[tv_n_i].open) == 1){
            //document.getElementById('ch_row_'+tv_n_i).className = "black_row"
            change_class_by_ids('black_row', document.getElementById('ch_row_'+tv_n_i))
        }else{
            //document.getElementById('ch_row_'+tv_n_i).className = "grey_row"
            change_class_by_ids('grey_row', document.getElementById('ch_row_'+tv_n_i))
        }
        document.getElementById('ch_num_'+(tv_n_i)).innerHTML = arr[tv_n_i].number+'.'
        document.getElementById('ch_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
/*        document.getElementById('ch_theme_'+(tv_n_i)).innerHTML = arr[tv_n_i].desc*/
        document.getElementById('ch_my_ch_'+(tv_n_i)).innerHTML = arr[tv_n_i].my_ch
/*        document.getElementById('ch_prog_start_'+(tv_n_i)).innerHTML = arr[tv_n_i].time_start*/
        document.getElementById('ch_prog_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].time_start+' '+arr[tv_n_i].cur_prog
    }
    if (need_vclub_by_channel_row_focus){
        set_active_tv_by_channel_row()
        need_vclub_by_channel_row_focus = 0
    }
}

function del_tv_by_channel(){
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('ch_num_'+(tv_n_i)).innerHTML = ''
        document.getElementById('ch_name_'+(tv_n_i)).innerHTML = ''
/*        document.getElementById('ch_theme_'+(tv_n_i)).innerHTML = ''*/
        document.getElementById('ch_my_ch_'+(tv_n_i)).innerHTML = ''
/*        document.getElementById('ch_prog_start_'+(tv_n_i)).innerHTML = ''*/
        document.getElementById('ch_prog_name_'+(tv_n_i)).innerHTML = ''
    }
    max_tv_by_ch_rows = 0
}

/* TV PROGRAM */
function show_program(){
    _debug('show_program()')
    _log('show_program()')
    hide_tv_by_number_con_menu()
    document.getElementById('tv_program').style.display = ''
    tv_program_on = 1
    load_week_days()
    if (tv_by_number_on > 0){
        ch_id_for_program = tmp_tv_by_number_arr[cur_row_tv_by_number].id
        ch_num_for_program = tmp_tv_by_number_arr[cur_row_tv_by_number].number
        ch_name_for_program = tmp_tv_by_number_arr[cur_row_tv_by_number].name
    }else if(tv_by_channel_on > 0){
        ch_id_for_program = tmp_tv_by_channel_arr[cur_row_tv_by_channel].id
        ch_num_for_program = tmp_tv_by_channel_arr[cur_row_tv_by_channel].number
        ch_name_for_program = tmp_tv_by_channel_arr[cur_row_tv_by_channel].name
    }else if(tv_by_theme_on > 0){
        ch_id_for_program = tmp_tv_by_theme_arr[cur_row_tv_by_theme].id
        ch_num_for_program = tmp_tv_by_theme_arr[cur_row_tv_by_theme].number
        ch_name_for_program = tmp_tv_by_theme_arr[cur_row_tv_by_theme].name
    }
    
    tv_program_title(ch_num_for_program+' .'+ch_name_for_program)
    
    _debug('ch_id_for_program: '+ch_id_for_program)
    need_tv_program_row_focus = 1
    load_program_by_channel(0)
    do_not_tv_by_number = 1
    //hide_tv_page()
    //set_active_tv_program_row()
}

function hide_program(){
    _debug('hide_program()')
    document.getElementById('tv_program').style.display = 'none'
    tv_program_on = 0
    prev_row_tv_program = cur_row_tv_program
    set_passive_tv_program_row()
    cur_row_tv_program = 0
    prev_row_tv_program = 1
    set_passive_all_tv_day_row()
    cur_day_bar = 0
    cur_tv_prog_page = 1
    f_mysql = 0
    tmp_week_days = 0
    hide_tv_program_con_menu()
    set_passive_all_tv_program_row()
}

function tv_program_title(str){
    _debug('tv_program_title('+str+')')
    document.getElementById('tv_program_title').innerHTML = str
}

function shift_tv_program(shift_row){
    _debug('shift_tv_program('+shift_row+')')
    prev_row_tv_program = cur_row_tv_program
    if(shift_row > 0){
        if(cur_row_tv_program < max_program_by_channel_rows-1){
            cur_row_tv_program++
            set_active_tv_program_row()
        }else{
            shift_tv_program_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_tv_program > 0){
            cur_row_tv_program --
            set_active_tv_program_row()
        }else{
            shift_tv_program_page(-1)
        }
    }
    //set_active_tv_program_row()
}

function shift_tv_program_page(dir){
     _debug('shift_tv_program_page('+dir+')')
     _debug('total_tv_prog_pages: '+total_tv_prog_pages)
    if (dir > 0){
        if (cur_tv_prog_page < total_tv_prog_pages){
            cur_tv_prog_page++
            need_tv_program_row_focus = 1
            set_passive_all_tv_program_row()
            load_program_by_channel(cur_tv_prog_page)
            cur_row_tv_program = 0
        }
    }else if (dir < 0){
        if (cur_tv_prog_page > 1){
            cur_tv_prog_page--
            need_tv_program_row_focus = 1
            set_passive_all_tv_program_row()
            load_program_by_channel(cur_tv_prog_page)
            cur_row_tv_program = 9
        }
    }
}

function set_active_tv_program_row(){
    _debug('set_active_tv_program_row()')
    _debug('program_row_'+cur_row_tv_program)
    set_passive_tv_program_row()
    r_class_changer('program_row_', cur_row_tv_program, "hover")
}

function set_passive_tv_program_row(){
    _debug('set_passive_tv_program_row()')
    _debug('program_row_'+prev_row_tv_program)
    r_class_changer('program_row_', prev_row_tv_program, "unhover")
}

function set_passive_all_tv_program_row(){
    _debug('set_passive_all_tv_program_row()')
    r_class_changer('program_row_', cur_row_tv_program, "unhover")
}

function show_tv_program_con_menu(){
    _debug('show_tv_program_con_menu()')
    document.getElementById('tv_program_con_menu').style.display = ''
    tv_program_con_menu = 1
    set_active_tv_program_con_menu_row()
    show_con_alpha_layer()
}

function hide_tv_program_con_menu(){
    _debug('hide_tv_program_con_menu()')
    document.getElementById('tv_program_con_menu').style.display = 'none'
    tv_program_con_menu = 0
    prev_row_tv_program_con_menu = cur_row_tv_program_con_menu
    cur_row_tv_program_con_menu = 0
    set_active_tv_program_row()
    hide_con_alpha_layer()
}

function shift_tv_program_con_menu(shift_row){
    _debug('shift_tv_program_con_menu('+shift_row+')')
    prev_row_tv_program_con_menu = cur_row_tv_program_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_tv_program_con_menu > total_rows_tv_program_con_menu-1){
            cur_row_tv_program_con_menu = 0
        }else{
            cur_row_tv_program_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_tv_program_con_menu < 0){
            cur_row_tv_program_con_menu = total_rows_tv_program_con_menu-1
        }else{
            cur_row_tv_program_con_menu --
        }
    }
    set_active_tv_program_con_menu_row()
}

function set_active_tv_program_con_menu_row(){
    _debug('set_active_tv_program_con_menu_row('+cur_row_tv_program_con_menu+')')
    set_passive_tv_program_con_menu_row()
    class_changer('prog_menu_row_', cur_row_tv_program_con_menu, "hover")
}

function set_passive_tv_program_con_menu_row(){
    _debug('set_passive_tv_program_con_menu_row('+prev_row_tv_program_con_menu+')')
    class_changer('prog_menu_row_', prev_row_tv_program_con_menu, "unhover")
}

function call_con_menu_tv_program_func(){
    _debug('call_con_menu_tv_program_func(): '+(cur_row_tv_program_con_menu))
    eval(func_tv_program[cur_row_tv_program_con_menu])
}

function load_program_by_channel(page){
    _debug('load_program_by_channel('+page+')')
    _debug('cur_row_tv_by_number: '+cur_row_tv_by_number)
    _debug('cur_row_tv_by_channel: '+cur_row_tv_by_channel)
    _debug('typeof(tmp_week_days): '+typeof(tmp_week_days))
    if (page == 0){
        need_tv_program_row_cur_focus = 1
    }
    if (typeof(tmp_week_days) == 'object'){
        f_mysql = tmp_week_days[cur_row_tv_day]['f_mysql']
    }else{
        f_mysql = 0
    }
    doLoad('epg&action='+ch_id_for_program, page, f_mysql)
    
    normlight_cur_tv_day_row()
    hightlight_cur_tv_day_row()
}

function fill_program_by_channel(arr){
    _debug('fill_program_by_channel()')
    tv_program_page_bar(cur_tv_prog_page ,total_tv_prog_pages)
    del_program_by_channel()
    max_program_by_channel_rows = arr.length
    tmp_tv_program_by_channel_arr = arr
    _debug('max_program_by_channel_rows: '+max_program_by_channel_rows)
    for(abc_p_i = 0; abc_p_i < arr.length; abc_p_i++){
        
        document.getElementById('program_name_'+(abc_p_i)).innerHTML = arr[abc_p_i].cmd+' '+arr[abc_p_i].name
        //document.getElementById('program_time_'+(abc_p_i)).innerHTML = arr[abc_p_i].cmd
        
        if (arr[abc_p_i].sel == 1){
            //class_changer('program_row_', abc_p_i, "hightlight")
            change_class_by_ids('black_row', document.getElementById('program_row_'+abc_p_i))
        }else{
            //class_changer('program_row_', abc_p_i, "normlight")
            change_class_by_ids('grey_row', document.getElementById('program_row_'+abc_p_i))
        }
    }

    if (need_tv_program_row_focus){
        set_active_tv_program_row()
        need_tv_program_row_focus = 0
    }
    need_tv_program_row_cur_focus = 0
    /*if (f_mysql == 0){
        set_active_tv_program_row()
    }*/
}

function del_program_by_channel(){
    _debug('del_program_by_channel()')
    tv_program_page_bar(cur_tv_prog_page ,total_tv_prog_pages)
    for(tv_c_i = 0; tv_c_i < 10; tv_c_i++){
        //document.getElementById('program_time_'+tv_c_i).innerHTML = '&nbsp'
        document.getElementById('program_name_'+tv_c_i).innerHTML = '&nbsp'
    }
    max_program_by_channel_rows = 0
}
/**/

/* DAY BAR */
function shift_tv_day(shift_row){
    _debug('shift_tv_day('+shift_row+')')
    prev_row_tv_day = cur_row_tv_day
    if(shift_row > 0){
        if(shift_row + cur_row_tv_day > total_rows_tv_day-1){
            cur_row_tv_day = 0
        }else{
            cur_row_tv_day++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_tv_day < 0){
            cur_row_tv_day = total_rows_tv_day-1
        }else{
            cur_row_tv_day --
        }
    }
    set_active_tv_day_row()
}

function set_active_tv_day_row(){
    set_passive_tv_day_row()
    class_changer('day_row_', cur_row_tv_day, "hover")
}

function set_passive_tv_day_row(){
    class_changer('day_row_', prev_row_tv_day, "unhover")
}

function set_passive_all_tv_day_row(){
    class_changer('day_row_', cur_row_tv_day, "unhover")
}

function hightlight_cur_tv_day_row(){
    lighted_row_tv_program_day = cur_row_tv_day
    class_changer('day_row_', lighted_row_tv_program_day, "hightlight")
}

function normlight_cur_tv_day_row(){
    class_changer('day_row_', lighted_row_tv_program_day, "normlight")
}

function load_week_days(){
    doLoad('week')
}

function feel_week_days(week_days){
    tmp_week_days = week_days
    for(day_i = 0; day_i <=6; day_i++){
        document.getElementById('day_num_'+day_i).innerHTML = week_days[day_i].f_human
        if (week_days[day_i].today == 1){
            document.getElementById('day_row_'+day_i).className = "black_row"
            cur_row_tv_day = day_i
            lighted_row_tv_program_day = cur_row_tv_day
        }else{
            document.getElementById('day_row_'+day_i).className = "grey_row"
        }
    }
}

/* TV BY THEME*/
function show_tv_by_theme(){
    _debug('show_tv_by_theme()')
    _log('show_tv_by_theme()')
    document.getElementById('main_bar_tv_by_theme').style.display = ''
    document.getElementById('title_bar_tv_by_theme').style.display = ''
    document.getElementById('theme_bar_tv_by_theme').style.display = ''
    switch_on_tv_page(3)
    tv_by_theme_on = 1
    need_tv_by_theme_row_focus = 1
    load_tv_by_theme(0)
}

function hide_tv_by_theme(){
    _debug('hide_tv_by_theme()')
    document.getElementById('main_bar_tv_by_theme').style.display = 'none'
    document.getElementById('title_bar_tv_by_theme').style.display = 'none'
    document.getElementById('theme_bar_tv_by_theme').style.display = 'none'
    switch_off_tv_page(3)
    tv_by_theme_on = 0
    cur_theme_bar = 0
    prev_row_tv_by_theme = cur_row_tv_by_theme
    set_passive_tv_by_theme_row()
    set_passive_all_tv_theme_row()
    cur_tv_by_theme_page = 1
    cur_row_tv_by_theme = 0
    prev_row_tv_by_theme = 1
    hide_tv_by_number_con_menu()
}

function shift_tv_by_theme(shift_row){
    _debug('shift_tv_by_theme('+shift_row+')')
    prev_row_tv_by_theme = cur_row_tv_by_theme
    if(shift_row > 0){
        if(cur_row_tv_by_theme < max_tv_by_theme_rows-1){
            cur_row_tv_by_theme++
            set_active_tv_by_theme_row()
        }else{
            shift_tv_by_theme_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_tv_by_theme > 0){
            cur_row_tv_by_theme --
            set_active_tv_by_theme_row()
        }else{
            shift_tv_by_theme_page(-1)
        }
    }
}

function shift_tv_by_theme_page(dir){
     _debug('shift_tv_by_theme_page('+dir+')')
    if (dir > 0){
        if (cur_tv_by_theme_page < total_tv_by_theme_pages){
            cur_tv_by_theme_page++
            need_tv_by_theme_row_focus = 1
            set_passive_all_tv_by_theme_row()
            load_tv_by_theme(cur_tv_by_theme_page)
            cur_row_tv_by_theme = 0
        }
    }else if (dir < 0){
        if (cur_tv_by_theme_page > 1){
            cur_tv_by_theme_page--
            need_tv_by_theme_row_focus = 1
            set_passive_all_tv_by_theme_row()
            load_tv_by_theme(cur_tv_by_theme_page)
            cur_row_tv_by_theme = 9
        }
    }
}

function disable_tv_by_theme_row(){
    _debug('disable_tv_by_theme_row()')
    if(cur_row_tv_by_theme > 0 && cur_row_tv_by_theme <= max_tv_by_theme_rows){
        document.getElementById('ch_row_'+cur_row_tv_by_theme).className = 'video_td'
        cur_row_tv_by_theme = 0
        prev_row_tv_by_theme = 1
    }
}

function set_active_tv_by_theme_row(){
    _debug('set_active_tv_by_theme_row()')
    set_passive_tv_by_theme_row()
    r_class_changer('theme_row_', cur_row_tv_by_theme, "hover")
}

function set_passive_tv_by_theme_row(){
    _debug('set_passive_tv_by_theme_row()')
    r_class_changer('theme_row_', prev_row_tv_by_theme, "unhover")
}

function set_passive_all_tv_by_theme_row(){
    _debug('set_passive_all_tv_by_theme_row()')
    r_class_changer('theme_row_', cur_row_tv_by_theme, "unhover")
}

function call_con_menu_tv_by_theme_func(){
    _debug('call_con_menu_tv_by_theme_func(): '+(cur_row_tv_by_number_con_menu))
    
    if (func_tv_by_theme[cur_row_tv_by_number_con_menu] == 'start_play_tv_by_theme();hide_tv_page()' || func_tv_by_theme[cur_row_tv_by_number_con_menu] == 'add_to_fav_itv();hide_tv_by_number_con_menu()'){
        if (parseInt(tmp_tv_by_theme_arr[cur_row_tv_by_theme].open) == 1){
            eval(func_tv_by_theme[cur_row_tv_by_number_con_menu])
        }else{
            _debug('not open ch')
            show_warning_message(words['need_subscribe']) 
        }
    }else{
        eval(func_tv_by_theme[cur_row_tv_by_number_con_menu])
    }
}

function start_play_tv_by_theme(){
    _debug('start_play_tv_by_theme()')
    cur_place = 'itv'
    ch_idx = search_idx_in_by_num(tmp_tv_by_theme_arr[cur_row_tv_by_theme].number)
    f_ch_idx = search_idx_in_fav_by_num(tmp_tv_by_number_arr[cur_row_tv_by_number].number)
    show_playing(tmp_tv_by_theme_arr[cur_row_tv_by_theme].number + '. ' + tmp_tv_by_theme_arr[cur_row_tv_by_theme].name, tmp_tv_by_theme_arr[cur_row_tv_by_theme].id)
    chech_rec_ch(tmp_tv_by_theme_arr[cur_row_tv_by_theme].id)
    play('' + tmp_tv_by_theme_arr[cur_row_tv_by_theme].cmd)
    hide_tv_by_number_con_menu()
}

function load_tv_by_theme(page){
    _debug('load_tv_by_theme('+page+')')
    cur_theme_id = themes_id[cur_row_tv_theme]
    doLoad('itv&action=tv_by_theme&genre_id='+cur_theme_id, page, fav_itv_on)
    normlight_theme_bar_row()
    hightlight_theme_bar_row()
}

function hightlight_theme_bar_row(){
    lighted_row_tv_by_theme = cur_row_tv_theme
    r_class_changer('bar_theme_', lighted_row_tv_by_theme, "hightlight")
}

function normlight_theme_bar_row(){
    r_class_changer('bar_theme_', lighted_row_tv_by_theme, "normlight")
}

function fill_tv_by_theme(arr){
    _debug('fill_tv_by_theme()')
    tv_page_bar(cur_tv_by_theme_page, total_tv_by_theme_pages)
    tmp_tv_by_theme_arr = arr
    _debug('fill_tv_by_theme()')
    arr_length = max_tv_by_theme_rows = arr.length
    _debug('max_tv_theme: '+max_tv_by_theme_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        if (parseInt(arr[tv_n_i].open) == 1){
            //document.getElementById('theme_row_'+tv_n_i).className = "black_row"
            change_class_by_ids('black_row', document.getElementById('theme_row_'+tv_n_i))
        }else{
            //document.getElementById('theme_row_'+tv_n_i).className = "grey_row"
            change_class_by_ids('grey_row', document.getElementById('theme_row_'+tv_n_i))
        }
        document.getElementById('theme_num_'+(tv_n_i)).innerHTML = arr[tv_n_i].number+'.'
        document.getElementById('theme_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('theme_my_theme_'+(tv_n_i)).innerHTML = arr[tv_n_i].my_ch
        document.getElementById('theme_prog_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].time_start+' '+arr[tv_n_i].cur_prog
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('theme_num_'+(tv_i)).innerHTML = ''
            document.getElementById('theme_name_'+(tv_i)).innerHTML = ''
            document.getElementById('theme_my_theme_'+(tv_i)).innerHTML = ''
/*            document.getElementById('theme_prog_start_'+(tv_i)).innerHTML = ''*/
            document.getElementById('theme_prog_name_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_tv_by_theme_row_focus){
        set_active_tv_by_theme_row()
        need_tv_by_theme_row_focus = 0
    }
}

/**/

/* THEME BAR */
function shift_tv_theme(shift_row){
    _debug('shift_tv_theme('+shift_row+')')
    prev_row_tv_theme = cur_row_tv_theme
    if(shift_row > 0){
        if(shift_row + cur_row_tv_theme > total_rows_tv_theme-1){
            cur_row_tv_theme = 0
        }else{
            cur_row_tv_theme++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_tv_theme < 0){
            cur_row_tv_theme = total_rows_tv_theme-1
        }else{
            cur_row_tv_theme --
        }
    }
    set_active_tv_theme_row()
}

function set_active_tv_theme_row(){
    _debug('set_active_tv_theme_row()')
    _debug('cur_row_tv_theme: '+cur_row_tv_theme)
    set_passive_tv_theme_row()
    r_class_changer('bar_theme_', cur_row_tv_theme, "hover")
}

function set_passive_tv_theme_row(){
    _debug('set_passive_tv_theme_row()')
    r_class_changer('bar_theme_', prev_row_tv_theme, "unhover")
}

function set_passive_all_tv_theme_row(){
    _debug('set_passive_all_tv_theme_row()')
    r_class_changer('bar_theme_', cur_row_tv_theme, "unhover")
}
/**/

/* FAVORITE CHANNELS */
function load_fav_itv(){
    doLoad('fav_itv', 1)
}

function set_fav_itv(itv_arr){
    fav_channels_ids = itv_arr
    if (fav_channels_ids.length == 0){
        fav_itv_on = 0
    }
    _debug('fav_channels_ids: '+fav_channels_ids.toSource())
}

function save_fav_itv(){
    _debug('save_fav_itv()')
    _debug('fav_channels_ids: '+typeof(fav_channels_ids))
    _debug('fav_channels_ids: '+fav_channels_ids.toSource())
    doLoad('save_fav', 1, fav_channels_ids)
    need_save_fav_channels = 0
}

function add_to_fav_itv(){
    _debug('add_to_fav_itv()')
    
    new_id = get_cur_itv_id()
    
    _debug('new_id: '+new_id)
    
    fav_idx = fav_channels_ids.indexOf(new_id)
    _debug('fav_idx: '+fav_idx)
    if(fav_itv_on){
        _debug('del')
        if (fav_idx >= 0){
            removed = fav_channels_ids.splice(fav_idx, 1)
            _debug('removed: '+removed)
            _debug('fav_channels_ids: '+fav_channels_ids.toSource())
            save_fav_itv_need_reload = 1
            save_fav_itv()
        }
    }else{
        if (fav_idx < 0){
            _debug('add')
            fav_channels_ids.push(new_id)
            _debug('fav_channels_ids: '+fav_channels_ids.toSource())
            save_fav_itv_need_reload = 0
            if (tv_by_number_on){
                document.getElementById('my_ch_'+cur_row_tv_by_number).innerHTML = '&bull;'
            }else if(tv_by_channel_on){
                document.getElementById('ch_my_ch_'+cur_row_tv_by_channel).innerHTML = '&bull;'
            }else if(tv_by_theme_on){
                document.getElementById('theme_my_theme_'+cur_row_tv_by_theme).innerHTML = '&bull;'
            }
            save_fav_itv()
        }
    }
    _debug(fav_channels_ids.toSource())
}

function get_cur_itv_id(){
    new_id = 0
    if (tv_by_number_on){
        new_id = tmp_tv_by_number_arr[cur_row_tv_by_number].id
    }else if(tv_by_channel_on){
        new_id = tmp_tv_by_channel_arr[cur_row_tv_by_channel].id
    }else if(tv_by_theme_on){
        new_id = tmp_tv_by_theme_arr[cur_row_tv_by_theme].id
    }
    return new_id
}

function load_tv(){
    
    if(fav_itv_on){
        set_active_tv_fav_btn()
    }else{
        set_active_tv_all_btn()
    }
    
    if (tv_by_number_on){
        //set_passive_all_tv_by_number_row()
        //cur_tv_by_num_page = 1
        //cur_row_tv_by_number = 0
        //prev_row_tv_by_number = 1
        need_tv_by_number_row_focus = 1
        load_tv_by_number(cur_tv_by_num_page)
        //set_active_tv_by_number_row()
    }else if(tv_by_channel_on){
        //set_passive_all_tv_by_channel_row()
        //cur_tv_by_ch_page = 1
        //cur_row_tv_by_channel = 0
        //prev_row_tv_by_channel = 1
        load_tv_by_channel(cur_tv_by_ch_page)
        //set_active_tv_by_channel_row()
    }else if(tv_by_theme_on){
        //set_passive_all_tv_by_theme_row()
        //cur_tv_by_theme_page = 1
        //cur_row_tv_by_theme = 0
        //prev_row_tv_by_theme = 1
        load_tv_by_theme(cur_tv_by_theme_page)
        //set_active_tv_by_theme_row()
    }
}

function set_active_tv_all_btn(){
    _debug('set_active_tv_all_btn()')
    set_passive_tv_fav_btn()
    document.getElementById('tv_yellow_btn').className = 'yellow_button_horizontal_active'
    save_fav_itv_status()
}

function set_passive_tv_all_btn(){
    _debug('set_passive_tv_all_btn()')
    document.getElementById('tv_yellow_btn').className = 'yellow_button_horizontal_passive'
}

function set_active_tv_fav_btn(){
    _debug('set_active_tv_fav_btn()')
    set_passive_tv_all_btn()
    document.getElementById('tv_blue_btn').className = 'blue_button_horizontal_active'
    save_fav_itv_status()
}

function set_passive_tv_fav_btn(){
    _debug('set_passive_tv_fav_btn()')
    document.getElementById('tv_blue_btn').className = 'blue_button_horizontal_passive'
}

function save_fav_itv_status(){
    doLoad('save_fav_itv_status', 1, fav_itv_on)
}
/**/

/* LOADING BAR */

function tv_loading_bar(txt){
    document.getElementById('tv_loading_bar').innerHTML = txt
}

/**/

/* CLUB */
function show_club(){
    _debug('show_club()')
    _log('show_club()')
    document.getElementById('club').style.display = ''
    //load_all_vclub_genres()
    set_active_club_row()
    club_on = 1
}

function hide_club(reset_menu){
    _debug('hide_club()')
    document.getElementById('club').style.display = 'none'
    if (typeof(reset_menu) != 'undefined'){
        set_passive_all_club_row()
        prev_row_club = 1
        cur_row_club = 0
    }
    club_on = 0
}

function shift_club(shift_row){
    _debug('shift_club('+shift_row+')')
    prev_row_club = cur_row_club
    if(shift_row > 0){
        if(shift_row + cur_row_club > total_rows_club-1){
            cur_row_club = 0
        }else{
            if (!stb.hd){
                if (cur_row_club == 0){
                    cur_row_club = 2
                }else{
                    cur_row_club++
                }
            }else{
                cur_row_club++
            }
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_club < 0){
            cur_row_club = total_rows_club-1
        }else{
            if (!stb.hd){
                if (cur_row_club == 2){
                    cur_row_club = 0
                }else{
                    cur_row_club--
                }
            }else{
                cur_row_club--
            }
        }
    }
    set_active_club_row()
}

function set_active_club_row(){
    _debug('set_active_club_row()')
    set_passive_club_row()
    class_changer('club_row_', cur_row_club, "hover")
}

function set_passive_club_row(){
    _debug('set_passive_club_row()')
    class_changer('club_row_', prev_row_club, "unhover")
}

function set_passive_all_club_row(){
    _debug('set_passive_all_club_row()')
    class_changer('club_row_', cur_row_club, "unhover")
}

function call_club_menu_func(){
    _debug('call_club_menu_func()')
    eval(func_club_menu[cur_row_club])
}

/* VIDEO RECORD */
function show_video_records(){
    _debug('show_video_records()')
    document.getElementById('video_records_page').style.display = ''
    video_records_on = 1
    _debug('prev_video_record_page: '+prev_video_record_page)
    
    if(prev_video_record_page == ''){
        show_video_records_by_addtime()
    }
    
    prev_video_record_page = ''
    cur_partition = 'video_records'
}

function hide_video_records(){
    _debug('hide_video_records()')
    document.getElementById('video_records_page').style.display = 'none'
    video_records_on = 0
    if (mode_one == 0){
        if (video_records_by_addtime_on == 1){
            hide_video_records_by_addtime()
            prev_video_record_page = ''
        }else if (my_video_records_on == 1){
            hide_my_video_records()
            prev_video_record_page = ''
        }
    }else{
        prev_video_record_page = 'video_records'
    }
    
    cur_partition = ''
}

function switch_on_video_record_page(page_num){
    document.getElementById('video_records_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('video_records_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('video_records_punct_r_img_'+page_num).src = "i/insert_b_r.png"
}

function switch_off_video_record_page(page_num){
    document.getElementById('video_records_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('video_records_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('video_records_punct_r_img_'+page_num).src = "i/insert_r.png"
}

function show_video_record_con_menu(){
    _debug('show_video_record_com_menu()')
    
    if (tmp_my_video_records_arr[cur_row_my_video_records].ended == 1){
        document.getElementById('video_record_con_menu_row_1').className = 'grey_row'
        document.getElementById('video_record_con_menu_row_2').className = 'black_row'
    }else{
        document.getElementById('video_record_con_menu_row_1').className = 'black_row'
        document.getElementById('video_record_con_menu_row_2').className = 'grey_row'
    }
    
    document.getElementById('video_record_con_menu').style.display = ''
    video_record_con_menu_on = 1
    set_active_video_record_con_menu_row()
    show_con_alpha_layer()
}

function hide_video_record_con_menu(){
    _debug('hide_video_record_con_menu()')
    document.getElementById('video_record_con_menu').style.display = 'none'
    video_record_con_menu_on = 0
    prev_row_video_record_con_menu = cur_row_video_record_con_menu
    set_passive_video_record_con_menu_row()
    prev_row_video_record_con_menu = 1
    cur_row_video_record_con_menu = 0
    hide_con_alpha_layer()
}

function shift_video_record_con_menu(shift_row){
    _debug('shift_video_record_con_menu('+shift_row+')')
    prev_row_video_record_con_menu = cur_row_video_record_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_video_record_con_menu > total_rows_video_record_con_menu-1){
            cur_row_video_record_con_menu = 0
        }else{
            cur_row_video_record_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_video_record_con_menu < 0){
            cur_row_video_record_con_menu = total_rows_video_record_con_menu-1
        }else{
            cur_row_video_record_con_menu --
        }
    }
    set_active_video_record_con_menu_row()
}

function set_active_video_record_con_menu_row(){
    _debug('set_active_video_record_con_menu_row()')
    set_passive_video_record_con_menu_row()
    class_changer('video_record_con_menu_row_', cur_row_video_record_con_menu, "hover")
}

function set_passive_video_record_con_menu_row(){
    _debug('set_passive_video_record_con_menu_row()')
    class_changer('video_record_con_menu_row_', prev_row_video_record_con_menu, "unhover")
}
/**/

/* VIDEO RECORD BY ADDTIME */
function show_video_records_by_addtime(){
    _debug('show_video_records_by_addtime()')
    document.getElementById('main_bar_video_records_by_addtime').style.display = ''
    video_records_by_addtime_on = 1
    switch_on_video_record_page(1)
    load_video_records_by_addtime(0)
    set_active_video_records_by_addtime_row()
}

function hide_video_records_by_addtime(){
    _debug('show_video_records_by_addtime()')
    document.getElementById('main_bar_video_records_by_addtime').style.display = 'none'
    video_records_by_addtime_on = 0
    switch_off_video_record_page(1)
    prev_row_video_records_by_addtime = cur_row_video_records_by_addtime
    set_passive_video_records_by_addtime_row()
    cur_video_records_by_addtime_page = 1
    cur_row_video_records_by_addtime = 0
    prev_row_video_records_by_addtime = 1
}

function shift_video_records_by_addtime(shift_row){
    _debug('shift_video_records_by_addtime('+shift_row+')')
    prev_row_video_records_by_addtime = cur_row_video_records_by_addtime
    if(shift_row > 0){
        if(cur_row_video_records_by_addtime < max_video_records_by_addtime_rows-1){
            cur_row_video_records_by_addtime++
        }else{
            shift_video_records_by_addtime_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_video_records_by_addtime > 0){
            cur_row_video_records_by_addtime --
        }else{
            shift_video_records_by_addtime_page(-1)
        }
    }
    set_active_video_records_by_addtime_row()
}

function shift_video_records_by_addtime_page(dir){
     _debug('shift_video_records_by_addtime_page('+dir+')')
    if (dir > 0){
        if (cur_video_records_by_addtime_page < total_video_records_by_addtime_pages){
            cur_video_records_by_addtime_page++
            load_video_records_by_addtime(cur_video_records_by_addtime_page)
            cur_row_video_records_by_addtime = 0
        }
    }else if (dir < 0){
        if (cur_video_records_by_addtime_page > 1){
            cur_video_records_by_addtime_page--
            load_video_records_by_addtime(cur_video_records_by_addtime_page)
            cur_row_video_records_by_addtime = 2
        }
    }
}

function disable_video_records_by_addtime_row(){
    _debug('disable_video_records_by_addtime_row()')
    if(cur_row_video_records_by_addtime > 0 && cur_row_video_records_by_addtime <= max_video_records_by_addtime_rows){
        document.getElementById('video_records_by_addtime_row_'+cur_row_video_records_by_addtime).className = 'video_td'
        cur_row_video_records_by_addtime = 0
        prev_row_video_records_by_addtime = 1
    }
}

function set_active_video_records_by_addtime_row(){
    _debug('set_active_video_records_by_addtime_row()')
    _debug('cur_row_video_records_by_addtime: '+cur_row_video_records_by_addtime)
    set_passive_video_records_by_addtime_row()
    class_changer('video_records_by_addtime_row_', cur_row_video_records_by_addtime, "hover")
}

function set_passive_video_records_by_addtime_row(){
    _debug('set_video_records_by_addtime_row()')
    _debug('prev_row_video_records_by_addtime: '+prev_row_video_records_by_addtime)
    class_changer('video_records_by_addtime_row_', prev_row_video_records_by_addtime, "unhover")
}

function set_passive_all_video_records_by_addtime_row(){
    _debug('set_passive_all_video_records_by_addtime_row()')
    _debug('cur_row_video_records_by_addtime: '+cur_row_video_records_by_addtime)
    class_changer('video_records_by_addtime_row_', cur_row_video_records_by_addtime, "unhover")
}

function load_video_records_by_addtime(page){
    doLoad('video_records&video_records_by_addtime', page)
}

function fill_video_records_by_addtime(arr){
    _debug('fill_video_records_by_addtime()')
    video_records_page_bar(cur_video_records_by_addtime_page ,total_video_records_by_addtime_pages)
    tmp_video_records_by_addtime_arr = arr
    del_video_records_by_addtime()
    _debug('fill_video_records_by_addtime()')
    max_video_records_by_addtime_rows = arr.length
    _debug('max_video_records_by_addtime_rows: '+max_video_records_by_addtime_rows)
    for(vr_n_i = 0; vr_n_i < arr.length; vr_n_i++){
        document.getElementById('video_records_by_addtime_img_'+(vr_n_i)).innerHTML = '<img src="/stalker_portal/video_records/'+arr[vr_n_i].id+'.jpg" width="107" height="80" onerror="this.src=\'i/1x1.gif\'">'
        document.getElementById('video_records_by_addtime_txt_'+(vr_n_i)).innerHTML = arr[vr_n_i].descr
    }
}

function del_video_records_by_addtime(){
    _debug('del_video_records_by_addtime()')
    video_records_page_bar(cur_video_records_by_addtime_page ,total_video_records_by_addtime_pages)
    for(vr_d_i = 0; vr_d_i <= 2; vr_d_i++){
        document.getElementById('video_records_by_addtime_img_'+(vr_d_i)).innerHTML = '&nbsp;'
        document.getElementById('video_records_by_addtime_txt_'+(vr_d_i)).innerHTML = '&nbsp;'
    }
    max_video_records_by_addtime_rows = 0
}

function start_play_video_records_by_addtime(){
    _debug('start_play_video_records_by_addtime()')
    cur_place = 'video_records'
    show_playing(tmp_video_records_by_addtime_arr[cur_row_video_records_by_addtime].descr, tmp_video_records_by_addtime_arr[cur_row_video_records_by_addtime].id)
    play('auto /media/' + tmp_video_records_by_addtime_arr[cur_row_video_records_by_addtime].cmd)
    hide_video_records()
}
/**/

/* MY RECORDS */
function show_my_video_records(){
    _debug('show_my_video_records()')
    document.getElementById('main_bar_my_video_records').style.display = ''
    switch_on_video_record_page(2)
    my_video_records_on = 1
    load_my_video_records(0)
    set_active_my_video_records_row()
}

function hide_my_video_records(){
    _debug('hide_my_video_records()')
    document.getElementById('main_bar_my_video_records').style.display = 'none'
    switch_off_video_record_page(2)
    my_video_records_on = 0
    set_passive_all_my_video_records_row()
    cur_my_video_records_page = 1
    cur_row_my_video_records = 0
    prev_row_my_video_records = 1
    
    window.clearTimeout(to_stop_my_video)
    to_stop_my_video = 0
}

function shift_my_video_records(shift_row){
    _debug('shift_my_video_records('+shift_row+')')
    prev_row_my_video_records = cur_row_my_video_records
    if(shift_row > 0){
        if(cur_row_my_video_records < max_my_video_records_rows-1){
            cur_row_my_video_records++
        }else{
            shift_my_video_records_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_my_video_records > 0){
            cur_row_my_video_records --
        }else{
            shift_my_video_records_page(-1)
        }
    }
    set_active_my_video_records_row()
}

function shift_my_video_records_page(dir){
     _debug('shift_my_video_records_page('+dir+')')
    if (dir > 0){
        if (cur_my_video_records_page < total_my_video_records_pages){
            cur_my_video_records_page++
            load_my_video_records(cur_my_video_records_page)
            cur_row_my_video_records = 0
        }
    }else if (dir < 0){
        if (cur_my_video_records_page > 1){
            cur_my_video_records_page--
            load_my_video_records(cur_my_video_records_page)
            cur_row_my_video_records = 9
        }
    }
}

function disable_my_video_records_row(){
    _debug('disable_my_video_records_row()')
    if(cur_row_my_video_records > 0 && cur_row_my_video_records <= max_my_video_records_rows){
        document.getElementById('my_video_records_row_'+cur_row_my_video_records).className = 'video_td'
        cur_row_my_video_records = 0
        prev_row_my_video_records = 1
    }
}

function set_active_my_video_records_row(){
    _debug('set_active_my_video_records_row()')
    _debug('cur_row_my_video_records: '+cur_row_my_video_records)
    set_passive_my_video_records_row()
    class_changer('my_video_records_row_', cur_row_my_video_records, "hover")
}

function set_passive_my_video_records_row(){
    _debug('set_passive_my_video_records_row()')
    _debug('prev_row_my_video_records: '+prev_row_my_video_records)
    class_changer('my_video_records_row_', prev_row_my_video_records, "unhover")
}

function set_passive_all_my_video_records_row(){
    _debug('set_passive_all_my_video_records_row()')
    _debug('cur_row_my_video_records: '+cur_row_my_video_records)
    class_changer('my_video_records_row_', cur_row_my_video_records, "unhover")
}

function call_con_menu_my_video_records_func(){
    _debug('call_con_menu_my_video_records_func(): '+(cur_row_video_record_con_menu))
    eval(func_my_video_records[cur_row_video_record_con_menu])
    hide_video_record_con_menu()
}

function start_play_my_video_records(){
    _debug('start_play_my_video_records()')
    cur_place = 'video_records'
    var tracks = ' '
    
    tmp_atrack = tmp_my_video_records_arr[cur_row_my_video_records].atrack
    tmp_vtrack = tmp_my_video_records_arr[cur_row_my_video_records].vtrack
    
    if (tmp_atrack && tmp_vtrack){
        tracks = tracks + 'atrack:'+tmp_atrack+' vtrack:'+tmp_vtrack
    }
    _debug('tracks: '+tracks)
    
    show_playing(tmp_my_video_records_arr[cur_row_my_video_records].t_start+'  '+tmp_my_video_records_arr[cur_row_my_video_records].ch_name, tmp_my_video_records_arr[cur_row_my_video_records].id)
    play('auto ' + video_dir+tmp_my_video_records_arr[cur_row_my_video_records].id+'.mpg'+tracks)
    hide_video_record_con_menu()
}

function stop_rec_my_video_records(){
    _debug('stop_rec_my_video_records()')
    if (tmp_my_video_records_arr[cur_row_my_video_records].ended == 0){
        var stop_id = tmp_my_video_records_arr[cur_row_my_video_records].ch_id
    
        send_stop_rec(stop_id)
    
        var cur_rec_idx = rec_channels_ids.indexOf(stop_id)
    
        removed = rec_channels_ids.splice(cur_rec_idx, 1)
    }
}

function del_my_video_rec(){
    _debug('del_my_video_rec()')
    if (tmp_my_video_records_arr[cur_row_my_video_records].ended == 1){
        tmp_rec_id = tmp_my_video_records_arr[cur_row_my_video_records].id
        _debug('tmp_rec_id: '+tmp_rec_id)
        doLoad('del_my_video_rec', 1, tmp_rec_id)
    }
}

function load_my_video_records(page){
    doLoad('my_video_records', page)
}

function fill_my_video_records(arr){
    _debug('fill_my_video_records()')
    video_records_page_bar(cur_my_video_records_page ,total_my_video_records_pages)
    tmp_my_video_records_arr = arr
    del_my_video_records()
    _debug('fill_my_video_records()')
    max_my_video_records_rows = arr.length
    _debug('max_my_video_records: '+max_my_video_records_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('my_video_records_start_'+(tv_n_i)).innerHTML   = arr[tv_n_i].t_start
        document.getElementById('my_video_records_channel_'+(tv_n_i)).innerHTML = arr[tv_n_i].ch_name
        if (arr[tv_n_i].ended == 1){
            document.getElementById('my_video_records_length_'+(tv_n_i)).innerHTML  = arr[tv_n_i].length
        }else{
            document.getElementById('my_video_records_length_'+(tv_n_i)).innerHTML  = 'REC'
        }
    }
}

function del_my_video_records(){
    _debug('del_my_video_records()')
    video_records_page_bar(cur_my_video_records_page ,total_my_video_records_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('my_video_records_start_'+(tv_n_i)).innerHTML   = ''
        document.getElementById('my_video_records_channel_'+(tv_n_i)).innerHTML = ''
        document.getElementById('my_video_records_length_'+(tv_n_i)).innerHTML  = ''
    }
    max_my_video_records_rows = 0
}

function show_rec_bar(){
    _debug('show_rec_bar()')
    rec_bar_on = 1
    document.getElementById('rec_bar').style.display = ''
}

function hide_rec_bar(){
    _debug('hide_rec_bar()')
    rec_bar_on = 0
    document.getElementById('rec_bar').style.display = 'none'
}

function chech_rec_ch(cid){
    _debug('chech_rec_ch('+cid+')')
    
    var cur_rec_idx = rec_channels_ids.indexOf(cid)
    
    _debug('rec_channels_ids: '+rec_channels_ids.toSource())
    _debug('cur_rec_idx: '+cur_rec_idx)
    
    if (cur_rec_idx < 0){
        if (rec_bar_on){
            hide_rec_bar()
        }
    }else{
        show_rec_bar()
    }
}

function stop_my_video(){
    _debug('stop_my_video()')
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    if (mode_one == 1){
        stop()
        hide_black()
        stb.SetDefaultFlicker(1)
        show_video_records()
        speed = 1
        window.clearTimeout(to_stop_my_video)
        to_stop_my_video = 0
    }
}
/**/

function send_start_rec(rec_ch_id){
    _debug('send_start_rec('+rec_ch_id+')')
    doLoad('start_rec', 1, rec_ch_id)
}

function send_stop_rec(rec_ch_id){
    _debug('send_stop_rec('+rec_ch_id+')')
    doLoad('stop_rec', 1, rec_ch_id)
    
}
/**/

/* VIDEO CLUB */
function show_video_club(cat_num){
    _debug('show_video_club('+cat_num+')')
    /*if (cat_num == 100){
        show_vclub_not_ended()
    }else */
    //if (parseInt(cat_num) <= 0 || typeof(cat_num) == 'undefined'){
    if (typeof(cat_num) == 'undefined'){
        cat_num = cur_cat_num
    }
    
    if (cat_num == 100){
        show_vclub_not_ended()
    }
    
    if (cat_num == 101){ // HD
        show_vclub_hd = 1
    }
    
    cur_cat_num = cat_num
    
    _debug('cur_cat_num: '+cur_cat_num)
    
    document.getElementById('video_club_page').style.display = ''
    video_club_on = 1
    _debug('prev_vclub_page: '+prev_vclub_page)
    
    if (cat_num != 100){
        /*if (cat_num == 0){
            document.getElementById('vclub_titles').style.display = 'none'
            document.getElementById('vclub_titles_all_cats').style.display = ''
        }else{
            document.getElementById('vclub_titles_all_cats').style.display = 'none'
            document.getElementById('vclub_titles').style.display = ''
        }*/
        document.getElementById('vclub_titles').style.display = ''
        
        if (show_vclub_hd){
            document.getElementById('video_club_cat_name').innerHTML = 'HD'
        }else{
            document.getElementById('video_club_cat_name').innerHTML = media_cats_txt[cur_cat_num]
        }
    
        if(prev_vclub_page == ''){
            show_video_club_by_name()
        }
        load_all_vclub_genres()
    }else{
        //document.getElementById('vclub_titles_all_cats').style.display = 'none'        
        document.getElementById('vclub_titles').style.display = 'none'
        document.getElementById('video_club_cat_name').innerHTML = 'Недосмотренное видео'
    }
    
    if (vclub_by_search_on){
        kbd_active = 0
        show_kbd(kbd_input_id)
    }
    
    set_active_vclub_all_btn()
    
    hide_vclub_updated_icon()
    //load_all_vclub_genres()
    prev_vclub_page = ''
    cur_partition = 'vclub'
}

function hide_video_club(){
    _debug('hide_video_club()')
    document.getElementById('video_club_page').style.display = 'none'
    video_club_on = 0
    show_vclub_hd = 0
    hide_video_club_con_menu()
    if (kbd_on){
        hide_kbd()
    }
    _debug('video_club_info_on: '+video_club_info_on)
    _debug('vclub_by_name_on: '+vclub_by_name_on)
    _debug('mode_one: '+mode_one)
    
    if (cur_cat_num == 100 && mode_one == 0){
        hide_vclub_not_ended()
    }
    
    if (video_club_info_on == 0 && mode_one == 0){
        if(vclub_by_name_on == 1){
            hide_video_club_by_name()
        }else if(vclub_by_genre_on == 1){
            hide_video_club_by_genre()
        }else if(vclub_by_year_on == 1){
            hide_video_club_by_year()
        }else if(vclub_by_add_time_on == 1){
            hide_video_club_by_add_time()
        }else if(vclub_by_top_on == 1){
            hide_video_club_by_top()
        }else if(vclub_by_search_on == 1){
            hide_video_club_by_search()
        }else if(vclub_not_ended_on == 1){
            hide_vclub_not_ended()
        }
        prev_vclub_page = ''
    }else{
        prev_vclub_page = 'video_club'
    }
    cur_partition = ''
}

function hide_vclub_updated_icon(){
    _debug('hide_vclub_updated_icon()')
    document.getElementById('vclub_update_icon').style.display = 'none';
    doLoad('updated_place_confirm',0,'vclub')
    document.getElementById('media_club_update_icon').style.display = 'none';
}

function show_video_club_con_menu(){
    
    if (vclub_by_name_on == 1){
        tmp_censored  = tmp_vclub_by_name_arr[cur_row_vclub_by_name].censored
    }else if(vclub_by_genre_on == 1){
        tmp_censored = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].censored
    }else if(vclub_by_year_on == 1){
        tmp_censored = tmp_vclub_by_year_arr[cur_row_vclub_by_year].censored
    }else if(vclub_by_add_time_on == 1){
        tmp_censored = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].censored
    }else if(vclub_by_top_on == 1){
        tmp_censored = tmp_vclub_by_top_arr[cur_row_vclub_by_top].censored
    }else if(vclub_by_top_on == 1){
        tmp_censored = tmp_vclub_by_top_arr[cur_row_vclub_by_top].censored
    }else if(vclub_by_search_on == 1){
        tmp_censored = tmp_vclub_by_search_arr[cur_row_vclub_by_search].censored
    }else if(vclub_not_ended_on == 1){
        tmp_censored = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].censored
    }
    
    if (tmp_censored == 1){
        show_password_input('parent_password', "n_show_video_club_con_menu()")
        dont_hide_con_alpha_layer = 1
    }else{
        n_show_video_club_con_menu()
    }
}

function n_show_video_club_con_menu(){
    _debug('show_video_club_by_name_con_menu()')
    
    if (vclub_by_name_on == 1){
        tmp_cur_id     = tmp_vclub_by_name_arr[cur_row_vclub_by_name].id
        tmp_series_arr = tmp_vclub_by_name_arr[cur_row_vclub_by_name].series
    }else if(vclub_by_genre_on == 1){
        tmp_cur_id     = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id
        tmp_series_arr = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].series
    }else if(vclub_by_year_on == 1){
        tmp_cur_id     = tmp_vclub_by_year_arr[cur_row_vclub_by_year].id
        tmp_series_arr = tmp_vclub_by_year_arr[cur_row_vclub_by_year].series
    }else if(vclub_by_add_time_on == 1){
        tmp_cur_id     = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id
        tmp_series_arr = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].series
    }else if(vclub_by_top_on == 1){
        tmp_cur_id     = tmp_vclub_by_top_arr[cur_row_vclub_by_top].id
        tmp_series_arr = tmp_vclub_by_top_arr[cur_row_vclub_by_top].series
    }else if(vclub_by_search_on == 1){
        tmp_cur_id     = tmp_vclub_by_search_arr[cur_row_vclub_by_search].id
        tmp_series_arr = tmp_vclub_by_search_arr[cur_row_vclub_by_search].series
    }else if(vclub_not_ended_on == 1){
        tmp_cur_id     = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].id
        tmp_series_arr = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].series
        tmp_cur_series = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].cur_series
    }
    
    _debug('typeof(tmp_series_arr): '+typeof(tmp_series_arr))
    
    
    if (cur_id_for_series != tmp_cur_id){
        series_cur_num = 0
    }
    if (vclub_not_ended_on){
        //series_cur_num = tmp_series_arr[tmp_cur_series]
        series_cur_num = tmp_series_arr.indexOf(tmp_cur_series)
    }
    
    cur_id_for_series = tmp_cur_id
    
    if (typeof(tmp_series_arr) == 'object'){
        series_total = tmp_series_arr.length
    }else{
        series_total = 0
    }
    
    _debug('last_vclub_played_id: '+last_vclub_played_id)
    _debug('tmp_cur_id: '+tmp_cur_id)
    
    
    if (vclub_not_ended_on){
        document.getElementById('video_club_con_menu_row_0').innerHTML = words['continue']
        document.getElementById('video_club_con_menu_row_1').innerHTML = 'СМОТРЕТЬ С НАЧАЛА'
    }else{
        if (series_total > 0){
            fill_first_row_video_club_con_menu('<<  '+words['series']+' '+tmp_series_arr[series_cur_num]+'  >>')
        }else{
            fill_first_row_video_club_con_menu(words['view'])
        }
    }
    
    if (fav_vclub_on){
        document.getElementById('video_club_con_menu_row_3').innerHTML = words['del_from_fav']+"&nbsp;"
    }else{
        document.getElementById('video_club_con_menu_row_3').innerHTML = words['add_to_fav']+"&nbsp;"
    }
    
    if (last_vclub_played_id != 0 && last_vclub_played_id == tmp_cur_id || vclub_not_ended_on){
        document.getElementById('video_club_con_menu_row_1').className = "black_row"
    }else{
        document.getElementById('video_club_con_menu_row_1').className = "grey_row"
    }
    
    document.getElementById('video_club_con_menu').style.display = ''
    vclub_con_menu_on = 1
    set_active_video_club_con_menu_row()
    show_con_alpha_layer()
}

function hide_video_club_con_menu(){
    _debug('hide_video_club_con_menu()')
    document.getElementById('video_club_con_menu').style.display = 'none'
    vclub_con_menu_on = 0
    prev_row_vclub_con_menu = cur_row_vclub_con_menu
    set_passive_video_club_con_menu_row()
    prev_row_vclub_con_menu = 1
    cur_row_vclub_con_menu = 0
    hide_con_alpha_layer()
}

function shift_video_club_con_menu(shift_row){
    _debug('shift_video_club_con_menu('+shift_row+')')
    prev_row_vclub_con_menu = cur_row_vclub_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_vclub_con_menu > total_rows_vclub_con_menu-1){
            cur_row_vclub_con_menu = 0
        }else{
            cur_row_vclub_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_vclub_con_menu < 0){
            cur_row_vclub_con_menu = total_rows_vclub_con_menu-1
        }else{
            cur_row_vclub_con_menu --
        }
    }
    set_active_video_club_con_menu_row()
}

function shift_series_video_club_con_menu(shift){
    _debug('shift_series_video_club_con_menu('+shift+')')
    if (series_total > 0){
        if (shift > 0){
            if (shift + series_cur_num > series_total-1){
                series_cur_num = 0
            }else{
                series_cur_num ++
            }
        }else{
            if (shift + series_cur_num < 0){
                series_cur_num = series_total-1
            }else{
                series_cur_num--
            }
        }
        fill_first_row_video_club_con_menu('<<  '+words['series']+' '+tmp_series_arr[series_cur_num]+'  >>')
    }
}

function fill_first_row_video_club_con_menu(txt){
    document.getElementById('video_club_con_menu_row_0').innerHTML = txt
}

function set_active_video_club_con_menu_row(){
    _debug('set_active_video_club_con_menu_row()')
    set_passive_video_club_con_menu_row()
    class_changer('video_club_con_menu_row_', cur_row_vclub_con_menu, "hover")
}

function set_passive_video_club_con_menu_row(){
    _debug('set_passive_video_club_con_menu_row()')
    class_changer('video_club_con_menu_row_', prev_row_vclub_con_menu, "unhover")
}

function switch_on_video_club_page(page_num){
    document.getElementById('vclub_punct_'+page_num).className = "active_punct"
    /*document.getElementById('vclub_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('vclub_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('vclub_punct_r_img_'+page_num).src = "i/insert_b_r.png"*/
}

function switch_off_video_club_page(page_num){
    document.getElementById('vclub_punct_'+page_num).className = "passive_punct"
    /*document.getElementById('vclub_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('vclub_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('vclub_punct_r_img_'+page_num).src = "i/insert_r.png"*/
}
/**/

/* FAV VIDEO CLUB */
function add_del_to_vclub_fav(){
    _debug('add_del_to_vclub_fav()')
    
    new_id = get_cur_vclub_id()
    _debug('new_id: '+new_id)
    
    if(fav_vclub_on){
        _debug('del')
        del_id_from_vclub_fav(new_id)
    }else{
        _debug('add')
        add_id_to_vclub_fav(new_id)
    }
    
    if (vclub_by_name_on == 1){
        document.getElementById('video_club_by_name_my_video_'+cur_row_vclub_by_name).innerHTML = '&bull;'
    }
}

function add_id_to_vclub_fav(id){
    _debug('add_id_to_vclub_fav('+id+')')
    doLoad('add_vclub_fav', 1, id)
}

function del_id_from_vclub_fav(id){
    _debug('del_id_from_vclub_fav('+id+')')
    doLoad('del_vclub_fav', 1, id)
}

function load_vclub_fav(){
    _debug('load_vclub_fav()')
    
    if(fav_vclub_on){
        set_active_vclub_fav_btn()
    }else{
        set_active_vclub_all_btn()
    }
    
    if (vclub_by_name_on){
        load_vclub_by_name(cur_vclub_by_name_page)
    }else if(vclub_by_genre_on){
        load_vclub_by_genre(cur_vclub_by_genre_page)
    }else if(vclub_by_year_on){
        load_vclub_by_year(cur_vclub_by_year_page)
    }else if(vclub_by_add_time_on){
        load_vclub_by_add_time(cur_vclub_by_add_time_page)
    }else if(vclub_by_search_on){
        load_vclub_by_search(cur_vclub_by_search_page)
    }else if(vclub_not_ended_on){
        load_vclub_not_ended(cur_vclub_not_ended_page)
    }
}

/*function get_cur_vclub_id(){
    new_id = 0
    if (vclub_by_name_on){
        new_id = tmp_vclub_by_name_arr[cur_vclub_by_name_page].id
    }else if(vclub_by_genre_on){
        new_id = tmp_vclub_by_genre_arr[cur_vclub_by_genre_page].id
    }else if(vclub_by_year_on){
        new_id = tmp_vclub_by_year_arr[cur_vclub_by_year_page].id
    }else if(vclub_by_add_time_on){
        new_id = tmp_vclub_by_add_time_arr[cur_vclub_by_add_time_page].id
    }
    return new_id
}*/

function set_active_vclub_all_btn(){
    _debug('set_active_vclub_all_btn()')
    set_passive_vclub_fav_btn()
    document.getElementById('vclub_yellow_btn').className = 'yellow_button_horizontal_active'
}

function set_passive_vclub_all_btn(){
    _debug('set_passive_vclub_all_btn()')
    document.getElementById('vclub_yellow_btn').className = 'yellow_button_horizontal_passive'
}

function set_active_vclub_fav_btn(){
    _debug('set_active_vclub_fav_btn()')
    set_passive_vclub_all_btn()
    document.getElementById('vclub_blue_btn').className = 'blue_button_horizontal_active'
}

function set_passive_vclub_fav_btn(){
    _debug('set_passive_vclub_fav_btn()')
    document.getElementById('vclub_blue_btn').className = 'blue_button_horizontal_passive'
}
/**/

/* VIDEO CLUB CON MENU */
function show_con_alpha_layer(){
    _debug('show_con_alpha_layer()')
    if (browser == 'webkit'){
        document.getElementById('con_alpha_layer_wk').style.display = ''
    }else{
        document.getElementById('con_alpha_layer').style.display = ''
    }
}

function hide_con_alpha_layer(){
    _debug('hide_con_alpha_layer()')
    if (browser == 'webkit'){
        document.getElementById('con_alpha_layer_wk').style.display = 'none'
    }else{
        document.getElementById('con_alpha_layer').style.display = 'none'
    }
}

function show_con_alpha_layer_top(){
    _debug('show_con_alpha_layer_top()')
    if (browser == 'webkit'){
        document.getElementById('con_alpha_layer_top_wk').style.display = ''
    }else{
        document.getElementById('con_alpha_layer_top').style.display = ''
    }
}

function hide_con_alpha_layer_top(){
    _debug('hide_con_alpha_layer_top()')
    if (browser == 'webkit'){
        document.getElementById('con_alpha_layer_top_wk').style.display = 'none'
    }else{
        document.getElementById('con_alpha_layer_top').style.display = 'none'
    }
}


function continue_play(from_db){
    _debug('continue_play()')
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    
    _continue_play = 1
    
    if (vclub_by_name_on == 1){
        tmp_cur_id = tmp_vclub_by_name_arr[cur_row_vclub_by_name].id
        tmp_func_name = 'start_play_vclub_by_name()'
    }else if(vclub_by_genre_on == 1){
        tmp_cur_id = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id
        tmp_func_name = 'start_play_vclub_by_genre()'
    }else if(vclub_by_year_on == 1){
        tmp_cur_id = tmp_vclub_by_year_arr[cur_row_vclub_by_year].id
        tmp_func_name = 'start_play_vclub_by_year()'
    }else if(vclub_by_add_time_on == 1){
        tmp_cur_id = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id
        tmp_func_name = 'start_play_vclub_by_add_time()'
    }else if(vclub_by_top_on == 1){
        tmp_cur_id = tmp_vclub_by_top_arr[cur_row_vclub_by_top].id
        tmp_func_name = 'start_play_vclub_by_top()'
    }else if(vclub_by_search_on == 1){
        tmp_cur_id = tmp_vclub_by_search_arr[cur_row_vclub_by_search].id
        tmp_func_name = 'start_play_vclub_by_search()'
    }else if(vclub_not_ended_on == 1){
        tmp_cur_id = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].id
        tmp_func_name = 'start_play_vclub_not_ended()'
        tmp_pos_time = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].end_time
    }
    
    if (typeof(from_db) == 'undefined'){    
        if (last_vclub_played_id != 0 && last_vclub_played_id == tmp_cur_id && last_vclub_pos_time > 0){
            eval(tmp_func_name)
            //hide_video_club()
            _debug('last_vclub_pos_time: '+last_vclub_pos_time)
        }
    }else{
        last_vclub_pos_time = tmp_pos_time
        _debug('last_vclub_pos_time: '+last_vclub_pos_time)
        eval(tmp_func_name)
    }
}

function get_cur_vclub_id(){
    tmp_cur_id = 0
    if (vclub_by_name_on == 1){
        tmp_cur_id = tmp_vclub_by_name_arr[cur_row_vclub_by_name].id
        tmp_func_name = 'start_play_vclub_by_name()'
    }else if(vclub_by_genre_on == 1){
        tmp_cur_id = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id
        tmp_func_name = 'start_play_vclub_by_genre()'
    }else if(vclub_by_year_on == 1){
        tmp_cur_id = tmp_vclub_by_year_arr[cur_row_vclub_by_year].id
        tmp_func_name = 'start_play_vclub_by_year()'
    }else if(vclub_by_add_time_on == 1){
        tmp_cur_id = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id
        tmp_func_name = 'start_play_vclub_by_add_time()'
    }else if(vclub_by_top_on == 1){
        tmp_cur_id = tmp_vclub_by_top_arr[cur_row_vclub_by_top].id
        tmp_func_name = 'start_play_vclub_by_top()'
    }else if(vclub_by_search_on == 1){
        tmp_cur_id = tmp_vclub_by_search_arr[cur_row_vclub_by_search].id
        tmp_func_name = 'start_play_vclub_by_search()'
    }else if(vclub_not_ended_on == 1){
        tmp_cur_id = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].id
        tmp_func_name = 'start_play_vclub_not_ended()'
    }
    return tmp_cur_id
}
/**/

/* ABC BAR */
function get_slice_abc(page){
    _debug('get_slice_abc('+page+')')
    begin = (page-1)*10
    end   = page*10
    var slice_abc_arr = abc_arr.slice(begin,end)
    return slice_abc_arr
}

function fill_abc_bar(page, id_prefix){
    _debug('fill_abc_bar('+page+', '+id_prefix+')')
    var slice_abc = get_slice_abc(page)
    var slice_length = total_rows_vclub_abc = total_rows_video_clips_abc = total_rows_karaoke_abc = total_karaoke_by_singer_pages = total_karaoke_singer_bar_pages = slice_abc.length
    for (var i=0; i<slice_length; i++){
        document.getElementById(id_prefix+i).innerHTML = slice_abc[i]
    }
    
    if (slice_length<10){
        for (var j=slice_length; j<10; j++){
            document.getElementById(id_prefix+j).innerHTML = ''
        }
    }
    
    if (need_vclub_abc_bar_focus){
        set_active_vclub_abc_row()
        need_vclub_abc_bar_focus = 0
    }
    
    if (need_video_clips_abc_bar_focus){
        set_active_video_clips_abc_row()
        need_video_clips_abc_bar_focus = 0
    }
    
    if (need_karaoke_abc_bar_focus){
        set_active_karaoke_abc_row()
        need_karaoke_abc_bar_focus = 0
    }
    
}

/* VIDEO CLUB BY NAME */
function show_video_club_by_name(){
    _debug('show_video_club_by_name()')
    _log('show_video_club_by_name()')
    fill_abc_bar(1, 'video_club_abc_text_')
    document.getElementById('video_button_bar').style.display = ''
    document.getElementById('abc_bar_video_club').style.display = ''
    document.getElementById('abc_bar_video_club').style.left = '23'
    document.getElementById('main_bar_video_club_by_name').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''
    switch_on_video_club_page(1)
    vclub_by_name_on = 1
    lighted_row_vclub_abc = 0
    need_vclub_by_name_row_focus = 1
    load_vclub_by_name(0)
    //set_active_vclub_by_name_row()
}

function hide_video_club_by_name(){
    _debug('hide_video_club_by_name()')
    document.getElementById('video_button_bar').style.display = 'none'
    fav_vclub_on = 0
    set_active_vclub_all_btn()
    document.getElementById('abc_bar_video_club').style.display = 'none'
    document.getElementById('main_bar_video_club_by_name').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    switch_off_video_club_page(1)
    vclub_by_name_on = 0
    // disable abc
    set_passive_all_vclub_abc_row()
    cur_abc_vclub_bar = 0
    prev_row_vclub_abc = 1
    cur_row_vclub_abc = 0
    cur_vclub_abc_bar_page = 1
    
    normlight_abc_bar_row()
    
    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    prev_row_vclub_by_name = cur_row_vclub_by_name
    set_passive_vclub_by_name_row()
    cur_vclub_by_name_page = 1
    cur_row_vclub_by_name = 0
    prev_row_vclub_by_name = 1
}

function shift_vclub_by_name(shift_row){
    _debug('shift_vclub_by_name('+shift_row+')')
    prev_row_vclub_by_name = cur_row_vclub_by_name
    if(shift_row > 0){
        if(cur_row_vclub_by_name < max_vclub_by_name_rows-1){
            cur_row_vclub_by_name++
            set_active_vclub_by_name_row()
        }else{
            shift_vclub_by_name_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_name > 0){
            cur_row_vclub_by_name --
            set_active_vclub_by_name_row()
        }else{
            shift_vclub_by_name_page(-1)
        }
    }
}

function shift_vclub_by_name_page(dir){
     _debug('shift_vclub_by_name_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_name_page < total_vclub_by_name_pages){
            cur_vclub_by_name_page++
            need_vclub_by_name_row_focus = 1
            set_passive_all_vclub_by_name_row()
            load_vclub_by_name(cur_vclub_by_name_page)
            cur_row_vclub_by_name = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_name_page > 1){
            cur_vclub_by_name_page--
            need_vclub_by_name_row_focus = 1
            set_passive_all_vclub_by_name_row()
            load_vclub_by_name(cur_vclub_by_name_page)
            cur_row_vclub_by_name = 9
        }
    }
}

function disable_vclub_by_name_row(){
    _debug('disable_vclub_by_name_row()')
    if(cur_row_vclub_by_name > 0 && cur_row_vclub_by_name <= max_vclub_by_name_rows){
        document.getElementById('video_club_by_name_row_'+cur_row_vclub_by_name).className = 'video_td'
        cur_row_vclub_by_name = 0
        prev_row_vclub_by_name = 1
    }
}

function set_active_vclub_by_name_row(){
    _debug('set_active_vclub_by_name_row()')
    _debug('cur_row_vclub_by_name: '+cur_row_vclub_by_name)
    set_passive_vclub_by_name_row()
    r_class_changer('video_club_by_name_row_', cur_row_vclub_by_name, "hover")
}

function set_passive_vclub_by_name_row(){
    _debug('set_passive_vclub_by_name_row()')
    _debug('prev_row_vclub_by_name: '+prev_row_vclub_by_name)
    r_class_changer('video_club_by_name_row_', prev_row_vclub_by_name, "unhover")
}

function set_passive_all_vclub_by_name_row(){
    _debug('set_passive_all_vclub_by_name_row()')
    _debug('cur_row_vclub_by_name: '+cur_row_vclub_by_name)
    r_class_changer('video_club_by_name_row_', cur_row_vclub_by_name, "unhover")
}

function call_con_menu_vclub_by_name_func(){
    _debug('call_con_menu_vclub_by_name_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_name[cur_row_vclub_con_menu])
    //hide_video_club_con_menu()
}

function start_play_vclub_by_name(){
    _debug('start_play_vclub_by_name()')
    cur_place = 'vclub'
    //show_playing(tmp_vclub_by_name_arr[cur_row_vclub_by_name].name, tmp_vclub_by_name_arr[cur_row_vclub_by_name].id)
    play('auto ' + video_dir+tmp_vclub_by_name_arr[cur_row_vclub_by_name].id+'.mpg')
    //hide_video_club_con_menu()
}

function load_vclub_by_name(page){
    doLoad('vod&action='+((cur_vclub_abc_bar_page-1)*10+cur_row_vclub_abc+1)+'&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, fav_vclub_on)
    normlight_abc_bar_row()
    hightlight_abc_bar_row()
}

function fill_vclub_by_name(arr){
    _debug('fill_vclub_by_name()')
    vclub_page_bar(cur_vclub_by_name_page ,total_vclub_by_name_pages)
    tmp_vclub_by_name_arr = arr
    _debug('fill_vclub_by_name()')
    max_vclub_by_name_rows = arr.length
    _debug('max_vclub_by_name: '+max_vclub_by_name_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        
        //document.getElementById('video_club_by_name_row_'+tv_n_i).className = ""
        change_class_by_ids('black_row', document.getElementById('video_club_by_name_row_'+tv_n_i))
        
        document.getElementById('video_club_by_name_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_club_by_name_my_video_'+(tv_n_i)).innerHTML = arr[tv_n_i].my_video
        document.getElementById('video_club_by_name_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_name_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_name_my_video_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_name_year_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_vclub_by_name_row_focus){
        set_active_vclub_by_name_row()
        need_vclub_by_name_row_focus = 0
    }
}

function del_vclub_by_name(){
    _debug('del_vclub_by_name()')
    vclub_page_bar(cur_vclub_by_name_page ,total_vclub_by_name_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_name_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_name_my_video_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_name_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_name_rows = 0
}
/**/

/* ABC CLUB BAR */
function shift_vclub_abc(shift_row){
    _debug('shift_vclub_abc('+shift_row+')')
    prev_row_vclub_abc = cur_row_vclub_abc
    if(shift_row > 0){
        if(shift_row + cur_row_vclub_abc > total_rows_vclub_abc-1){
            shift_vclub_abc_page(1)
        }else{
            cur_row_vclub_abc++
            set_active_vclub_abc_row()
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_vclub_abc < 0){
            shift_vclub_abc_page(-1)
        }else{
            cur_row_vclub_abc --
            set_active_vclub_abc_row()
        }
    }
}

function shift_vclub_abc_page(dir){
    _debug('shift_vclub_abc_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_abc_bar_page < total_vclub_abc_bar_pages){
            cur_vclub_abc_bar_page++
            normlight_abc_bar_row()
            need_vclub_abc_bar_focus = 1
            set_passive_all_vclub_abc_row()
            cur_row_vclub_abc = 0
            fill_abc_bar(cur_vclub_abc_bar_page, 'video_club_abc_text_')
        }
    }else if (dir < 0){
        if (cur_vclub_abc_bar_page > 1){
            cur_vclub_abc_bar_page--
            normlight_abc_bar_row()
            need_vclub_abc_bar_focus = 1
            set_passive_all_vclub_abc_row()
            cur_row_vclub_abc = 9
            fill_abc_bar(cur_vclub_abc_bar_page, 'video_club_abc_text_')
        }
    }
}

function set_active_vclub_abc_row(){
    _debug('set_active_vclub_abc_row()')
    _debug('cur_row_vclub_abc: '+cur_row_vclub_abc)
    set_passive_vclub_abc_row()
    r_class_changer('video_club_abc_row_', cur_row_vclub_abc, "hover")
}

function set_passive_vclub_abc_row(){
    _debug('set_passive_vclub_abc_row()')
    r_class_changer('video_club_abc_row_', prev_row_vclub_abc, "unhover")
}

function set_passive_all_vclub_abc_row(){
    _debug('set_passive_all_vclub_abc_row()')
    r_class_changer('video_club_abc_row_', cur_row_vclub_abc, "unhover")
}

function hightlight_abc_bar_row(){
    lighted_row_vclub_abc = cur_row_vclub_abc
    r_class_changer('video_club_abc_row_', lighted_row_vclub_abc, "hightlight")
}

function normlight_abc_bar_row(){
    r_class_changer('video_club_abc_row_', lighted_row_vclub_abc, "normlight")
}
/**/

/* CLASS CHANGER */
function class_changer(item, item_num, action){
    _debug('class_changer('+item+', '+item_num+', '+action+')')
    
    
    tmp_class_name = document.getElementById(item+''+item_num).className

    if (action == "hover"){
        if (tmp_class_name == "black_row"){
            document.getElementById(item+''+item_num).className = "hover_black_row"
        }else if(tmp_class_name == "grey_row"){
            document.getElementById(item+''+item_num).className = "hover_grey_row"
        }
        return;
    }
    
    if (action == "unhover"){
        if(tmp_class_name == "hover_black_row"){
            document.getElementById(item+''+item_num).className = "black_row"
        }else if(tmp_class_name == "hover_grey_row"){
            document.getElementById(item+''+item_num).className = "grey_row"
        }
        return;
    }
    
    if (action == "hightlight"){
        if(tmp_class_name == "hover_black_row" || tmp_class_name == "hover_grey_row"){
            document.getElementById(item+''+item_num).className = "hover_black_row"
        }else if (tmp_class_name == "black_row" || tmp_class_name == "grey_row"){
            document.getElementById(item+''+item_num).className = "black_row"
        }
        return;
    }
    
    if (action == "normlight"){
        if(tmp_class_name == "black_row" || tmp_class_name == "grey_row"){
            document.getElementById(item+''+item_num).className = "grey_row"
        }else if (tmp_class_name == "hover_black_row" || tmp_class_name == "hover_grey_row"){
            document.getElementById(item+''+item_num).className = "hover_grey_row"
        }
        return;
    } 
}

function r_class_changer(item, item_num, action){
    _debug('class_changer('+item+', '+item_num+', '+action+')')

    row = document.getElementById(item+''+item_num)
    tmp_class_name = row.cells[0].className
    
    if (action == "hover"){
        if (tmp_class_name == "black_row"){
            change_class_by_ids('hover_black_row', row)
        }else if(tmp_class_name == "grey_row"){
            change_class_by_ids('hover_grey_row', row)
        }
        return;
    }
    if (action == "unhover"){
        if(tmp_class_name == "hover_black_row"){
            change_class_by_ids('black_row', row)
        }else if(tmp_class_name == "hover_grey_row"){
            change_class_by_ids('grey_row', row)
        }
        return;
    }
    
    if (action == "hightlight"){
        if(tmp_class_name == "hover_black_row" || tmp_class_name == "hover_grey_row"){
            change_class_by_ids('hover_black_row', row)
        }else if (tmp_class_name == "black_row" || tmp_class_name == "grey_row"){
            change_class_by_ids('black_row', row)
        }
        return;
    }
    
    if (action == "normlight"){
        if(tmp_class_name == "black_row" || tmp_class_name == "grey_row"){
            change_class_by_ids('grey_row', row)
        }else if (tmp_class_name == "hover_black_row" || tmp_class_name == "hover_grey_row"){
            change_class_by_ids('hover_grey_row', row)
        }
        return;
    } 
    
}

function change_class_by_ids(class_name, row){
    _debug('change_class_by_ids('+class_name+','+row+')')
    for (i=0; i<row.cells.length; i++){
        //_debug('row.cells[i]: '+row.cells[i].className)
        row.cells[i].className = class_name
    }
}
/**/

/* VIDEO CLUB INFO */
function show_video_club_info(){
    _debug('show_video_club_info()')
    _log('show_video_club_info()')
    document.getElementById('video_club_info').style.display = ''
    document.getElementById('video_club_info_screen_img').innerHTML = ''
    //document.getElementById('video_club_info_descr_txt').scrollTop = 0
    document.getElementById('video_club_info_descr').scrollTop = 0
    video_club_info_on = 1
    if (vclub_by_name_on > 0){
        item_for_vclub_info = tmp_vclub_by_name_arr[cur_row_vclub_by_name]
        prev_vclub_page = 'video_club_by_name'
    }else if(vclub_by_genre_on > 0){
        item_for_vclub_info = tmp_vclub_by_genre_arr[cur_row_vclub_by_genre]
        prev_vclub_page = 'video_club_by_genre'
    }else if(vclub_by_year_on > 0){
        item_for_vclub_info = tmp_vclub_by_year_arr[cur_row_vclub_by_year]
        prev_vclub_page = 'video_club_by_year'
    }else if(vclub_by_add_time_on > 0){
        item_for_vclub_info = tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time]
        prev_vclub_page = 'video_club_by_add_time'
    }else if(vclub_by_top_on > 0){
        item_for_vclub_info = tmp_vclub_by_top_arr[cur_row_vclub_by_top]
        prev_vclub_page = 'video_club_by_top'
    }else if(vclub_by_search_on > 0){
        item_for_vclub_info = tmp_vclub_by_search_arr[cur_row_vclub_by_search]
        prev_vclub_page = 'video_club_by_search'
    }else if(vclub_not_ended_on > 0){
        item_for_vclub_info = tmp_vclub_not_ended_arr[cur_row_vclub_not_ended]
        prev_vclub_page = 'video_club_not_ended'
    }
    _debug('prev_vclub_page: '+prev_vclub_page)
    fill_video_club_info()
    cur_partition = 'vclub'
}

function hide_video_club_info(){
    _debug('hide_video_club_info()')
    document.getElementById('video_club_info').style.display = 'none'
    //document.getElementById('video_club_info_descr_txt').blur()
    //document.getElementById('video_club_info_descr').blur()
    video_club_info_on = 0
    if(video_club_info_con_menu_on == 1){
        hide_video_club_info_con_menu()
    }
}

function show_video_club_info_slide(){
    _debug('show_video_club_info_slide()')
    tmp_vclub_screen_array = item_for_vclub_info.screenshots
    arr_length = tmp_vclub_screen_array.length
    try{
        _debug('img uri: '+tmp_vclub_screen_array[0]['uri'])
        if(arr_length>0 && tmp_vclub_screen_array[0]['uri']){
            document.getElementById('video_club_info_screen_img').innerHTML = '<img src="'+tmp_vclub_screen_array[0]['uri']+'" width="240" height="320" onerror="this.src=\'i/1x1.gif\'">'
        }
    }catch(e){
        _debug(e)
    }
}

function open_prev_vclub_page(){
    _debug('open_prev_vclub_page()')
    if(prev_vclub_page == 'video_club_by_name'){
        show_video_club_by_name()
    }
}

function fill_video_club_info(){
    _debug('fill_video_club_info()')
    document.getElementById('video_club_info_name').innerHTML = item_for_vclub_info.name
    document.getElementById('video_club_info_descr_txt').innerHTML = item_for_vclub_info.desc
    //document.getElementById('video_club_info_descr_txt').focus()
    //document.getElementById('video_club_info_descr').focus()
    show_video_club_info_slide()
    empty_vclub_info = 0
}

function del_video_club_info(){
    _debug('del_video_club_info()')
    document.getElementById('video_club_info_descr_txt').innerHTML = '&nbsp;'
    document.getElementById('video_club_info_name').innerHTML = ''
    document.getElementById('video_club_info_screen_img').innerHTML = ''
    empty_vclub_info = 1
}

function shift_video_club_info(dir, offset){
    
    var video_club_info = document.getElementById('video_club_info_descr');
    
    var top = video_club_info.scrollTop;
    
    _debug('top: '+top);

    if (dir>0){
        top = top+offset
    }else{
        if (top != 0){
            top = top-offset
        }
    }
    
    video_club_info.scrollTop = top
    
    _debug('after top: '+top);
    _debug('after scrollTop: '+video_club_info.scrollTop);
}

function check_empty_video_club_info(){
    _debug('check_empty_video_club_info()')
    if(empty_vclub_info == 0 && video_club_info_on == 0){
        del_video_club_info()
    }
}

function show_video_club_info_con_menu(){
    
    tmp_cur_id = item_for_vclub_info.id
    tmp_series_arr = item_for_vclub_info.series
    
    series_cur_num = 0
    
    if (typeof(tmp_series_arr) == 'object'){
        series_total = tmp_series_arr.length
    }else{
        series_total = 0
    }
    
    _debug('tmp_cur_id: '+tmp_cur_id)
    
    if (series_total > 0){
        fill_first_row_video_club_info_con_menu('<<  '+words['series']+' '+tmp_series_arr[series_cur_num]+'  >>')
    }else{
        fill_first_row_video_club_info_con_menu(words['view'])
    }
    
    document.getElementById('video_club_info_con_menu').style.display = ''
    video_club_info_con_menu_on = 1
    set_active_video_club_info_con_menu_row()
    //document.getElementById('video_club_info_descr_txt').blur()
    document.getElementById('video_club_info_descr').blur()
    //document.getElementById('video_club_info_con_menu').focus()
    show_con_alpha_layer()
}

function hide_video_club_info_con_menu(){
    document.getElementById('video_club_info_con_menu').style.display = 'none'
    video_club_info_con_menu_on = 0
    set_passive_all_video_club_info_con_menu_row()
    prev_row_vclub_info_con_menu = 1
    cur_row_vclub_info_con_menu = 0
    //document.getElementById('video_club_info_con_menu').blur()
    //document.getElementById('video_club_info_descr_txt').focus()
    //document.getElementById('video_club_info_descr').focus()
    hide_con_alpha_layer()
}

function fill_first_row_video_club_info_con_menu(txt){
    document.getElementById('video_club_info_con_menu_row_0').innerHTML = txt
}

function shift_series_video_club_info_con_menu(shift){
    _debug('shift_series_video_club_info_con_menu('+shift+')')
    if (series_total > 0){
        if (shift > 0){
            if (shift + series_cur_num > series_total-1){
                series_cur_num = 0
            }else{
                series_cur_num ++
            }
        }else{
            if (shift + series_cur_num < 0){
                series_cur_num = series_total-1
            }else{
                series_cur_num--
            }
        }
        fill_first_row_video_club_info_con_menu('<<  '+words['series']+' '+tmp_series_arr[series_cur_num]+'  >>')
    }
}

function shift_video_club_info_con_menu(shift_row){
    _debug('shift_video_club_info_con_menu('+shift_row+')')
    prev_row_vclub_info_con_menu = cur_row_vclub_info_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_vclub_info_con_menu > total_rows_vclub_info_con_menu-1){
            cur_row_vclub_info_con_menu = 0
        }else{
            cur_row_vclub_info_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_vclub_info_con_menu < 0){
            cur_row_vclub_info_con_menu = total_rows_vclub_info_con_menu-1
        }else{
            cur_row_vclub_info_con_menu --
        }
    }
    set_active_video_club_info_con_menu_row()
}

function set_active_video_club_info_con_menu_row(){
    _debug('set_active_video_club_info_con_menu_row()')
    set_passive_video_club_info_con_menu_row()
    class_changer('video_club_info_con_menu_row_', cur_row_vclub_info_con_menu, "hover")
}

function set_passive_video_club_info_con_menu_row(){
    _debug('set_passive_video_club_info_con_menu_row()')
    class_changer('video_club_info_con_menu_row_', prev_row_vclub_info_con_menu, "unhover")
}

function set_passive_all_video_club_info_con_menu_row(){
    _debug('set_passive_video_club_info_con_menu_row()')
    class_changer('video_club_info_con_menu_row_', cur_row_vclub_info_con_menu, "unhover")
}

function call_con_menu_vclub_info_func(){
    _debug('call_con_menu_vclub_info_func()')
    eval(func_vclub_info[cur_row_vclub_info_con_menu])
}

function start_play_vclub_info(){
    _debug('start_play_vclub_info()')
    cur_partition = 'vclub'
    item_for_vclub_info
    cur_place = 'vclub'
    //show_playing(item_for_vclub_info.name, item_for_vclub_info.id)
    play('auto ' + video_dir+item_for_vclub_info.id+'.mpg')
    //hide_video_club_info()
    //hide_video_club()
}
/**/

/* VIDEO CLUB BY GENRE */
function show_video_club_by_genre(){
    _debug('show_video_club_by_genre()')
    _log('show_video_club_by_genre()')
    fill_abc_bar(1, 'video_club_abc_text_')
    document.getElementById('abc_bar_video_club').style.display = ''
    document.getElementById('abc_bar_video_club').style.left = '165'
    document.getElementById('main_bar_video_club_by_genre').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''
    switch_on_video_club_page(2)
    vclub_by_genre_on = 1
    prev_row_vclub_abc = 1
    cur_row_vclub_abc = 0
    lighted_row_vclub_abc = 0
    lighted_row_vclub_genre = 0
    need_vclub_by_genre_row_focus = 1
    load_vclub_by_genre(0)
    show_vclub_genre_bar()
    set_active_vclub_by_genre_row()
}

function hide_video_club_by_genre(){
    _debug('hide_video_club_by_genre()')
    document.getElementById('abc_bar_video_club').style.display = 'none'
    document.getElementById('main_bar_video_club_by_genre').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    switch_off_video_club_page(2)
    vclub_by_genre_on = 0
    //disable abc
    set_passive_all_vclub_abc_row()
    cur_abc_vclub_bar = 0
    prev_row_vclub_abc = 1
    cur_row_vclub_abc = 0
    cur_vclub_abc_bar_page = 1
    
    stb.set_cookie('parent_password=-1')
    //disable genre
    set_passive_all_vclub_genre_bar_row()
    cur_genre_vclub_bar = 0
    prev_row_vclub_genre_bar = 1
    cur_row_vclub_genre_bar = 0
    
    normlight_abc_bar_row()
    normlight_genre_bar_row()
    
    hide_vclub_genre_bar()
    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    prev_row_vclub_by_genre = cur_row_vclub_by_genre
    set_passive_vclub_by_genre_row()
    cur_vclub_by_genre_page = 1
    cur_row_vclub_by_genre = 0
    prev_row_vclub_by_genre = 1
    prev_genre_id = 0
    curr_genre_id = 1
}

function shift_vclub_by_genre(shift_row){
    _debug('shift_vclub_by_genre('+shift_row+')')
    prev_row_vclub_by_genre = cur_row_vclub_by_genre
    if(shift_row > 0){
        if(cur_row_vclub_by_genre < max_vclub_by_genre_rows-1){
            cur_row_vclub_by_genre++
            set_active_vclub_by_genre_row()
        }else{
            shift_vclub_by_genre_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_genre > 0){
            cur_row_vclub_by_genre --
            set_active_vclub_by_genre_row()
        }else{
            shift_vclub_by_genre_page(-1)
        }
    }
}

function shift_vclub_by_genre_page(dir){
     _debug('shift_vclub_by_genre_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_genre_page < total_vclub_by_genre_pages){
            cur_vclub_by_genre_page++
            need_vclub_by_genre_row_focus = 1
            set_passive_all_vclub_by_genre_row()
            load_vclub_by_genre(cur_vclub_by_genre_page)
            cur_row_vclub_by_genre = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_genre_page > 1){
            cur_vclub_by_genre_page--
            need_vclub_by_genre_row_focus = 1
            set_passive_all_vclub_by_genre_row()
            load_vclub_by_genre(cur_vclub_by_genre_page)
            cur_row_vclub_by_genre = 9
        }
    }
}

function disable_vclub_by_genre_row(){
    _debug('disable_vclub_by_genre_row()')
    if(cur_row_vclub_by_genre > 0 && cur_row_vclub_by_genre <= max_vclub_by_genre_rows){
        document.getElementById('video_club_by_genre_row_'+cur_row_vclub_by_genre).className = 'video_td'
        cur_row_vclub_by_genre = 0
        prev_row_vclub_by_genre = 1
    }
}

function set_active_vclub_by_genre_row(){
    _debug('set_active_vclub_by_genre_row()')
    _debug('cur_row_vclub_by_genre: '+cur_row_vclub_by_genre)
    set_passive_vclub_by_genre_row()
    r_class_changer('video_club_by_genre_row_', cur_row_vclub_by_genre, "hover")
}

function set_passive_vclub_by_genre_row(){
    _debug('set_passive_vclub_by_genre_row()')
    _debug('prev_row_vclub_by_genre: '+prev_row_vclub_by_genre)
    r_class_changer('video_club_by_genre_row_', prev_row_vclub_by_genre, "unhover")
}

function set_passive_all_vclub_by_genre_row(){
    _debug('set_passive_all_vclub_by_genre_row()')
    _debug('cur_row_vclub_by_genre: '+cur_row_vclub_by_genre)
    r_class_changer('video_club_by_genre_row_', cur_row_vclub_by_genre, "unhover")
}

function call_con_menu_vclub_by_genre_func(){
    _debug('call_con_menu_vclub_by_genre_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_genre[cur_row_vclub_con_menu])
    //hide_video_club_con_menu()
}

function start_play_vclub_by_genre(){
    _debug('start_play_vclub_by_genre()')
    cur_place = 'vclub'
    //show_playing(tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].name, tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id)
    play('auto ' + video_dir+tmp_vclub_by_genre_arr[cur_row_vclub_by_genre].id+'.mpg')
    //hide_video_club_con_menu()
}

function load_vclub_by_genre(page){
    _debug('load_vclub_by_genre('+page+')')
    //tmp_genre_id = ((cur_vclub_genre_bar_page-1)*total_rows_vclub_genre_bar+cur_row_vclub_genre_bar+1)
    tmp_genre_idx = ((cur_vclub_genre_bar_page-1)*total_rows_vclub_genre_bar+cur_row_vclub_genre_bar)
    tmp_genre_id = genre_names_id[tmp_genre_idx]
    _debug('tmp_genre_id: '+tmp_genre_id)
    curr_genre_id = tmp_genre_id
    _debug('curr_genre_id: '+curr_genre_id)
    _debug('prev_genre_id: '+prev_genre_id)
    /*if ((tmp_genre_id == 14 || tmp_genre_id == 12) && curr_genre_id != prev_genre_id){
        show_password_input('parent_password', "load_vclub_by_genre_2("+page+")")
    }else if ((tmp_genre_id == 14 || tmp_genre_id == 12) && curr_genre_id == prev_genre_id){
        prev_genre_id = curr_genre_id
        load_vclub_by_genre_2(page)
    }else{
        prev_genre_id = curr_genre_id
        stb.set_cookie('parent_password=-1')
        load_vclub_by_genre_2(page)
    }*/
    prev_genre_id = curr_genre_id
    load_vclub_by_genre_2(page)
}

function load_vclub_by_genre_2(page){
    _debug('load_vclub_by_genre_2('+page+')')
    //tmp_genre_id = ((cur_vclub_genre_bar_page-1)*total_rows_vclub_genre_bar+cur_row_vclub_genre_bar+1)
    tmp_genre_idx = ((cur_vclub_genre_bar_page-1)*total_rows_vclub_genre_bar+cur_row_vclub_genre_bar)
    tmp_genre_id = genre_names_id[tmp_genre_idx]
    //_debug('genre_names_id: '+genre_names_id.toSource())
    _debug('tmp_genre_idx: '+tmp_genre_idx)
    _debug('tmp_genre_id: '+tmp_genre_id)
    //doLoad('vod&action='+(cur_row_vclub_abc+1)+'&genre_id='+tmp_genre_id, page, fav_vclub_on)
    doLoad('vod&action='+((cur_vclub_abc_bar_page-1)*10+cur_row_vclub_abc+1)+'&genre_id='+tmp_genre_id+'&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, fav_vclub_on)
    
    prev_genre_id = curr_genre_id
    
    normlight_abc_bar_row()
    hightlight_abc_bar_row()
    
    normlight_genre_bar_row()
    hightlight_genre_bar_row()
}

function fill_vclub_by_genre(arr){
    _debug('fill_vclub_by_genre()')
    vclub_page_bar(cur_vclub_by_genre_page ,total_vclub_by_genre_pages)
    tmp_vclub_by_genre_arr = arr
    //del_vclub_by_genre()
    _debug('fill_vclub_by_genre()')
    max_vclub_by_genre_rows = arr.length
    _debug('max_vclub_by_genre_rows: '+max_vclub_by_genre_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('video_club_by_genre_row_'+tv_n_i))
        
        document.getElementById('video_club_by_genre_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_club_by_genre_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_genre_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_genre_year_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_vclub_by_genre_row_focus){
        set_active_vclub_by_genre_row()
        need_vclub_by_genre_row_focus = 0
    }
}

function del_vclub_by_genre(){
    _debug('del_vclub_by_genre()')
    vclub_page_bar(cur_vclub_by_genre_page ,total_vclub_by_genre_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_genre_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_genre_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_genre_rows = 0
}
/**/

/* GENRE CLUB BAR */
function show_vclub_genre_bar(){
    _debug('show_vclub_genre_bar()')
    document.getElementById('genre_bar_video_club').style.display = ''
    load_vclub_genre_bar(0)
}

function hide_vclub_genre_bar(){
    _debug('hide_vclub_genre_bar()')
    document.getElementById('genre_bar_video_club').style.display = 'none'
    prev_row_vclub_genre_bar = 1
    cur_row_vclub_genre_bar = 0
    cur_vclub_genre_bar_page = 1
}

function shift_vclub_genre_bar(shift_row){
    _debug('shift_vclub_genre_bar('+shift_row+')') 
    prev_row_vclub_genre_bar = cur_row_vclub_genre_bar
    if(shift_row > 0){
        if(cur_row_vclub_genre_bar < max_vclub_genre_bar_rows-1){
            cur_row_vclub_genre_bar++
            set_active_vclub_genre_bar_row()
        }else{
            shift_vclub_genre_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_genre_bar > 0){
            cur_row_vclub_genre_bar --
            set_active_vclub_genre_bar_row()
        }else{
            shift_vclub_genre_bar_page(-1)
        }
    }
    //set_active_vclub_genre_bar_row()  
}

function shift_vclub_genre_bar_page(dir){
     _debug('shift_vclub_genre_bar_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_genre_bar_page < total_vclub_genre_bar_pages){
            set_passive_all_vclub_genre_bar_row()
            cur_vclub_genre_bar_page++
            normlight_genre_bar_row()
            need_vclub_genre_bar_focus = 1
            cur_row_vclub_genre_bar = 0
            load_vclub_genre_bar(cur_vclub_genre_bar_page-1)
            
        }
    }else if (dir < 0){
        if (cur_vclub_genre_bar_page > 1){
            set_passive_all_vclub_genre_bar_row()
            cur_vclub_genre_bar_page--
            normlight_genre_bar_row()
            need_vclub_genre_bar_focus = 1
            cur_row_vclub_genre_bar = 9
            load_vclub_genre_bar(cur_vclub_genre_bar_page-1)
        }
    }
}

function load_all_vclub_genres(){
    _debug('load_all_vclub_genres()')
    doLoad('all_vclub_genres', 1, cur_cat_num)
}

function get_genre_names_from_raw(arr){
    _debug('get_genre_names_from_raw()')
    genre_names = new Array()
    genre_names_id = new Array()
    for (i=0; i<arr.length; i++){
        genre_names[i] = arr[i].title
        genre_names_id[i] = arr[i].id
    }
    total_vclub_genre_bar_pages = Math.ceil(genre_names.length/10)
}

function load_vclub_genre_bar(page){
    _debug('load_vclub_genre_bar('+page+')')
    begin = (page)*10
    end = (page+1)*10
    _debug('slice begin: '+begin)
    _debug('slice end: '+end)

    genre_slice = genre_names.slice(begin,end)
    _debug('genre_slice: '+genre_slice)
    fill_vclub_genre_bar(genre_slice)
}

function fill_vclub_genre_bar(arr){
    _debug('fill_vclub_genre_bar()')
    tmp_vclub_genre_bar_arr = arr
    arr_length = max_vclub_genre_bar_rows = arr.length
    _debug('max_vclub_by_name: '+max_vclub_genre_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('video_club_genre_text_'+(tv_n_i)).innerHTML = arr[tv_n_i]
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_genre_text_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_vclub_genre_bar_focus){
        set_active_vclub_genre_bar_row()
        need_vclub_genre_bar_focus = 0
    }
}

function del_vclub_genre_bar(){
    _debug('del_vclub_genre_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_genre_text_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_genre_bar_rows = 0
}

function set_active_vclub_genre_bar_row(){
    _debug('set_active_vclub_genre_bar_row()')
    _debug('cur_row_vclub_genre_bar: '+cur_row_vclub_genre_bar)
    set_passive_vclub_genre_bar_row()
    r_class_changer('video_club_genre_row_', cur_row_vclub_genre_bar, "hover")
}

function set_passive_vclub_genre_bar_row(){
    _debug('set_passive_vclub_genre_bar_row()')
    r_class_changer('video_club_genre_row_', prev_row_vclub_genre_bar, "unhover")
}

function set_passive_all_vclub_genre_bar_row(){
    _debug('set_passive_all_vclub_genre_bar_row()')
    _debug('cur_row_vclub_genre_bar: '+cur_row_vclub_genre_bar)
    r_class_changer('video_club_genre_row_', cur_row_vclub_genre_bar, "unhover")
}

function hightlight_genre_bar_row(){
    lighted_row_vclub_genre = cur_row_vclub_genre_bar
    r_class_changer('video_club_genre_row_', lighted_row_vclub_genre, "hightlight")
}

function normlight_genre_bar_row(){
    r_class_changer('video_club_genre_row_', lighted_row_vclub_genre, "normlight")
}
/**/

/* YEAR CLUB BAR */
function show_vclub_year_bar(){
    document.getElementById('year_bar_video_club').style.display = ''
    load_vclub_year_bar(0)
}

function hide_vclub_year_bar(){
    document.getElementById('year_bar_video_club').style.display = 'none'
    normlight_year_bar_row()
    set_passive_all_vclub_year_bar_row()
    prev_row_vclub_year_bar = 1
    cur_row_vclub_year_bar = 0
    total_rows_vclub_year_bar = 10
    lighted_row_vclub_year = 0
    cur_vclub_year_bar_page = 1
    need_year_bar_focus = 0
}

function shift_vclub_year_bar(shift_row){
    _debug('shift_vclub_year_bar('+shift_row+')')
    prev_row_vclub_year_bar = cur_row_vclub_year_bar
    if(shift_row > 0){
        if(shift_row + cur_row_vclub_year_bar > total_rows_vclub_year_bar-1){
            shift_vclub_year_bar_page(1)
        }else{
            cur_row_vclub_year_bar++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_vclub_year_bar < 0){
            shift_vclub_year_bar_page(-1)
        }else{
            cur_row_vclub_year_bar --
        }
    }
    set_active_vclub_year_bar_row()
}

function shift_vclub_year_bar_page(dir){
    _debug('shift_vclub_year_bar_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_year_bar_page < total_vclub_year_bar_pages){
            cur_vclub_year_bar_page++
            normlight_year_bar_row()
            need_year_bar_focus = 1
            set_passive_all_vclub_year_bar_row()
            load_vclub_year_bar(cur_vclub_year_bar_page)
            cur_row_vclub_year_bar = 0
        }
    }else if (dir < 0){
        if (cur_vclub_year_bar_page > 1){
            cur_vclub_year_bar_page--
            normlight_year_bar_row()
            need_year_bar_focus = 1
            set_passive_all_vclub_year_bar_row()
            load_vclub_year_bar(cur_vclub_year_bar_page)
            cur_row_vclub_year_bar = 9
        }
    }
}

function set_active_vclub_year_bar_row(){
    _debug('set_active_vclub_year_bar_row()')
    _debug('cur_row_vclub_year_bar: '+cur_row_vclub_year_bar)
    set_passive_vclub_year_bar_row()
    r_class_changer('video_club_year_row_', cur_row_vclub_year_bar, "hover")
}

function set_passive_vclub_year_bar_row(){
    _debug('set_passive_vclub_year_bar_row()')
    r_class_changer('video_club_year_row_', prev_row_vclub_year_bar, "unhover")
}

function set_passive_all_vclub_year_bar_row(){
    _debug('set_passive_all_vclub_year_bar_row()')
    r_class_changer('video_club_year_row_', cur_row_vclub_year_bar, "unhover")
}

function load_vclub_year_bar(page){
    _debug('load_vclub_year_bar('+page+')')
    doLoad('vod&action=year_bar', page)
}

function feel_vclub_year_bar(arr){
    _debug('feel_vclub_year_bar()')    
    total_rows_vclub_year_bar = arr.length
    _debug('max_vclub_by_genre_rows: '+total_rows_vclub_year_bar)
    for(tv_n_i = 0; tv_n_i < total_rows_vclub_year_bar; tv_n_i++){
        document.getElementById('video_club_year_text_'+(tv_n_i)).innerHTML = arr[tv_n_i]
    }
    if (total_rows_vclub_year_bar<10){
        for(tv__i = total_rows_vclub_year_bar; tv__i < 10; tv__i++){
            document.getElementById('video_club_year_text_'+(tv__i)).innerHTML = ''
        }
    }
    if (need_year_bar_focus){
        set_active_vclub_year_bar_row()
        need_year_bar_focus = 0
    }
}
/**/

/* VIDEO CLUB BY YEAR */
function show_video_club_by_year(){
    _debug('show_video_club_by_year()')
    _log('show_video_club_by_year()')
    fill_abc_bar(1, 'video_club_abc_text_')
    document.getElementById('abc_bar_video_club').style.display = ''
    document.getElementById('abc_bar_video_club').style.left = '100'
    document.getElementById('main_bar_video_club_by_year').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''

    switch_on_video_club_page(3)
    vclub_by_year_on = 1
    prev_row_vclub_abc = 1
    cur_row_vclub_abc = 0
    lighted_row_vclub_abc = 0
    show_vclub_year_bar()
    need_vclub_by_year_focus = 1
    load_vclub_by_year(0)
    set_active_vclub_by_year_row()
}

function hide_video_club_by_year(){
    _debug('hide_video_club_by_year()')
    document.getElementById('abc_bar_video_club').style.display = 'none'
    document.getElementById('main_bar_video_club_by_year').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    
    switch_off_video_club_page(3)
    
    vclub_by_year_on = 0
    // disable genre
    hide_vclub_year_bar()
    cur_year_vclub_bar = 0
    
    //disable abc
    set_passive_all_vclub_abc_row()
    cur_abc_vclub_bar = 0
    prev_row_vclub_abc = 1
    cur_row_vclub_abc = 0
    cur_vclub_abc_bar_page = 1
    
    normlight_abc_bar_row()

    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    prev_row_vclub_by_year = cur_row_vclub_by_year
    set_passive_vclub_by_year_row()
    cur_vclub_by_year_page = 1
    cur_row_vclub_by_year = 0
    prev_row_vclub_by_year = 1
}

function shift_vclub_by_year(shift_row){
    _debug('shift_vclub_by_year('+shift_row+')')
    prev_row_vclub_by_year = cur_row_vclub_by_year
    if(shift_row > 0){
        if(cur_row_vclub_by_year < max_vclub_by_year_rows-1){
            cur_row_vclub_by_year++
            set_active_vclub_by_year_row()
            //need_vclub_by_year_row_focus = 1
        }else{
            shift_vclub_by_year_page(1)
            //set_active_vclub_by_year_row()
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_year > 0){
            cur_row_vclub_by_year --
            set_active_vclub_by_year_row()
            //need_vclub_by_year_row_focus = 1
        }else{
            shift_vclub_by_year_page(-1)
            //set_active_vclub_by_year_row()
        }
    }
    /*if (need_vclub_by_year_row_focus){
        set_active_vclub_by_year_row()
        need_vclub_by_year_row_focus = 0
    }*/
}

function shift_vclub_by_year_page(dir){
     _debug('shift_vclub_by_year_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_year_page < total_vclub_by_year_pages){
            cur_vclub_by_year_page++
            need_vclub_by_year_focus = 1
            set_passive_all_vclub_by_year_row()
            load_vclub_by_year(cur_vclub_by_year_page)
            cur_row_vclub_by_year = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_year_page > 1){
            cur_vclub_by_year_page--
            need_vclub_by_year_focus = 1
            set_passive_all_vclub_by_year_row()
            load_vclub_by_year(cur_vclub_by_year_page)
            cur_row_vclub_by_year = 9
        }
    }
}

function disable_vclub_by_year_row(){
    _debug('disable_vclub_by_year_row()')
    if(cur_row_vclub_by_year > 0 && cur_row_year_by_genre <= max_vclub_by_year_rows){
        document.getElementById('video_club_by_genre_row_'+cur_row_vclub_by_year).className = 'video_td'
        cur_row_vclub_by_year = 0
        prev_row_vclub_by_year = 1
    }
}

function set_active_vclub_by_year_row(){
    _debug('set_active_vclub_by_year_row()')
    _debug('cur_row_vclub_by_year: '+cur_row_vclub_by_year)
    set_passive_vclub_by_year_row()
    r_class_changer('video_club_by_year_row_', cur_row_vclub_by_year, "hover")
}

function set_passive_vclub_by_year_row(){
    _debug('set_passive_vclub_by_year_row()')
    _debug('prev_row_vclub_by_year: '+prev_row_vclub_by_year)
    r_class_changer('video_club_by_year_row_', prev_row_vclub_by_year, "unhover")
}

function set_passive_all_vclub_by_year_row(){
    _debug('set_passive_all_vclub_by_year_row()')
    _debug('cur_row_vclub_by_year '+cur_row_vclub_by_year)
    r_class_changer('video_club_by_year_row_', cur_row_vclub_by_year, "unhover")
}

function call_con_menu_vclub_by_year_func(){
    _debug('call_con_menu_vclub_by_year_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_year[cur_row_vclub_con_menu])
    //hide_video_club_con_menu()
}

function start_play_vclub_by_year(){
    _debug('start_play_vclub_by_year()')
    cur_place = 'vclub'
    //show_playing(tmp_vclub_by_year_arr[cur_row_vclub_by_year].name, tmp_vclub_by_year_arr[cur_row_vclub_by_year].id)
    play('auto ' + video_dir+tmp_vclub_by_year_arr[cur_row_vclub_by_year].id+'.mpg')
    //hide_video_club_con_menu()
}

function load_vclub_by_year(page){
    //doLoad('vod&action='+(cur_row_vclub_abc+1)+'&year_range='+(cur_row_vclub_year_bar+(cur_vclub_year_bar_page-1)*10), page, fav_vclub_on)
    doLoad('vod&action='+((cur_vclub_abc_bar_page-1)*10+cur_row_vclub_abc+1)+'&year_range='+(cur_row_vclub_year_bar+(cur_vclub_year_bar_page-1)*10)+'&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, fav_vclub_on)
    normlight_abc_bar_row()
    hightlight_abc_bar_row()
    
    normlight_year_bar_row()
    hightlight_year_bar_row()
}

function hightlight_year_bar_row(){
    lighted_row_vclub_year = cur_row_vclub_year_bar
    r_class_changer('video_club_year_row_', lighted_row_vclub_year, "hightlight")
}

function normlight_year_bar_row(){
    r_class_changer('video_club_year_row_', lighted_row_vclub_year, "normlight")
}

function fill_vclub_by_year(arr){
    _debug('fill_vclub_by_year()')
    vclub_page_bar(cur_vclub_by_year_page ,total_vclub_by_year_pages)
    tmp_vclub_by_year_arr = arr
    //del_vclub_by_year()
    _debug('fill_vclub_by_year()')
    max_vclub_by_year_rows = arr.length
    _debug('max_vclub_by_year_rows: '+max_vclub_by_year_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('video_club_by_year_row_'+tv_n_i))
        
        document.getElementById('video_club_by_year_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        //document.getElementById('video_club_by_year_genre_'+(tv_n_i)).innerHTML = arr[tv_n_i].genre_name
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_year_title_'+(tv_i)).innerHTML = ''
            //document.getElementById('video_club_by_year_genre_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_vclub_by_year_focus){
        set_active_vclub_by_year_row()
        need_vclub_by_year_focus = 0
    }
}

function del_vclub_by_year(){
    _debug('del_vclub_by_year()')
    vclub_page_bar(cur_vclub_by_year_page ,total_vclub_by_year_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_year_title_'+(tv_n_i)).innerHTML = ''
        //document.getElementById('video_club_by_year_genre_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_year_rows = 0
}
/**/


/* VIDEO CLUB BY ADD TIME */
function show_video_club_by_add_time(){
    _debug('show_video_club_by_add_time()')
    _log('show_video_club_by_add_time()')
    document.getElementById('main_bar_video_club_by_add_time').style.display = ''
    document.getElementById('video_club_add_time_bar').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''
    switch_on_video_club_page(5)
    vclub_by_add_time_on = 1
    load_vclub_by_add_time(0)
    set_active_vclub_by_add_time_row()
}

function hide_video_club_by_add_time(){
    _debug('hide_video_club_by_add_time()')
    document.getElementById('main_bar_video_club_by_add_time').style.display = 'none'
    document.getElementById('video_club_add_time_bar').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    switch_off_video_club_page(5)
    vclub_by_add_time_on = 0
    
    normlight_add_time_bar_row()
    set_passive_all_vclub_add_time_row()
    cur_add_time_vclub_bar = 0
    prev_row_vclub_add_time = 1
    cur_row_vclub_add_time = 0
    lighted_row_vclub_add_time = 0
    cur_vclub_abc_bar_page = 1
    
    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    prev_row_vclub_by_add_time = cur_row_vclub_by_add_time
    set_passive_vclub_by_add_time_row()
    cur_vclub_by_add_time_page = 1
    cur_row_vclub_by_add_time = 0
    prev_row_vclub_by_add_time = 1
}

function shift_vclub_by_add_time(shift_row){
    _debug('shift_vclub_by_add_time('+shift_row+')')
    prev_row_vclub_by_add_time = cur_row_vclub_by_add_time
    if(shift_row > 0){
        if(cur_row_vclub_by_add_time < max_vclub_by_add_time_rows-1){
            cur_row_vclub_by_add_time++
            set_active_vclub_by_add_time_row()
        }else{
            shift_vclub_by_add_time_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_add_time > 0){
            cur_row_vclub_by_add_time --
            set_active_vclub_by_add_time_row()
        }else{
            shift_vclub_by_add_time_page(-1)
        }
    }
    //set_active_vclub_by_add_time_row()
}

function shift_vclub_by_add_time_page(dir){
     _debug('shift_vclub_by_add_time_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_add_time_page < total_vclub_by_add_time_pages){
            cur_vclub_by_add_time_page++
            need_vclub_by_add_time_row_focus = 1
            set_passive_all_vclub_by_add_time_row()
            load_vclub_by_add_time(cur_vclub_by_add_time_page)
            cur_row_vclub_by_add_time = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_add_time_page > 1){
            cur_vclub_by_add_time_page--
            need_vclub_by_add_time_row_focus = 1
            set_passive_all_vclub_by_add_time_row()
            load_vclub_by_add_time(cur_vclub_by_add_time_page)
            cur_row_vclub_by_add_time = 9
        }
    }
}

function disable_vclub_by_add_time_row(){
    _debug('disable_vclub_by_add_time_row()')
    if(cur_row_vclub_by_add_time > 0 && cur_row_vclub_by_add_time <= max_vclub_by_add_time_rows){
        document.getElementById('video_club_by_add_time_row_'+cur_row_vclub_by_add_time).className = 'video_td'
        cur_row_vclub_by_add_time = 0
        prev_row_vclub_by_add_time = 1
    }
}

function set_active_vclub_by_add_time_row(){
    _debug('set_active_vclub_by_add_time_row()')
    _debug('cur_row_vclub_by_add_time: '+cur_row_vclub_by_add_time)
    set_passive_vclub_by_add_time_row()
    r_class_changer('video_club_by_add_time_row_', cur_row_vclub_by_add_time, "hover")
}

function set_passive_vclub_by_add_time_row(){
    _debug('set_passive_vclub_by_add_time_row()')
    _debug('prev_row_vclub_by_add_time: '+prev_row_vclub_by_add_time)
    r_class_changer('video_club_by_add_time_row_', prev_row_vclub_by_add_time, "unhover")
}

function set_passive_all_vclub_by_add_time_row(){
    _debug('set_passive_all_vclub_by_add_time_row()')
    _debug('cur_row_vclub_by_add_time: '+cur_row_vclub_by_add_time)
    r_class_changer('video_club_by_add_time_row_', cur_row_vclub_by_add_time, "unhover")
}

function call_con_menu_vclub_by_add_time_func(){
    _debug('call_con_menu_vclub_by_add_time_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_add_time[cur_row_vclub_con_menu])
    //hide_video_club_con_menu()
}

function start_play_vclub_by_add_time(){
    _debug('start_play_vclub_by_add_time()')
    cur_place = 'vclub'
    //show_playing(tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].name, tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id)
    play('auto ' + video_dir+tmp_vclub_by_add_time_arr[cur_row_vclub_by_add_time].id+'.mpg')
    //hide_video_club_con_menu()
}

function load_vclub_by_add_time(page){
    doLoad('vod&vclub_by_add_time&action='+(cur_row_vclub_add_time+1)+'&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, 0)
    
    normlight_add_time_bar_row()
    hightlight_add_time_bar_row()
}

function fill_vclub_by_add_time(arr){
    _debug('fill_vclub_by_add_time()')
    vclub_page_bar(cur_vclub_by_add_time_page ,total_vclub_by_add_time_pages)
    tmp_vclub_by_add_time_arr = arr
    //del_vclub_by_add_time()
    _debug('fill_vclub_by_add_time()')
    max_vclub_by_add_time_rows = arr.length
    _debug('max_vclub_by_add_time: '+max_vclub_by_add_time_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('video_club_by_add_time_row_'+tv_n_i))
        
        document.getElementById('video_club_by_add_time_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_club_by_add_time_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_add_time_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_add_time_year_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_vclub_by_add_time_row_focus){
        set_active_vclub_by_add_time_row()
        need_vclub_by_add_time_row_focus = 0
    }
}

function del_vclub_by_add_time(){
    _debug('del_vclub_by_add_time()')
    vclub_page_bar(cur_vclub_by_add_time_page ,total_vclub_by_add_time_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_add_time_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_add_time_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_add_time_rows = 0
}
/**/

/* ADD TIME BAR */
function shift_vclub_add_time(shift_row){
    _debug('shift_vclub_add_time('+shift_row+')')
    prev_row_vclub_add_time = cur_row_vclub_add_time
    if(shift_row > 0){
        if(shift_row + cur_row_vclub_add_time > total_rows_vclub_add_time-1){
            cur_row_vclub_add_time = 0
        }else{
            cur_row_vclub_add_time++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_vclub_add_time < 0){
            cur_row_vclub_add_time = total_rows_vclub_add_time-1
        }else{
            cur_row_vclub_add_time --
        }
    }
    set_active_vclub_add_time_row()
}

function set_active_vclub_add_time_row(){
    _debug('set_active_vclub_add_time_row()')
    _debug('cur_row_vclub_add_time: '+cur_row_vclub_add_time)
    set_passive_vclub_add_time_row()
    r_class_changer('video_club_add_time_row_', cur_row_vclub_add_time, "hover")
}

function set_passive_vclub_add_time_row(){
    _debug('set_passive_vclub_add_time_row()')
    r_class_changer('video_club_add_time_row_', prev_row_vclub_add_time, "unhover")
}

function set_passive_all_vclub_add_time_row(){
    _debug('set_passive_all_vclub_add_time_row()')
    r_class_changer('video_club_add_time_row_', cur_row_vclub_add_time, "unhover")
}

function hightlight_add_time_bar_row(){
    lighted_row_vclub_add_time = cur_row_vclub_add_time
    r_class_changer('video_club_add_time_row_', lighted_row_vclub_add_time, "hightlight")
}

function normlight_add_time_bar_row(){
    r_class_changer('video_club_add_time_row_', lighted_row_vclub_add_time, "normlight")
}
/**/

/* VIDEO CLUB BY TOP */
function show_video_club_by_top(){
    _debug('show_video_club_by_top()')
    _log('show_video_club_by_top()')
    document.getElementById('main_bar_video_club_by_top').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''
    switch_on_video_club_page(4)
    vclub_by_top_on = 1
    load_vclub_by_top(0)
    //set_active_vclub_by_top_row()
}

function hide_video_club_by_top(){
    _debug('hide_video_club_by_top()')
    set_active_vclub_all_btn()
    document.getElementById('main_bar_video_club_by_top').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    switch_off_video_club_page(4)
    vclub_by_top_on = 0
    
    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    
    prev_row_vclub_by_top = cur_row_vclub_by_top
    set_passive_vclub_by_top_row()
    cur_vclub_by_top_page = 1
    cur_row_vclub_by_top = 0
    prev_row_vclub_by_top = 1
}

function shift_vclub_by_top(shift_row){
    _debug('shift_vclub_by_top('+shift_row+')')
    prev_row_vclub_by_top = cur_row_vclub_by_top
    if(shift_row > 0){
        if(cur_row_vclub_by_top < max_vclub_by_top_rows-1){
            cur_row_vclub_by_top++
        }else{
            shift_vclub_by_top_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_top > 0){
            cur_row_vclub_by_top --
        }else{
            shift_vclub_by_top_page(-1)
        }
    }
    set_active_vclub_by_top_row()
}

function shift_vclub_by_top_page(dir){
     _debug('shift_vclub_by_top_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_top_page < total_vclub_by_top_pages){
            cur_vclub_by_top_page++
            load_vclub_by_top(cur_vclub_by_top_page)
            cur_row_vclub_by_top = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_top_page > 1){
            cur_vclub_by_top_page--
            load_vclub_by_top(cur_vclub_by_top_page)
            cur_row_vclub_by_top = 9
        }
    }
}

function disable_vclub_by_top_row(){
    _debug('disable_vclub_by_top_row()')
    if(cur_row_vclub_by_top > 0 && cur_row_vclub_by_top <= max_vclub_by_top_rows){
        document.getElementById('video_club_by_top_row_'+cur_row_vclub_by_top).className = 'video_td'
        cur_row_vclub_by_top = 0
        prev_row_vclub_by_top = 1
    }
}

function set_active_vclub_by_top_row(){
    _debug('set_active_vclub_by_top_row()')
    _debug('cur_row_vclub_by_top: '+cur_row_vclub_by_top)
    set_passive_vclub_by_top_row()
    r_class_changer('video_club_by_top_row_', cur_row_vclub_by_top, "hover")
}

function set_passive_vclub_by_top_row(){
    _debug('set_passive_vclub_by_top_row()')
    _debug('prev_row_vclub_by_top: '+prev_row_vclub_by_top)
    r_class_changer('video_club_by_top_row_', prev_row_vclub_by_top, "unhover")
}

function set_passive_all_vclub_by_top_row(){
    _debug('set_passive_all_vclub_by_top_row()')
    _debug('cur_row_vclub_by_top: '+cur_row_vclub_by_top)
    r_class_changer('video_club_by_top_row_', cur_row_vclub_by_top, "unhover")
}

function call_con_menu_vclub_by_top_func(){
    _debug('call_con_menu_vclub_by_top_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_top[cur_row_vclub_con_menu])
    //hide_video_club_con_menu()
}

function start_play_vclub_by_top(){
    _debug('start_play_vclub_by_top()')
    cur_place = 'vclub'
    //show_playing(tmp_vclub_by_top_arr[cur_row_vclub_by_top].name, tmp_vclub_by_top_arr[cur_row_vclub_by_top].id)
    play('auto ' + video_dir+tmp_vclub_by_top_arr[cur_row_vclub_by_top].id+'.mpg')
    //hide_video_club_con_menu()
}

function load_vclub_by_top(page){
    doLoad('vod&vclub_by_top&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, fav_vclub_on)
}

function fill_vclub_by_top(arr){
    _debug('fill_vclub_by_top()')
    vclub_page_bar(cur_vclub_by_top_page ,total_vclub_by_top_pages)
    tmp_vclub_by_top_arr = arr
    //del_vclub_by_top()
    _debug('fill_vclub_by_top()')
    max_vclub_by_top_rows = arr.length
    _debug('max_vclub_by_name: '+max_vclub_by_top_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('video_club_by_top_row_'+tv_n_i))
        
        document.getElementById('video_club_by_top_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_club_by_top_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_top_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_top_year_'+(tv_i)).innerHTML = ''
        }
    }
    set_active_vclub_by_top_row()
}

function del_vclub_by_top(){
    _debug('del_vclub_by_top()')
    vclub_page_bar(cur_vclub_by_top_page ,total_vclub_by_top_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_top_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_top_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_top_rows = 0
}
/**/

/* VIDEO CLUB BY SEARCH */
function show_video_club_by_search(){
    _debug('show_video_club_by_search()')
    _log('show_video_club_by_search()')
    document.getElementById('main_bar_video_club_by_search').style.display = ''
    kbd_active = 1
    show_kbd('kbd_input')
    document.getElementById('title_bar_video_club').style.display = 'none'
    document.getElementById('video_club_cat_name').style.display = 'none'
    document.getElementById('vclub_green_btn').style.display = 'none'
    //switch_on_video_club_page(6)
    vclub_by_search_on = 1
    load_vclub_by_search(0)
    //set_active_vclub_by_search_row()
}

function hide_video_club_by_search(){
    _debug('hide_video_club_by_search()')
    document.getElementById('main_bar_video_club_by_search').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = ''
    document.getElementById('video_club_cat_name').style.display = ''
    document.getElementById('vclub_green_btn').style.display = ''
    hide_kbd()
    //switch_off_video_club_page(6)
    vclub_by_search_on = 0
    
    if(vclub_con_menu_on == 1){
        hide_video_club_con_menu()
    }
    prev_row_vclub_by_search = cur_row_vclub_by_search
    set_passive_vclub_by_search_row()
    cur_vclub_by_search_page = 1
    cur_row_vclub_by_search = 0
    prev_row_vclub_by_search = 1
}

function shift_vclub_by_search(shift_row){
    _debug('shift_vclub_by_search('+shift_row+')')
    prev_row_vclub_by_search = cur_row_vclub_by_search
    if(shift_row > 0){
        if(cur_row_vclub_by_search < max_vclub_by_search_rows-1){
            cur_row_vclub_by_search++
            set_active_vclub_by_search_row()
        }else{
            shift_vclub_by_search_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_by_search > 0){
            cur_row_vclub_by_search --
            set_active_vclub_by_search_row()
        }else{
            shift_vclub_by_search_page(-1)
        }
    }
}

function shift_vclub_by_search_page(dir){
     _debug('shift_vclub_by_search_page('+dir+')')
    if (dir > 0){
        if (cur_vclub_by_search_page < total_vclub_by_search_pages){
            cur_vclub_by_search_page++
            need_vclub_by_search_row_focus = 1
            set_passive_all_vclub_by_search_row()
            load_vclub_by_search(cur_vclub_by_search_page)
            cur_row_vclub_by_search = 0
        }
    }else if (dir < 0){
        if (cur_vclub_by_search_page > 1){
            cur_vclub_by_search_page--
            need_vclub_by_search_row_focus = 1
            set_passive_all_vclub_by_search_row()
            load_vclub_by_search(cur_vclub_by_search_page)
            cur_row_vclub_by_search = 9
        }
    }
}

function disable_vclub_by_search_row(){
    _debug('disable_vclub_by_search_row()')
    if(cur_row_vclub_by_search > 0 && cur_row_vclub_by_search <= max_vclub_by_search_rows){
        document.getElementById('video_club_by_search_row_'+cur_row_vclub_by_search).className = 'video_td'
        cur_row_vclub_by_search = 0
        prev_row_vclub_by_search = 1
    }
}

function set_active_vclub_by_search_row(){
    _debug('set_active_vclub_by_search_row()')
    _debug('cur_row_vclub_by_search: '+cur_row_vclub_by_search)
    set_passive_vclub_by_search_row()
    r_class_changer('video_club_by_search_row_', cur_row_vclub_by_search, "hover")
}

function set_passive_vclub_by_search_row(){
    _debug('set_passive_vclub_by_search_row()')
    _debug('prev_row_vclub_by_search: '+prev_row_vclub_by_search)
    r_class_changer('video_club_by_search_row_', prev_row_vclub_by_search, "unhover")
}

function set_passive_all_vclub_by_search_row(){
    _debug('set_passive_all_vclub_by_search_row()')
    _debug('cur_row_vclub_by_search: '+cur_row_vclub_by_search)
    r_class_changer('video_club_by_search_row_', cur_row_vclub_by_search, "unhover")
}

function call_con_menu_vclub_by_search_func(){
    _debug('call_con_menu_vclub_by_search_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_by_search[cur_row_vclub_con_menu])
}

function start_play_vclub_by_search(){
    _debug('start_play_vclub_by_search()')
    cur_place = 'vclub'
    play('auto ' + video_dir+tmp_vclub_by_search_arr[cur_row_vclub_by_search].id+'.mpg')
}

function load_vclub_by_search(page){
    chars = document.getElementById(kbd_input_id).value
    _debug('chars.length: '+chars.length)
    if (chars.length >= 3 || chars.length == 0){
        doLoad('vod&s='+chars+'&cat_num='+cur_cat_num+'&hd='+show_vclub_hd, page, fav_vclub_on)
    }
}

function fill_vclub_by_search(arr){
    _debug('fill_vclub_by_search()')
    vclub_page_bar(cur_vclub_by_search_page ,total_vclub_by_search_pages)
    tmp_vclub_by_search_arr = arr
    _debug('fill_vclub_by_search()')
    max_vclub_by_search_rows = arr.length
    _debug('max_vclub_by_search: '+max_vclub_by_search_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('video_club_by_search_row_'+tv_n_i))
        
        document.getElementById('video_club_by_search_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_club_by_search_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_club_by_search_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_club_by_search_year_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_vclub_by_search_row_focus){
        if (!kbd_active){
            set_active_vclub_by_search_row()
            need_vclub_by_search_row_focus = 0
        }
    }
}

function del_vclub_by_search(){
    _debug('del_vclub_by_search()')
    vclub_page_bar(cur_vclub_by_search_page ,total_vclub_by_search_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_club_by_search_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_search_my_video_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_club_by_search_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_by_search_rows = 0
}
/**/

/* NOT ENDED VIDEO */
function show_vclub_not_ended(){
    _debug('show_vclub_not_ended()')
    _log('show_vclub_not_ended()')
    vclub_not_ended_on = 1
    set_passive_all_vclub_not_ended_row()
    document.getElementById('main_bar_vclub_not_ended').style.display = ''
    document.getElementById('title_bar_video_club').style.display = ''
    cur_row_vclub_not_ended = 0
    prev_row_vclub_not_ended = 1
    need_vclub_not_ended_row_focus = 1
    load_vclub_not_ended(0)
}

function hide_vclub_not_ended(){
    _debug('hide_vclub_not_ended()')
    document.getElementById('main_bar_vclub_not_ended').style.display = 'none'
    document.getElementById('title_bar_video_club').style.display = 'none'
    vclub_not_ended_on = 0
    set_passive_all_vclub_not_ended_row()
    cur_row_vclub_not_ended = 0
    prev_row_vclub_not_ended = 1
    cur_vclub_not_ended_page = 1
    need_vclub_not_ended_row_focus = 0
}

function shift_vclub_not_ended(shift_row){
    _debug('shift_vclub_not_ended('+shift_row+')')
    prev_row_vclub_not_ended = cur_row_vclub_not_ended
    if(shift_row > 0){
        if(cur_row_vclub_not_ended < max_vclub_not_ended_rows-1){
            cur_row_vclub_not_ended++
            set_active_vclub_not_ended_row()
        }else{
            //shift_vclub_not_ended_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_vclub_not_ended > 0){
            cur_row_vclub_not_ended --
            set_active_vclub_not_ended_row()
        }else{
            //shift_vclub_not_ended_page(-1)
        }
    }
}

function set_active_vclub_not_ended_row(){
    _debug('set_active_vclub_not_ended_row()')
    _debug('cur_row_vclub_not_ended: '+cur_row_vclub_not_ended)
    set_passive_vclub_not_ended_row()
    r_class_changer('vclub_not_ended_row_', cur_row_vclub_not_ended, "hover")
}

function set_passive_vclub_not_ended_row(){
    _debug('set_passive_vclub_not_ended_row()')
    _debug('prev_row_vclub_not_ended: '+prev_row_vclub_not_ended)
    r_class_changer('vclub_not_ended_row_', prev_row_vclub_not_ended, "unhover")
}

function set_passive_all_vclub_not_ended_row(){
    _debug('set_passive_all_vclub_not_ended_row()')
    _debug('cur_row_vclub_not_ended: '+cur_row_vclub_not_ended)
    r_class_changer('vclub_not_ended_row_', cur_row_vclub_not_ended, "unhover")
}

function call_con_menu_vclub_not_ended_func(){
    _debug('call_con_menu_vclub_not_ended_func(): '+(cur_row_vclub_con_menu))
    eval(func_vclub_not_ended[cur_row_vclub_con_menu])
}

function start_play_vclub_not_ended(){
    _debug('start_play_vclub_not_ended()')
    cur_place = 'vclub'
    play('auto ' + video_dir+tmp_vclub_not_ended_arr[cur_row_vclub_not_ended].id+'.mpg')
}

function load_vclub_not_ended(page){
    doLoad('vod&get_vclub_not_ended', fav_vclub_on)
}

function fill_vclub_not_ended(arr){
    _debug('fill_vclub_not_ended()')
    vclub_page_bar(cur_vclub_not_ended_page ,total_vclub_not_ended_pages)
    tmp_vclub_not_ended_arr = arr
    _debug('fill_vclub_not_ended()')
    max_vclub_not_ended_rows = arr.length
    _debug('max_vclub_not_ended: '+max_vclub_not_ended_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('vclub_not_ended_row_'+tv_n_i))
        
        document.getElementById('vclub_not_ended_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('vclub_not_ended_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('vclub_not_ended_title_'+(tv_i)).innerHTML = ''
            document.getElementById('vclub_not_ended_year_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_vclub_not_ended_row_focus){
        set_active_vclub_not_ended_row()
        need_vclub_not_ended_row_focus = 0
    }
}

function del_vclub_not_ended(){
    _debug('del_vclub_not_ended()')
    vclub_page_bar(cur_vclub_not_ended_page ,total_vclub_not_ended_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('vclub_not_ended_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('vclub_not_ended_year_'+(tv_n_i)).innerHTML = ''
    }
    max_vclub_not_ended_rows = 0
}
/**/

/* VIRTUAL KEYBOARD FOR SEARCH */
function show_kbd(id){
    kbd_on = 1
    //kbd_active = 1
    kbd_input_id = id
    document.getElementById("kbd_"+cur_kbd_row+"_"+cur_kbd_col).className = "kbd_selected"
    fill_search_kbd()
    document.getElementById("search_kbd").style.display = ''
}

function hide_kbd(){
    kbd_on = 0
    kbd_active = 0
    kbd_set_focus(1, 3)
    document.getElementById("search_kbd").style.display = 'none'
    document.getElementById(kbd_input_id).value = '';
    document.getElementById('search_kbd_btn').innerHTML = words['list']
}

function fill_search_kbd(lang){
    _debug('fill_search_kbd()')
    _debug('kbd_lang: '+kbd_lang)
    if (typeof(lang) != 'undefined' || !kbd_init_filled){
        kbd_map = eval('kbd_map_'+kbd_lang)
        kbd_full_map = eval('kbd_full_map_'+kbd_lang)
        start_idx = 0
        document.getElementById('kbd_0_10').innerHTML = '&nbsp;'
        document.getElementById('kbd_0_11').innerHTML = '&nbsp;'
        for(i=0; i<kbd_map.length; i++){
            for(j=0; j<kbd_map[i]; j++){
                idx = start_idx+j
                //_debug('idx: '+idx)
                kbd_symbol = kbd_full_map[idx]
                if (kbd_full_map[idx] == ' '){
                    kbd_symbol = 'Пробел'
                }else if (kbd_full_map[idx] == 'del'){
                    kbd_symbol = '&larr;'
                }else if (kbd_full_map[idx] == 'lang' && kbd_lang == 'ru'){
                    kbd_symbol = 'EN'
                }else if (kbd_full_map[idx] == 'lang' && kbd_lang == 'en'){
                    kbd_symbol = 'RU'
                }
                document.getElementById('kbd_'+i+'_'+j).innerHTML = kbd_symbol
            }
            start_idx += kbd_map[i]
        }
        kbd_init_filled = 1
    }
}

function kbd_vertical_move(dir){
    if (dir>0){
        if (cur_kbd_row < kbd_map.length-1){
            tmp_kbd_row = cur_kbd_row+1
        }else{
            tmp_kbd_row = 0
        }
    }else{
        if (cur_kbd_row > 0){
            tmp_kbd_row = cur_kbd_row-1
        }else{
            tmp_kbd_row = kbd_map.length-1
        }
    }
    tmp_kbd_col = cur_kbd_col
    if (document.getElementById("kbd_"+tmp_kbd_row+"_"+tmp_kbd_col) == null){
        tmp_kbd_col = kbd_map[tmp_kbd_row]-1
    }
    kbd_set_focus(tmp_kbd_row,tmp_kbd_col)
}

function kbd_horizontal_move(dir){
    if (dir>0){
        if (cur_kbd_col < kbd_map[cur_kbd_row]-1){
            tmp_kbd_col = cur_kbd_col+1
        }else{
            tmp_kbd_col = 0
        }
    }else{
        if (cur_kbd_col > 0){
            tmp_kbd_col = cur_kbd_col-1
        }else{
            tmp_kbd_col = kbd_map[cur_kbd_row]-1
        }
    }
    tmp_kbd_row = cur_kbd_row
    kbd_set_focus(tmp_kbd_row,tmp_kbd_col)
}

function kbd_set_focus(row,col){
    prev_kbd_row = cur_kbd_row
    prev_kbd_col = cur_kbd_col
    cur_kbd_row = row
    cur_kbd_col = col
    document.getElementById("kbd_"+prev_kbd_row+"_"+prev_kbd_col).className = ""
    document.getElementById("kbd_"+row+"_"+col).className = "kbd_selected"
}

function kbd_add_char(){
    char_idx = 0
    for (i=0; i<cur_kbd_row; i++){
        char_idx +=  kbd_map[i]
    }
    char_idx += cur_kbd_col
    ch = kbd_full_map[char_idx]
    if (ch == 'del'){
        kbd_del_char()
    }else if (ch == 'lang'){
        if (kbd_lang == 'ru'){
            kbd_lang = 'en'
            fill_search_kbd(kbd_lang)
            return
        }
        if (kbd_lang == 'en'){
            kbd_lang = 'ru'
            fill_search_kbd(kbd_lang)
            return
        }
    }else{
        full_chars = document.getElementById(kbd_input_id).value + ch
        document.getElementById(kbd_input_id).value = full_chars
    }
    if (vclub_by_search_on){
        load_vclub_by_search(1)
    }else if(recipes_by_cat_on){
        load_recipes_by_cat(1)
    }
}

function kbd_del_char(){
    kbd_input_obj = document.getElementById(kbd_input_id)
    kbd_input_obj.value = kbd_input_obj.value.substr(0,kbd_input_obj.value.length-1)
    if (vclub_by_search_on){
        load_vclub_by_search(1)
    }else if(recipes_by_cat_on){
        load_recipes_by_cat(1)
    }
    return false
}

/**/

/* VIDEO CLIP PAGE */
function show_video_clips(){
    _debug('show_video_clips()')
    document.getElementById('video_clips_page').style.display = ''
    video_clips_on = 1
    _debug('prev_vclips_page: '+prev_video_clips_page)
    if(prev_video_clips_page == ''){
        show_video_clips_by_name()
    }
    
    //set_active_video_clips_all_btn()
    
    prev_video_clips_page = ''
    cur_partition = 'video_clips'
}
function hide_video_clips(){
    _debug('hide_video_clips()')
    document.getElementById('video_clips_page').style.display = 'none'
    video_clips_on = 0
    //if (video_clips_info_on == 0 && mode_one == 0){
    if (mode_one == 0){
        if(video_clips_by_name_on == 1){
            hide_video_clips_by_name()
        }else if(video_clips_by_singer_on == 1){
            hide_video_clips_by_singer()
        }else if(video_clips_by_genre_on == 1){
            hide_video_clips_by_genre()
        }else if(video_clips_by_add_time_on == 1){
            hide_video_clips_by_add_time()
        }else if(video_clips_by_top_on == 1){
            hide_video_clips_by_top()
        }
        prev_video_clips_page = ''
    }else{
        prev_video_clips_page = 'video_clips'
    }
    cur_partition = ''
}

function show_video_clips_con_menu(){
    
    if (video_clips_by_name_on == 1){
        tmp_censored  = tmp_video_clips_by_name_arr[cur_row_video_clips_by_name].censored
    }else if(video_clips_by_singer_on == 1){
        tmp_censored = tmp_video_clips_by_singer_arr[cur_row_video_clips_by_singer].censored
    }else if(video_clips_by_genre_on == 1){
        tmp_censored = tmp_video_clips_by_genre_arr[cur_row_video_clips_by_genre].censored
    }else if(video_clips_by_add_time_on == 1){
        tmp_censored = tmp_video_clips_by_add_time_arr[cur_row_video_clips_by_add_time].censored
    }else if(video_clips_by_top_on == 1){
        tmp_censored = tmp_video_clips_by_top_arr[cur_row_video_clips_by_top].censored
    }
    
    if (tmp_censored == 1){
        show_password_input('parent_password', "n_show_video_clips_con_menu()")
        dont_hide_con_alpha_layer = 1
    }else{
        n_show_video_clips_con_menu()
    }
}

function n_show_video_clips_con_menu(){
    _debug('show_video_clips_con_menu()')
    
    if (video_clips_by_name_on == 1){
        tmp_cur_id     = tmp_video_clips_by_name_arr[cur_row_video_clips_by_name].id
    }else if(video_clips_by_singer_on == 1){
        tmp_cur_id     = tmp_video_clips_by_singer_arr[cur_row_video_clips_by_singer].id
    }else if(video_clips_by_genre_on == 1){
        tmp_cur_id     = tmp_video_clips_by_genre_arr[cur_row_video_clips_by_genre].id
    }else if(video_clips_by_add_time_on == 1){
        tmp_cur_id     = tmp_video_clips_by_add_time_arr[cur_row_video_clips_by_add_time].id
    }else if(video_clips_by_top_on == 1){
        tmp_cur_id     = tmp_video_clips_by_top_arr[cur_row_video_clips_by_top].id
    }
    
    _debug('last_vclub_played_id: '+last_vclub_played_id)
    _debug('tmp_cur_id: '+tmp_cur_id)

    
    if (fav_vclub_on){
        document.getElementById('video_clips_con_menu_row_1').innerHTML = words['del_from_fav']+"&nbsp;"
    }else{
        document.getElementById('video_clips_con_menu_row_1').innerHTML = words['add_to_fav']+"&nbsp;"
    }
    
    document.getElementById('video_clips_con_menu').style.display = ''
    video_clips_con_menu_on = 1
    set_active_video_clips_con_menu_row()
    show_con_alpha_layer()
}

function hide_video_clips_con_menu(){
    _debug('hide_video_clips_con_menu()')
    document.getElementById('video_clips_con_menu').style.display = 'none'
    video_clips_con_menu_on = 0
    prev_row_video_clips_con_menu = cur_row_video_clips_con_menu
    set_passive_video_clips_con_menu_row()
    prev_row_video_clips_con_menu = 1
    cur_row_video_clips_con_menu = 0
    hide_con_alpha_layer()
}

function shift_video_clips_con_menu(shift_row){
    _debug('shift_video_clips_con_menu('+shift_row+')')
    prev_row_video_clips_con_menu = cur_row_video_clips_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_video_clips_con_menu > total_rows_video_clips_con_menu-1){
            cur_row_video_clips_con_menu = 0
        }else{
            cur_row_video_clips_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_video_clips_con_menu < 0){
            cur_row_video_clips_con_menu = total_rows_video_clips_con_menu-1
        }else{
            cur_row_video_clips_con_menu --
        }
    }
    set_active_video_clips_con_menu_row()
}

function set_active_video_clips_con_menu_row(){
    _debug('set_active_video_clips_con_menu_row()')
    set_passive_video_clips_con_menu_row()
    class_changer('video_clips_con_menu_row_', cur_row_video_clips_con_menu, "hover")
}

function set_passive_video_clips_con_menu_row(){
    _debug('set_passive_video_clips_con_menu_row()')
    class_changer('video_clips_con_menu_row_', prev_row_video_clips_con_menu, "unhover")
}

function switch_on_video_clips_page(page_num){
    document.getElementById('video_clips_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('video_clips_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('video_clips_punct_r_img_'+page_num).src = "i/insert_b_r.png"
}

function switch_off_video_clips_page(page_num){
    document.getElementById('video_clips_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('video_clips_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('video_clips_punct_r_img_'+page_num).src = "i/insert_r.png"
}
/**/

/* VIDEO CLIP BY NAME */
function show_video_clips_by_name(){
    _debug('show_video_clips_by_name()')
    fill_abc_bar(1, 'video_clips_abc_text_')
    //document.getElementById('video_button_bar').style.display = ''
    document.getElementById('abc_bar_video_clips').style.display = ''
    document.getElementById('abc_bar_video_clips').style.left = '23'
    document.getElementById('main_bar_video_clips_by_name').style.display = ''
    document.getElementById('title_bar_video_clips').style.display = ''
    switch_on_video_clips_page(1)
    video_clips_by_name_on = 1
    lighted_row_video_clips_abc = 0
    load_video_clips_by_name(0)
    set_active_video_clips_by_name_row()
}

function hide_video_clips_by_name(){
    _debug('hide_video_clips_by_name()')
    //document.getElementById('video_button_bar').style.display = 'none'
    fav_video_clips_on = 0
    //set_active_video_clips_all_btn()
    document.getElementById('abc_bar_video_clips').style.display = 'none'
    document.getElementById('main_bar_video_clips_by_name').style.display = 'none'
    document.getElementById('title_bar_video_clips').style.display = 'none'
    switch_off_video_clips_page(1)
    video_clips_by_name_on = 0
    // disable abc
    set_passive_all_video_clips_abc_row()
    cur_abc_video_clips_bar = 0
    prev_row_video_clips_abc = 1
    cur_row_video_clips_abc = 0
    cur_video_clips_abc_bar_page = 1
    
    normlight_abc_bar_row()
    
    if(video_clips_con_menu_on == 1){
        hide_video_clips_con_menu()
    }
    prev_row_video_clips_by_name = cur_row_video_clips_by_name
    set_passive_video_clips_by_name_row()
    cur_video_clips_by_name_page = 1
    cur_row_video_clips_by_name = 0
    prev_row_video_clips_by_name = 1
}

function shift_video_clips_by_name(shift_row){
    _debug('shift_video_clips_by_name('+shift_row+')')
    prev_row_video_clips_by_name = cur_row_video_clips_by_name
    if(shift_row > 0){
        if(cur_row_video_clips_by_name < max_video_clips_by_name_rows-1){
            cur_row_video_clips_by_name++
            set_active_video_clips_by_name_row()
        }else{
            shift_video_clips_by_name_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_video_clips_by_name > 0){
            cur_row_video_clips_by_name --
            set_active_video_clips_by_name_row()
        }else{
            shift_video_clips_by_name_page(-1)
        }
    }
}

function shift_video_clips_by_name_page(dir){
     _debug('shift_video_clips_by_name_page('+dir+')')
    if (dir > 0){
        if (cur_video_clips_by_name_page < total_video_clips_by_name_pages){
            cur_video_clips_by_name_page++
            need_video_clips_by_name_row_focus = 1
            set_passive_all_video_clips_by_name_row()
            load_video_clips_by_name(cur_video_clips_by_name_page)
            cur_row_video_clips_by_name = 0
        }
    }else if (dir < 0){
        if (cur_video_clips_by_name_page > 1){
            cur_video_clips_by_name_page--
            need_video_clips_by_name_row_focus = 1
            set_passive_all_video_clips_by_name_row()
            load_video_clips_by_name(cur_video_clips_by_name_page)
            cur_row_video_clips_by_name = 9
        }
    }
}

function disable_video_clips_by_name_row(){
    _debug('disable_video_clips_by_name_row()')
    if(cur_row_video_clips_by_name > 0 && cur_row_video_clips_by_name <= max_video_clips_by_name_rows){
        document.getElementById('video_clips_by_name_row_'+cur_row_video_clips_by_name).className = 'video_td'
        cur_row_video_clips_by_name = 0
        prev_row_video_clips_by_name = 1
    }
}

function set_active_video_clips_by_name_row(){
    _debug('set_active_video_clips_by_name_row()')
    _debug('cur_row_video_clips_by_name: '+cur_row_video_clips_by_name)
    set_passive_video_clips_by_name_row()
    class_changer('video_clips_by_name_row_', cur_row_video_clips_by_name, "hover")
}

function set_passive_video_clips_by_name_row(){
    _debug('set_passive_video_clips_by_name_row()')
    _debug('prev_row_video_clips_by_name: '+prev_row_video_clips_by_name)
    class_changer('video_clips_by_name_row_', prev_row_video_clips_by_name, "unhover")
}

function set_passive_all_video_clips_by_name_row(){
    _debug('set_passive_all_video_clips_by_name_row()')
    _debug('cur_row_video_clips_by_name: '+cur_row_video_clips_by_name)
    class_changer('video_clips_by_name_row_', cur_row_video_clips_by_name, "unhover")
}

function call_con_menu_video_clips_by_name_func(){
    _debug('call_con_menu_video_clips_by_name_func(): '+(cur_row_video_clips_con_menu))
    eval(func_video_clips_by_name[cur_row_video_clips_con_menu])
    hide_video_clips_con_menu()
}

function start_play_video_clips_by_name(){
    _debug('start_play_video_clips_by_name()')
    cur_place = 'video_clips'
    show_playing(tmp_video_clips_by_name_arr[cur_row_video_clips_by_name].name, tmp_video_clips_by_name_arr[cur_row_video_clips_by_name].id)
    play('auto ' + video_dir+tmp_video_clips_by_name_arr[cur_row_video_clips_by_name].id+'.mpg')
    hide_video_clips_con_menu()
}

function load_video_clips_by_name(page){
    doLoad('video_clip&action='+((cur_video_clips_abc_bar_page-1)*10+cur_row_video_clips_abc+1), page)
    normlight_abc_video_clips_bar_row()
    hightlight_abc_video_clips_bar_row()
}

function fill_video_clips_by_name(arr){
    _debug('fill_video_clips_by_name()')
    video_clips_page_bar(cur_video_clips_by_name_page ,total_video_clips_by_name_pages)
    tmp_video_clips_by_name_arr = arr
    _debug('fill_video_clips_by_name()')
    max_video_clips_by_name_rows = arr.length
    _debug('max_video_clips_by_name: '+max_video_clips_by_name_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('video_clips_by_name_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('video_clips_by_name_singer_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
        //document.getElementById('video_clips_by_name_my_clip_'+(tv_n_i)).innerHTML = arr[tv_n_i].my_clip
        //document.getElementById('video_clips_by_name_year_'+(tv_n_i)).innerHTML = arr[tv_n_i].year
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_clips_by_name_title_'+(tv_i)).innerHTML = ''
            document.getElementById('video_clips_by_name_singer_'+(tv_i)).innerHTML = ''
            //document.getElementById('video_clips_by_name_my_clip_'+(tv_i)).innerHTML = ''
            //document.getElementById('video_clips_by_name_year_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_video_clips_by_name_row_focus){
        set_active_video_clips_by_name_row()
        need_video_clips_by_name_row_focus = 0
    }
}

function del_video_clips_by_name(){
    _debug('del_video_clips_by_name()')
    video_clips_page_bar(cur_video_clips_by_name_page ,total_video_clips_by_name_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_clips_by_name_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_clips_by_name_my_clip_'+(tv_n_i)).innerHTML = ''
        document.getElementById('video_clips_by_name_year_'+(tv_n_i)).innerHTML = ''
    }
    max_video_clips_by_name_rows = 0
}
/**/

/* VIDEO CLIPS BY SINGER */
function show_video_clips_by_singer(){
    _debug('show_video_clips_by_singer()')
    fill_abc_bar(1, 'video_clips_abc_text_')
    show_video_clips_singer_bar()
    document.getElementById('abc_bar_video_clips').style.display = ''
    document.getElementById('abc_bar_video_clips').style.left = '23'
    document.getElementById('main_bar_video_clips_by_singer').style.display = ''
    document.getElementById('title_bar_video_clips').style.display = ''
    switch_on_video_clips_page(2)
    video_clips_by_singer_on = 1
    lighted_row_video_clips_abc = 0
    load_video_clips_by_name(0)
    cur_abc_video_clips_bar = 1
    set_active_video_clips_abc_row()
    //set_active_video_clips_by_singer_row()
}

function hide_video_clips_by_singer(){
    _debug('hide_video_clips_by_singer()')
    fav_video_clips_on = 0
    hide_video_clips_singer_bar()
    document.getElementById('abc_bar_video_clips').style.display = 'none'
    document.getElementById('main_bar_video_clips_by_singer').style.display = 'none'
    document.getElementById('title_bar_video_clips').style.display = 'none'
    switch_off_video_clips_page(2)
    video_clips_by_singer_on = 0
    // disable abc
    set_passive_all_video_clips_abc_row()
    cur_abc_video_clips_bar = 0
    prev_row_video_clips_abc = 1
    cur_row_video_clips_abc = 0
    cur_video_clips_abc_bar_page = 1
    
    normlight_abc_bar_row()
    
    if(video_clips_con_menu_on == 1){
        hide_video_clips_con_menu()
    }
    prev_row_video_clips_by_singer = cur_row_video_clips_by_singer
    set_passive_video_clips_by_singer_row()
    cur_video_clips_by_singer_page = 1
    cur_row_video_clips_by_singer = 0
    prev_row_video_clips_by_singer = 1
}

function shift_video_clips_by_singer(shift_row){
    _debug('shift_video_clips_by_singer('+shift_row+')')
    prev_row_video_clips_by_singer = cur_row_video_clips_by_singer
    if(shift_row > 0){
        if(cur_row_video_clips_by_singer < max_video_clips_by_singer_rows-1){
            cur_row_video_clips_by_singer++
            set_active_video_clips_by_singer_row()
        }else{
            shift_video_clips_by_singer_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_video_clips_by_singer > 0){
            cur_row_video_clips_by_singer --
            set_active_video_clips_by_singer_row()
        }else{
            shift_video_clips_by_singer_page(-1)
        }
    }
}

function shift_video_clips_by_singer_page(dir){
     _debug('shift_video_clips_by_singer_page('+dir+')')
    if (dir > 0){
        if (cur_video_clips_by_singer_page < total_video_clips_by_singer_pages){
            cur_video_clips_by_singer_page++
            need_video_clips_by_singer_row_focus = 1
            set_passive_all_video_clips_by_singer_row()
            load_video_clips_by_singer(cur_video_clips_by_singer_page)
            cur_row_video_clips_by_singer = 0
        }
    }else if (dir < 0){
        if (cur_video_clips_by_singer_page > 1){
            cur_video_clips_by_singer_page--
            need_video_clips_by_singer_row_focus = 1
            set_passive_all_video_clips_by_singer_row()
            load_video_clips_by_singer(cur_video_clips_by_singer_page)
            cur_row_video_clips_by_singer = 9
        }
    }
}

function disable_video_clips_by_singer_row(){
    _debug('disable_video_clips_by_singer_row()')
    if(cur_row_video_clips_by_singer > 0 && cur_row_video_clips_by_singer <= max_video_clips_by_singer_rows){
        document.getElementById('video_clips_by_singer_row_'+cur_row_video_clips_by_singer).className = 'video_td'
        cur_row_video_clips_by_singer = 0
        prev_row_video_clips_by_singer = 1
    }
}

function set_active_video_clips_by_singer_row(){
    _debug('set_active_video_clips_by_singer_row()')
    _debug('cur_row_video_clips_by_singer: '+cur_row_video_clips_by_singer)
    set_passive_video_clips_by_singer_row()
    class_changer('video_clips_by_singer_row_', cur_row_video_clips_by_singer, "hover")
}

function set_passive_video_clips_by_singer_row(){
    _debug('set_passive_video_clips_by_singer_row()')
    _debug('prev_row_video_clips_by_singer: '+prev_row_video_clips_by_singer)
    class_changer('video_clips_by_singer_row_', prev_row_video_clips_by_singer, "unhover")
}

function set_passive_all_video_clips_by_singer_row(){
    _debug('set_passive_all_video_clips_by_singer_row()')
    _debug('cur_row_video_clips_by_singer: '+cur_row_video_clips_by_singer)
    class_changer('video_clips_by_singer_row_', cur_row_video_clips_by_singer, "unhover")
}

function call_con_menu_video_clips_by_singer_func(){
    _debug('call_con_menu_video_clips_by_singer_func(): '+(cur_row_video_clips_con_menu))
    eval(func_video_clips_by_singer[cur_row_video_clips_con_menu])
    hide_video_clips_con_menu()
}

function start_play_video_clips_by_singer(){
    _debug('start_play_video_clips_by_singer()')
    cur_place = 'video_clips'
    show_playing(tmp_video_clips_by_singer_arr[cur_row_video_clips_by_singer].name, tmp_video_clips_by_singer_arr[cur_row_video_clips_by_singer].id)
    play('auto ' + video_dir+tmp_video_clips_by_singer_arr[cur_row_video_clips_by_singer].id+'.mpg')
    hide_video_clips_con_menu()
}

function load_video_clips_by_singer(page){
    _debug('load_video_clips_by_singer('+page+')')
    _debug('singer: '+tmp_video_clips_singer_bar_arr[cur_row_video_clips_singer_bar].singer)
    doLoad('video_clip&action='+(cur_row_video_clips_abc+1)+'&video_clips_by_singer&singer='+tmp_video_clips_singer_bar_arr[cur_row_video_clips_singer_bar].singer, page)
    normlight_abc_video_clips_bar_row()
    hightlight_abc_video_clips_bar_row()
    
    normlight_video_clips_singer_bar_row()
    hightlight_video_clips_singer_bar_row()
}

function fill_video_clips_by_singer(arr){
    _debug('fill_video_clips_by_singer()')
    video_clips_page_bar(cur_video_clips_by_singer_page ,total_video_clips_by_singer_pages)
    tmp_video_clips_by_singer_arr = arr
    _debug('fill_video_clips_by_singer()')
    max_video_clips_by_singer_rows = arr.length
    _debug('max_video_clips_by_singer: '+max_video_clips_by_singer_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('video_clips_by_singer_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_clips_by_singer_title_'+(tv_i)).innerHTML = ''
        }
    }
    if (need_video_clips_by_singer_row_focus){
        set_active_video_clips_by_singer_row()
        need_video_clips_by_singer_row_focus = 0
    }
}

function del_video_clips_by_singer(){
    _debug('del_video_clips_by_singer()')
    video_clips_page_bar(cur_video_clips_by_singer_page ,total_video_clips_by_singer_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_clips_by_singer_title_'+(tv_n_i)).innerHTML = ''
    }
    max_video_clips_by_singer_rows = 0
}
/**/

/* VIDEO CLIPS SINGER BAR*/
function show_video_clips_singer_bar(){
    _debug('show_video_clips_singer_bar()')
    document.getElementById('video_clips_singer_bar').style.display = ''
    load_video_clips_singer_bar(0)
}

function hide_video_clips_singer_bar(){
    _debug('hide_video_clips_singer_bar()')
    document.getElementById('video_clips_singer_bar').style.display = 'none'
    cur_video_clips_singer_bar = 0
    set_passive_all_video_clips_singer_bar_row()
    prev_row_video_clips_singer_bar = 1
    cur_row_video_clips_singer_bar = 0
    cur_video_clips_singer_bar_page = 1
}

function shift_video_clips_singer_bar(shift_row){
    _debug('shift_video_clips_singer_bar('+shift_row+')') 
    prev_row_video_clips_singer_bar = cur_row_video_clips_singer_bar
    if(shift_row > 0){
        if(cur_row_video_clips_singer_bar < max_video_clips_singer_bar_rows-1){
            cur_row_video_clips_singer_bar++
            set_active_video_clips_singer_bar_row()
        }else{
            shift_video_clips_singer_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_video_clips_singer_bar > 0){
            cur_row_video_clips_singer_bar --
            set_active_video_clips_singer_bar_row()
        }else{
            shift_video_clips_singer_bar_page(-1)
        }
    }
}

function shift_video_clips_singer_bar_page(dir){
     _debug('shift_video_clips_singer_bar_page('+dir+')')
    if (dir > 0){
        if (cur_video_clips_singer_bar_page < total_video_clips_singer_bar_pages){
            cur_video_clips_singer_bar_page++
            normlight_video_clips_singer_bar_row()
            del_video_clips_by_singer()
            need_video_clips_singer_bar_row_focus = 1
            set_passive_all_video_clips_singer_bar_row()
            load_video_clips_singer_bar(cur_video_clips_singer_bar_page-1)
            cur_row_video_clips_singer_bar = 0
        }
    }else if (dir < 0){
        if (cur_video_clips_singer_bar_page > 1){
            cur_video_clips_singer_bar_page--
            normlight_video_clips_singer_bar_row()
            del_video_clips_by_singer()
            need_video_clips_singer_bar_row_focus = 1
            set_passive_all_video_clips_singer_bar_row()
            load_video_clips_singer_bar(cur_video_clips_singer_bar_page-1)
            cur_row_video_clips_singer_bar = 9
        }
    }
}

function load_video_clips_singer_bar(page){
    _debug('load_video_clips_singer_bar('+page+')')
    doLoad('video_clip&action='+((cur_video_clips_abc_bar_page-1)*10+cur_row_video_clips_abc+1)+'&video_clips_singer_bar', page+1)
    normlight_abc_video_clips_bar_row()
    hightlight_abc_video_clips_bar_row()
    
    normlight_video_clips_singer_bar_row()
    
    if (cur_video_clips_singer_bar == 1){
        //hightlight_video_clips_singer_bar_row()
    }
}

function fill_video_clips_singer_bar(arr){
    _debug('fill_video_clips_singer_bar()')
    tmp_video_clips_singer_bar_arr = arr
    arr_length = max_video_clips_singer_bar_rows = arr.length
    _debug('max_video_clips_singer_bar_rows: '+max_video_clips_singer_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('video_clips_singer_bar_text_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('video_clips_singer_bar_text_'+(tv_i)).innerHTML = ''
        }
    }
    del_video_clips_by_singer()
    if (need_video_clips_singer_bar_row_focus){
        set_active_video_clips_singer_bar_row()
        need_video_clips_singer_bar_row_focus = 0
    }
}

function del_video_clips_singer_bar(){
    _debug('del_video_clips_singer_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('video_clips_singer_bar_text_'+(tv_n_i)).innerHTML = ''
    }
    max_video_clips_singer_bar_rows = 0
}

function set_active_video_clips_singer_bar_row(){
    _debug('set_active_video_clips_singer_bar_row()')
    _debug('cur_row_video_clips_singer: '+cur_row_video_clips_singer_bar)
    set_passive_video_clips_singer_bar_row()
    class_changer('video_clips_singer_bar_row_', cur_row_video_clips_singer_bar, "hover")
}

function set_passive_video_clips_singer_bar_row(){
    _debug('set_passive_video_clips_singer_bar_row()')
    class_changer('video_clips_singer_bar_row_', prev_row_video_clips_singer_bar, "unhover")
}

function set_passive_all_video_clips_singer_bar_row(){
    _debug('set_passive_all_video_clips_singer_bar_row()')
    _debug('cur_row_video_clips_singer_bar: '+cur_row_video_clips_singer_bar)
    class_changer('video_clips_singer_bar_row_', cur_row_video_clips_singer_bar, "unhover")
}

function hightlight_video_clips_singer_bar_row(){
    lighted_row_video_clips_singer_bar = cur_row_video_clips_singer_bar
    class_changer('video_clips_singer_bar_row_', lighted_row_video_clips_singer_bar, "hightlight")
}

function normlight_video_clips_singer_bar_row(){
    class_changer('video_clips_singer_bar_row_', lighted_row_video_clips_singer_bar, "normlight")
}
/**/

/* ABC CLUB BAR */
function shift_video_clips_abc(shift_row){
    _debug('shift_video_clips_abc('+shift_row+')')
    prev_row_video_clips_abc = cur_row_video_clips_abc
    if(shift_row > 0){
        if(shift_row + cur_row_video_clips_abc > total_rows_video_clips_abc-1){
            shift_video_clips_abc_page(1)
        }else{
            cur_row_video_clips_abc++
            set_active_video_clips_abc_row()
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_video_clips_abc < 0){
            shift_video_clips_abc_page(-1)
        }else{
            cur_row_video_clips_abc --
            set_active_video_clips_abc_row()
        }
    }
}

function shift_video_clips_abc_page(dir){
    _debug('shift_video_clips_abc_page('+dir+')')
    if (dir > 0){
        if (cur_video_clips_abc_bar_page < total_video_clips_abc_bar_pages){
            cur_video_clips_abc_bar_page++
            normlight_abc_video_clips_bar_row()
            need_video_clips_abc_bar_focus = 1
            set_passive_all_video_clips_abc_row()
            cur_row_video_clips_abc = 0
            fill_abc_bar(cur_video_clips_abc_bar_page, 'video_clips_abc_text_')
        }
    }else if (dir < 0){
        if (cur_video_clips_abc_bar_page > 1){
            cur_video_clips_abc_bar_page--
            normlight_abc_video_clips_bar_row()
            need_video_clips_abc_bar_focus = 1
            set_passive_all_video_clips_abc_row()
            cur_row_video_clips_abc = 9
            fill_abc_bar(cur_video_clips_abc_bar_page, 'video_clips_abc_text_')
        }
    }
}

function set_active_video_clips_abc_row(){
    _debug('set_active_video_clips_abc_row()')
    _debug('cur_row_video_clips_abc: '+cur_row_video_clips_abc)
    set_passive_video_clips_abc_row()
    class_changer('video_clips_abc_row_', cur_row_video_clips_abc, "hover")
}

function set_passive_video_clips_abc_row(){
    _debug('set_passive_video_clips_abc_row()')
    class_changer('video_clips_abc_row_', prev_row_video_clips_abc, "unhover")
}

function set_passive_all_video_clips_abc_row(){
    _debug('set_passive_all_video_clips_abc_row()')
    class_changer('video_clips_abc_row_', cur_row_video_clips_abc, "unhover")
}

function hightlight_abc_video_clips_bar_row(){
    lighted_row_video_clips_abc = cur_row_video_clips_abc
    class_changer('video_clips_abc_row_', lighted_row_video_clips_abc, "hightlight")
}

function normlight_abc_video_clips_bar_row(){
    class_changer('video_clips_abc_row_', lighted_row_video_clips_abc, "normlight")
}
/**/

/* WARNING MESSAGE */
function show_warning_message(txt){
    _log('show_under_construction()')
    document.getElementById('warning_message').style.display = ''
    document.getElementById('warning_message_txt').innerHTML = txt
    t_hide_warning_message()
}

function t_hide_warning_message(){
    if (!to_warn_msg_id){
        to_warn_msg_id = window.setTimeout(function(){hide_warning_message()}, 2000)
    }
    else{
        window.clearTimeout(to_warn_msg_id)
        to_warn_msg_id = window.setTimeout(function(){hide_warning_message()}, 2000)
    }
}

function hide_warning_message(){
    document.getElementById('warning_message').style.display = 'none'
    document.getElementById('warning_message_txt').innerHTML = ''
    to_warn_msg_id = 0
}
/**/

/* UNDER CONSTRUCTION */
function show_under_construction(){
    _log('show_under_construction()')
    document.getElementById('under_construction').style.display = ''
    t_hide_under_construction()
}

function t_hide_under_construction(){
    if (!to_under_c_id){
        to_under_c_id = window.setTimeout(function(){hide_under_construction()}, 2000)
    }
    else{
        window.clearTimeout(to_under_c_id)
        to_under_c_id = window.setTimeout(function(){hide_under_construction()}, 2000)
    }
}

function hide_under_construction(){
    document.getElementById('under_construction').style.display = 'none'
    to_under_c_id = 0
}

function send_played_video(video_id){
    _debug('send_played_video('+video_id+')')
    data = {'video_id' : video_id, 'storage_id' : link_resp_storage_id}
    doLoad('played_video', 1, data)
    window.clearTimeout(to_send_played)
    //need_show_vclub_vote = 1
    to_send_played = 0
}

function pause_time_for_played_video(){
    _debug('pause_time_for_played_video()')
    
    window.clearTimeout(to_send_played)
    to_send_played = 0
    
    window.clearTimeout(to_stop_my_video)
    to_stop_my_video = 0
    
    pause_start = Date.parse(new Date())/1000;
    tmp_cur_time = pause_start
    
    _debug('tmp_cur_time: '+tmp_cur_time)
    
}

function continue_time_for_played_video(){
    _debug('continue_time_for_played_video()')
    pause_end = Date.parse(new Date())/1000
    cur_pause_length = pause_end - pause_start
    pause_length = pause_length + cur_pause_length
    
    _debug('cur_pause_length: '+cur_pause_length)
    _debug('pause_length: '+pause_length)
    
    _debug('(pause_end - start_time):'+(pause_end - start_time))
    
    cur_time = get_cur_played_time()
    
    _debug('pause_length: '+pause_length)
    _debug('(pause_end - start_time):'+(pause_end - start_time))
    _debug('cur_time: '+cur_time)
    _debug('time_send_played: '+time_send_played)
    _debug('cur_played_time_wo_seek: '+cur_played_time_wo_seek)
    
    cur_time_send_played = (time_send_played/1000 - cur_played_time_wo_seek)*1000
    _debug('cur_time_send_played: '+cur_time_send_played)

    _debug('cur_played_time: '+cur_played_time)
    
    
    if (cur_time_send_played > 0){
        window.clearTimeout(to_send_played)
        to_send_played = 0
        if (series_total > 0 && tmp_series_arr[series_cur_num]>1){
            _debug('not send play')
        }else{
            to_send_played = window.setTimeout(send_played_video, cur_time_send_played, tmp_cur_id)
        }
    }
    if (my_video_records_on == 1){
        if (parseInt(tmp_my_video_records_arr[cur_row_my_video_records].ended) == 1){
            
            var cur_time_stop_my_video = (time_stop_my_video/1000 - cur_played_time)*1000
            _debug('cur_time_stop_my_video: '+cur_time_stop_my_video)

            window.clearTimeout(to_stop_my_video)
            to_stop_my_video = 0
            to_stop_my_video = window.setTimeout(stop_my_video, cur_time_stop_my_video)
        }
    }
}

function _log(action, param, type){
    _debug('typeof(type): '+typeof(type))
    if (typeof(type) == 'undefined'){
        tmp_type = 0
    }else{
        tmp_type = cur_place_num
    }
    if (log_on){
        doLoad('log&action='+action+'&param='+param, 0, tmp_type)
    }
}

function log_stream_error(){
    _debug('log_stream_error()')
    var tmp_ch_id = ''
    
    if (fav_itv_on){
        tmp_ch_id = fav_channels[f_ch_idx].id
    }else{
        tmp_ch_id = channels[ch_idx].id
    }
    
    doLoad('stream_error', 0, tmp_ch_id)
}

function get_current_place(){
    cur_place_num = 0
    if(media_type == 'stream'){ // TV
        //if (player_on == 1){
            if (cur_place == 'itv'){
                cur_place_num = 1
            }else if(cur_place == 'radio'){ // Radio
                cur_place_num = 5
            }
        //}
    }else if(media_type == 'file'){
        if (player_on == 1){
            if (cur_place == 'vclub'){ // Video Club
                cur_place_num = 2
            }else if(cur_place == 'karaoke'){ // Karaoke
                cur_place_num = 3
            }else if(cur_place == 'audio_club'){ // Audio Club
                cur_place_num = 4
            }else if(cur_place == 'video_clips'){ // Video Clips
                cur_place_num = 8
            }else if(cur_place == 'video_records'){
                if (my_video_records_on){
                    cur_place_num = 6 // My Records
                }else{
                    cur_place_num = 7 // Shared Records
                }
            }
        }
    }else if (media_type == 'infoportal'){
        if (cur_place == 'city_info'){
            cur_place_num = 20
        }else if(cur_place == 'anec_page'){
            cur_place_num = 21
        }else if(cur_place == 'weather_page'){
            cur_place_num = 22
        }else if(cur_place == 'game_page'){
            cur_place_num = 23
        }else if(cur_place == 'horoscope_page'){
            cur_place_num = 24
        }else if(cur_place == 'course_page'){
            cur_place_num = 25
        }
    }
    return cur_place_num
}
/**/

/* PASSWORD INPUT */
function show_password_input(item, action){
    _debug('show_password_input('+item+', '+action+')')
    pass_item = item
    pass_action = action
    show_con_alpha_layer()
    document.getElementById('password_input').style.display = ''
    document.getElementById('password_input_txt').focus()
    password_input_on = 1
}

function hide_password_input(){
    _debug('hide_password_input()')
    document.getElementById('password_input_txt').blur()
    if (!dont_hide_con_alpha_layer){
        hide_con_alpha_layer()
    }
    dont_hide_con_alpha_layer = 0
    //document.getElementById('password_input_txt').blur()
    document.getElementById('password_input').style.display = 'none'
    password_input_on = 0
    pass_item = ''
    pass_action = ''
    document.getElementById('password_input_error').innerHTML = '&nbsp;'
    document.getElementById('password_input_txt').value = ''
}

function add_password_char(ch){
    _debug('add_password_char()')
    document.getElementById('password_input_error').innerHTML = '&nbsp;'
    item_obj = document.getElementById('password_input_txt')
    item_obj.value = item_obj.value + '' + ch
}

function del_password_char(){
    _debug('del_password_char()')
    item_obj = document.getElementById('password_input_txt')
    item_obj.value = item_obj.value.substr(0,item_obj.value.length-1)
}

function check_password(){
    _debug('check_password()')
    tmp_pass_val = document.getElementById('password_input_txt').value
    _debug('tmp_pass_val: "'+tmp_pass_val+'"')
    if (stb.user[pass_item] == tmp_pass_val){
        stb.set_cookie(pass_item+'='+tmp_pass_val)
        eval(pass_action)
        hide_password_input()
    }else{
        show_pass_error()
    }
}

function show_pass_error(){
    _debug('show_pass_error()')
    document.getElementById('password_input_error').innerHTML = words['wrong_password']
    document.getElementById('password_input_txt').value = ''
}
/**/

/* SETTING PAGE */
function show_setting_page(){
    _debug('show_setting_page()')
    total_rows_setting_page = func_setting_page.length
    
    if (total_rows_setting_page < 2){
        document.getElementById('setting_row_1').style.display = 'none'
    }
    
    document.getElementById('setting_page').style.display = ''
    setting_page_on = 1
    set_active_setting_page_row()
}

function hide_setting_page(){
    _debug('hide_setting_page()')
    document.getElementById('setting_page').style.display = 'none'
    setting_page_on = 0
    prev_row_setting_page = 1
    cur_row_setting_page = 0
}

function shift_setting_page_menu(shift_row){
    _debug('shift_setting_page_menu('+shift_row+')')
    prev_row_setting_page = cur_row_setting_page
    if(shift_row > 0){
        if(shift_row + cur_row_setting_page > total_rows_setting_page-1){
            cur_row_setting_page = 0
        }else{
            cur_row_setting_page++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_setting_page < 0){
            cur_row_setting_page = total_rows_setting_page-1
        }else{
            cur_row_setting_page --
        }
    }
    set_active_setting_page_row()
}

function set_active_setting_page_row(){
    _debug('set_active_setting_page_row()')
    set_passive_setting_page_row()
    class_changer('setting_row_', cur_row_setting_page, "hover")
}

function set_passive_setting_page_row(){
    _debug('set_passive_setting_page_row()')
    class_changer('setting_row_', prev_row_setting_page, "unhover")
}

function set_passive_all_setting_page_row(){
    _debug('set_passive_all_setting_page_row()')
    class_changer('setting_row_', cur_row_setting_page, "unhover")
}

function call_setting_page_func(){
    _debug('call_setting_page_func()')
    eval(func_setting_page[cur_row_setting_page])
}
/**/

/* PARENT PASSWORD PAGE */
function show_parent_password_page(){
    _debug('show_parent_password_page()')
    document.getElementById('parent_password_page').style.display = ''
    parent_password_page_on = 1
    set_active_parent_password_item()
}

function hide_parent_password_page(){
    _debug('hide_parent_password_page()')
    document.getElementById('parent_password_page').style.display = 'none'
    set_passive_all_parent_password_item()
    parent_password_page_on = 0
    parent_password_error_msg('&nbsp;')
    cur_parent_password_item = 0
    prev_parent_password_item = 1
    document.getElementById('parent_password_item_0').value = ''
    document.getElementById('parent_password_item_1').value = ''
    document.getElementById('parent_password_item_2').value = ''
}

function shift_parent_password_items(shift_row){
    _debug('shift_parent_password_items('+shift_row+')')
    prev_parent_password_item = cur_parent_password_item
    if(shift_row > 0){
        if(shift_row + cur_parent_password_item > total_parent_password_items-1){
            cur_parent_password_item = 0
        }else{
            cur_parent_password_item++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_parent_password_item < 0){
            cur_parent_password_item = total_parent_password_items-1
        }else{
            cur_parent_password_item --
        }
    }
    set_active_parent_password_item()
}

function set_active_parent_password_item(){
    _debug('set_active_parent_password_item()')
    set_passive_parent_password_item()
    //document.getElementById('parent_password_item_'+cur_parent_password_item).focus()
    document.getElementById('parent_password_item_'+cur_parent_password_item).className = 'input_active'
}

function set_passive_parent_password_item(){
    _debug('set_passive_parent_password_item()')
    document.getElementById('parent_password_item_'+prev_parent_password_item).className = 'input_passive'
}

function set_passive_all_parent_password_item(){
    _debug('set_passive_all_parent_password_item()')
    document.getElementById('parent_password_item_'+cur_parent_password_item).className = 'input_passive'
}

function add_parent_password_char(ch){
    _debug('add_parent_password_char()')
    item_obj = document.getElementById('parent_password_item_'+cur_parent_password_item)
    item_obj.value = item_obj.value + '' + ch
}

function del_parent_password_char(){
    _debug('del_parent_password_char()')
    item_obj = document.getElementById('parent_password_item_'+cur_parent_password_item)
    item_obj.value = item_obj.value.substr(0,item_obj.value.length-1)
}


function check_parent_password(){
    _debug('check_parent_password()')
    old_pass  = document.getElementById('parent_password_item_0').value
    new_pass  = document.getElementById('parent_password_item_1').value
    new_pass2 = document.getElementById('parent_password_item_2').value
    if(old_pass == stb.user['parent_password'] && new_pass == new_pass2){
        save_parent_password()
    }else{
        parent_password_error_msg(words['error_password_change'])
    }
}

function save_parent_password(){
    _debug('save_parent_password()')
    new_pass  = document.getElementById('parent_password_item_1').value
    stb.user['parent_password'] = new_pass
    parent_password_error_msg('Сохранение...')
    doLoad('set_parent_password',0,new_pass)
}

function parent_password_error_msg(txt){
    document.getElementById('parent_password_error_txt').innerHTML = txt 
}
/**/

/* IDENTIFICATION PAGE */
function show_identification_page(){
    _debug('show_identification_page()')
    identification_page_on = 1
    show_kbd('identification_login')
    document.getElementById('identification_page').style.display = ''
}

function hide_identification_page(){
    _debug('hide_identification_page()')
    hide_kbd()
    document.getElementById('identification_page').style.display = 'none'
    identification_page_on = 0
}
/**/

/* WATCHDOG */
function run_watchdog(){
    _debug('run_watchdog()')
    window.setInterval(send_dog, 30000)
}

function send_dog(){
    var cur_play_type = 0
    
    //if (mode_one == 1 && !pause){
    if (!pause){
        cur_play_type = get_current_place()
    }
    
    if (pause){
        cur_play_type = 0
    }
    
    json_obj = {'cur_play_type' : cur_play_type, 'event_active_id' : event_active_id}
    if (show_watchdog_debug){
        _debug('json_obj: '+json_obj.toSource())
    }
    doLoad('watchdog', 0, json_obj)
}

function dog_result(data){
    if (show_watchdog_debug){
        _debug('dog_result('+data.toSource()+')')
    }
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    
    set_additional_services(data.additional_services_on)
    
    set_cur_weather(data.cur_weather)
    
    set_updated_places(data.updated)
    
    if (typeof(data.id) != 'undefined'){
        event_id   = data.id
        event_name = data.event
        event_need_confirm = data.need_confirm
        event_msg  = data.msg
        
        _debug('event_id: '+event_id)
        
        switch(event_name){
            case 'reboot':
            {
                stb.ExecAction('reboot');
                break
            }
            case 'send_msg':
            {
                event_active_id = event_id
                _debug('event_active_id: '+event_active_id)
                show_full_incoming_message(event_msg)
                reboot_after_ok = data.reboot_after_ok
                break
            }
            case 'send_rec_notice':
            {
                event_active_id = event_id
                show_rec_notice(event_msg)
                break
            }
            case 'update_channels':
            {
                load_channels()
                load_fav_channels()
                load_fav_itv()
                break
            }
            case 'update_subscription':
            {
                if (cut_off_on){
                    stb.ExecAction('reboot');
                }else{
                    load_channels()
                    load_fav_channels()
                    load_fav_itv()
                }
                break
            }
            case 'cut_off':
            {
                cut_off()
                break
            }
            case 'cut_on':
            {
                if (cut_off_on){
                    stb.ExecAction('reboot');
                }
                break
            }
            case 'mount_all_storages':
            {
                mount_all_storages(event_msg)
                break
            }
            case 'show_menu': // reset paused
            {
                menu_btn()
                break
            }
            case 'play_channel':
            {
                menu_btn()
                ch_idx = search_idx_in_by_num(parseInt(event_msg))
                exit_btn()
                break
            }
        }
    }
}

function send_event_confirm(){
    _debug('send_event_confirm()')
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    _debug('event_active_id: '+event_active_id)
    doLoad('event_confirm',0,event_active_id)
    
    event_active_id = 0
    
    if (reboot_after_ok == 1){
        stb.ExecAction('reboot')
    }
}
/**/

/* ENABLE || DISABLE ADDITIONAL SERVICES */
function set_additional_services(param){
    //_debug('set_additional_services('+param+')')
    param = parseInt(param)
    if (param == 0){
        additional_services_on = 0
    }else{
        additional_services_on = 1
    }
}
/**/

/* CUT OFF STB */
function cut_off(){
    _debug('cut_off()')
    _log('cut_off()')
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    stop()
    stb.SetDefaultFlicker(1)
    document.getElementById('cut_off').style.display = ''
    cut_off_on = 1
}
/**/

/* PAGE BAR */
function vclub_page_bar(cur_page, total_pages){
    _debug('vclub_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('vclub_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}
function video_clips_page_bar(cur_page, total_pages){
    _debug('video_clips_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('video_clips_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}
function video_records_page_bar(cur_page, total_pages){
    _debug('video_records_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('video_records_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function tv_page_bar(cur_page, total_pages){
    _debug('tv_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('tv_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function karaoke_page_bar(cur_page, total_pages){
    _debug('karaoke_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('karaoke_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function audio_club_page_bar(cur_page, total_pages){
    _debug('audio_club_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('audio_club_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function radio_page_bar(cur_page, total_pages){
    _debug('radio_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('radio_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function city_info_page_bar(cur_page, total_pages){
    _debug('city_info_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('city_info_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function recipes_page_bar(cur_page, total_pages){
    _debug('recipes_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('recipes_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function mastermind_rating_page_bar(cur_page, total_pages){
    _debug('mastermind_rating_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('mastermind_rating_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function anec_page_bar(cur_page, total_pages){
    _debug('anec_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('anec_page_bar').innerHTML = create_anec_page_bar_str(cur_page, total_pages)
}

function tv_program_page_bar(cur_page, total_pages){
    _debug('tv_program_page_bar('+cur_page+', '+total_pages+')')
    document.getElementById('tv_program_page_bar').innerHTML = create_page_bar_str(cur_page, total_pages)
}

function create_page_bar_str(cur_page, total_pages){
    _debug('create_page_bar_str('+cur_page+', '+total_pages+')')
    page_str = ''
    
    if(total_pages == 0){
        page_str += words['no_data']
    }else{
        page_str += words['page']+' '+cur_page+' '+words['from']+' '+total_pages
    }
    
    return page_str
}

function create_anec_page_bar_str(cur_page, total_pages){
    _debug('create_page_bar_str('+cur_page+', '+total_pages+')')
    page_str = ''
    
    if(total_pages == 0){
        page_str += words['no_data']
    }else{
        page_str += '<<  '+words['anec']+' '+cur_page+' '+words['from']+' '+total_pages+ '  >>'
    }
    
    return page_str
}
/**/

/* KARAOKE PAGE */
function show_karaoke_page(){
    _debug('show_karaoke_page()')
    _log('show_karaoke_page()')
    document.getElementById('karaoke_page').style.display = ''
    karaoke_page_on = 1

    if(prev_karaoke_page == ''){
        show_karaoke_by_name()
    }
    prev_karaoke_page = ''
    
    cur_partition = 'karaoke'
}

function hide_karaoke_page(){
    _debug('hide_karaoke_page()')
    document.getElementById('karaoke_page').style.display = 'none'
    karaoke_page_on = 0
    if (mode_one == 0){
        if(karaoke_by_name_on == 1){
            hide_karaoke_by_name()
        }else if(karaoke_by_singer_on == 1){
            hide_karaoke_by_singer()
        }else if(karaoke_by_author_on == 1){
            hide_karaoke_by_author()
        }
    }else{
        prev_karaoke_page = 'karaoke_page'
    }
    cur_partition = ''
}

function show_karaoke_con_menu(){
    _debug('show_karaoke_con_menu()')
    
    if (karaoke_by_name_on == 1){
        tmp_cur_id = tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].id
    }else if(karaoke_by_singer_on == 1){
        tmp_cur_id = tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].id
    }else if(karaoke_by_author_on == 1){
        tmp_cur_id = tmp_karaoke_by_author_arr[cur_row_karaoke_by_author].id
    }
    
    _debug('tmp_cur_id: '+tmp_cur_id)
    document.getElementById('karaoke_con_menu').style.display = ''
    karaoke_con_menu_on = 1
    set_active_karaoke_con_menu_row()
    show_con_alpha_layer()
}

function hide_karaoke_con_menu(){
    _debug('hide_karaoke_con_menu()')
    document.getElementById('karaoke_con_menu').style.display = 'none'
    karaoke_con_menu_on = 0
    prev_row_karaoke_con_menu = cur_row_karaoke_con_menu
    set_passive_karaoke_con_menu_row()
    prev_row_karaoke_con_menu = 1
    cur_row_karaoke_con_menu = 0
    hide_con_alpha_layer()
}

function shift_karaoke_con_menu(shift_row){
    _debug('shift_karaoke_con_menu('+shift_row+')')
    prev_row_karaoke_con_menu = cur_row_karaoke_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_karaoke_con_menu > total_rows_karaoke_con_menu-1){
            cur_row_karaoke_con_menu = 0
        }else{
            cur_row_karaoke_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_karaoke_con_menu < 0){
            cur_row_karaoke_con_menu = total_rows_karaoke_con_menu-1
        }else{
            cur_row_karaoke_con_menu --
        }
    }
    set_active_karaoke_con_menu_row()
}

function set_active_karaoke_con_menu_row(){
    _debug('set_active_karaoke_con_menu_row()')
    set_passive_karaoke_con_menu_row()
    class_changer('karaoke_con_menu_row_', cur_row_karaoke_con_menu, "hover")
}

function set_passive_karaoke_con_menu_row(){
    _debug('set_passive_karaoke_con_menu_row()')
    class_changer('karaoke_con_menu_row_', prev_row_karaoke_con_menu, "unhover")
}

function switch_on_karaoke_page(page_num){
    document.getElementById('karaoke_punct_'+page_num).className = "active_punct"
    
    /*document.getElementById('karaoke_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('karaoke_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('karaoke_punct_r_img_'+page_num).src = "i/insert_b_r.png"*/
}

function switch_off_karaoke_page(page_num){
    document.getElementById('karaoke_punct_'+page_num).className = "passive_punct"
    
    /*document.getElementById('karaoke_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('karaoke_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('karaoke_punct_r_img_'+page_num).src = "i/insert_r.png"*/
}
/**/

/* ABC KARAOKE BAR */
function shift_karaoke_abc(shift_row){
    _debug('shift_karaoke_abc('+shift_row+')')
    prev_row_karaoke_abc = cur_row_karaoke_abc
    if(shift_row > 0){
        if(shift_row + cur_row_karaoke_abc > total_rows_karaoke_abc-1){
            shift_karaoke_abc_page(1)
        }else{
            cur_row_karaoke_abc++
            set_active_karaoke_abc_row()
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_karaoke_abc < 0){
            shift_karaoke_abc_page(-1)
        }else{
            cur_row_karaoke_abc --
            set_active_karaoke_abc_row()
        }
    }
}

function shift_karaoke_abc_page(dir){
    _debug('shift_karaoke_abc_page('+dir+')')
    if (dir > 0){
        if (cur_karaoke_abc_bar_page < total_karaoke_abc_bar_pages){
            cur_karaoke_abc_bar_page++
            normlight_abc_karaoke_bar_row()
            need_karaoke_abc_bar_focus = 1
            set_passive_all_karaoke_abc_row()
            cur_row_karaoke_abc = 0
            fill_abc_bar(cur_karaoke_abc_bar_page, 'karaoke_abc_text_')
        }
    }else if (dir < 0){
        if (cur_karaoke_abc_bar_page > 1){
            cur_karaoke_abc_bar_page--
            normlight_abc_karaoke_bar_row()
            need_karaoke_abc_bar_focus = 1
            set_passive_all_karaoke_abc_row()
            cur_row_karaoke_abc = 9
            fill_abc_bar(cur_karaoke_abc_bar_page, 'karaoke_abc_text_')
        }
    }
}

function set_active_karaoke_abc_row(){
    _debug('set_active_karaoke_abc_row()')
    _debug('cur_row_karaoke_abc: '+cur_row_karaoke_abc)
    set_passive_karaoke_abc_row()
    r_class_changer('karaoke_abc_row_', cur_row_karaoke_abc, "hover")
}

function set_passive_karaoke_abc_row(){
    _debug('set_passive_karaoke_abc_row()')
    r_class_changer('karaoke_abc_row_', prev_row_karaoke_abc, "unhover")
}

function set_passive_all_karaoke_abc_row(){
    _debug('set_passive_all_karaoke_abc_row()')
    r_class_changer('karaoke_abc_row_', cur_row_karaoke_abc, "unhover")
}

function hightlight_abc_karaoke_bar_row(){
    lighted_row_karaoke_abc = cur_row_karaoke_abc
    r_class_changer('karaoke_abc_row_', lighted_row_karaoke_abc, "hightlight")
}

function normlight_abc_karaoke_bar_row(){
    r_class_changer('karaoke_abc_row_', lighted_row_karaoke_abc, "normlight")
}
/**/

/* GENRE KARAOKE BAR */
function show_karaoke_genre_bar(){
    _debug('show_karaoke_genre_bar()')
    document.getElementById('genre_bar_karaoke').style.display = ''
    load_karaoke_genre_bar(0)
}

function hide_karaoke_genre_bar(){
    _debug('hide_karaoke_genre_bar()')
    document.getElementById('genre_bar_karaoke').style.display = 'none'
    set_passive_all_karaoke_genre_bar_row()
    prev_row_karaoke_genre_bar = 1
    cur_row_karaoke_genre_bar = 0
    cur_karaoke_genre_bar_page = 1
}

function shift_karaoke_genre_bar(shift_row){
    _debug('shift_karaoke_genre_bar('+shift_row+')') 
    prev_row_karaoke_genre_bar = cur_row_karaoke_genre_bar
    if(shift_row > 0){
        if(cur_row_karaoke_genre_bar < max_karaoke_genre_bar_rows-1){
            cur_row_karaoke_genre_bar++
        }else{
            shift_karaoke_genre_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_karaoke_genre_bar > 0){
            cur_row_karaoke_genre_bar --
        }else{
            shift_karaoke_genre_bar_page(-1)
        }
    }
    set_active_karaoke_genre_bar_row()  
}

function shift_karaoke_genre_bar_page(dir){
     _debug('shift_karaoke_genre_bar_page('+dir+')')
    if (dir > 0){
        if (cur_karaoke_genre_bar_page < total_karaoke_genre_bar_pages){
            cur_karaoke_genre_bar_page++
            normlight_karaoke_genre_bar_row()
            load_karaoke_genre_bar(cur_karaoke_genre_bar_page-1)
            cur_row_karaoke_genre_bar = 0
        }
    }else if (dir < 0){
        if (cur_karaoke_genre_bar_page > 1){
            cur_karaoke_genre_bar_page--
            normlight_karaoke_genre_bar_row()
            load_karaoke_genre_bar(cur_karaoke_genre_bar_page-1)
            cur_row_karaoke_genre_bar = 9
        }
    }
}

function load_karaoke_genre_bar(page){
    _debug('load_karaoke_genre_bar('+page+')')
    begin = (page)*10
    end = (page+1)*10
    _debug('slice begin: '+begin)
    _debug('slice end: '+end)
    
    genre_slice = karaoke_genre_names.slice(begin,end)
    _debug('genre_slice: '+genre_slice)
    fill_karaoke_genre_bar(genre_slice)
}

function fill_karaoke_genre_bar(arr){
    _debug('fill_karaoke_genre_bar()')
    tmp_karaoke_genre_bar_arr = arr
    del_karaoke_genre_bar()
    max_karaoke_genre_bar_rows = arr.length
    _debug('max_karaoke_by_name: '+max_karaoke_genre_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('karaoke_genre_text_'+(tv_n_i)).innerHTML = arr[tv_n_i]
    }
}

function del_karaoke_genre_bar(){
    _debug('del_karaoke_genre_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('karaoke_genre_text_'+(tv_n_i)).innerHTML = ''
    }
    max_karaoke_genre_bar_rows = 0
}

function set_active_karaoke_genre_bar_row(){
    _debug('set_active_karaoke_genre_bar_row()')
    _debug('cur_row_karaoke_genre: '+cur_row_karaoke_genre_bar)
    set_passive_karaoke_genre_bar_row()
    r_class_changer('karaoke_genre_row_', cur_row_karaoke_genre_bar, "hover")
}

function set_passive_karaoke_genre_bar_row(){
    _debug('set_passive_karaoke_genre_bar_row()')
    r_class_changer('karaoke_genre_row_', prev_row_karaoke_genre_bar, "unhover")
}

function set_passive_all_karaoke_genre_bar_row(){
    _debug('set_passive_all_karaoke_genre_bar_row()')
    _debug('cur_row_karaoke_genre_bar: '+cur_row_karaoke_genre_bar)
    r_class_changer('karaoke_genre_row_', cur_row_karaoke_genre_bar, "unhover")
}

function hightlight_karaoke_genre_bar_row(){
    lighted_row_karaoke_genre = cur_row_karaoke_genre_bar
    r_class_changer('karaoke_genre_row_', lighted_row_karaoke_genre, "hightlight")
}

function normlight_karaoke_genre_bar_row(){
    r_class_changer('karaoke_genre_row_', lighted_row_karaoke_genre, "normlight")
}
/**/

/* KARAOKE BY NAME */
function show_karaoke_by_name(){
    _debug('show_karaoke_by_name()')
    _log('show_karaoke_by_name()')
    //show_karaoke_genre_bar()
    fill_abc_bar(1, 'karaoke_abc_text_')
    document.getElementById('abc_bar_karaoke').style.display = ''
    document.getElementById('abc_bar_karaoke').style.left = '23'
    document.getElementById('main_bar_karaoke_by_name').style.display = ''
    switch_on_karaoke_page(1)
    karaoke_by_name_on = 1
    lighted_row_vclub_abc = 0
    need_karaoke_by_name_row_focus = 1
    load_karaoke_by_name(0)
    //set_active_karaoke_by_name_row()
}

function hide_karaoke_by_name(){
    _debug('hide_karaoke_by_name()')
    
    document.getElementById('abc_bar_karaoke').style.display = 'none'
    document.getElementById('main_bar_karaoke_by_name').style.display = 'none'
    switch_off_karaoke_page(1)
    karaoke_by_name_on = 0
    // disable abc
    set_passive_all_karaoke_abc_row()
    cur_abc_karaoke_bar = 0
    prev_row_karaoke_abc = 1
    cur_row_karaoke_abc = 0
    // disable genre
    //hide_karaoke_genre_bar()
    cur_genre_karaoke_bar = 0
    
    normlight_abc_bar_row()
    
    if(karaoke_con_menu_on == 1){
        hide_karaoke_con_menu()
    }
    prev_row_karaoke_by_name = cur_row_karaoke_by_name
    set_passive_karaoke_by_name_row()
    cur_karaoke_by_name_page = 1
    cur_row_karaoke_by_name = 0
    prev_row_karaoke_by_name = 1
}

function shift_karaoke_by_name(shift_row){
    _debug('shift_karaoke_by_name('+shift_row+')')
    prev_row_karaoke_by_name = cur_row_karaoke_by_name
    if(shift_row > 0){
        if(cur_row_karaoke_by_name < max_karaoke_by_name_rows-1){
            cur_row_karaoke_by_name++
            set_active_karaoke_by_name_row()
        }else{
            shift_karaoke_by_name_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_karaoke_by_name > 0){
            cur_row_karaoke_by_name --
            set_active_karaoke_by_name_row()
        }else{
            shift_karaoke_by_name_page(-1)
        }
    }
}

function shift_karaoke_by_name_page(dir){
    _debug('shift_karaoke_by_name_page('+dir+')')
    if (dir > 0){
        if (cur_karaoke_by_name_page < total_karaoke_by_name_pages){
            cur_karaoke_by_name_page++
            need_karaoke_by_name_row_focus = 1
            set_passive_all_karaoke_by_name_row()
            load_karaoke_by_name(cur_karaoke_by_name_page)
            cur_row_karaoke_by_name = 0
        }
    }else if (dir < 0){
        if (cur_karaoke_by_name_page > 1){
            cur_karaoke_by_name_page--
            need_karaoke_by_name_row_focus = 1
            set_passive_all_karaoke_by_name_row()
            load_karaoke_by_name(cur_karaoke_by_name_page)
            cur_row_karaoke_by_name = 9
        }
    }
}

function set_active_karaoke_by_name_row(){
    _debug('set_active_karaoke_by_name_row()')
    _debug('cur_row_karaoke_by_name: '+cur_row_karaoke_by_name)
    set_passive_karaoke_by_name_row()
    r_class_changer('karaoke_by_name_row_', cur_row_karaoke_by_name, "hover")
}

function set_passive_karaoke_by_name_row(){
    _debug('set_passive_karaoke_by_name_row()')
    _debug('prev_row_karaoke_by_name: '+prev_row_karaoke_by_name)
    r_class_changer('karaoke_by_name_row_', prev_row_karaoke_by_name, "unhover")
}

function set_passive_all_karaoke_by_name_row(){
    _debug('set_passive_all_karaoke_by_name_row()')
    _debug('cur_row_karaoke_by_name: '+cur_row_karaoke_by_name)
    r_class_changer('karaoke_by_name_row_', cur_row_karaoke_by_name, "unhover")
}

function call_con_menu_karaoke_by_name_func(){
    _debug('call_con_menu_karaoke_by_name_func(): '+(cur_row_karaoke_con_menu))
    eval(func_karaoke_by_name[cur_row_karaoke_con_menu])
    //hide_karaoke_con_menu()
}

function start_play_karaoke_by_name(){
    _debug('start_play_karaoke_by_name()')
    cur_place = 'karaoke'
    if (additional_services_on){
        //show_playing(tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].name, tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].id)
        play('auto ' + video_dir+tmp_karaoke_by_name_arr[cur_row_karaoke_by_name].id+'.mpg')
        //hide_karaoke_con_menu()
        //hide_karaoke_page()
    }else{
        show_warning_message(words['disabled_additional_services'])
    }
}

function load_karaoke_by_name(page){
    tmp_genre_id = ((cur_karaoke_genre_bar_page-1)*total_rows_karaoke_genre_bar+cur_row_karaoke_genre_bar)
    doLoad('karaoke&action='+((cur_karaoke_abc_bar_page-1)*10+cur_row_karaoke_abc+1)+'&karaoke_by_name', page)
    normlight_abc_karaoke_bar_row()
    hightlight_abc_karaoke_bar_row()
    
    normlight_karaoke_genre_bar_row()
    hightlight_karaoke_genre_bar_row()
}

function fill_karaoke_by_name(arr){
    _debug('fill_karaoke_by_name()')
    karaoke_page_bar(cur_karaoke_by_name_page, total_karaoke_by_name_pages)
    tmp_karaoke_by_name_arr = arr
    //del_karaoke_by_name()
    arr_length = max_karaoke_by_name_rows = arr.length
    _debug('max_karaoke_by_name: '+max_karaoke_by_name_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('karaoke_by_name_row_'+tv_n_i))
        
        document.getElementById('karaoke_by_name_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('karaoke_by_name_singer_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('karaoke_by_name_title_'+(tv_i)).innerHTML = ''
            document.getElementById('karaoke_by_name_singer_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_karaoke_by_name_row_focus){
        set_active_karaoke_by_name_row()
        need_karaoke_by_name_row_focus = 0
    }
}

function del_karaoke_by_name(){
    _debug('del_karaoke_by_name()')
    karaoke_page_bar(cur_karaoke_by_name_page, total_karaoke_by_name_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('karaoke_by_name_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('karaoke_by_name_singer_'+(tv_n_i)).innerHTML = ''
    }
    max_karaoke_by_name_rows = 0
}
/**/

/* KARAOKE BY SINGER */
function show_karaoke_by_singer(){
    _debug('show_karaoke_by_singer()')
    _log('show_karaoke_by_singer()')
    document.getElementById('abc_bar_karaoke').style.display = ''
    document.getElementById('abc_bar_karaoke').style.left = '23'
    document.getElementById('main_bar_karaoke_by_singer').style.display = ''
    del_karaoke_by_singer()
    show_karaoke_singer_bar()
    switch_on_karaoke_page(2)
    karaoke_by_singer_on = 1
    lighted_row_vclub_abc = 0
    //load_karaoke_by_singer(0)
    //set_active_karaoke_by_singer_row()
    cur_abc_karaoke_bar = 1
    set_active_karaoke_abc_row()
}

function hide_karaoke_by_singer(){
    _debug('hide_karaoke_by_name()')
    
    document.getElementById('abc_bar_karaoke').style.display = 'none'
    document.getElementById('main_bar_karaoke_by_singer').style.display = 'none'
    hide_karaoke_singer_bar()
    switch_off_karaoke_page(2)
    karaoke_by_singer_on = 0
    // disable abc
    set_passive_all_karaoke_abc_row()
    cur_abc_karaoke_bar = 0
    prev_row_karaoke_abc = 1
    cur_row_karaoke_abc = 0
    normlight_abc_bar_row()
    
    del_karaoke_by_singer()
    if(karaoke_con_menu_on == 1){
        hide_karaoke_con_menu()
    }
    
    prev_row_karaoke_by_singer = cur_row_karaoke_by_singer
    set_passive_karaoke_by_singer_row()
    cur_karaoke_by_singer_page = 1
    cur_row_karaoke_by_singer = 0
    prev_row_karaoke_by_singer = 1
}

function shift_karaoke_by_singer(shift_row){
    _debug('shift_karaoke_by_singer('+shift_row+')')
    prev_row_karaoke_by_singer = cur_row_karaoke_by_singer
    if(shift_row > 0){
        if(cur_row_karaoke_by_singer < max_karaoke_by_singer_rows-1){
            cur_row_karaoke_by_singer++
            set_active_karaoke_by_singer_row()
        }else{
            shift_karaoke_by_singer_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_karaoke_by_singer > 0){
            cur_row_karaoke_by_singer --
            set_active_karaoke_by_singer_row()
        }else{
            shift_karaoke_by_singer_page(-1)
        }
    }
}

function shift_karaoke_by_singer_page(dir){
    _debug('shift_karaoke_by_singer_page('+dir+')')
    if (dir > 0){
        if (cur_karaoke_by_singer_page < total_karaoke_by_singer_pages){
            cur_karaoke_by_singer_page++
            need_karaoke_by_singer_row_focus = 1
            set_passive_all_karaoke_by_singer_row()
            load_karaoke_by_singer(cur_karaoke_by_singer_page)
            cur_row_karaoke_by_singer= 0
        }
    }else if (dir < 0){
        if (cur_karaoke_by_singer_page > 1){
            cur_karaoke_by_singer_page--
            need_karaoke_by_singer_row_focus = 1
            set_passive_all_karaoke_by_singer_row()
            load_karaoke_by_singer(cur_karaoke_by_singer_page)
            cur_row_karaoke_by_singer = 9
        }
    }
}

function set_active_karaoke_by_singer_row(){
    _debug('set_active_karaoke_by_singer_row()')
    _debug('cur_row_karaoke_by_singer: '+cur_row_karaoke_by_singer)
    set_passive_karaoke_by_singer_row()
    r_class_changer('karaoke_by_singer_row_', cur_row_karaoke_by_singer, "hover")
}

function set_passive_karaoke_by_singer_row(){
    _debug('set_passive_karaoke_by_singer_row()')
    _debug('prev_row_karaoke_by_singer: '+prev_row_karaoke_by_singer)
    r_class_changer('karaoke_by_singer_row_', prev_row_karaoke_by_singer, "unhover")
}

function set_passive_all_karaoke_by_singer_row(){
    _debug('set_passive_all_karaoke_by_singer_row()')
    _debug('cur_row_karaoke_by_singer: '+cur_row_karaoke_by_singer)
    r_class_changer('karaoke_by_singer_row_', cur_row_karaoke_by_singer, "unhover")
}

function call_con_menu_karaoke_by_singer_func(){
    _debug('call_con_menu_karaoke_by_singer_func(): '+(cur_row_karaoke_con_menu))
    eval(func_karaoke_by_singer[cur_row_karaoke_con_menu])
    //hide_karaoke_con_menu()
}

function start_play_karaoke_by_singer(){
    _debug('start_play_karaoke_by_singer()')
    cur_place = 'karaoke'
    if (additional_services_on){
        //show_playing(tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].name, tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].id)
        play('auto ' + video_dir+tmp_karaoke_by_singer_arr[cur_row_karaoke_by_singer].id+'.mpg')
        //hide_karaoke_con_menu()
        //hide_karaoke_page()
    }else{
        show_warning_message(words['disabled_additional_services'])
    }
}

function load_karaoke_by_singer(page){
    _debug('load_karaoke_by_singer('+page+')')
    _debug('singer: '+tmp_karaoke_singer_bar_arr[cur_row_karaoke_singer_bar].singer)
    doLoad('karaoke&action='+(cur_row_karaoke_abc+1)+'&karaoke_by_singer&singer='+tmp_karaoke_singer_bar_arr[cur_row_karaoke_singer_bar].singer, page)
    normlight_abc_karaoke_bar_row()
    hightlight_abc_karaoke_bar_row()
    
    normlight_karaoke_singer_bar_row()
    hightlight_karaoke_singer_bar_row()
}

function fill_karaoke_by_singer(arr){
    _debug('fill_karaoke_by_singer()')
    karaoke_page_bar(cur_karaoke_by_singer_page, total_karaoke_by_singer_pages)
    tmp_karaoke_by_singer_arr = arr
    //del_karaoke_by_singer()
    arr_length = max_karaoke_by_singer_rows = arr.length
    _debug('max_karaoke_by_singer_rows: '+max_karaoke_by_singer_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('karaoke_by_singer_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('karaoke_by_singer_title_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_karaoke_by_singer_row_focus){
        set_active_karaoke_by_singer_row()
        need_karaoke_by_singer_row_focus = 0
    }
}

function del_karaoke_by_singer(){
    _debug('del_karaoke_by_singer()')
    karaoke_page_bar(0, 0)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('karaoke_by_singer_title_'+(tv_n_i)).innerHTML = ''
    }
    max_karaoke_by_singer_rows = 0
}
/**/

/* KARAOKE SINGER BAR */
function show_karaoke_singer_bar(){
    _debug('show_karaoke_singer_bar()')
    document.getElementById('karaoke_singer_bar').style.display = ''
    load_karaoke_singer_bar(0)
}

function hide_karaoke_singer_bar(){
    _debug('hide_karaoke_singer_bar()')
    document.getElementById('karaoke_singer_bar').style.display = 'none'
    cur_karaoke_singer_bar = 0
    set_passive_all_karaoke_singer_bar_row()
    prev_row_karaoke_singer_bar = 1
    cur_row_karaoke_singer_bar = 0
    cur_karaoke_singer_bar_page = 1
}

function shift_karaoke_singer_bar(shift_row){
    _debug('shift_karaoke_singer_bar('+shift_row+')') 
    prev_row_karaoke_singer_bar = cur_row_karaoke_singer_bar
    if(shift_row > 0){
        if(cur_row_karaoke_singer_bar < max_karaoke_singer_bar_rows-1){
            cur_row_karaoke_singer_bar++
            set_active_karaoke_singer_bar_row()
        }else{
            shift_karaoke_singer_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_karaoke_singer_bar > 0){
            cur_row_karaoke_singer_bar --
            set_active_karaoke_singer_bar_row()
        }else{
            shift_karaoke_singer_bar_page(-1)
        }
    }
}

function shift_karaoke_singer_bar_page(dir){
     _debug('shift_karaoke_singer_bar_page('+dir+')')
    if (dir > 0){
        if (cur_karaoke_singer_bar_page < total_karaoke_singer_bar_pages){
            cur_karaoke_singer_bar_page++
            normlight_karaoke_singer_bar_row()
            del_karaoke_by_singer()
            need_karaoke_singer_bar_row_focus = 1
            set_passive_all_karaoke_singer_bar_row()
            load_karaoke_singer_bar(cur_karaoke_singer_bar_page-1)
            cur_row_karaoke_singer_bar = 0
        }
    }else if (dir < 0){
        if (cur_karaoke_singer_bar_page > 1){
            cur_karaoke_singer_bar_page--
            normlight_karaoke_singer_bar_row()
            del_karaoke_by_singer()
            need_karaoke_singer_bar_row_focus = 1
            set_passive_all_karaoke_singer_bar_row()
            load_karaoke_singer_bar(cur_karaoke_singer_bar_page-1)
            cur_row_karaoke_singer_bar = 9
        }
    }
}

function load_karaoke_singer_bar(page){
    _debug('load_karaoke_singer_bar('+page+')')
    doLoad('karaoke&action='+((cur_karaoke_abc_bar_page-1)*10+cur_row_karaoke_abc+1)+'&karaoke_singer_bar', page+1)
    normlight_abc_karaoke_bar_row()
    hightlight_abc_karaoke_bar_row()
    
    normlight_karaoke_singer_bar_row()
    if (cur_karaoke_singer_bar == 1){
        //hightlight_karaoke_singer_bar_row()
    }
}

function fill_karaoke_singer_bar(arr){
    _debug('fill_karaoke_singer_bar()')
    tmp_karaoke_singer_bar_arr = arr
    arr_length = max_karaoke_singer_bar_rows = arr.length
    _debug('max_karaoke_singer_bar_rows: '+max_karaoke_singer_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('karaoke_singer_bar_text_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('karaoke_singer_bar_text_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_karaoke_singer_bar_row_focus){
        set_active_karaoke_singer_bar_row()
        need_karaoke_singer_bar_row_focus = 0
    }
}

function del_karaoke_singer_bar(){
    _debug('del_karaoke_singer_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('karaoke_singer_bar_text_'+(tv_n_i)).innerHTML = ''
    }
    max_karaoke_singer_bar_rows = 0
}

function set_active_karaoke_singer_bar_row(){
    _debug('set_active_karaoke_singer_bar_row()')
    _debug('cur_row_karaoke_singer: '+cur_row_karaoke_singer_bar)
    set_passive_karaoke_singer_bar_row()
    r_class_changer('karaoke_singer_bar_row_', cur_row_karaoke_singer_bar, "hover")
}

function set_passive_karaoke_singer_bar_row(){
    _debug('set_passive_karaoke_singer_bar_row()')
    r_class_changer('karaoke_singer_bar_row_', prev_row_karaoke_singer_bar, "unhover")
}

function set_passive_all_karaoke_singer_bar_row(){
    _debug('set_passive_all_karaoke_singer_bar_row()')
    _debug('cur_row_karaoke_singer_bar: '+cur_row_karaoke_singer_bar)
    r_class_changer('karaoke_singer_bar_row_', cur_row_karaoke_singer_bar, "unhover")
}

function hightlight_karaoke_singer_bar_row(){
    lighted_row_karaoke_singer_bar = cur_row_karaoke_singer_bar
    r_class_changer('karaoke_singer_bar_row_', lighted_row_karaoke_singer_bar, "hightlight")
}

function normlight_karaoke_singer_bar_row(){
    r_class_changer('karaoke_singer_bar_row_', lighted_row_karaoke_singer_bar, "normlight")
}
/**/

/* INCOMING MESSAGE */
function show_incoming_msg(txt){
    _debug('show_incoming_msg('+txt+')')
    incoming_msg_str = txt
    document.getElementById('incoming_message').style.display = ''
    document.getElementById('incoming_message_txt').innerHTML = txt
    show_incoming_msg_on = 1
}

function hide_incoming_msg(){
    document.getElementById('incoming_message').style.display = 'none'
    document.getElementById('incoming_message_txt').innerHTML = ''
    show_incoming_msg_on = 0
    //send_event_confirm()
}

function show_full_incoming_message(txt){
    _debug('show_full_incoming_message()')
    hide_incoming_msg()
    document.getElementById('full_incoming_message').style.display = ''
    document.getElementById('full_incoming_message_txt').innerHTML = txt
    full_incoming_msg_on = 1
}

function hide_full_incoming_message(){
    document.getElementById('full_incoming_message').style.display = 'none'
    document.getElementById('full_incoming_message_txt').innerHTML = ''
    full_incoming_msg_on = 0
    send_event_confirm()
}
/**/

/* REC NOTICE */
function show_rec_notice(txt){
    _debug('show_rec_notice('+txt+')')
    document.getElementById('rec_notice').style.display = ''
    document.getElementById('rec_notice_txt').innerHTML = txt
    rec_notice_on = 1
}

function hide_rec_notice(){
    _debug('hide_rec_notice()')
    document.getElementById('rec_notice').style.display = 'none'
    document.getElementById('rec_notice_txt').innerHTML = ''
    rec_notice_on = 0
    send_event_confirm()
}


/* VIDEO OUT SETTING */
function show_video_out_setting_page(){
    _debug('show_video_out_setting_page()')
    document.getElementById('video_out_setting_page').style.display = ''
    video_out_setting_page_on = 1
    chech_video_out()
    //set_def_bri()
    initialize_video_out_setting_bar()
    video_out_set_active_bar();
}

function hide_video_out_setting_page(){
    _debug('hide_video_out_setting_page()')
    document.getElementById('video_out_setting_page').style.display = 'none'
    video_out_setting_page_on = 0
    video_out_set_passive_all_bar();
    video_out_cur_bar_idx = 0;
    video_out_prev_bar_idx = 0;
    video_out_error_msg('')
}

function save_video_out_setting(){
    _debug('save_video_out_setting()')
    video_out_error_msg('Сохранение...')
    doLoad('set_video_out', 0, stb.user['video_out'])
    
    doLoad('set_bright', 0, stb.user['bright'])
    doLoad('set_contrast', 0, stb.user['contrast'])
    doLoad('set_saturation', 0, stb.user['saturation'])
}

function video_out_error_msg(txt){
    document.getElementById('video_out_error_msg').innerHTML = txt 
}

function video_out_shift_active_bar(dir){
    _debug('video_out_shift_active_bar('+dir+')')
    video_out_prev_bar_idx = video_out_cur_bar_idx
    if (dir>0){
        if (video_out_cur_bar_idx < video_out_setting_map.length-1){
            video_out_cur_bar_idx++
        }else{
            video_out_cur_bar_idx = 0
        }
    }else{
        if (video_out_cur_bar_idx > 0){
            video_out_cur_bar_idx--
        }else{
            video_out_cur_bar_idx = video_out_setting_map.length-1
        }
    }
    
    video_out_set_active_bar()
}

function video_out_set_active_bar(){
    _debug('video_out_set_active_bar()')
    video_out_set_passive_bar()
    
    _debug(video_out_setting_map[video_out_cur_bar_idx])
    
    document.getElementById(video_out_setting_map[video_out_cur_bar_idx]+'_bar').className = 'active_setting_bar'
    document.getElementById(video_out_setting_map[video_out_cur_bar_idx]+'_button').className = 'active_setting_bar' 
}

function video_out_set_passive_bar(){
    _debug('video_out_set_passive_bar()')
    document.getElementById(video_out_setting_map[video_out_prev_bar_idx]+'_bar').className = 'passive_setting_bar'
    document.getElementById(video_out_setting_map[video_out_prev_bar_idx]+'_button').className = 'passive_setting_bar'
}

function video_out_set_passive_all_bar(){
    _debug('video_out_set_passive_all_bar()')
    document.getElementById(video_out_setting_map[video_out_cur_bar_idx]+'_bar').className = 'passive_setting_bar'
    document.getElementById(video_out_setting_map[video_out_cur_bar_idx]+'_button').className = 'passive_setting_bar'
}

function video_out_shift_active_button(dir){
    _debug('video_out_shift_active_button('+dir+')')
    
    var button_pos = video_out_button_pos[video_out_cur_bar_idx];
    
    if (dir>0){
        if (button_pos < 390){
            button_pos = button_pos+10
        }
    }else{
        if (button_pos > 0){
            button_pos = button_pos-10
        }
    }
    
    video_out_button_pos[video_out_cur_bar_idx] = button_pos
    
    set_video_out_button_pos(button_pos)
    set_video_out_setting_value(button_pos)
    
}

function set_video_out_button_pos(pos){
    _debug('set_video_out_button_pos('+pos+')')
    var offset = 135
    var left = parseInt(offset)+parseInt(pos)+'px'
    _debug('left: '+left)
    document.getElementById(video_out_setting_map[video_out_cur_bar_idx] + '_button').style.left = left
}

function set_video_out_setting_value(pos){
    _debug('set_video_out_setting_value('+pos+')')
    var val = Math.ceil((pos/(390/100))*(207/100)+48)

    if(val >= 255){
        val = 254;
    }
    
    _debug('val: '+val)
    stb.user[video_out_setting_map[video_out_cur_bar_idx]] = val
    
    if (video_out_setting_map[video_out_cur_bar_idx] == 'bright'){
        stb.SetBrightness(val)
    }else if (video_out_setting_map[video_out_cur_bar_idx] == 'contrast'){
        stb.SetContrast(val)
    }else if (video_out_setting_map[video_out_cur_bar_idx] == 'saturation'){
        stb.SetSaturation(val)
    }
}

function initialize_video_out_setting_bar(){
    _debug('initialize_video_out_setting_bar()')
    var per = 0
    var pos = 0
    for (var i=0; i<video_out_setting_map.length; i++){
        
        video_out_cur_bar_idx = i
        
        if (stb.user.hasOwnProperty(video_out_setting_map[i])){
            per = (stb.user[video_out_setting_map[i]]-48)/(207/100)
            pos = Math.ceil(per*(390/100))
        }else{
            pos = 0
        }
        
        _debug(video_out_setting_map[i]+' = '+pos+'px')
        
        video_out_button_pos[i] = pos;
        
        set_video_out_button_pos(pos)
    }
    
    video_out_cur_bar_idx = 0
}

/*function change_bright(dir){
    _debug('change_bright('+dir+')')
    if(dir>0){
        if(bright_pos<390)
        bright_pos = bright_pos+10
    }else{
        if(bright_pos>0)
        bright_pos = bright_pos-10
    }
    
    set_bright_bar_pos(bright_pos)
    tmp_bra = get_bright(bright_pos)
    set_bright_setting(tmp_bra)
}

function set_bright_bar_pos(pos){
    left = 128+bright_pos+'px'
    document.getElementById('bright_button').style.left = left
}

function get_bright(pos){
    _debug('get_bright('+pos+')')
    pos_perc = bright_pos/(390/100)
    bri_perc = Math.ceil(pos_perc*(207/100)+48)
    return bri_perc
}

function set_def_bri(){
    tmp_bri = stb.user['bright']
    _debug('tmp_bri: '+tmp_bri)
    bri_per = (tmp_bri-48)/(207/100)
    bright_pos = Math.ceil(bri_per*(390/100))
    set_bright_bar_pos(bright_pos)
}

function set_bright_setting(bri){
    _debug('set_bright('+bri+')')
    stb.user['bright'] = bri
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    stb.ExecAction('bright '+Dec2Hex(bri));
}*/

function chech_video_out(){
    video_out = stb.user['video_out']
    if (!video_out){
        video_out = 'rca'
    }
    _debug('chech_video_out: '+video_out)
    v_out = document.getElementById('video_out')
    v_out.innerHTML = get_video_out_name(video_out)
    return video_out
}

function change_video_out(){
    netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")
    
    _debug('change_video_out: '+video_out)
    if (video_out == 'rca'){
        video_out = 'svideo'
        stb.user['video_out'] = 'svideo'
    }else if (video_out == 'svideo'){
        video_out = 'rca'
        stb.user['video_out'] = 'rca'
    }
    stb.ExecAction('SetVideoOut '+video_out);
    v_out = document.getElementById('video_out')
    v_out.innerHTML = get_video_out_name(video_out)
}

function get_video_out_name(num){
    if (num == 'rca'){
        return 'RCA'
    }
    if (num == 'svideo'){
        return 'S-Video'
    }
}
/**/

/* ABC AUDIO CLUB BAR */
function shift_audio_club_abc(shift_row){
    _debug('shift_audio_club_abc('+shift_row+')')
    prev_row_audio_club_abc = cur_row_audio_club_abc
    if(shift_row > 0){
        if(shift_row + cur_row_audio_club_abc > total_rows_audio_club_abc-1){
            cur_row_audio_club_abc = 0
        }else{
            cur_row_audio_club_abc++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_audio_club_abc < 0){
            cur_row_audio_club_abc = total_rows_audio_club_abc-1
        }else{
            cur_row_audio_club_abc --
        }
    }
    set_active_audio_club_abc_row()
}

function set_active_audio_club_abc_row(){
    _debug('set_active_audio_club_abc_row()')
    _debug('cur_row_audio_club_abc: '+cur_row_audio_club_abc)
    set_passive_audio_club_abc_row()
    class_changer('audio_club_abc_row_', cur_row_audio_club_abc, "hover")
}

function set_passive_audio_club_abc_row(){
    _debug('set_passive_audio_club_abc_row()')
    class_changer('audio_club_abc_row_', prev_row_audio_club_abc, "unhover")
}

function set_passive_all_audio_club_abc_row(){
    _debug('set_passive_all_audio_club_abc_row()')
    class_changer('audio_club_abc_row_', cur_row_audio_club_abc, "unhover")
}

function hightlight_abc_audio_club_bar_row(){
    lighted_row_audio_club_abc = cur_row_audio_club_abc
    class_changer('audio_club_abc_row_', lighted_row_audio_club_abc, "hightlight")
}

function normlight_abc_audio_club_bar_row(){
    class_changer('audio_club_abc_row_', lighted_row_audio_club_abc, "normlight")
}
/**/

/* AUDIO CLUB */
function show_audio_club_page(){
    _debug('show_audio_club()')
    _log('show_audio_club()')
    document.getElementById('audio_club_page').style.display = ''
    audio_club_page_on = 1

    if(prev_audio_club_page == ''){
        show_audio_club_by_name()
    }
    prev_audio_club_page = ''
    
    cur_partition = 'audio_club'
}

function hide_audio_club_page(){
    _debug('hide_audio_club_page()')
    document.getElementById('audio_club_page').style.display = 'none'
    audio_club_page_on = 0
    if (mode_one == 0){
        if(audio_club_by_name_on == 1){
            hide_audio_club_by_name()
        }else if(audio_club_by_singer_on == 1){
            hide_audio_club_by_singer()
        }else if(audio_club_playlist_on == 1){
            hide_audio_club_playlist()
        }
    }else{
        prev_audio_club_page = 'audio_club_page'
    }
    cur_partition = ''
    window.clearTimeout(t_next_play_id)
}

function show_audio_club_con_menu(){
    _debug('show_audio_club_con_menu()')
    
    if (audio_club_by_name_on == 1){
        tmp_cur_id = tmp_audio_club_by_name_arr[cur_row_audio_club_by_name].id
    }else if(audio_club_by_singer_on == 1){
        tmp_cur_id = tmp_audio_club_by_singer_arr[cur_row_audio_club_by_singer].id
    }else if(audio_club_playlist_on == 1){
        tmp_cur_id = tmp_audio_club_playlist_arr[cur_row_audio_club_playlist].id
    }
    
    if (audio_club_playlist_on){
        document.getElementById('audio_club_con_menu_row_1').innerHTML = words['del_from_playlist']+'&nbsp;'
    }else{
        document.getElementById('audio_club_con_menu_row_1').innerHTML = words['add_to_playlist']+'&nbsp;'
    }
    
    _debug('tmp_cur_id: '+tmp_cur_id)
    document.getElementById('audio_club_con_menu').style.display = ''
    audio_club_con_menu_on = 1
    set_active_audio_club_con_menu_row()
    show_con_alpha_layer()
}

function hide_audio_club_con_menu(){
    _debug('hide_audio_club_con_menu()')
    document.getElementById('audio_club_con_menu').style.display = 'none'
    audio_club_con_menu_on = 0
    prev_row_audio_club_con_menu = cur_row_audio_club_con_menu
    set_passive_audio_club_con_menu_row()
    prev_row_audio_club_con_menu = 1
    cur_row_audio_club_con_menu = 0
    hide_con_alpha_layer()
}

function shift_audio_club_con_menu(shift_row){
    _debug('shift_audio_club_con_menu('+shift_row+')')
    prev_row_audio_club_con_menu = cur_row_audio_club_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_audio_club_con_menu > total_rows_audio_club_con_menu-1){
            cur_row_audio_club_con_menu = 0
        }else{
            cur_row_audio_club_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_audio_club_con_menu < 0){
            cur_row_audio_club_con_menu = total_rows_audio_club_con_menu-1
        }else{
            cur_row_audio_club_con_menu --
        }
    }
    set_active_audio_club_con_menu_row()
}

function set_active_audio_club_con_menu_row(){
    _debug('set_active_audio_club_con_menu_row()')
    set_passive_audio_club_con_menu_row()
    class_changer('audio_club_con_menu_row_', cur_row_audio_club_con_menu, "hover")
}

function set_passive_audio_club_con_menu_row(){
    _debug('set_passive_audio_club_con_menu_row()')
    class_changer('audio_club_con_menu_row_', prev_row_audio_club_con_menu, "unhover")
}

function switch_on_audio_club_page(page_num){
    document.getElementById('audio_club_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('audio_club_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('audio_club_punct_r_img_'+page_num).src = "i/insert_b_r.png"
}

function switch_off_audio_club_page(page_num){
    document.getElementById('audio_club_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('audio_club_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('audio_club_punct_r_img_'+page_num).src = "i/insert_r.png"
}

function switch_audio_club_abc(key){
    _debug('switch_audio_club_abc('+key+')')
    if (key == 1){
        audio_club_by_name_abc = 0
    }else{
        audio_club_by_name_abc = 1
    }
    fill_audio_club_abc_bar()
}

function fill_audio_club_abc_bar(){
    _debug('fill_audio_club_abc_bar()')
    _debug('audio_club_by_name_abc: '+audio_club_by_name_abc)
    rus_abc = new Array('ВСЕ', 'А-Б', 'В-Г', 'Д-З', 'И-М', 'Н-П', 'Р-Т', 'У-Ч', 'Ш-Я', '0-9')
    eng_abc = new Array('ALL', 'A-C', 'D-G', 'H-J', 'K-M', 'N-P', 'Q-S', 'T-V', 'W-Z', '0-9')
    if (audio_club_by_name_abc == 0){
        new_abc = rus_abc
        set_active_audio_rus_btn()
    }else{
        new_abc = eng_abc
        set_active_audio_eng_btn()
    }
    for(i=0; i<new_abc.length; i++){
        document.getElementById('audio_club_abc_text_'+i).innerHTML = new_abc[i]
    }
}

function set_active_audio_rus_btn(){
    _debug('set_active_audio_rus_btn()')
    set_passive_audio_eng_btn()
    document.getElementById('audio_yellow_btn').className = 'yellow_button_horizontal_active'
}

function set_passive_audio_rus_btn(){
    _debug('set_passive_audio_rus_btn()')
    document.getElementById('audio_yellow_btn').className = 'yellow_button_horizontal_passive'
}

function set_active_audio_eng_btn(){
    _debug('set_active_audio_eng_btn()')
    set_passive_audio_rus_btn()
    document.getElementById('audio_blue_btn').className = 'blue_button_horizontal_active'
}

function set_passive_audio_eng_btn(){
    _debug('set_passive_audio_eng_btn()')
    document.getElementById('audio_blue_btn').className = 'blue_button_horizontal_passive'
}
/**/

/* AUDIO CLUB BY NAME */
function show_audio_club_by_name(){
    _debug('show_audio_club_by_name()')
    _log('show_audio_club_by_name()')
    fill_audio_club_abc_bar()
    document.getElementById('abc_bar_audio_club').style.display = ''
    document.getElementById('abc_bar_audio_club').style.left = '23'
    document.getElementById('main_bar_audio_club_by_name').style.display = ''
    switch_on_audio_club_page(1)
    audio_club_by_name_on = 1
    lighted_row_audio_club_abc = 0
    load_audio_club_by_name(0)
    set_active_audio_club_by_name_row()
}

function hide_audio_club_by_name(){
    _debug('hide_audio_club_by_name()')
    
    document.getElementById('abc_bar_audio_club').style.display = 'none'
    document.getElementById('main_bar_audio_club_by_name').style.display = 'none'
    switch_off_audio_club_page(1)
    audio_club_by_name_on = 0
    // disable abc
    set_passive_all_audio_club_abc_row()
    cur_abc_audio_club_bar = 0
    prev_row_audio_club_abc = 1
    cur_row_audio_club_abc = 0

    normlight_abc_audio_club_bar_row()
    
    if(audio_club_con_menu_on == 1){
        hide_audio_club_con_menu()
    }
    prev_row_audio_club_by_name = cur_row_audio_club_by_name
    set_passive_audio_club_by_name_row()
    cur_audio_club_by_name_page = 1
    cur_row_audio_club_by_name = 0
    prev_row_audio_club_by_name = 1
}

function shift_audio_club_by_name(shift_row){
    _debug('shift_audio_club_by_name('+shift_row+')')
    prev_row_audio_club_by_name = cur_row_audio_club_by_name
    if(shift_row > 0){
        if(cur_row_audio_club_by_name < max_audio_club_by_name_rows-1){
            cur_row_audio_club_by_name++
        }else{
            shift_audio_club_by_name_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_audio_club_by_name > 0){
            cur_row_audio_club_by_name --
        }else{
            shift_audio_club_by_name_page(-1)
        }
    }
    set_active_audio_club_by_name_row()
}

function shift_audio_club_by_name_page(dir){
    _debug('shift_audio_club_by_name_page('+dir+')')
    if (dir > 0){
        if (cur_audio_club_by_name_page < total_audio_club_by_name_pages){
            cur_audio_club_by_name_page++
            load_audio_club_by_name(cur_audio_club_by_name_page)
            cur_row_audio_club_by_name = 0
        }
    }else if (dir < 0){
        if (cur_audio_club_by_name_page > 1){
            cur_audio_club_by_name_page--
            load_audio_club_by_name(cur_audio_club_by_name_page)
            cur_row_audio_club_by_name = 9
        }
    }
    play_on_next_page = 1
}

function set_active_audio_club_by_name_row(){
    _debug('set_active_audio_club_by_name_row()')
    _debug('cur_row_audio_club_by_name: '+cur_row_audio_club_by_name)
    set_passive_audio_club_by_name_row()
    class_changer('audio_club_by_name_row_', cur_row_audio_club_by_name, "hover")
}

function set_passive_audio_club_by_name_row(){
    _debug('set_passive_audio_club_by_name_row()')
    _debug('prev_row_audio_club_by_name: '+prev_row_audio_club_by_name)
    class_changer('audio_club_by_name_row_', prev_row_audio_club_by_name, "unhover")
}

function set_passive_all_audio_club_by_name_row(){
    _debug('set_passive_all_audio_club_by_name_row()')
    _debug('cur_row_audio_club_by_name: '+cur_row_audio_club_by_name)
    class_changer('audio_club_by_name_row_', cur_row_audio_club_by_name, "unhover")
}

function call_con_menu_audio_club_by_name_func(){
    _debug('call_con_menu_audio_club_by_name_func(): '+(cur_row_audio_club_con_menu))
    eval(func_audio_club_by_name[cur_row_audio_club_con_menu])
    hide_audio_club_con_menu()
}

function start_play_audio_club_by_name(){
    _debug('start_play_audio_club_by_name()')
    cur_place = 'audio_club'
    show_playing(tmp_audio_club_by_name_arr[cur_row_audio_club_by_name].name, tmp_audio_club_by_name_arr[cur_row_audio_club_by_name].id, 'audio')
    play_audio('auto ' + video_dir+tmp_audio_club_by_name_arr[cur_row_audio_club_by_name].id+'.mp3')
    hide_audio_club_con_menu()
}

function load_audio_club_by_name(page){
    doLoad('audio_club&action='+(cur_row_audio_club_abc+1)+'&audio_club_by_name&abc='+audio_club_by_name_abc, page)
    normlight_abc_audio_club_bar_row()
    hightlight_abc_audio_club_bar_row()
}

function fill_audio_club_by_name(arr){
    _debug('fill_audio_club_by_name()')
    audio_club_page_bar(cur_audio_club_by_name_page, total_audio_club_by_name_pages)
    tmp_audio_club_by_name_arr = arr
    del_audio_club_by_name()
    max_audio_club_by_name_rows = arr.length
    _debug('play_on_next_page: '+play_on_next_page)
    _debug('continue_on_next_page: '+continue_on_next_page)
    if (play_on_next_page == 1 && continue_on_next_page == 1){
        start_play_audio_club_by_name()
    }
    _debug('max_audio_club_by_name: '+max_audio_club_by_name_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('audio_club_by_name_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('audio_club_by_name_singer_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
    }
}

function del_audio_club_by_name(){
    _debug('del_audio_club_by_name()')
    audio_club_page_bar(cur_audio_club_by_name_page, total_audio_club_by_name_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('audio_club_by_name_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('audio_club_by_name_singer_'+(tv_n_i)).innerHTML = ''
    }
    max_audio_club_by_name_rows = 0
}
/**/

/* AUDIO CLUB BY SINGER */
function show_audio_club_by_singer(){
    _debug('show_audio_club_by_singer()')
    _log('show_audio_club_by_singer()')
    fill_audio_club_abc_bar()
    document.getElementById('abc_bar_audio_club').style.display = ''
    document.getElementById('abc_bar_audio_club').style.left = '23'
    document.getElementById('main_bar_audio_club_by_singer').style.display = ''
    del_audio_club_by_singer()
    show_audio_club_singer_bar()
    switch_on_audio_club_page(2)
    audio_club_by_singer_on = 1
    lighted_row_audio_club_abc = 0
    cur_abc_audio_club_bar = 1
    set_active_audio_club_abc_row()
}

function hide_audio_club_by_singer(){
    _debug('hide_audio_club_by_name()')
    
    document.getElementById('abc_bar_audio_club').style.display = 'none'
    document.getElementById('main_bar_audio_club_by_singer').style.display = 'none'
    hide_audio_club_singer_bar()
    switch_off_audio_club_page(2)
    audio_club_by_singer_on = 0
    // disable abc
    set_passive_all_audio_club_abc_row()
    cur_abc_audio_club_bar = 0
    prev_row_audio_club_abc = 1
    cur_row_audio_club_abc = 0
    
    normlight_abc_audio_club_bar_row()
    normlight_audio_club_singer_bar_row()
    
    del_audio_club_by_singer()
    if(audio_club_con_menu_on == 1){
        hide_audio_club_con_menu()
    }
    
    prev_row_audio_club_by_singer = cur_row_audio_club_by_singer
    set_passive_audio_club_by_singer_row()
    cur_audio_club_by_singer_page = 1
    cur_row_audio_club_by_singer = 0
    prev_row_audio_club_by_singer = 1
}

function shift_audio_club_by_singer(shift_row){
    _debug('shift_audio_club_by_singer('+shift_row+')')
    prev_row_audio_club_by_singer = cur_row_audio_club_by_singer
    if(shift_row > 0){
        if(cur_row_audio_club_by_singer < max_audio_club_by_singer_rows-1){
            cur_row_audio_club_by_singer++
        }else{
            shift_audio_club_by_singer_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_audio_club_by_singer > 0){
            cur_row_audio_club_by_singer --
        }else{
            shift_audio_club_by_singer_page(-1)
        }
    }
    set_active_audio_club_by_singer_row()
}

function shift_audio_club_by_singer_page(dir){
    _debug('shift_audio_club_by_singer_page('+dir+')')
    if (dir > 0){
        if (cur_audio_club_by_singer_page < total_audio_club_by_singer_pages){
            cur_audio_club_by_singer_page++
            load_audio_club_by_singer(cur_audio_club_by_singer_page)
            cur_row_audio_club_by_singer= 0
        }
    }else if (dir < 0){
        if (cur_audio_club_by_singer_page > 1){
            cur_audio_club_by_singer_page--
            load_audio_club_by_singer(cur_audio_club_by_singer_page)
            cur_row_audio_club_by_singer = 9
        }
    }
    play_on_next_page = 1
}

function set_active_audio_club_by_singer_row(){
    _debug('set_active_audio_club_by_singer_row()')
    _debug('cur_row_audio_club_by_singer: '+cur_row_audio_club_by_singer)
    set_passive_audio_club_by_singer_row()
    class_changer('audio_club_by_singer_row_', cur_row_audio_club_by_singer, "hover")
}

function set_passive_audio_club_by_singer_row(){
    _debug('set_passive_audio_club_by_singer_row()')
    _debug('prev_row_audio_club_by_singer: '+prev_row_audio_club_by_singer)
    class_changer('audio_club_by_singer_row_', prev_row_audio_club_by_singer, "unhover")
}

function set_passive_all_audio_club_by_singer_row(){
    _debug('set_passive_all_audio_club_by_singer_row()')
    _debug('cur_row_audio_club_by_singer: '+cur_row_audio_club_by_singer)
    class_changer('audio_club_by_singer_row_', cur_row_audio_club_by_singer, "unhover")
}

function call_con_menu_audio_club_by_singer_func(){
    _debug('call_con_menu_audio_club_by_singer_func(): '+(cur_row_audio_club_con_menu))
    eval(func_audio_club_by_singer[cur_row_audio_club_con_menu])
    hide_audio_club_con_menu()
}

function start_play_audio_club_by_singer(){
    _debug('start_play_audio_club_by_singer()')
    cur_place = 'audio_club'
    show_playing(tmp_audio_club_by_singer_arr[cur_row_audio_club_by_singer].name, tmp_audio_club_by_singer_arr[cur_row_audio_club_by_singer].id, 'audio')
    play('auto ' + video_dir+tmp_audio_club_by_singer_arr[cur_row_audio_club_by_singer].id+'.mp3')
    hide_audio_club_con_menu()
}

function load_audio_club_by_singer(page){
    _debug('load_audio_club_by_singer('+page+')')
    _debug('singer: '+tmp_audio_club_singer_bar_arr[cur_row_audio_club_singer_bar].singer)
    doLoad('audio_club&action='+(cur_row_audio_club_abc+1)+'&audio_club_by_singer&singer='+tmp_audio_club_singer_bar_arr[cur_row_audio_club_singer_bar].id, page)
    normlight_abc_audio_club_bar_row()
    hightlight_abc_audio_club_bar_row()
    
    normlight_audio_club_singer_bar_row()
    hightlight_audio_club_singer_bar_row()
}

function hightlight_audio_club_singer_bar_row(){
    lighted_row_audio_club_singer_bar = cur_row_audio_club_singer_bar
    class_changer('audio_club_singer_bar_row_', lighted_row_audio_club_singer_bar, "hightlight")
}

function normlight_audio_club_singer_bar_row(){
    class_changer('audio_club_singer_bar_row_', lighted_row_audio_club_singer_bar, "normlight")
}

function fill_audio_club_by_singer(arr){
    _debug('fill_audio_club_by_singer()')
    del_audio_club_by_singer()
    audio_club_page_bar(cur_audio_club_by_singer_page, total_audio_club_by_singer_pages)
    tmp_audio_club_by_singer_arr = arr
    max_audio_club_by_singer_rows = arr.length
    if (play_on_next_page == 1 && continue_on_next_page == 1){
        start_play_audio_club_by_singer()
    }
    _debug('max_audio_club_by_singer_rows: '+max_audio_club_by_singer_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('audio_club_by_singer_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
    }
}

function del_audio_club_by_singer(){
    _debug('del_audio_club_by_singer()')
    audio_club_page_bar(0, 0)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('audio_club_by_singer_title_'+(tv_n_i)).innerHTML = ''
    }
    max_audio_club_by_singer_rows = 0
}
/**/

/* AUDIO CLUB SINGER BAR */
function show_audio_club_singer_bar(){
    _debug('show_audio_club_singer_bar()')
    document.getElementById('audio_club_singer_bar').style.display = ''
    load_audio_club_singer_bar(0)
}

function hide_audio_club_singer_bar(){
    _debug('hide_audio_club_singer_bar()')
    document.getElementById('audio_club_singer_bar').style.display = 'none'
    cur_audio_club_singer_bar = 0
    set_passive_all_audio_club_singer_bar_row()
    prev_row_audio_club_singer_bar = 1
    cur_row_audio_club_singer_bar = 0
    cur_audio_club_singer_bar_page = 1
}

function shift_audio_club_singer_bar(shift_row){
    _debug('shift_audio_club_singer_bar('+shift_row+')') 
    prev_row_audio_club_singer_bar = cur_row_audio_club_singer_bar
    if(shift_row > 0){
        if(cur_row_audio_club_singer_bar < max_audio_club_singer_bar_rows-1){
            cur_row_audio_club_singer_bar++
        }else{
            shift_audio_club_singer_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_audio_club_singer_bar > 0){
            cur_row_audio_club_singer_bar --
        }else{
            shift_audio_club_singer_bar_page(-1)
        }
    }
    set_active_audio_club_singer_bar_row()  
}

function shift_audio_club_singer_bar_page(dir){
     _debug('shift_audio_club_singer_bar_page('+dir+')')
    if (dir > 0){
        if (cur_audio_club_singer_bar_page < total_audio_club_singer_bar_pages){
            cur_audio_club_singer_bar_page++
            normlight_audio_club_singer_bar_row()
            del_audio_club_by_singer()
            load_audio_club_singer_bar(cur_audio_club_singer_bar_page-1)
            cur_row_audio_club_singer_bar = 0
        }
    }else if (dir < 0){
        if (cur_audio_club_singer_bar_page > 1){
            cur_audio_club_singer_bar_page--
            normlight_audio_club_singer_bar_row()
            del_audio_club_by_singer()
            load_audio_club_singer_bar(cur_audio_club_singer_bar_page-1)
            cur_row_audio_club_singer_bar = 9
        }
    }
}

function load_audio_club_singer_bar(page){
    _debug('load_audio_club_singer_bar('+page+')')
    doLoad('audio_club&action='+(cur_row_audio_club_abc+1)+'&audio_club_singer_bar&abc='+audio_club_by_name_abc, page+1)
    normlight_abc_audio_club_bar_row()
    hightlight_abc_audio_club_bar_row()
    
    normlight_audio_club_singer_bar_row()
    if (cur_audio_club_singer_bar == 1){
        //hightlight_karaoke_singer_bar_row()
    }
}

function fill_audio_club_singer_bar(arr){
    _debug('fill_audio_club_singer_bar()')
    tmp_audio_club_singer_bar_arr = arr
    del_audio_club_singer_bar()
    max_audio_club_singer_bar_rows = arr.length
    _debug('max_audio_club_singer_bar_rows: '+max_audio_club_singer_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('audio_club_singer_bar_text_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
    }
}

function del_audio_club_singer_bar(){
    _debug('del_audio_club_singer_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('audio_club_singer_bar_text_'+(tv_n_i)).innerHTML = ''
    }
    max_audio_club_singer_bar_rows = 0
}

function set_active_audio_club_singer_bar_row(){
    _debug('set_active_audio_club_singer_bar_row()')
    _debug('cur_row_audio_club_singer: '+cur_row_audio_club_singer_bar)
    set_passive_audio_club_singer_bar_row()
    class_changer('audio_club_singer_bar_row_', cur_row_audio_club_singer_bar, "hover")
}

function set_passive_audio_club_singer_bar_row(){
    _debug('set_passive_audio_club_singer_bar_row()')
    class_changer('audio_club_singer_bar_row_', prev_row_audio_club_singer_bar, "unhover")
}

function set_passive_all_audio_club_singer_bar_row(){
    _debug('set_passive_all_audio_club_singer_bar_row()')
    _debug('cur_row_audio_club_singer_bar: '+cur_row_audio_club_singer_bar)
    class_changer('audio_club_singer_bar_row_', cur_row_audio_club_singer_bar, "unhover")
}

function hightlight_audio_club_singer_bar_row(){
    lighted_row_audio_club_singer = cur_row_audio_club_singer_bar
    class_changer('audio_club_singer_bar_row_', lighted_row_audio_club_singer, "hightlight")
}

function normlight_audio_club_singer_bar_row(){
    class_changer('audio_club_singer_bar_row_', lighted_row_audio_club_singer, "normlight")
}
/**/

/* AUDIO CLUB PLAYLIST */
function show_audio_club_playlist(){
    _debug('show_audio_club_playlist()')
    _log('show_audio_club_playlist()')
    document.getElementById('main_bar_audio_club_playlist').style.display = ''
    switch_on_audio_club_page(3)
    audio_club_playlist_on = 1
    load_audio_club_playlist(0)
    set_active_audio_club_playlist_row()
}

function hide_audio_club_playlist(){
    _debug('hide_audio_club_playlist()')
    
    document.getElementById('main_bar_audio_club_playlist').style.display = 'none'
    switch_off_audio_club_page(3)
    audio_club_playlist_on = 0
    
    if(audio_club_con_menu_on == 1){
        hide_audio_club_con_menu()
    }
    prev_row_audio_club_playlist = cur_row_audio_club_playlist
    set_passive_audio_club_playlist_row()
    cur_audio_club_playlist_page = 1
    cur_row_audio_club_playlist = 0
    prev_row_audio_club_playlist = 1
}

function shift_audio_club_playlist(shift_row){
    _debug('shift_audio_club_playlist('+shift_row+')')
    prev_row_audio_club_playlist = cur_row_audio_club_playlist
    if(shift_row > 0){
        if(cur_row_audio_club_playlist < max_audio_club_playlist_rows-1){
            cur_row_audio_club_playlist++
        }else{
            shift_audio_club_playlist_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_audio_club_playlist > 0){
            cur_row_audio_club_playlist --
        }else{
            shift_audio_club_playlist_page(-1)
        }
    }
    set_active_audio_club_playlist_row()
}

function shift_audio_club_playlist_page(dir){
    _debug('shift_audio_club_playlist_page('+dir+')')
    if (dir > 0){
        if (cur_audio_club_playlist_page < total_audio_club_playlist_pages){
            cur_audio_club_playlist_page++
            load_audio_club_playlist(cur_audio_club_playlist_page)
            cur_row_audio_club_playlist = 0
        }
    }else if (dir < 0){
        if (cur_audio_club_playlist_page > 1){
            cur_audio_club_playlist_page--
            load_audio_club_playlist(cur_audio_club_playlist_page)
            cur_row_audio_club_playlist = 9
        }
    }
    play_on_next_page = 1
}

function set_active_audio_club_playlist_row(){
    _debug('set_active_audio_club_playlist_row()')
    _debug('cur_row_audio_club_playlist: '+cur_row_audio_club_playlist)
    set_passive_audio_club_playlist_row()
    class_changer('audio_club_playlist_row_', cur_row_audio_club_playlist, "hover")
}

function set_passive_audio_club_playlist_row(){
    _debug('set_passive_audio_club_playlist_row()')
    _debug('prev_row_audio_club_playlist: '+prev_row_audio_club_playlist)
    class_changer('audio_club_playlist_row_', prev_row_audio_club_playlist, "unhover")
}

function set_passive_all_audio_club_playlist_row(){
    _debug('set_passive_all_audio_club_playlist_row()')
    _debug('cur_row_audio_club_playlist: '+cur_row_audio_club_playlist)
    class_changer('audio_club_playlist_row_', cur_row_audio_club_playlist, "unhover")
}

function call_con_menu_audio_club_playlist_func(){
    _debug('call_con_menu_audio_club_playlist_func(): '+(cur_row_audio_club_con_menu))
    eval(func_audio_club_playlist[cur_row_audio_club_con_menu])
    hide_audio_club_con_menu()
}

function start_play_audio_club_playlist(){
    _debug('start_play_audio_club_playlist()')
    cur_place = 'audio_club'
    show_playing(tmp_audio_club_playlist_arr[cur_row_audio_club_playlist].name, tmp_audio_club_playlist_arr[cur_row_audio_club_playlist].id, 'audio')
    show_audio_playlist_play()
    to_play_next_audio()
    play_audio('auto ' + video_dir+tmp_audio_club_playlist_arr[cur_row_audio_club_playlist].id+'.mp3')
    hide_audio_club_con_menu()
}

function load_audio_club_playlist(page){
    doLoad('audio_club&playlist', page)
}

function fill_audio_club_playlist(arr){
    _debug('fill_audio_club_playlist()')
    audio_club_page_bar(cur_audio_club_playlist_page, total_audio_club_playlist_pages)
    tmp_audio_club_playlist_arr = arr
    del_audio_club_playlist()
    max_audio_club_playlist_rows = arr.length
    if (play_on_next_page == 1 && continue_on_next_page == 1){
        start_play_audio_club_playlist()
    }
    _debug('max_audio_club_playlist: '+max_audio_club_playlist_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('audio_club_playlist_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('audio_club_playlist_singer_'+(tv_n_i)).innerHTML = arr[tv_n_i].singer
        document.getElementById('audio_club_playlist_album_'+(tv_n_i)).innerHTML = arr[tv_n_i].album
    }
}

function del_audio_club_playlist(){
    _debug('del_audio_club_playlist()')
    audio_club_page_bar(cur_audio_club_playlist_page, total_audio_club_playlist_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('audio_club_playlist_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('audio_club_playlist_singer_'+(tv_n_i)).innerHTML = ''
        document.getElementById('audio_club_playlist_album_'+(tv_n_i)).innerHTML = ''
    }
    max_audio_club_playlist_rows = 0
}

function add_del_to_audio_playlist(){
    _debug('add_del_to_audio_playlist()')
    
    new_id = get_cur_audio_id()
    _debug('new_id: '+new_id)
    
    if(audio_club_playlist_on){
        _debug('del')
        del_id_from_audio_playlist(new_id)
        load_audio_club_playlist(cur_audio_club_playlist_page)
    }else{
        _debug('add')
        add_id_to_audio_playlist(new_id)
    }
}

function add_id_to_audio_playlist(id){
    _debug('add_id_to_audio_playlist('+id+')')
    doLoad('add_to_playlist', 1, id)
}

function del_id_from_audio_playlist(id){
    _debug('del_id_from_audio_playlist('+id+')')
    doLoad('del_from_playlist', 1, id)
}

function get_cur_audio_id(){
    _debug('get_cur_audio_id()')
    new_id = 0
    if (audio_club_by_name_on){
        new_id = tmp_audio_club_by_name_arr[cur_row_audio_club_by_name].id
    }else if(audio_club_by_singer_on){
        new_id = tmp_audio_club_by_singer_arr[cur_row_audio_club_by_singer].id
    }else if(audio_club_playlist_on){
        new_id = tmp_audio_club_playlist_arr[cur_row_audio_club_playlist].id
    }
    return new_id
}

function show_audio_playlist_play(){
    _debug('show_audio_playlist_play()')
    hide_audio_playlist_play()
    cur_page_audio_playlist_play = cur_audio_club_playlist_page
    cur_audio_playlist_play = cur_row_audio_club_playlist
    prev_audio_playlist_play = cur_audio_playlist_play
    document.getElementById('audio_club_playlist_play_'+cur_audio_playlist_play).innerHTML = '&bull;'
}

function active_audio_playlist_play(){
    _debug('active_audio_playlist_play()')
    document.getElementById('audio_club_playlist_play_'+cur_audio_playlist_play).innerHTML = '&bull;'
}

function hide_audio_playlist_play(){
    _debug('hide_audio_playlist_play()')
    document.getElementById('audio_club_playlist_play_'+prev_audio_playlist_play).innerHTML = '&nbsp;'
}

function hide_all_audio_playlist_play(){
    _debug('hide_all_audio_playlist_play()')
    document.getElementById('audio_club_playlist_play_'+cur_audio_playlist_play).innerHTML = '&nbsp;'
}

function to_play_next_audio(){
    _debug('to_play_next_audio()')
    window.clearTimeout(t_next_play_id)
    if (audio_club_by_name_on){
        tmp_cur_row = cur_row_audio_club_by_name
        tmp_arr = tmp_audio_club_by_name_arr
    }else if(audio_club_by_singer_on){
        tmp_cur_row = cur_row_audio_club_by_singer
        tmp_arr = tmp_audio_club_by_singer_arr
    }else if(audio_club_playlist_on){
        tmp_cur_row = cur_row_audio_club_playlist
        tmp_arr = tmp_audio_club_playlist_arr
    }
    next_play_time = parseInt(tmp_arr[tmp_cur_row]['time'])
    if (next_play_time>0){
        next_play_time = (next_play_time + 2)*1000
        _debug('next_play_time: '+next_play_time)
        t_next_play_id = window.setTimeout(function(){play_next_audio()}, next_play_time)
    }
}

function play_next_audio(){
    _debug('play_next_audio()')
    
    if (audio_club_by_name_on){
        last_row = total_audio_club_by_name_pages*10 + max_audio_club_by_name_rows
        cur_row = cur_audio_club_by_name_page*10 + cur_row_audio_club_by_name+1
        if (cur_row+1 <= last_row){
            
            if (cur_row_audio_club_by_name == 9){
                continue_on_next_page = 1
                window.clearTimeout(t_next_play_id)
                shift_audio_club_by_name(1)
            }else{
                continue_on_next_page = 0
                play_on_next_page = 0
                shift_audio_club_by_name(1)
                start_play_audio_club_by_name()
            }
        }else{
            continue_on_next_page = 0
            play_on_next_page = 0
            window.clearTimeout(t_next_play_id)
        }
    }else if(audio_club_by_singer_on){
        last_row = total_audio_club_by_singer_pages*10 + max_audio_club_by_singer_rows
        cur_row = cur_audio_club_by_singer_page*10 + cur_row_audio_club_by_singer+1
        if (cur_row+1 <= last_row){
            shift_audio_club_by_singer(1)
            start_play_audio_club_by_singer()
        }else{
            window.clearTimeout(t_next_play_id)
        }
    }else if(audio_club_playlist_on){
        last_row = total_audio_club_playlist_pages*10 + max_audio_club_playlist_rows
        cur_row = cur_audio_club_playlist_page*10 + cur_row_audio_club_playlist+1
        _debug('last_row: '+last_row)
        _debug('cur_row: '+cur_row)
        if (cur_row+1 <= last_row){
            if (cur_row_audio_club_playlist == 9){
                continue_on_next_page = 1
                window.clearTimeout(t_next_play_id)
                shift_audio_club_playlist(1)
            }else{
                continue_on_next_page = 0
                play_on_next_page = 0
                shift_audio_club_playlist(1)
                start_play_audio_club_playlist()
            }
        }else{
            continue_on_next_page = 0
            play_on_next_page = 0
            window.clearTimeout(t_next_play_id)
        }
    }
}

function play_prev_audio(){
    _debug('play_prev_audio()')
    
    if (audio_club_by_name_on){
        if (cur_row_audio_club_by_name == 0){
            continue_on_next_page = 1
            shift_audio_club_by_name(-1)
        }else{
            shift_audio_club_by_name(-1)
            start_play_audio_club_by_name()
        }
    }else if(audio_club_by_singer_on){        
        if (cur_row_audio_club_by_singer == 0){
            continue_on_next_page = 1
            shift_audio_club_by_singer(-1)
        }else{
            shift_audio_club_by_singer(-1)
            start_play_audio_club_by_singer()
        }
    }else if(audio_club_playlist_on){
        if (cur_row_audio_club_playlist == 0){
            continue_on_next_page = 1
            shift_audio_club_playlist(-1)
        }else{
            shift_audio_club_playlist(-1)
            start_play_audio_club_playlist()
        }
    }
}
/**/

/* RADIO PAGE */
function show_radio_page(){
    _debug('show_radio_page()')
    _log('show_radio_page()')
    document.getElementById('radio_page').style.display = ''
    radio_page_on = 1

    if(prev_radio_page == ''){
        show_radio_by_name()
    }
    prev_radio_page = ''
    cur_partition = 'radio'
}

function hide_radio_page(){
    _debug('hide_radio_page()')
    document.getElementById('radio_page').style.display = 'none'
    radio_page_on = 0
    if (mode_one == 0){
        if(radio_by_name_on == 1){
            hide_radio_by_name()
        }
    }else{
        prev_radio_page = 'radio_page'
    }
    cur_partition = ''
}

function show_radio_con_menu(){
    _debug('show_radio_con_menu()')
    
    if (radio_by_name_on == 1){
        tmp_cur_id = tmp_radio_by_name_arr[cur_row_radio_by_name].id
    }
    
    _debug('tmp_cur_id: '+tmp_cur_id)
    document.getElementById('radio_con_menu').style.display = ''
    radio_con_menu_on = 1
    set_active_radio_con_menu_row()
    show_con_alpha_layer()
}

function hide_radio_con_menu(){
    _debug('hide_radio_con_menu()')
    document.getElementById('radio_con_menu').style.display = 'none'
    radio_con_menu_on = 0
    prev_row_radio_con_menu = cur_row_radio_con_menu
    set_passive_radio_con_menu_row()
    prev_row_radio_con_menu = 1
    cur_row_radio_con_menu = 0
    hide_con_alpha_layer()
}

function shift_radio_con_menu(shift_row){
    _debug('shift_radio_con_menu('+shift_row+')')
    prev_row_radio_con_menu = cur_row_radio_con_menu
    if(shift_row > 0){
        if(shift_row + cur_row_radio_con_menu > total_rows_radio_con_menu-1){
            cur_row_radio_con_menu = 0
        }else{
            cur_row_radio_con_menu++
        }
    }else if(shift_row < 0){
        if(shift_row + cur_row_radio_con_menu < 0){
            cur_row_radio_con_menu = total_rows_radio_con_menu-1
        }else{
            cur_row_radio_con_menu --
        }
    }
    set_active_radio_con_menu_row()
}

function set_active_radio_con_menu_row(){
    _debug('set_active_radio_con_menu_row()')
    set_passive_radio_con_menu_row()
    class_changer('radio_con_menu_row_', cur_row_radio_con_menu, "hover")
}

function set_passive_radio_con_menu_row(){
    _debug('set_passive_radio_con_menu_row()')
    class_changer('radio_con_menu_row_', prev_row_radio_con_menu, "unhover")
}

function switch_on_radio_page(page_num){
    document.getElementById('radio_punct_'+page_num).className = "active_punct"
    /*document.getElementById('radio_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('radio_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('radio_punct_r_img_'+page_num).src = "i/insert_b_r.png"*/
}

function switch_off_radio_page(page_num){
    document.getElementById('radio_punct_'+page_num).className = "passive_punct"
    /*document.getElementById('radio_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('radio_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('radio_punct_r_img_'+page_num).src = "i/insert_r.png"*/
}
/**/

/* RADIO BY NAME */
function show_radio_by_name(){
    _debug('show_radio_by_name()')
    _log('show_radio_by_name()')
    document.getElementById('main_bar_radio_by_name').style.display = ''
    switch_on_radio_page(1)
    radio_by_name_on = 1
    load_radio_by_name(0)
    //set_active_radio_by_name_row()
    hide_all_radio_by_name_play()
}

function hide_radio_by_name(){
    _debug('hide_radio_by_name()')
    
    document.getElementById('main_bar_radio_by_name').style.display = 'none'
    switch_off_radio_page(1)
    radio_by_name_on = 0

    if(radio_con_menu_on == 1){
        hide_radio_con_menu()
    }
    prev_row_radio_by_name = cur_row_radio_by_name
    set_passive_radio_by_name_row()
    cur_radio_by_name_page = 1
    cur_row_radio_by_name = 0
    prev_row_radio_by_name = 1
}

function shift_radio_by_name(shift_row){
    _debug('shift_radio_by_name('+shift_row+')')
    prev_row_radio_by_name = cur_row_radio_by_name
    if(shift_row > 0){
        if(cur_row_radio_by_name < max_radio_by_name_rows-1){
            cur_row_radio_by_name++
        }else{
            shift_radio_by_name_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_radio_by_name > 0){
            cur_row_radio_by_name --
        }else{
            shift_radio_by_name_page(-1)
        }
    }
    set_active_radio_by_name_row()
}

function shift_radio_by_name_page(dir){
    _debug('shift_radio_by_name_page('+dir+')')
    if (dir > 0){
        if (cur_radio_by_name_page < total_radio_by_name_pages){
            cur_radio_by_name_page++
            load_radio_by_name(cur_radio_by_name_page)
            cur_row_radio_by_name = 0
        }
    }else if (dir < 0){
        if (cur_radio_by_name_page > 1){
            cur_radio_by_name_page--
            load_radio_by_name(cur_audio_club_by_name_page)
            cur_row_radio_by_name = 9
        }
    }
}

function set_active_radio_by_name_row(){
    _debug('set_active_radio_by_name_row()')
    _debug('cur_row_radio_by_name: '+cur_row_radio_by_name)
    set_passive_radio_by_name_row()
    r_class_changer('radio_by_name_row_', cur_row_radio_by_name, "hover")
}

function set_passive_radio_by_name_row(){
    _debug('set_passive_radio_by_name_row()')
    _debug('prev_row_radio_by_name: '+prev_row_radio_by_name)
    r_class_changer('radio_by_name_row_', prev_row_radio_by_name, "unhover")
}

function set_passive_all_radio_by_name_row(){
    _debug('set_passive_all_radio_by_name_row()')
    _debug('cur_row_radio_by_name: '+cur_row_radio_by_name)
    r_class_changer('radio_by_name_row_', cur_row_radio_by_name, "unhover")
}

function call_con_menu_radio_by_name_func(){
    _debug('call_con_menu_radio_by_name_func(): '+(cur_row_radio_con_menu))
    eval(func_radio_by_name[cur_row_radio_con_menu])
    hide_radio_con_menu()
}

function start_play_radio_by_name(){
    _debug('start_play_radio_by_name()')
    cur_place = 'radio'
    if (additional_services_on){
        show_playing(tmp_radio_by_name_arr[cur_row_radio_by_name].name, tmp_radio_by_name_arr[cur_row_radio_by_name].id, 'audio')
        show_radio_by_name_play()
        //play_audio('fm '+tmp_radio_by_name_arr[cur_row_radio_by_name].cmd)
        play_radio(tmp_radio_by_name_arr[cur_row_radio_by_name].cmd)
        hide_radio_con_menu()
    }else{
        show_warning_message(words['disabled_additional_services'])
    }
}

function load_radio_by_name(page){
    doLoad('radio&radio_by_name', page)
}

function fill_radio_by_name(arr){
    _debug('fill_radio_by_name()')
    radio_page_bar(cur_radio_by_name_page, total_radio_by_name_pages)
    tmp_radio_by_name_arr = arr
    del_radio_by_name()
    if (cur_page_radio_by_name_play == cur_radio_by_name_page){
        if (player_on == 1){
            active_radio_by_name_play()
        }
    }else{
        hide_all_radio_by_name_play()
    }
    max_radio_by_name_rows = arr.length
    _debug('max_radio_by_name: '+max_radio_by_name_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        
        change_class_by_ids('black_row', document.getElementById('radio_by_name_row_'+tv_n_i))
        
        document.getElementById('radio_by_name_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
    }
    set_active_radio_by_name_row()
}

function del_radio_by_name(){
    _debug('del_radio_by_name()')
    radio_page_bar(cur_radio_by_name_page, total_radio_by_name_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('radio_by_name_title_'+(tv_n_i)).innerHTML = ''
    }
    max_radio_by_name_rows = 0
}

function show_radio_by_name_play(){
    _debug('show_radio_by_name_play()')
    hide_radio_by_name_play()
    cur_page_radio_by_name_play = cur_radio_by_name_page
    cur_radio_by_name_play = cur_row_radio_by_name
    prev_radio_by_name_play = cur_radio_by_name_play
    document.getElementById('radio_by_name_play_'+cur_radio_by_name_play).innerHTML = '&bull;'
}

function active_radio_by_name_play(){
    _debug('active_radio_by_name_play()')
    document.getElementById('radio_by_name_play_'+cur_radio_by_name_play).innerHTML = '&bull;'
}

function hide_radio_by_name_play(){
    _debug('hide_radio_by_name_play()')
    document.getElementById('radio_by_name_play_'+prev_radio_by_name_play).innerHTML = '&nbsp;'
}

function hide_all_radio_by_name_play(){
    _debug('hide_all_radio_by_name_play()')
    document.getElementById('radio_by_name_play_'+cur_radio_by_name_play).innerHTML = '&nbsp;'
}
/**/

function show_loading_mark(){
    document.getElementById('loading_mark').style.display = ''
}

function hide_loading_mark(){
    document.getElementById('loading_mark').style.display = 'none'
}

function echo(txt){
    //_debug('echo('+txt+')')
    document.write(txt)
}

/* WIDGET PAGE */
function show_widget_page(){
    _debug('show_widget_page()')
    widget_page_on = 1
    if (reset_widget_menu){
        widget_menu_disable_active()
        cur_widget_menu_row = 2
        cur_widget_menu_col = 2
    }
    //media_type = 'infoportal'
    document.getElementById("widget_page").style.display = ''
    widget_menu_set_active()
    load_all_recipe_cats()
}

function hide_widget_page(param){
    _debug('hide_widget_page()')
    document.getElementById("widget_page").style.display = 'none'
    //media_type = ''
    widget_page_on = 0
    if (param == 1){
        widget_menu_disable_active()
        cur_widget_menu_row = 2
        cur_widget_menu_col = 2
    }
    reset_widget_menu = 0
}

function widget_menu_vertical_move(dir){
    _debug('widget_menu_vertical_move('+dir+')')
    tmp_widget_menu_col = cur_widget_menu_col
    tmp_widget_menu_row = cur_widget_menu_row
    if (dir>0){
        if (cur_widget_menu_row <= widget_menu_map.length){
            tmp_widget_menu_row = cur_widget_menu_row+1
            /*if (tmp_widget_menu_row == 2){
                tmp_widget_menu_col = 2
            }*/
            /*if (tmp_widget_menu_col > widget_menu_map[tmp_widget_menu_row-1]){
                tmp_widget_menu_col = widget_menu_map[tmp_widget_menu_row-1]
            }*/
        }
    }else{
        if (cur_widget_menu_row > 1){
            tmp_widget_menu_row = cur_widget_menu_row-1
            if (cur_widget_menu_row == 2){
                tmp_widget_menu_row = 2
            }
            /*if (tmp_widget_menu_col > widget_menu_map[tmp_widget_menu_row-1]){
                tmp_widget_menu_col = widget_menu_map[tmp_widget_menu_row-1]
            }*/
        }
    }
    if (document.getElementById("widget_menu_"+tmp_widget_menu_row+"_"+tmp_widget_menu_col) == null){
        tmp_widget_menu_col = widget_menu_map[tmp_widget_menu_row]-1
    }
    widget_menu_set_focus(tmp_widget_menu_row,tmp_widget_menu_col)
}

function widget_menu_horizontal_move(dir){
    _debug('widget_menu_horizontal_move('+dir+')')
    _debug('cur_widget_menu_col: '+cur_widget_menu_col)
    _debug('cur_widget_menu_row: '+cur_widget_menu_row)
    _debug('widget_menu_map_: '+widget_menu_map[cur_widget_menu_row-2])
    tmp_widget_menu_row = cur_widget_menu_row
    if (dir>0){
        if (cur_widget_menu_col < widget_menu_map[cur_widget_menu_row-2]){
            tmp_widget_menu_col = cur_widget_menu_col+1
        }else{
            tmp_widget_menu_col = 1
        }
    }else{
        if (cur_widget_menu_col > 1){
            tmp_widget_menu_col = cur_widget_menu_col-1
        }else if(cur_widget_menu_col == 1){
            tmp_widget_menu_col = widget_menu_map[cur_widget_menu_row-2]
        }
    }
    _debug('tmp_widget_menu_row: '+tmp_widget_menu_row)
    _debug('tmp_widget_menu_col: '+cur_widget_menu_col)
    widget_menu_set_focus(tmp_widget_menu_row,tmp_widget_menu_col)
}

function widget_menu_set_focus(row,col){
    _debug('widget_menu_set_focus('+row+','+col+')')
    prev_widget_menu_row = cur_widget_menu_row
    prev_widget_menu_col = cur_widget_menu_col
    cur_widget_menu_row = row
    cur_widget_menu_col = col
    _debug('prev_widget_menu_row: '+prev_widget_menu_row)
    _debug('prev_widget_menu_col: '+prev_widget_menu_col)
    _debug('row: '+row)
    _debug('col: '+col)
    document.getElementById("widget_menu_"+prev_widget_menu_row+"_"+prev_widget_menu_col).src = "i/widget_menu_button_"+prev_widget_menu_row+"_"+prev_widget_menu_col+"_a.jpg"
    cur_widget_menu_col = tmp_widget_menu_col 
    document.getElementById("widget_menu_"+row+"_"+col).src = "i/widget_menu_button_"+row+"_"+col+"_b.jpg"
}

function widget_menu_disable_active(){
    document.getElementById("widget_menu_"+cur_widget_menu_row+"_"+cur_widget_menu_col).src = "i/widget_menu_button_"+cur_widget_menu_row+"_"+cur_widget_menu_col+"_a.jpg"
}

function widget_menu_set_active(){
    _debug('widget_menu_set_active()')
    document.getElementById("widget_menu_"+cur_widget_menu_row+"_"+cur_widget_menu_col).src = "i/widget_menu_button_"+cur_widget_menu_row+"_"+cur_widget_menu_col+"_b.jpg"
}

function widget_menu_action(){
    _debug('widget_menu_action()')
    _debug('cur_widget_menu_row: '+cur_widget_menu_row)
    _debug('cur_widget_menu_col: '+cur_widget_menu_col)
    action_idx = (cur_widget_menu_row-1)*3+cur_widget_menu_col-1
    if (cur_widget_menu_row>1){
        // action_idx = action_idx - 2
        action_idx = action_idx - 3
    }
    _debug('action_idx: '+action_idx)
    //if (widget_menu_action_map[action_idx]){
    if (!additional_services_on){
        show_warning_message(words['disabled_additional_services'])
    }else{
        eval(widget_menu_action_map[action_idx])
    }
    //}
}
/**/

/* WEATHER PAGE */
function show_weather_page(){
    _debug('show_weather_page()')
    weather_page_on = 1
    document.getElementById('weather_page').style.display = ''
    show_day_weather_page()
}

function hide_weather_page(){
    _debug('hide_weather_page()')
    document.getElementById('weather_page').style.display = 'none'
    weather_page_on = 0
    if (day_weather_on){
        hide_day_weather_page()
    }
}
/**/

/* DAY WEATHER PAGE */
function show_day_weather_page(){
    _debug('show_day_weather_page()')
    day_weather_on = 1
    cur_place = 'weather_page'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    
    if (browser == 'webkit'){
        document.getElementById('weather_page').style.fontSize = '0.75em'
    }
    
    document.getElementById('main_bar_day_weather').style.display = ''
    load_day_weather()
}

function hide_day_weather_page(){
    _debug('hide_day_weather_page()')
    document.getElementById('main_bar_day_weather').style.display = 'none'
    day_weather_on = 0
    media_type = ''
    _log('close_infoportal', '')
}

function load_day_weather(){
    _debug('load_day_weather()')
    doLoad('day_weather', 1)
}

function fill_day_weather(arr){
    _debug('fill_day_weather(arr)')
    _debug('arr.length: '+arr.length)

    for (i=0; i<arr.length; i++){
        _debug('i: '+i)
        document.getElementById('weather_col_title_'+(i+1)).innerHTML = arr[i].title
        document.getElementById('weather_col_descr_'+(i+1)).innerHTML = arr[i].description
        
        document.getElementById('day_weather_layer_1_img_'+(i+1)).src = 'i/'+arr[i].img_1
        document.getElementById('day_weather_layer_2_img_'+(i+1)).src = 'i/'+arr[i].img_2
        document.getElementById('day_weather_layer_3_img_'+(i+1)).src = 'i/'+arr[i].img_3
        document.getElementById('day_weather_temp_col_'+(i+1)).innerHTML = arr[i].temperature
    }
}

/**/

/* CITY INFO PAGE */
function show_city_info_page(){
    city_info_page_on = 1
    cur_place = 'city_info'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    document.getElementById('city_info_page').style.display = ''
    show_main_city_info()
}

function hide_city_info_page(){
    document.getElementById('city_info_page').style.display = 'none'
    if (main_city_info_on){
        hide_main_city_info()
    }
    if (other_city_info_on){
        hide_other_city_info()
    }
    if (help_city_info_on){
        hide_help_city_info()
    }
    city_info_page_on = 0
    media_type = ''
    _log('close_infoportal', '')
}

function switch_on_city_info_page(page_num){
    document.getElementById('city_info_punct_'+page_num).className = "active_punct"
    /*document.getElementById('city_info_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('city_info_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('city_info_punct_r_img_'+page_num).src = "i/insert_b_r.png"*/
}

function switch_off_city_info_page(page_num){
    document.getElementById('city_info_punct_'+page_num).className = "passive_punct"
    /*document.getElementById('city_info_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('city_info_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('city_info_punct_r_img_'+page_num).src = "i/insert_r.png"*/
}
/**/

/* MAIN CITY INFO */
function show_main_city_info(){
    main_city_info_on = 1
    document.getElementById('main_bar_main_city_info').style.display = ''
    switch_on_city_info_page(1)
    load_main_city_info(0)
    set_active_main_city_info_row()
}

function hide_main_city_info(){
    document.getElementById('main_bar_main_city_info').style.display = 'none'
    main_city_info_on = 0
    switch_off_city_info_page(1)
    set_passive_all_main_city_info_row()
    cur_row_main_city_info = 0
    prev_row_main_city_info = 1
    cur_main_city_info_page = 1
}

function shift_main_city_info(shift_row){
    _debug('shift_main_city_info('+shift_row+')')
    prev_row_main_city_info = cur_row_main_city_info
    if(shift_row > 0){
        if(cur_row_main_city_info < max_main_city_info_rows-1){
            cur_row_main_city_info++
            set_active_main_city_info_row()
        }else{
            shift_main_city_info_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_main_city_info > 0){
            cur_row_main_city_info --
            set_active_main_city_info_row()
        }else{
            shift_main_city_info_page(-1)
        }
    }
}

function shift_main_city_info_page(dir){
     _debug('shift_main_city_info_page('+dir+')')
    if (dir > 0){
        if (cur_main_city_info_page < total_main_city_info_pages){
            cur_main_city_info_page++
            need_main_city_info_row_focus = 1
            set_passive_all_main_city_info_row()
            load_main_city_info(cur_main_city_info_page)
            cur_row_main_city_info = 0
        }
    }else if (dir < 0){
        if (cur_main_city_info_page > 1){
            cur_main_city_info_page--
            need_main_city_info_row_focus = 1
            set_passive_all_main_city_info_row()
            load_main_city_info(cur_main_city_info_page)
            cur_row_main_city_info = 4
        }
    }
}

function disable_main_city_info_row(){
    _debug('disable_main_city_info_row()')
    if(cur_row_main_city_info > 0 && cur_row_main_city_info <= max_main_city_info_rows){
        document.getElementById('main_city_info_row_'+cur_row_main_city_info).className = 'video_td'
        cur_row_main_city_info = 0
        prev_row_main_city_info = 1
    }
}

function set_active_main_city_info_row(){
    _debug('set_active_main_city_info_row()')
    _debug('cur_row_main_city_info: '+cur_row_main_city_info)
    set_passive_main_city_info_row()
    class_changer('main_city_info_row_', cur_row_main_city_info, "hover")
}

function set_passive_main_city_info_row(){
    _debug('set_passive_main_city_info_row()')
    _debug('prev_row_main_city_info: '+prev_row_main_city_info)
    class_changer('main_city_info_row_', prev_row_main_city_info, "unhover")
}

function set_passive_all_main_city_info_row(){
    _debug('set_passive_all_main_city_info_row()')
    _debug('cur_row_main_city_info: '+cur_row_main_city_info)
    class_changer('main_city_info_row_', cur_row_main_city_info, "unhover")
}

function load_main_city_info(page){
    doLoad('main_city_info', page)
}

function fill_main_city_info(arr){
    _debug('fill_main_city_info()')
    city_info_page_bar(cur_main_city_info_page ,total_main_city_info_pages)
    tmp_main_city_info_arr = arr
    max_main_city_info_rows = arr.length
    _debug('max_main_city_info: '+max_main_city_info_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('main_city_info_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].title
        document.getElementById('main_city_info_number_'+(tv_n_i)).innerHTML = arr[tv_n_i].number
    }
    _debug('end fill')
    if (arr_length <= 4){
        for(tv_i = arr_length; tv_i < 5; tv_i++){
            document.getElementById('main_city_info_title_'+(tv_i)).innerHTML = ''
            document.getElementById('main_city_info_number_'+(tv_i)).innerHTML = ''
        }
    }
    _debug('need_main_city_info_row_focus: '+need_main_city_info_row_focus)
    if (need_main_city_info_row_focus){
        set_active_main_city_info_row()
        need_main_city_info_row_focus = 0
    }
}

function del_main_city_info(){
    _debug('del_main_city_info()')
    city_info_page_bar(cur_main_city_info_page ,total_main_city_info_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('main_city_info_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('main_city_info_number_'+(tv_n_i)).innerHTML = ''
    }
    max_main_city_info_rows = 0
}
/**/

/* OTHER CITY INFO */
function show_other_city_info(){
    other_city_info_on = 1
    document.getElementById('main_bar_other_city_info').style.display = ''
    switch_on_city_info_page(3)
    load_other_city_info(0)
    set_active_other_city_info_row()
}

function hide_other_city_info(){
    document.getElementById('main_bar_other_city_info').style.display = 'none'
    other_city_info_on = 0
    switch_off_city_info_page(3)
    set_passive_all_other_city_info_row()
    cur_row_other_city_info = 0
    prev_row_other_city_info = 1
    cur_other_city_info_page = 1
}

function shift_other_city_info(shift_row){
    _debug('shift_other_city_info('+shift_row+')')
    prev_row_other_city_info = cur_row_other_city_info
    if(shift_row > 0){
        if(cur_row_other_city_info < max_other_city_info_rows-1){
            cur_row_other_city_info++
            set_active_other_city_info_row()
        }else{
            shift_other_city_info_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_other_city_info > 0){
            cur_row_other_city_info --
            set_active_other_city_info_row()
        }else{
            shift_other_city_info_page(-1)
        }
    }
}

function shift_other_city_info_page(dir){
     _debug('shift_other_city_info_page('+dir+')')
    if (dir > 0){
        if (cur_other_city_info_page < total_other_city_info_pages){
            cur_other_city_info_page++
            need_other_city_info_row_focus = 1
            set_passive_all_other_city_info_row()
            load_other_city_info(cur_other_city_info_page)
            cur_row_other_city_info = 0
        }
    }else if (dir < 0){
        if (cur_other_city_info_page > 1){
            cur_other_city_info_page--
            need_other_city_info_row_focus = 1
            set_passive_all_other_city_info_row()
            load_other_city_info(cur_other_city_info_page)
            cur_row_other_city_info = 4
        }
    }
}

function disable_other_city_info_row(){
    _debug('disable_other_city_info_row()')
    if(cur_row_other_city_info > 0 && cur_row_other_city_info <= max_other_city_info_rows){
        document.getElementById('other_city_info_row_'+cur_row_other_city_info).className = 'video_td'
        cur_row_other_city_info = 0
        prev_row_other_city_info = 1
    }
}

function set_active_other_city_info_row(){
    _debug('set_active_other_city_info_row()')
    _debug('cur_row_other_city_info: '+cur_row_other_city_info)
    set_passive_other_city_info_row()
    class_changer('other_city_info_row_', cur_row_other_city_info, "hover")
}

function set_passive_other_city_info_row(){
    _debug('set_passive_other_city_info_row()')
    _debug('prev_row_other_city_info: '+prev_row_other_city_info)
    class_changer('other_city_info_row_', prev_row_other_city_info, "unhover")
}

function set_passive_all_other_city_info_row(){
    _debug('set_passive_all_other_city_info_row()')
    _debug('cur_row_other_city_info: '+cur_row_other_city_info)
    class_changer('other_city_info_row_', cur_row_other_city_info, "unhover")
}

function load_other_city_info(page){
    doLoad('other_city_info', page)
}

function fill_other_city_info(arr){
    _debug('fill_other_city_info()')
    city_info_page_bar(cur_other_city_info_page ,total_other_city_info_pages)
    tmp_other_city_info_arr = arr
    _debug('fill_other_city_info()')
    max_other_city_info_rows = arr.length
    _debug('max_other_city_info: '+max_other_city_info_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('other_city_info_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].title
        document.getElementById('other_city_info_number_'+(tv_n_i)).innerHTML = arr[tv_n_i].number
    }
    _debug('end fill')
    if (arr_length <= 4){
        for(tv_i = arr_length; tv_i < 5; tv_i++){
            document.getElementById('other_city_info_title_'+(tv_i)).innerHTML = ''
            document.getElementById('other_city_info_number_'+(tv_i)).innerHTML = ''
        }
    }
    _debug('need_other_city_info_row_focus: '+need_other_city_info_row_focus)
    if (need_other_city_info_row_focus){
        set_active_other_city_info_row()
        need_other_city_info_row_focus = 0
    }
}

function del_other_city_info(){
    _debug('del_other_city_info()')
    city_info_page_bar(cur_other_city_info_page ,total_other_city_info_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('other_city_info_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('other_city_info_number_'+(tv_n_i)).innerHTML = ''
    }
    max_other_city_info_rows = 0
}
/**/

/* HELP CITY INFO */
function show_help_city_info(){
    help_city_info_on = 1
    document.getElementById('main_bar_help_city_info').style.display = ''
    switch_on_city_info_page(2)
    load_help_city_info(0)
    set_active_help_city_info_row()
}

function hide_help_city_info(){
    document.getElementById('main_bar_help_city_info').style.display = 'none'
    help_city_info_on = 0
    switch_off_city_info_page(2)
    set_passive_all_help_city_info_row()
    cur_row_help_city_info = 0
    prev_row_help_city_info = 1
    cur_help_city_info_page = 1
}

function shift_help_city_info(shift_row){
    _debug('shift_help_city_info('+shift_row+')')
    prev_row_help_city_info = cur_row_help_city_info
    if(shift_row > 0){
        if(cur_row_help_city_info < max_help_city_info_rows-1){
            cur_row_help_city_info++
            set_active_help_city_info_row()
        }else{
            shift_help_city_info_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_help_city_info > 0){
            cur_row_help_city_info --
            set_active_help_city_info_row()
        }else{
            shift_help_city_info_page(-1)
        }
    }
}

function shift_help_city_info_page(dir){
     _debug('shift_help_city_info_page('+dir+')')
    if (dir > 0){
        if (cur_help_city_info_page < total_help_city_info_pages){
            cur_help_city_info_page++
            need_help_city_info_row_focus = 1
            set_passive_all_help_city_info_row()
            load_help_city_info(cur_help_city_info_page)
            cur_row_help_city_info = 0
        }
    }else if (dir < 0){
        if (cur_help_city_info_page > 1){
            cur_help_city_info_page--
            need_help_city_info_row_focus = 1
            set_passive_all_help_city_info_row()
            load_help_city_info(cur_help_city_info_page)
            cur_row_help_city_info = 4
        }
    }
}

function disable_help_city_info_row(){
    _debug('disable_help_city_info_row()')
    if(cur_row_help_city_info > 0 && cur_row_help_city_info <= max_help_city_info_rows){
        document.getElementById('help_city_info_row_'+cur_row_help_city_info).className = 'video_td'
        cur_row_help_city_info = 0
        prev_row_help_city_info = 1
    }
}

function set_active_help_city_info_row(){
    _debug('set_active_help_city_info_row()')
    _debug('cur_row_help_city_info: '+cur_row_help_city_info)
    set_passive_help_city_info_row()
    class_changer('help_city_info_row_', cur_row_help_city_info, "hover")
}

function set_passive_help_city_info_row(){
    _debug('set_passive_help_city_info_row()')
    _debug('prev_row_help_city_info: '+prev_row_help_city_info)
    class_changer('help_city_info_row_', prev_row_help_city_info, "unhover")
}

function set_passive_all_help_city_info_row(){
    _debug('set_passive_all_help_city_info_row()')
    _debug('cur_row_help_city_info: '+cur_row_help_city_info)
    class_changer('help_city_info_row_', cur_row_help_city_info, "unhover")
}

function load_help_city_info(page){
    doLoad('help_city_info', page)
}

function fill_help_city_info(arr){
    _debug('fill_help_city_info()')
    city_info_page_bar(cur_help_city_info_page ,total_help_city_info_pages)
    tmp_help_city_info_arr = arr
    _debug('fill_help_city_info()')
    max_help_city_info_rows = arr.length
    _debug('max_help_city_info: '+max_help_city_info_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('help_city_info_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].title
        document.getElementById('help_city_info_number_'+(tv_n_i)).innerHTML = arr[tv_n_i].number
    }
    _debug('end fill')
    if (arr_length <= 4){
        for(tv_i = arr_length; tv_i < 5; tv_i++){
            document.getElementById('help_city_info_title_'+(tv_i)).innerHTML = ''
            document.getElementById('help_city_info_number_'+(tv_i)).innerHTML = ''
        }
    }
    _debug('need_help_city_info_row_focus: '+need_help_city_info_row_focus)
    if (need_help_city_info_row_focus){
        set_active_help_city_info_row()
        need_help_city_info_row_focus = 0
    }
}

function del_help_city_info(){
    _debug('del_help_city_info()')
    city_info_page_bar(cur_help_city_info_page ,total_help_city_info_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('help_city_info_title_'+(tv_n_i)).innerHTML = ''
        document.getElementById('help_city_info_number_'+(tv_n_i)).innerHTML = ''
    }
    max_help_city_info_rows = 0
}
/**/

/* ANECDOTE PAGE */
function show_anec_page(){
    anec_page_on = 1
    cur_place = 'anec_page'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    document.getElementById('anec_page').style.display = ''
    hide_anec_updated_icon()
    show_anec_blog()
}

function hide_anec_page(){
    document.getElementById('anec_page').style.display = 'none'
    if (anec_blog_on){
        hide_anec_blog()
    }
    anec_page_on = 0
    media_type = ''
    _log('close_infoportal', '')
}

function hide_anec_updated_icon(){
    _debug('hide_anec_updated_icon()')
    document.getElementById('anec_update_icon').style.display = 'none';
    doLoad('updated_place_confirm',0,'anec')
    document.getElementById('infoportal_update_icon').style.display = 'none';
}
/**/

/* ANEC BLOG */
function show_anec_blog(){
    _debug('show_anec_blog()')
    anec_blog_on = 1
    document.getElementById('main_bar_anec_blog').style.display = ''
    get_anec_bookmark_page()
    load_anec(0)
}

function hide_anec_blog(){
    _debug('hide_anec_blog()')
    document.getElementById('main_bar_anec_blog').style.display = 'none'
    anec_blog_on = 0
    cur_anec_blog_page = 1
    readed_anec = 0
    document.getElementById('anec_blog_body').innerHTML = ''
    if (anec_page_box_on){
        hide_anec_page_box()
    }
}

function shift_anec(dir){
    _debug('shift_anec('+dir+')')
    if (dir>0){
        if (cur_anec_blog_page < total_anec_blog_pages){
            cur_anec_blog_page++
            load_anec(cur_anec_blog_page)
        }
    }else if(dir<0){
        if (cur_anec_blog_page > 1){
            cur_anec_blog_page--
            load_anec(cur_anec_blog_page)
        }
    }
}

function load_anec(page){
    _debug('load_anec('+page+')')
    get_anec_bookmark_page()
    doLoad('anec', page)
}

function fill_anec_blog(arr){
    _debug('fill_anec_blog()')
    anec_page_bar(cur_anec_blog_page, total_anec_blog_pages)
    document.getElementById('anec_blog_body').scrollTop = 0
    //document.getElementById('anec_blog_body').focus()
    cur_anec_id = arr[0].id
    tmp_str  = arr[0].added + '   <span style="color:green">'+words['rating']+': </span><span id="anec_rating" style="color:green">'+ arr[0].rating+'</span><br><br>'
    tmp_str += arr[0].anec_body
    if (parseInt(arr[0].voted) == 1){
        document.getElementById('anec_green_btn').style.display = 'none'
    }else{
        document.getElementById('anec_green_btn').style.display = ''
    }
    document.getElementById('anec_blog_body').innerHTML = tmp_str
    readed_anec++
    if (readed_anec == 5){
        _log('readed_anec', '')
    }
}

function del_anec_blog(){
    _debug('del_anec_blog()')
    anec_page_bar(cur_anec_blog_page, total_anec_blog_pages)
    //document.getElementById('anec_blog_body').blur()
    document.getElementById('anec_blog_body').innerHTML = ''
}

function shift_anec_blog_body(dir, offset){
    
    var anec_blog_body = document.getElementById('anec_blog_body');
    
    var top = anec_blog_body.scrollTop;
    
    _debug('top: '+top);

    if (dir>0){
        top = top+offset
    }else{
        if (top != 0){
            top = top-offset
        }
    }
    
    anec_blog_body.scrollTop = top
    
    _debug('after top: '+top);
    _debug('after scrollTop: '+anec_blog_body.scrollTop);
}

function make_anec_bookmark(){
    doLoad('make_anec_bookmark', 0, cur_anec_id)
}

function get_anec_bookmark_page(){
    doLoad('get_anec_bookmark_page', 0)
}

function load_anec_bookmark(){
    cur_anec_blog_page = anec_bookmark_page
    load_anec(anec_bookmark_page)
}

function vote_anec(){
    last_vote_anec_id = cur_anec_id
    doLoad('vote_anec', 0, cur_anec_id)
}
/**/

/* ANEC PAGE BOX */
function show_anec_page_box(){
    document.getElementById('anec_page_box').style.display = ''
    anec_page_box_on = 1
}

function hide_anec_page_box(){
    document.getElementById('anec_page_box').style.display = 'none'
    anec_page_box_on = 0
    document.getElementById('anec_page_box_txt').value = ''
}

function set_anec_page_box(num){
    if (!anec_page_box_on){
        show_anec_page_box()
    }
    document.getElementById('anec_page_box_txt').value = document.getElementById('anec_page_box_txt').value+''+num
}

function del_num_in_anec_page_box(){
    anec_page_box_obj = document.getElementById('anec_page_box_txt')
    anec_page_box_obj.value = anec_page_box_obj.value.substr(0,anec_page_box_obj.value.length-1)
}

function load_anec_page_by_box(){
    page = parseInt(document.getElementById('anec_page_box_txt').value)
    if (page>0 && page<=total_anec_blog_pages){
        cur_anec_blog_page = page
        load_anec(page)
    }
    hide_anec_page_box()
}

/**/

/* HOROSCOPE PAGE */
function show_horoscope_page(){
    _debug('show_horoscope_page()')
    horoscope_page_on = 1
    load_horoscope()
    if (reset_horoscope_menu){
        cur_horoscope_menu_page = 1
        tmp_horoscope_menu_col = 1
        horoscope_menu_disable_active()
        cur_horoscope_menu_row = 1
        cur_horoscope_menu_col = 1
        fill_horoscope_menu()
    }
    cur_place = 'horoscope_page'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    horoscope_menu_set_active()
    document.getElementById('horoscope_page').style.display = ''
    document.getElementById('common_horoscope').scrollTop = 0
}

function hide_horoscope_page(param){
    _debug('hide_horoscope_page()')
    document.getElementById('common_horoscope').scrollTop = 0
    document.getElementById('common_horoscope').innerHTML = ''
    document.getElementById('horoscope_page').style.display = 'none'
    del_common_horoscope()
    horoscope_page_on = 0
    if (param == 1){
        cur_horoscope_menu_page = 1
        tmp_horoscope_menu_col = 1
        horoscope_menu_disable_active()
        cur_horoscope_menu_row = 1
        cur_horoscope_menu_col = 1
        fill_horoscope_menu()
    }
    media_type = ''
    _log('close_infoportal', '')
    reset_horoscope_menu = 0
}

function load_horoscope(){
    _debug('load_horoscope()')
    doLoad('horoscope', 1)
}

function fill_common_horoscope(arr){
    _debug('fill_common_horoscope()')
    horoscope_arr = arr
    document.getElementById('common_horoscope').innerHTML = arr[0].description
    _debug('fill description')
    document.getElementById('common_horoscope').scrollTop = 0
    _debug('scrollTop')
}

function shift_common_horoscope(dir){
    _debug('shift_common_horoscope('+dir+')')
    if (dir>0){
        document.getElementById('common_horoscope').scrollTop = 100
    }else{
        document.getElementById('common_horoscope').scrollTop = 0
    }
}

function del_common_horoscope(){
    _debug('del_common_horoscope()')
    document.getElementById('common_horoscope').innerHTML = '&nbsp;'
}

function horoscope_menu_vertical_move(dir){
    return 0;
}

function horoscope_menu_horizontal_move(dir){
    _debug('horoscope_menu_horizontal_move('+dir+')')
    tmp_horoscope_menu_row = 1
    tmp_horoscope_menu_col = cur_horoscope_menu_col
    if (dir>0){
        if (cur_horoscope_menu_col < 3){
            tmp_horoscope_menu_col++
            horoscope_menu_set_focus(tmp_horoscope_menu_row,tmp_horoscope_menu_col)
        }else{
            horoscope_menu_disable_active()
            tmp_horoscope_menu_col = 1
            shift_horoscope_menu_page(1)
        }
    }else{
        if (cur_horoscope_menu_col > 1){
            tmp_horoscope_menu_col--
            horoscope_menu_set_focus(tmp_horoscope_menu_row,tmp_horoscope_menu_col)
        }else{
            horoscope_menu_disable_active()
            tmp_horoscope_menu_col = 3
            shift_horoscope_menu_page(-1)
        }
    }
    _debug('tmp_horoscope_menu_row: '+tmp_horoscope_menu_row)
    _debug('tmp_horoscope_menu_col: '+tmp_horoscope_menu_col)
}

function shift_horoscope_menu_page(dir){
    _debug('shift_horoscope_menu_page('+dir+')')
    if (dir>0){
        if (cur_horoscope_menu_page < total_horoscope_menu_pages){
            cur_horoscope_menu_page++
        }else{
            cur_horoscope_menu_page = 1
        }
    }else{
        if (cur_horoscope_menu_page > 1){
            cur_horoscope_menu_page--
        }else{
            cur_horoscope_menu_page = total_horoscope_menu_pages
        }
    }
    fill_horoscope_menu()
}

function fill_horoscope_menu(){
    _debug('fill_horoscope_menu()')
    tmp_start = (cur_horoscope_menu_page-1)*3
    _debug('cur_horoscope_menu_page: '+cur_horoscope_menu_page)
    _debug('tmp_start: '+tmp_start)
    document.getElementById('horoscope_menu_1_1').src = 'i/horoscope_menu_button_1_'+(tmp_start+1)+'_a.png';
    document.getElementById('horoscope_menu_1_2').src = 'i/horoscope_menu_button_1_'+(tmp_start+2)+'_a.png';
    document.getElementById('horoscope_menu_1_3').src = 'i/horoscope_menu_button_1_'+(tmp_start+3)+'_a.png';
    horoscope_menu_set_focus(1,tmp_horoscope_menu_col)
}

function horoscope_menu_set_focus(row,col){
    _debug('horoscope_menu_set_focus('+row+','+col+')')
    prev_horoscope_menu_row = cur_horoscope_menu_row
    prev_horoscope_menu_col = cur_horoscope_menu_col
    cur_horoscope_menu_row = row
    cur_horoscope_menu_col = col
    _debug('prev_horoscope_menu_row: '+prev_horoscope_menu_row)
    _debug('prev_horoscope_menu_col: '+prev_horoscope_menu_col)
    _debug('row: '+row)
    _debug('col: '+col)
    tmp_start = (cur_horoscope_menu_page-1)*3
    document.getElementById("horoscope_menu_1_"+prev_horoscope_menu_col).src = "i/horoscope_menu_button_1_"+(tmp_start+prev_horoscope_menu_col)+"_a.png"
    document.getElementById("horoscope_menu_1_"+col).src = "i/horoscope_menu_button_1_"+(tmp_start+col)+"_b.png"
}

function horoscope_menu_disable_active(){
    document.getElementById("horoscope_menu_1_"+cur_horoscope_menu_col).src = "i/horoscope_menu_button_1_"+((cur_horoscope_menu_page-1)*3+cur_horoscope_menu_col)+"_a.png"
}

function horoscope_menu_set_active(){
    _debug('horoscope_menu_set_active()')
    document.getElementById("horoscope_menu_1_"+cur_horoscope_menu_col).src = "i/horoscope_menu_button_1_"+((cur_horoscope_menu_page-1)*3+cur_horoscope_menu_col)+"_b.png"
    _debug('set_active done')
}

function horoscope_menu_action(){
    _debug('horoscope_menu_action()')
    _debug('cur_horoscope_menu_row: '+cur_horoscope_menu_row)
    _debug('cur_horoscope_menu_col: '+cur_horoscope_menu_col)
    action_idx = (cur_horoscope_menu_page-1)*3+cur_horoscope_menu_col
    _debug('action_idx: '+action_idx)
    show_horoscope_sign_page(action_idx)
}

function show_horoscope_sign_page(sign){
    _debug('show_horoscope_by_sign('+sign+')')
    horoscope_sign_page_on = 1
    hide_horoscope_page()
    document.getElementById('horoscope_sign_page').style.display = ''
    document.getElementById('horoscope_sign_title').innerHTML = horoscope_arr[sign].title
    document.getElementById('horoscope_sign_desc').innerHTML = horoscope_arr[sign].description
}

function hide_horoscope_sign_page(){
    _debug('hide_horoscope_sign_page()')
    document.getElementById('horoscope_sign_title').innerHTML = ''
    document.getElementById('horoscope_sign_desc').innerHTML = ''
    document.getElementById('horoscope_sign_page').style.display = 'none'
    horoscope_sign_page_on = 0
}
/**/

/* COURSE PAGE */
function show_course_page(){
    _debug('show_course_page()')
    course_page_on = 1
    cur_place = 'course_page'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    load_course()
    document.getElementById('course_page').style.display = ''
}

function hide_course_page(){
    _debug('course_page()')
    document.getElementById('course_page_title').innerHTML = ''
    del_course()
    media_type = ''
    _log('close_infoportal', '')
    document.getElementById('course_page').style.display = 'none'
    course_page_on = 0    
}

function load_course(){
    _debug('load_course()')
    doLoad('course', 0)
}

function fill_course(arr){
    _debug('fill_course()')
    document.getElementById('course_page_title').innerHTML = arr.title
    total_course_values = arr.data.length
    for (i=0; i<total_course_values; i++){
        document.getElementById('course_currency_'+i).innerHTML = arr.data[i].currency
        document.getElementById('course_value_'+i).innerHTML    = arr.data[i].value
    }
}

function del_course(){
    for (i=0; i<total_course_values; i++){
        document.getElementById('course_currency_'+i).innerHTML = ''
        document.getElementById('course_value_'+i).innerHTML    = ''
    }
}
/**/

/* MAIN MENU CLOCK */

function main_menu_clock(){
    
    this.current_date
    this.minutes = 0
    this.hours = 0
    this.day   = 0
    this.date  = 0
    this.month = 0
    this.year  = 0
    this.t_clock
    
    var self = this
    
    this.start = function(){
        _debug('main_menu_clock.start()')
        this.tick()
        try{
            this.t_clock = window.setInterval(function(){self.tick()},30000)
        }catch(e){
            _debug(e)
        }
    }
    
    this.stop = function(){
        _debug('main_menu_clock.stop()')
        _debug('self.t_clock: '+self.t_clock)
        try{
            window.clearInterval(self.t_clock)
        }catch(e){
            _debug(e)
        }
    }
    
    this.tick = function(){
        this.current_date = new Date()
        
        this.year  = this.current_date.getFullYear()
        if (this.year > 2012){
            this.year = 2000
        }
        
        this.month = this.current_date.getMonth()+1
        if (this.month<10){
            this.month = '0'+this.month
        }
        
        this.date  = this.current_date.getDate()
        if (this.date<10){
            this.date = '0'+this.date
        }
        
        this.day   = this.current_date.getDay()
        if (this.day == 0){
            this.day = 7
        }
        
        this.hours = this.current_date.getHours()
        if (this.hours<10){
            this.hours = '0'+this.hours
        }
        
        this.minutes = this.current_date.getMinutes()
        if (this.minutes<10){
            this.minutes = '0'+this.minutes
        }
        
        this.show()
    }
    
    this.show = function(){
        document.getElementById('cur_time').innerHTML = this.hours + ':' + this.minutes
        document.getElementById('cur_day').style.backgroundImage = 'url(i/d'+this.date+'s.png)'
        document.getElementById('cur_year').style.backgroundImage = 'url(i/'+this.year+'s.png)'
        document.getElementById('cur_month').style.backgroundImage = 'url(i/m'+this.month+'s.png)'
        document.getElementById('cur_day_of_week').style.backgroundImage = 'url(i/week'+this.day+'s.png)'
    }
}

function set_cur_weather(arr){
    cur_weather = arr
    if (menu_on){
        if (show_watchdog_debug){
            _debug('set_cur_weather(arr)')
        }
        document.getElementById('cur_weather_bar').innerHTML = cur_weather.condition+', '+cur_weather.temp_c+'&ordm;C<br>'+cur_weather.humidity+'<br>'+cur_weather.wind_condition
    }
}

function set_updated_places(arr){
    for (i in arr){
        if (arr[i] == 1){
            if (i == 'anec'){
                document.getElementById('infoportal_update_icon').style.display = '';
            }else if (i == 'vclub'){
                document.getElementById('media_club_update_icon').style.display = '';
            }
            document.getElementById(i+'_update_icon').style.display = '';
        }
    }
}

/**/

/* GAME PAGE */
function show_game_page(){
    _debug('show_game_page()')
    game_page_on = 1
    cur_place = 'game_page'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    show_mastermind_game()
}

function hide_game_page(){
    _debug('hide_game_page()')
    //hide_mastermind_game()
    game_page_on = 0
    media_type = ''
    _log('close_infoportal', '')
    hide_mastermind_game()
}
/**/

/* MASTERMIND GAME */
function show_mastermind_game(){
    _debug('show_mastermind_game()')
    mastermind_game_on = 1
    init_mastermind_game()
    document.getElementById('mastermind_game').style.display = ''
}

function hide_mastermind_game(){
    _debug('hide_mastermind_game()')
    if (mastermind_menu_on){
        hide_mastermind_menu()
    }
    hide_mastermind_winner_alert()
    document.getElementById('mastermind_game').style.display = 'none'
    mastermind_game_on = 0
}

function init_mastermind_game(){
    _debug('init_mastermind_game()')
    del_mastermind_rows()
    hide_mastermind_winner_alert()
    mastermind_log = []
    cur_mastermind_try_number = []
    mastermind_try_number = []
    mastermind_secret_number = []
    get_mastermind_secret_number()
    cur_mastermind_step = 0
    mastermind_log = []
    cur_mastermind_log_page = 1
    total_mastermind_pages = 1
    unset_mastermind_nums()
    update_mastermind_page_bar()
    start_mastermind_game_time = Date.parse(new Date())/1000
}

function shift_mastermind_arrow(dir){
    _debug('shift_mastermind_arrow()')
    if(dir > 0){
        if (cur_mastermind_num < 4){
            cur_mastermind_num++
        }else{
            cur_mastermind_num = 1
        }
    }else{
        if (cur_mastermind_num > 1){
            cur_mastermind_num--
        }else{
            cur_mastermind_num = 4
        }
    }
    move_mastermind_arrow()
}

function move_mastermind_arrow(){
    _debug('move_mastermind_arrow()')
    document.getElementById('mastermind_arrow').style.left = mastermind_arrow_map[cur_mastermind_num-1]
}

function get_mastermind_rnd(){
    _debug('get_mastermind_rnd()')
    rnd_num = Math.floor(Math.random()*10)
    _debug('rnd_num: '+rnd_num)
    return rnd_num
}

function get_mastermind_secret_number(){
    _debug('get_mastermind_secret_number()')
    get_secret_num:
    while (mastermind_secret_number.length < 4){
        cur_idx = mastermind_secret_number.length
        rnd_num = get_mastermind_rnd()
        if (cur_idx == 0 && rnd_num == 0){
            continue
        }
        if (mastermind_secret_number.indexOf(rnd_num)>=0){
            continue
        }
        /*for (i=0;i<mastermind_secret_number.length;i++){
            if (mastermind_secret_number[i] == rnd_num){
                continue get_secret_num;
            }
        }*/
        mastermind_secret_number[cur_idx] = rnd_num
    }
    _debug(mastermind_secret_number.toSource())
}

function check_mastermind_number(){
    _debug('check_mastermind_number()')
    cur_mastermind_try_number = []
    cows  = 0
    bulls = 0
    try_num_1 = parseInt(document.getElementById('mastermind_num_1').innerHTML)
    try_num_2 = parseInt(document.getElementById('mastermind_num_2').innerHTML)
    try_num_3 = parseInt(document.getElementById('mastermind_num_3').innerHTML)
    try_num_4 = parseInt(document.getElementById('mastermind_num_4').innerHTML)
    mastermind_try_number = [try_num_1, try_num_2, try_num_3, try_num_4]
    if (try_num_1>0 && try_num_2>=0 && try_num_3>=0 && try_num_4>=0){
        cur_mastermind_step++
        for (i=0;i<4;i++){
            if (eval('try_num_'+(i+1)) == mastermind_secret_number[i]){
                bulls++
            }else{
                if (mastermind_secret_number.indexOf(eval('try_num_'+(i+1)))>=0){
                    cows++
                }
            }
        }
        add_mastermind_log()
        unset_mastermind_nums()
    }
}

function add_mastermind_log(){
    _debug('add_mastermind_log()')
    _debug('bulls: '+bulls)
    _debug('cows: '+cows)

    total_mastermind_pages = Math.ceil(cur_mastermind_step/10)

    cur_row_idx = cur_mastermind_step - (total_mastermind_pages-1)*10 - 1
    _debug('cur_row_idx: '+cur_row_idx)

    tmp_try = mastermind_try_number[0]+''+mastermind_try_number[1]+''+mastermind_try_number[2]+''+mastermind_try_number[3]
    tmp_res = bulls+'Б '+cows+'К'
    mastermind_log[mastermind_log.length] = {step: cur_mastermind_step, try_num:tmp_try, res:tmp_res}
    
    if (total_mastermind_pages > cur_mastermind_log_page){
        cur_mastermind_log_page = total_mastermind_pages
        load_masterming_log()
    }else{
        document.getElementById('mastermind_step_num_'+cur_row_idx).innerHTML = cur_mastermind_step
        document.getElementById('mastermind_try_'+cur_row_idx).innerHTML = tmp_try
        document.getElementById('mastermind_res_'+cur_row_idx).innerHTML = tmp_res
    }
    
    if (bulls == 4){
        total_mastermind_game_time = Date.parse(new Date())/1000 - start_mastermind_game_time
        show_mastermind_winner_alert()
        _debug('total_mastermind_game_time: '+total_mastermind_game_time)
        doLoad('mastermind_log', 1, {tries: cur_mastermind_step, total_time: total_mastermind_game_time})
    }
}

function show_mastermind_winner_alert(){
    mastermind_winner_alert_on = 1
    document.getElementById('mastermind_winner_info').innerHTML = 'Победа !!!'
    document.getElementById('mastermind_cow_tongue').style.display = ''
    
    points = 1
    if (cur_mastermind_step <= 7 && total_mastermind_game_time < 600){
        points = 3
    }else if (cur_mastermind_step <= 10 && total_mastermind_game_time < 600){
        points = 2
    }
    _debug('points: '+points)
    show_mastermind_info('<span style="color:#FFFFFF;font-size:20px">Время: '+total_mastermind_game_time + ' с<br>Очки: ' + points + '</span><br>Чтобы начать заново нажмите ОК')
}

function hide_mastermind_winner_alert(){
    document.getElementById('mastermind_winner_info').innerHTML = ''
    document.getElementById('mastermind_cow_tongue').style.display = 'none'
    show_mastermind_info('')
    mastermind_winner_alert_on = 0
}

function show_mastermind_info(txt){
    document.getElementById('mastermind_info').innerHTML = txt
}

function show_mastermind_menu(){
    _debug('show_mastermind_menu()')
    mastermind_menu_on = 1
    document.getElementById('mastermind_menu').style.display = ''
    set_active_mastermind_menu_row()
    show_con_alpha_layer()
}

function hide_mastermind_menu(){
    _debug('hide_mastermind_menu()')
    document.getElementById('mastermind_menu').style.display = 'none'
    prev_mastermind_menu_row = cur_mastermind_menu_row
    set_passive_mastermind_menu_row()
    cur_mastermind_menu_row = 0
    prev_mastermind_menu_row = 1
    mastermind_menu_on = 0
    hide_con_alpha_layer()
}

function shift_mastermind_menu(shift_row){
    _debug('shift_mastermind_menu()')
    prev_mastermind_menu_row = cur_mastermind_menu_row
    if (shift_row>0){
        if(shift_row + cur_mastermind_menu_row > total_mastermind_menu_rows-1){
            cur_mastermind_menu_row = 0
        }else{
            cur_mastermind_menu_row++
        }
    }else{
        if(shift_row + cur_mastermind_menu_row < 0){
            cur_mastermind_menu_row = total_mastermind_menu_rows-1
        }else{
            cur_mastermind_menu_row --
        }
    }
    set_active_mastermind_menu_row()
}

function set_active_mastermind_menu_row(){
    _debug('set_active_mastermind_menu_row()')
    set_passive_mastermind_menu_row()
    class_changer('mastermind_menu_row_', cur_mastermind_menu_row, "hover")
}

function set_passive_mastermind_menu_row(){
    _debug('set_passive_mastermind_menu_row()')
    class_changer('mastermind_menu_row_', prev_mastermind_menu_row, "unhover")
}

function call_mastermind_menu_func(){
    _debug('call_mastermind_menu_func()')
    eval(func_mastermind_menu[cur_mastermind_menu_row])
}

function shift_mastermind_log_page(dir){
    _debug('shift_mastermind_log_page('+dir+')')
    if (dir>0){
        if (cur_mastermind_log_page < total_mastermind_pages){
            cur_mastermind_log_page++
            load_masterming_log()
        }
    }else{
        if (cur_mastermind_log_page > 1){
            cur_mastermind_log_page--
            load_masterming_log()
        }
    }
}

function load_masterming_log(){
    _debug('load_masterming_log()')
    begin = (cur_mastermind_log_page-1)*10
    end   = cur_mastermind_log_page*10
    update_mastermind_page_bar()
    fill_mastermind_log(mastermind_log.slice(begin,end))
}

function fill_mastermind_log(arr){
    _debug('fill_mastermind_log')
    for(i=0;i<arr.length;i++){
        document.getElementById('mastermind_step_num_'+i).innerHTML = arr[i].step
        document.getElementById('mastermind_try_'+i).innerHTML = arr[i].try_num
        document.getElementById('mastermind_res_'+i).innerHTML = arr[i].res
    }
    
    for(i=arr.length;i<=9;i++){
        document.getElementById('mastermind_step_num_'+i).innerHTML = ''
        document.getElementById('mastermind_try_'+i).innerHTML = ''
        document.getElementById('mastermind_res_'+i).innerHTML = ''
    }
}

function del_mastermind_rows(){
    _debug('del_mastermind_rows()')
    for (i=0;i<=9;i++){
        document.getElementById('mastermind_step_num_'+i).innerHTML = ''
        document.getElementById('mastermind_try_'+i).innerHTML = ''
        document.getElementById('mastermind_res_'+i).innerHTML = ''
    }
}

function mastermind_fill_num(num){
    _debug('mastermind_fill_num('+num+')')
    if (cur_mastermind_try_number.indexOf(num)<0){
        if (cur_mastermind_num == 1 && num == 0){
        }else{
            document.getElementById('mastermind_num_'+cur_mastermind_num).innerHTML = num
            cur_mastermind_try_number[cur_mastermind_num] = num
            shift_mastermind_arrow(1)
        }
    }
}

function unset_mastermind_nums(){
    document.getElementById('mastermind_num_1').innerHTML = ''
    document.getElementById('mastermind_num_2').innerHTML = ''
    document.getElementById('mastermind_num_3').innerHTML = ''
    document.getElementById('mastermind_num_4').innerHTML = ''
    cur_mastermind_num = 1
    document.getElementById('mastermind_arrow').style.left = mastermind_arrow_map[0]
}

function show_mastermind_rules(){
    _debug('show_mastermind_rules()')
    mastermind_rules_on = 1
    document.getElementById('mastermind_rules').style.display = ''
}

function hide_mastermind_rules(){
    _debug('hide_mastermind_rules()')
    mastermind_rules_on = 0
    document.getElementById('mastermind_rules').style.display = 'none'
}

function show_mastermind_control(){
    _debug('show_mastermind_control()')
    mastermind_control_on = 1
    document.getElementById('mastermind_control').style.display = ''
}

function hide_mastermind_control(){
    _debug('hide_mastermind_control()')
    document.getElementById('mastermind_control').style.display = 'none'
    mastermind_control_on = 0
}

function show_mastermind_rating(){
    _debug('show_mastermind_rating()')
    mastermind_rating_on = 1
    document.getElementById('mastermind_rating').style.display = ''
    load_mastermind_rating(0)
}

function hide_mastermind_rating(){
    _debug('hide_mastermind_rating()')
    document.getElementById('mastermind_rating').style.display = 'none'
    mastermind_rating_on = 0
}

function shift_mastermind_rating(shift_row){
    _debug('shift_mastermind_rating('+shift_row+')')
    prev_row_mastermind_rating = cur_row_mastermind_rating
    if(shift_row > 0){
        if(cur_row_mastermind_rating < max_mastermind_rating_rows-1){
            cur_row_mastermind_rating++
            set_active_mastermind_rating_row()
        }else{
            shift_mastermind_rating_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_mastermind_rating > 0){
            cur_row_mastermind_rating --
            set_active_mastermind_rating_row()
        }else{
            shift_mastermind_rating_page(-1)
        }
    }
}

function shift_mastermind_rating_page(dir){
     _debug('shift_mastermind_rating_page('+dir+')')
    if (dir > 0){
        if (cur_mastermind_rating_page < total_mastermind_rating_pages){
            cur_mastermind_rating_page++
            need_mastermind_rating_row_focus = 1
            set_passive_all_mastermind_rating_row()
            load_mastermind_rating(cur_mastermind_rating_page)
            cur_row_mastermind_rating = 0
        }
    }else if (dir < 0){
        if (cur_mastermind_rating_page > 1){
            cur_mastermind_rating_page--
            need_mastermind_rating_row_focus = 1
            set_passive_all_mastermind_rating_row()
            load_mastermind_rating(cur_mastermind_rating_page)
            cur_row_mastermind_rating = 4
        }
    }
}

function set_active_mastermind_rating_row(){
    _debug('set_active_mastermind_rating_row()')
    _debug('cur_row_mastermind_rating: '+cur_row_mastermind_rating)
    set_passive_mastermind_rating_row()
    class_changer('mastermind_rating_row_', cur_row_mastermind_rating, "hover")
}

function set_passive_mastermind_rating_row(){
    _debug('set_passive_mastermind_rating_row()')
    _debug('prev_row_mastermind_rating: '+prev_row_mastermind_rating)
    class_changer('mastermind_rating_row_', prev_row_mastermind_rating, "unhover")
}

function set_passive_all_mastermind_rating_row(){
    _debug('set_passive_all_mastermind_rating_row()')
    _debug('cur_row_mastermind_rating: '+cur_row_mastermind_rating)
    class_changer('mastermind_rating_row_', cur_row_mastermind_rating, "unhover")
}

function load_mastermind_rating(page){
    doLoad('mastermind_rating', page)
}

function fill_mastermind_rating(arr){
    _debug('fill_mastermind_rating()')
    mastermind_rating_page_bar(cur_mastermind_rating_page ,total_mastermind_rating_pages)
    tmp_mastermind_rating_arr = arr
    _debug('fill_mastermind_rating()')
    max_mastermind_rating_rows = arr.length
    _debug('max_mastermind_rating_rows: '+max_mastermind_rating_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        if (arr[tv_n_i].selected == 1){
            document.getElementById('mastermind_rating_row_'+(tv_n_i)).className = 'black_row'
        }else{
            document.getElementById('mastermind_rating_row_'+(tv_n_i)).className = 'grey_row'
        }
        document.getElementById('mastermind_rating_place_'+(tv_n_i)).innerHTML = arr[tv_n_i].place
        document.getElementById('mastermind_rating_name_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        document.getElementById('mastermind_rating_points_'+(tv_n_i)).innerHTML = arr[tv_n_i].sum_points
        document.getElementById('mastermind_rating_games_'+(tv_n_i)).innerHTML = arr[tv_n_i].games
        document.getElementById('mastermind_rating_time_'+(tv_n_i)).innerHTML = arr[tv_n_i].min_time
        document.getElementById('mastermind_rating_steps_'+(tv_n_i)).innerHTML = arr[tv_n_i].min_tries
    }
    _debug('end fill')
    if (arr_length < 10){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('mastermind_rating_name_'+(tv_i)).innerHTML = ''
            document.getElementById('mastermind_rating_place_'+(tv_i)).innerHTML = ''
            document.getElementById('mastermind_rating_points_'+(tv_i)).innerHTML = ''
            document.getElementById('mastermind_rating_games_'+(tv_i)).innerHTML = ''
            document.getElementById('mastermind_rating_time_'+(tv_i)).innerHTML = ''
            document.getElementById('mastermind_rating_steps_'+(tv_i)).innerHTML = ''
        }
    }
    _debug('need_mastermind_rating_row_focus: '+need_mastermind_rating_row_focus)
    if (need_mastermind_rating_row_focus){
        need_mastermind_rating_row_focus = 0
    }
}

function del_mastermind_rating(){
    _debug('del_mastermind_rating()')
    mastermind_rating_page_bar(cur_mastermind_rating_page ,total_mastermind_rating_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('mastermind_rating_name_'+(tv_n_i)).innerHTML = ''
        document.getElementById('mastermind_rating_place_'+(tv_n_i)).innerHTML = ''
        document.getElementById('mastermind_rating_points_'+(tv_n_i)).innerHTML = ''
        document.getElementById('mastermind_rating_games_'+(tv_n_i)).innerHTML = ''
        document.getElementById('mastermind_rating_time_'+(tv_n_i)).innerHTML = ''
        document.getElementById('mastermind_rating_steps_'+(tv_n_i)).innerHTML = ''
    }
    max_mastermind_rating_rows = 0
}

function update_mastermind_page_bar(){
    document.getElementById('mastermind_page_bar').innerHTML = 'стр '+cur_mastermind_log_page+' из '+total_mastermind_pages
}
/**/

/* VCLUB VOTE */
function show_vclub_vote(){
    _debug('show_vclub_vote()')
    vclub_vote_on = 1
    vclub_vote_step = 1
    need_show_vclub_vote = 0
    show_con_alpha_layer_top()
    document.getElementById('vclub_vote_red_btn_1').style.display = ''
    document.getElementById('vclub_vote_green_btn_1').style.display = ''
    document.getElementById('vclub_vote_red_btn_2').style.display = ''
    document.getElementById('vclub_vote_green_btn_2').style.display = ''
    document.getElementById('vclub_vote').style.display = ''
    document.getElementById('vote_video_name').innerHTML = cur_playing_str
    //document.getElementById('vclub_vote_step_title').innerHTML = 'оценка качества звука'
}

function hide_vclub_vote(){
    _debug('hide_vclub_vote()')
    document.getElementById('vote_video_name').innerHTML = ''
    //document.getElementById('vclub_vote_step_title').innerHTML = ''
    document.getElementById('vclub_vote').style.display = 'none'
    document.getElementById('vclub_audio_vote').style.display = 'none'
    hide_con_alpha_layer_top()
    vclub_vote_on = 0
}

function vclub_vote_next_step(){
    vclub_vote_step++
    if (vclub_vote_step == 2){
        //document.getElementById('vclub_vote_step_title').innerHTML = 'оценка качества видео'
        document.getElementById('vclub_audio_vote').style.display = ''
        //document.getElementById('vclub_vote_red_btn').style.display = ''
        //document.getElementById('vclub_vote_green_btn').style.display = ''
    }else if (vclub_vote_step == 3){
        n_hide_vclub_vote()
    }
}

function n_hide_vclub_vote(){
    window.setTimeout("hide_vclub_vote()", 1500)
}

function vclub_vote(v){
    _debug('vclub_sound_vote('+v+')')
    
    if (v == 'bad'){
        document.getElementById('vclub_vote_green_btn_'+vclub_vote_step).style.display = 'none'
    }else if(v == 'good'){
        document.getElementById('vclub_vote_red_btn_'+vclub_vote_step).style.display = 'none'
    }
    
    if (vclub_vote_step == 1){
        type = 'sound'
    }else{
        type = 'video'
    }
    
    data = {'media_id':last_vclub_played_id_for_vote, 'type':type, 'vote':v}
    _debug('data: '+data.toSource())
    doLoad('vclub_vote', 0, data)
}
/**/

/* RECIPE PAGE */
function show_recipe_page(){
    _debug('show_recipe_page()')
    recipe_page_on = 1
    cur_place = 'recipe'
    media_type = 'infoportal'
    _log('infoportal', '', get_current_place())
    document.getElementById('recipe_page').style.display = ''
    if(prev_recipe_page == ''){
        show_recipes_by_cat()
    }
    if (recipes_by_cat_on){
        kbd_active = 0
        show_kbd('kbd_input')
    }
}

function hide_recipe_page(){
    _debug('hide_recipe_page()')
    document.getElementById('recipe_page').style.display = 'none'
    
    if (!recipe_info_page_on){
        hide_recipes_by_cat()
        prev_recipe_page = ''
    }else{
        prev_recipe_page = 'recipe_page'
    }
    
    recipe_page_on = 0
    media_type = ''
    _log('close_infoportal', '')
    
    if (kbd_on){
        hide_kbd()
    }
}

function switch_on_recipe_page(page_num){
    document.getElementById('recipe_punct_'+page_num).className = "active_punct"
    /*document.getElementById('recipe_punct_'+page_num).className = "top_marks_style3"
    document.getElementById('recipe_punct_l_img_'+page_num).src = "i/insert_b_l.png"
    document.getElementById('recipe_punct_r_img_'+page_num).src = "i/insert_b_r.png"*/
}

function switch_off_recipe_page(page_num){
    document.getElementById('recipe_punct_'+page_num).className = "passive_punct"
    /*document.getElementById('recipe_punct_'+page_num).className = "top_marks_style1"
    document.getElementById('recipe_punct_l_img_'+page_num).src = "i/insert_l.png"
    document.getElementById('recipe_punct_r_img_'+page_num).src = "i/insert_r.png"*/
}

function show_recipe_con_menu(){
    _debug('show_recipe_con_menu()')
    if (tmp_recipes_by_cat_arr[cur_row_recipes_by_cat]){
        recipe_con_menu_on = 1
        document.getElementById('recipe_con_menu').style.display = ''
        
        if (tmp_recipes_by_cat_arr[cur_row_recipes_by_cat].fav == 1){
            document.getElementById('recipe_con_menu_row_1').innerHTML = 'УДАЛИТЬ ЗАКЛАДКУ'
        }else{
            document.getElementById('recipe_con_menu_row_1').innerHTML = 'В ЗАКЛАДКИ'
        }
        
        set_active_recipe_con_menu_row()
        show_con_alpha_layer()
    }
}

function hide_recipe_con_menu(){
    _debug('hide_recipe_con_menu()')
    document.getElementById('recipe_con_menu').style.display = 'none'
    prev_recipe_con_menu_row = cur_recipe_con_menu_row
    set_passive_recipe_con_menu_row()
    cur_recipe_con_menu_row = 0
    prev_recipe_con_menu_row = 1
    recipe_con_menu_on = 0
    hide_con_alpha_layer()
}

function shift_recipe_con_menu(shift_row){
    _debug('shift_recipe_con_menu()')
    prev_recipe_con_menu_row = cur_recipe_con_menu_row
    if (shift_row>0){
        if(shift_row + cur_recipe_con_menu_row > total_recipe_con_menu_rows-1){
            cur_recipe_con_menu_row = 0
        }else{
            cur_recipe_con_menu_row++
        }
    }else{
        if(shift_row + cur_recipe_con_menu_row < 0){
            cur_recipe_con_menu_row = total_recipe_con_menu_rows-1
        }else{
            cur_recipe_con_menu_row --
        }
    }
    set_active_recipe_con_menu_row()
}

function set_active_recipe_con_menu_row(){
    _debug('set_active_recipe_con_menu_row()')
    set_passive_recipe_con_menu_row()
    class_changer('recipe_con_menu_row_', cur_recipe_con_menu_row, "hover")
}

function set_passive_recipe_con_menu_row(){
    _debug('set_passive_recipe_con_menu_row()')
    class_changer('recipe_con_menu_row_', prev_recipe_con_menu_row, "unhover")
}

function call_recipe_con_menu_func(){
    _debug('call_recipe_con_menu_func()')
    eval(func_recipe_con_menu[cur_recipe_con_menu_row])
}
/**/

/* RECIPES BY CAT */
function show_recipes_by_cat(){
    _debug('show_recipes_by_cat()')
    recipes_by_cat_on = 1
    cur_recipes_cat_bar = 0
    fav_recipes_on = 0
    document.getElementById('recipes_by_cat').style.display = ''
    
    need_recipes_by_cat_row_focus = 1
    show_recipes_cat_bar()
    switch_off_recipe_page(2)
    switch_on_recipe_page(1)
    load_recipes_by_cat(0)
}

function hide_recipes_by_cat(){
    _debug('hide_recipes_by_cat()')
    document.getElementById('recipes_by_cat').style.display = 'none'
    
    hide_recipes_cat_bar()
    set_passive_all_recipes_by_cat_row()
    recipes_by_cat_on = 0
    switch_off_recipe_page(1)
    cur_row_recipes_by_cat = 0
    prev_row_recipes_by_cat = 1
    cur_recipes_by_cat_page = 1
}

function shift_recipes_by_cat(shift_row){
    _debug('shift_recipes_by_cat('+shift_row+')')
    prev_row_recipes_by_cat = cur_row_recipes_by_cat
    if(shift_row > 0){
        if(cur_row_recipes_by_cat < max_recipes_by_cat_rows-1){
            cur_row_recipes_by_cat++
            set_active_recipes_by_cat_row()
        }else{
            shift_recipes_by_cat_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_recipes_by_cat > 0){
            cur_row_recipes_by_cat --
            set_active_recipes_by_cat_row()
        }else{
            shift_recipes_by_cat_page(-1)
        }
    }
}

function shift_recipes_by_cat_page(dir){
     _debug('shift_recipes_by_cat_page('+dir+')')
    if (dir > 0){
        if (cur_recipes_by_cat_page < total_recipes_by_cat_pages){
            cur_recipes_by_cat_page++
            need_recipes_by_cat_row_focus = 1
            set_passive_all_recipes_by_cat_row()
            load_recipes_by_cat(cur_recipes_by_cat_page)
            cur_row_recipes_by_cat = 0
        }
    }else if (dir < 0){
        if (cur_recipes_by_cat_page > 1){
            cur_recipes_by_cat_page--
            need_recipes_by_cat_row_focus = 1
            set_passive_all_recipes_by_cat_row()
            load_recipes_by_cat(cur_recipes_by_cat_page)
            cur_row_recipes_by_cat = 9
        }
    }
}

/*function disable_recipes_by_cat_row(){
    _debug('disable_recipes_by_cat_row()')
    if(cur_row_recipes_by_cat > 0 && cur_row_recipes_by_cat <= max_recipes_by_cat_rows){
        document.getElementById('recipes_by_cat_row_'+cur_row_recipes_by_cat).className = 'video_td'
        cur_row_recipes_by_cat = 0
        prev_row_recipes_by_cat = 1
    }
}*/

function set_active_recipes_by_cat_row(){
    _debug('set_active_recipes_by_cat_row()')
    _debug('cur_row_recipes_by_cat: '+cur_row_recipes_by_cat)
    set_passive_recipes_by_cat_row()
    class_changer('recipes_by_cat_row_', cur_row_recipes_by_cat, "hover")
}

function set_passive_recipes_by_cat_row(){
    _debug('set_passive_recipes_by_cat_row()')
    _debug('prev_row_recipes_by_cat: '+prev_row_recipes_by_cat)
    class_changer('recipes_by_cat_row_', prev_row_recipes_by_cat, "unhover")
}

function set_passive_all_recipes_by_cat_row(){
    _debug('set_passive_all_recipes_by_cat_row()')
    _debug('cur_row_recipes_by_cat: '+cur_row_recipes_by_cat)
    class_changer('recipes_by_cat_row_', cur_row_recipes_by_cat, "unhover")
}

function load_recipes_by_cat(page){
    _debug('load_recipes_by_cat('+page+')')
    cur_recipe_cat_id = get_recipe_cat_id()
    chars = document.getElementById('kbd_input').value
    data = {'cat_id' : cur_recipe_cat_id, 'fav' : fav_recipes_on}
    _debug('data: '+data.toSource())
    if (chars.length >= 3 || chars.length == 0){
        doLoad('recipes_by_cat&s='+chars, page, data)
    }
    normlight_recipes_cat_bar_row()
    hightlight_recipes_cat_bar_row()
}

function fill_recipes_by_cat(arr){
    _debug('fill_recipes_by_cat()')
    recipes_page_bar(cur_recipes_by_cat_page ,total_recipes_by_cat_pages)
    tmp_recipes_by_cat_arr = arr
    max_recipes_by_cat_rows = arr.length
    _debug('max_recipes_by_cat: '+max_recipes_by_cat_rows)
    var arr_length = arr.length
    for(tv_n_i = 0; tv_n_i < arr_length; tv_n_i++){
        document.getElementById('recipes_by_cat_title_'+(tv_n_i)).innerHTML = arr[tv_n_i].name
        if (arr[tv_n_i].fav == 1){
            document.getElementById('recipes_by_cat_fav_'+(tv_n_i)).innerHTML = '&bull;'
        }else{
            document.getElementById('recipes_by_cat_fav_'+(tv_n_i)).innerHTML = ''
        }
    }
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('recipes_by_cat_title_'+(tv_i)).innerHTML = ''
            document.getElementById('recipes_by_cat_fav_'+(tv_i)).innerHTML = ''
        }
    }
    _debug('need_recipes_by_cat_row_focus: '+need_recipes_by_cat_row_focus)
    if (need_recipes_by_cat_row_focus){
        set_active_recipes_by_cat_row()
        need_recipes_by_cat_row_focus = 0
    }
}

function del_recipes_by_cat(){
    _debug('del_recipes_by_cat()')
    recipes_page_bar(cur_recipes_by_cat_page ,total_recipes_by_cat_pages)
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('recipes_by_cat_title_'+(tv_n_i)).innerHTML = ''
    }
    max_recipes_by_cat_rows = 0
}
/**/

/* RECIPE CATEGORY BAR */
function show_recipes_cat_bar(){
    _debug('show_recipes_cat_bar()')
    document.getElementById('recipe_cat_bar').style.display = ''
    need_recipes_cat_bar_focus = 0
    hightlight_recipes_cat_bar_row()
    load_recipes_cat_bar(0)
}

function hide_recipes_cat_bar(){
    _debug('hide_recipes_cat_bar()')
    document.getElementById('recipe_cat_bar').style.display = 'none'
    set_passive_all_recipes_cat_bar_row()
    hide_recipe_con_menu()
    normlight_recipes_cat_bar_row()
    prev_row_recipes_cat_bar = 1
    cur_row_recipes_cat_bar = 0
    cur_recipes_cat_bar_page = 1    
}

function shift_recipes_cat_bar(shift_row){
    _debug('shift_recipes_cat_bar('+shift_row+')') 
    prev_row_recipes_cat_bar = cur_row_recipes_cat_bar
    if(shift_row > 0){
        if(cur_row_recipes_cat_bar < max_recipes_cat_bar_rows-1){
            cur_row_recipes_cat_bar++
            set_active_recipes_cat_bar_row()
        }else{
            shift_recipes_cat_bar_page(1)
        }
    }else if(shift_row < 0){
        if(cur_row_recipes_cat_bar > 0){
            cur_row_recipes_cat_bar --
            set_active_recipes_cat_bar_row()
        }else{
            shift_recipes_cat_bar_page(-1)
        }
    }
}

function shift_recipes_cat_bar_page(dir){
     _debug('shift_recipes_cat_bar_page('+dir+')')
    if (dir > 0){
        if (cur_recipes_cat_bar_page < total_recipes_cat_bar_pages){
            set_passive_all_recipes_cat_bar_row()
            cur_recipes_cat_bar_page++
            normlight_recipes_cat_bar_row()
            need_recipes_cat_bar_focus = 1
            cur_row_recipes_cat_bar = 0
            load_recipes_cat_bar(cur_recipes_cat_bar_page-1)
            
        }
    }else if (dir < 0){
        if (cur_recipes_cat_bar_page > 1){
            set_passive_all_recipes_cat_bar_row()
            cur_recipes_cat_bar_page--
            normlight_recipes_cat_bar_row()
            need_recipes_cat_bar_focus = 1
            cur_row_recipes_cat_bar = 9
            load_recipes_cat_bar(cur_recipes_cat_bar_page-1)
        }
    }
}

function load_all_recipe_cats(){
    _debug('load_all_recipe_cats()')
    doLoad('all_recipe_cats', 1)
}

function get_recipe_cat_id(){
    _debug('get_recipe_cat_id()')
    idx = (cur_recipes_cat_bar_page-1)*10 + cur_row_recipes_cat_bar
    _debug('cur_recipes_cat_bar_page: '+cur_recipes_cat_bar_page)
    _debug('idx: '+idx)
    return recipe_cats_id[idx]
}

function get_recipe_cats_from_raw(arr){
    _debug('get_recipe_cats_from_raw()')
    recipe_cats = ['ВСЕ']
    recipe_cats_id = [0]
    for (i=0; i<arr.length; i++){
        recipe_cats[i+1] = arr[i].title
        recipe_cats_id[i+1] = arr[i].id
    }
    total_recipes_cat_bar_pages = Math.ceil(recipe_cats.length/10)
}

function load_recipes_cat_bar(page){
    _debug('load_recipes_cat_bar('+page+')')
    begin = (page)*10
    end = (page+1)*10
    _debug('slice begin: '+begin)
    _debug('slice end: '+end)

    recipe_slice = recipe_cats.slice(begin,end)
    _debug('genre_slice: '+recipe_slice)
    fill_recipes_cat_bar(recipe_slice)
}

function fill_recipes_cat_bar(arr){
    _debug('fill_recipes_cat_bar()')
    tmp_recipes_cat_bar_arr = arr
    arr_length = max_recipes_cat_bar_rows = arr.length
    _debug('max_recipes_cat_bar_rows: '+max_recipes_cat_bar_rows)
    for(tv_n_i = 0; tv_n_i < arr.length; tv_n_i++){
        document.getElementById('recipe_cat_text_'+(tv_n_i)).innerHTML = arr[tv_n_i]
    }
    
    _debug('end fill')
    if (arr_length <= 9){
        for(tv_i = arr_length; tv_i < 10; tv_i++){
            document.getElementById('recipe_cat_text_'+(tv_i)).innerHTML = ''
        }
    }
    
    if (need_recipes_cat_bar_focus){
        set_active_recipes_cat_bar_row()
        need_recipes_cat_bar_focus = 0
    }
}

function del_recipes_cat_bar(){
    _debug('del_recipes_cat_bar()')
    for(tv_n_i = 0; tv_n_i < 10; tv_n_i++){
        document.getElementById('recipe_cat_text_'+(tv_n_i)).innerHTML = ''
    }
    max_recipes_cat_bar_rows = 0
}

function set_active_recipes_cat_bar_row(){
    _debug('set_active_recipes_cat_bar_row()')
    _debug('cur_row_recipes_cat_bar: '+cur_row_recipes_cat_bar)
    set_passive_recipes_cat_bar_row()
    class_changer('recipe_cat_row_', cur_row_recipes_cat_bar, "hover")
}

function set_passive_recipes_cat_bar_row(){
    _debug('set_passive_recipes_cat_bar_row()')
    class_changer('recipe_cat_row_', prev_row_recipes_cat_bar, "unhover")
}

function set_passive_all_recipes_cat_bar_row(){
    _debug('set_passive_all_recipes_cat_bar_row()')
    _debug('cur_row_recipes_cat_bar: '+cur_row_recipes_cat_bar)
    class_changer('recipe_cat_row_', cur_row_recipes_cat_bar, "unhover")
}

function hightlight_recipes_cat_bar_row(){
    lighted_row_recipes_cat = cur_row_recipes_cat_bar
    class_changer('recipe_cat_row_', lighted_row_recipes_cat, "hightlight")
}

function normlight_recipes_cat_bar_row(){
    class_changer('recipe_cat_row_', lighted_row_recipes_cat, "normlight")
}
/**/

/* RECIPE INFO PAGE */
function show_recipe_info_page(){
    _debug('show_recipe_info_page()')
    recipe_info_page_on = 1
    document.getElementById('recipe_info_page').style.display = ''
    document.getElementById('recipe_info_page_name').innerHTML = ''
    //document.getElementById('recipe_info_page_ingredients').innerHTML = ''
    document.getElementById('recipe_info_page_descr').innerHTML = ''
    document.getElementById('recipe_info_page_descr').scrollTop = 0
    
    item_for_recipe_info_page = tmp_recipes_by_cat_arr[cur_row_recipes_by_cat]
    
    fill_recipe_info_page()
}

function hide_recipe_info_page(){
    _debug('hide_recipe_info_page()')
    document.getElementById('recipe_info_page_descr').blur()
    document.getElementById('recipe_info_page_descr').scrollTop = 0
    document.getElementById('recipe_info_page').style.display = 'none'
    recipe_info_page_on = 0
}

function fill_recipe_info_page(){
    _debug('fill_recipe_info_page()')
    document.getElementById('recipe_info_page_name').innerHTML = item_for_recipe_info_page.name
    document.getElementById('recipe_info_page_descr').innerHTML = '<i>' + item_for_recipe_info_page.ingredients + '</i><br><br>' + item_for_recipe_info_page.descr
    document.getElementById('recipe_info_page_descr').focus()
}
/**/

/* FAV RECIPES */
function add_del_to_recipes_fav(){
    _debug('add_del_to_recipes_fav()')
    
    new_id = tmp_recipes_by_cat_arr[cur_row_recipes_by_cat].id
    _debug('new_id: '+new_id)
    
    if(tmp_recipes_by_cat_arr[cur_row_recipes_by_cat].fav == 1){
        _debug('del')
        del_id_from_recipes_fav(new_id)
        tmp_recipes_by_cat_arr[cur_row_recipes_by_cat].fav = 0
        document.getElementById('recipes_by_cat_fav_'+cur_row_recipes_by_cat).innerHTML = ''
        
    }else{
        _debug('add')
        add_id_to_recipes_fav(new_id)
        tmp_recipes_by_cat_arr[cur_row_recipes_by_cat].fav = 1
        document.getElementById('recipes_by_cat_fav_'+cur_row_recipes_by_cat).innerHTML = '&bull;'
    }
}

function add_id_to_recipes_fav(id){
    _debug('add_id_to_recipes_fav('+id+')')
    doLoad('add_recipes_fav', 1, id)
}

function del_id_from_recipes_fav(id){
    _debug('del_id_from_recipes_fav('+id+')')
    doLoad('del_recipes_fav', 1, id)
}

function show_fav_recipes(){
    _debug('show_fav_recipes()')
    set_passive_all_recipes_by_cat_row()
    set_passive_all_recipes_cat_bar_row()
    fav_recipes_on = 1
    recipes_by_cat_on = 1
    cur_recipes_cat_bar = 0
    cur_row_recipes_by_cat = 0
    prev_row_recipes_by_cat = 1
    cur_recipes_by_cat_page = 1
    need_recipes_by_cat_row_focus = 1
    switch_off_recipe_page(1)
    switch_on_recipe_page(2)
    load_recipes_by_cat(0)
}
/**/

/* PORTAL LOADING BAR */
function portal_loading_bar(percent){
    _debug('portal_loading_bar('+percent+')')
    document.getElementById('portal_loading_bar_per').style.width = percent + '%'
}

function hide_portal_loading_bar(){
    document.getElementById('portal_loading_bar').style.display = 'none'
}
/**/

/* EPG LOADER */
var epg_loader = {
    
    timeout  : 21600000, // 6h
    timer_id : 0,
    epg : [],
    
    start : function(){
        this.load()
        this.timer_id = window.setInterval(this.load, this.timeout)
    },
    
    stop : function(){
        window.clearInterval(this.timer_id)
    },
    
    load : function(){
        doLoad('epg_info',0)
    },
    
    set_epg : function(data){
        this.epg = data
        _debug('set_epg: '+this.epg.toSource())
    },
    
    get_epg : function(ch_id){
        
        var now = Date.parse(new Date())/1000;
        var result = '';
        
        _debug('now: '+now)
        
        try{
            if (typeof(this.epg[ch_id]) == 'object' && this.epg[ch_id].length > 0){
                _debug('this.epg[ch_id].length: '+this.epg[ch_id].length)
                for (var i=0; i < this.epg[ch_id].length; i++){
                    _debug('i: '+i)
                    if (this.epg[ch_id][i]['start_timestamp'] < now){
                        _debug('continue')
                        continue
                    }else if (this.epg[ch_id][i]['start_timestamp'] == now){
                        result = this.epg[ch_id][i].time + ' ' + this.epg[ch_id][i].name
                        if (typeof(this.epg[ch_id][i+1]) == 'object'){
                            result += '<br>'+this.epg[ch_id][i+1].t_time + ' ' + this.epg[ch_id][i+1].name
                        }
                        return result
                    }else{
                        if (typeof(this.epg[ch_id][i-1]) == 'object'){
                            result = this.epg[ch_id][i-1].t_time + ' ' + this.epg[ch_id][i-1].name
                            if (typeof(this.epg[ch_id][i]) == 'object'){
                                result += '<br>'+this.epg[ch_id][i].t_time + ' ' + this.epg[ch_id][i].name
                            }
                            return result
                        }
                    }
                }
            }
        }catch(e){
            _debug(e)
        }
        return '';
    }
}
/**/

/* MEDIA BROWSER */
function media_browser(){
    
    this.on = 0;
    
    this.mounted = 0;
    
    this.dir_hist = [{'path' : '/media/usbdisk/', 'page' : 1, 'row' : 1}];
    
    this.cur_dir_list;
    
    this.cur_row  = 0;
    this.prev_row = 1;
    this.max_rows = 0;
    this.cur_page = 1;
    this.total_pages = 0;
    this.page_items = [];
    this.is_audio;
    
    this.hidden = 0;
    
    this.layer_dom_obj = document.getElementById('media_browser_page');
    
    stb.SetListFilesExt('.mpg .mkv .avi .ts .mp4 .wmv .mp3 .ac3 .mov .vob .wav');
    
    this.check_mounted();
}

media_browser.prototype.show = function(){
    _debug('media_browser.show');
    
    this.layer_dom_obj.style.display = 'block';
    
    this.on = 1;
    
    if(!this.hidden){
        this.dir_list();
    }
    this.hidden = 0
}
    
media_browser.prototype.hide = function(dont_reset){
    _debug('media_browser.hide');
    
    this.layer_dom_obj.style.display = 'none';
    this.on = 0;
    
    if (!dont_reset){
        this.reset_dir_hist()
        
        this.reset();
    }else{
        this.hidden = 1;
    }
}
    
media_browser.prototype.shift_row = function(dir){
    _debug('media_browser.shift_row('+dir+')');
    
    this.prev_row = this.cur_row;
    
    if (dir > 0){
        if (this.cur_row < this.max_rows - 1){
            this.cur_row++;
            this.set_active_row();
        }else{
            this.shift_page(1);
        }
    }else{
        if (this.cur_row > 0){
            this.cur_row--;
            this.set_active_row();
        }else{
            this.shift_page(-1);
        }
    }
}
    
media_browser.prototype.shift_page = function(dir){
    _debug('media_browser.shift_page('+dir+')');
    
    if (dir > 0){
        if (this.cur_page < this.total_pages){
            
            this.cur_page++;
            this.set_passive_all_rows();
            this.cur_row = 0;
            this.show_dir_list(this.cur_page);
        }
    }else{
        if (this.cur_page > 1){
            this.cur_page--;
            this.set_passive_all_rows();
            this.cur_row = 9;
            this.show_dir_list(this.cur_page);
        }
    }
}
    
media_browser.prototype.dir_list = function(){
    _debug('media_browser.dir_list');
    
    var txt = stb.ListDir(this.compile_path());
    
    _debug(txt);
    
    eval(txt);
    
    var list = dirs.concat(files);
    
    //this.cur_row = 0;
    //this.prev_row = 1;
    //this.cur_page = 1;
    
    if (this.dir_hist.length == 1){
        var clear_arr = [];
    }else{
        var clear_arr = ['..'];
    }
    
    for (var i=0; i < list.length; i++){
        if (!empty(list[i])){
            clear_arr.push(list[i]);
        }
    }
    
    this.total_pages = Math.ceil(clear_arr.length/10);
    
    _debug('media_browser.total_pages: '+this.total_pages);
    
    this.cur_dir_list = clear_arr;
    
    this.show_dir_list(this.cur_page)
}
    
media_browser.prototype.show_dir_list = function(page){
    _debug('media_browser.show_dir_list('+page+')');
    
    var begin = (page-1)*10;
    var end   = page*10;
    
    this.page_items = this.cur_dir_list.slice(begin,end);
    
    this.fill(this.page_items);
}
    
media_browser.prototype.fill = function(arr){
    _debug('media_browser.fill');
    this.fill_page_bar();
    this.max_rows = arr.length;
    
    _debug('media_browser.max_rows: '+this.max_rows);
    
    for(var i = 0; i <= 9; i++){
        
        if (arr.hasOwnProperty(i)){
            if (arr[i].hasOwnProperty('name')){
                document.getElementById('media_browser_file_'+i).innerHTML = arr[i].name;
            }else{
                if (!empty(arr[i])){
                    document.getElementById('media_browser_file_'+i).innerHTML = arr[i];
                }
            }
        }else{
            document.getElementById('media_browser_file_'+i).innerHTML = '';
        }
    }
    
    this.set_active_row();
}

media_browser.prototype.fill_page_bar = function(){
    document.getElementById('media_browser_page_bar').innerHTML = create_page_bar_str(this.cur_page, this.total_pages)
}
    
media_browser.prototype.set_active_row = function(){
    _debug('media_browser.set_active_row');
    this.set_passive_row();
    r_class_changer('media_browser_row_', this.cur_row, "hover");
}
    
media_browser.prototype.set_passive_row = function(){
    _debug('media_browser.set_passive_row');
    r_class_changer('media_browser_row_', this.prev_row, "unhover");
}
    
media_browser.prototype.set_passive_all_rows = function(){
    _debug('media_browser.set_passive_all_rows');
    r_class_changer('media_browser_row_', this.cur_row, "unhover");
}
    
media_browser.prototype.drive_mounted = function(){
    _debug('drive_mounted');
    this.mounted = 1;
    this.dir_list();
    show_warning_message('USB устройство подключено');
}
    
media_browser.prototype.drive_umounted = function(){
    _debug('drive_umounted');
    this.mounted = 0;
    show_warning_message('USB устройство отключено');
    
    if (this.hidden || (this.on && this.is_audio)){
        
        if (player_on){
            stop()
            hide_black()
            stb.SetDefaultFlicker(1)
        }
        
        this.hide();
        show_club();
    }
}
    
media_browser.prototype.is_drive_mounted = function(){
    
    if (this.mounted){
        return true;
    }
    show_warning_message('USB устройство не обнаружено');
    return false;
}
    
media_browser.prototype.compile_path = function(){
    var path = '';
    for(var i=0; i<this.dir_hist.length; i++){
        path += this.dir_hist[i].path;
    }
    
    return path;
}
    
media_browser.prototype.action = function(not_play){
    if (typeof(this.page_items[this.cur_row]) == 'string'){
        
        if (this.page_items[this.cur_row] == '..'){
            this.out_dir();
        }else{
            this.in_dir(this.page_items[this.cur_row]);
        }
    }else{
        if(!not_play){
            this.play(this.page_items[this.cur_row].name)
        }
    }
}
    
media_browser.prototype.in_dir = function(dir){
    
    this.dir_hist[this.dir_hist.length - 1].page = this.cur_page;
    this.dir_hist[this.dir_hist.length - 1].row  = this.cur_row;
    
    var hist_item = {'path' : dir , 'page' : 1, 'row' : 1};
    
    this.dir_hist.push(hist_item);
    
    this.reset();
    
    this.dir_list();
}
    
media_browser.prototype.out_dir = function(){
    if (this.dir_hist.length > 1){
        this.dir_hist.pop();
        
        this.reset()
        
        this.cur_row  = this.dir_hist[this.dir_hist.length - 1].row;
        this.cur_page = this.dir_hist[this.dir_hist.length - 1].page;
        
        this.dir_list();
    }
}
    
media_browser.prototype.play = function(file){
    
    var p_file = this.compile_path() + file;
    
    var type = get_file_type(file);
    
    if (type == 'audio'){
        this.is_audio = true;
    }else{
        this.is_audio = false;
        this.hide(true);
    }
    
    show_playing(file, 0, type);
    
    var play_cmd = 'auto ' + p_file;
    
    media_type = define_media_type(play_cmd);
    
    to_play_now(play_cmd);
}
    
media_browser.prototype.reset = function(){
    
    this.set_passive_all_rows();
    
    this.cur_row  = 0;
    this.prev_row = 1;
    this.max_rows = 0;
    this.cur_page = 1;
    this.total_pages = 1;
    this.hidden = 0;
}

media_browser.prototype.reset_dir_hist = function(){
    _debug('media_browser.reset_dir_hist');
    
    this.dir_hist.splice(1, this.dir_hist.length-1);
}

media_browser.prototype.check_mounted = function(){
    _debug('media_browser.check_mounted');
    
    var txt = stb.ListDir(this.compile_path());
    
    eval(txt);
    
    var list = dirs.concat(files);
    
    for (var i=0; i < list.length; i++){
        if (!empty(list[i])){
            this.drive_mounted();
            return;
        }
    }
    
    return;  
}
/* END MEDIA BROWSER */

function empty(val){
    
    var type = typeof(val);
    
    if (type == 'string' && val == ''){
        return true;
    }else if (type == 'undefined'){
        return true;
    }else{
        if (type == 'object'){
            for(var p in val){
                if (val.hasOwnProperty(p)){
                    return false;
                }
            }
            
            return true;
        }
    }
    
    return false;
}

function get_file_type(cmd){
    
    var p = /^(.*)\.(\S+)$/
    var ext = ['mp3', 'ac3', 'mov', 'vob', 'wav'];

    if (ext.indexOf(cmd.replace(p, "$2")) != -1){
        return 'audio';
    }else{
        return 'video';
    }
}

/* AUDIO TRACK SWITCH */

function atrack_switch(){
    
    this.on = 0;
    this.cur_pid;
    this.cur_pid_idx = 0;
    this.all_pids;
    this.info_t;
    
}

atrack_switch.prototype.reset = function(){
    
    delete this.cur_pid;
    delete this.all_pids;
    this.cur_pid_idx = 0;
    
}

atrack_switch.prototype.get_all_pids = function(){
    _debug('atrack_switch.get_all_pids()');
    
    this.reset();
    
    var all_pids = stb.GetAudioPIDs();
    _debug('all_pids: '+all_pids);
    
    this.all_pids = eval('(' + all_pids + ')');
    
    this.get_cur_pid();
}

atrack_switch.prototype.get_cur_pid = function(){
    _debug('atrack_switch.get_cur_pid()');
    
    this.cur_pid = stb.GetAudioPID();
    _debug('cur_pid: '+this.cur_pid);
    
    this.cur_pid_idx = this.get_idx_by_pid(this.cur_pid);
    
}

atrack_switch.prototype.get_idx_by_pid = function(pid){
    
    for(var i=0; i<this.all_pids.length; i++){
            
        if (this.all_pids[i].pid == pid){
            return i;
        }
    }
    
    return null;
}

atrack_switch.prototype.set_cur_pid = function(){
    _debug('atrack_switch.set_cur_pid()');
    
    _debug('lang[0]: '+this.all_pids[this.cur_pid_idx].lang[0]);
    _debug('lang[1]: '+this.all_pids[this.cur_pid_idx].lang[1]);
    _debug('pid: '+this.all_pids[this.cur_pid_idx].pid);
    
    this.cur_pid = this.all_pids[this.cur_pid_idx].pid;
    
    this.show_cur_lang();
    stb.SetAudioPID(this.cur_pid);
    _debug('SetAudioPID ended');
}

atrack_switch.prototype.show_cur_lang = function(){
    _debug('atrack_switch.show_cur_pid()');
    
    var lang = '';
    
    if (this.all_pids[this.cur_pid_idx].lang[1] != ''){
        lang = this.all_pids[this.cur_pid_idx].lang[1];
    }else if (this.all_pids[this.cur_pid_idx].lang[0] != ''){
        lang = this.all_pids[this.cur_pid_idx].lang[0];
    }else{
        lang = this.cur_pid_idx+1;
    }
    
    document.getElementById('atrack_info').innerHTML = 'Аудио дорожка: '+lang;
    document.getElementById('atrack_info').style.display = 'block';
    
    if (this.info_t){
        window.clearTimeout(this.info_t);
    }
    
    this.info_t = window.setTimeout(function(){document.getElementById('atrack_info').style.display = 'none'}, 3000)
}

atrack_switch.prototype.shift = function(dir){
    _debug('atrack_switch.shift('+dir+')');
    
    if (dir > 0){
        if (this.cur_pid_idx < this.all_pids.length - 1){
            this.cur_pid_idx++;
        }else{
            this.cur_pid_idx = 0;
        }
    }else{
        if (this.cur_pid_idx > 0){
            this.cur_pid_idx--;
        }else{
            this.cur_pid_idx = this.all_pids.length - 1;
        }
    }
    
    this.set_cur_pid();
}
/* END AUDIO TRACK SWITCH */


/* CONTEXT MENU */
function context_menu(map){
    
    this.on = 0;
    this.offset_x = 0;
    this.offset_y = 0;
    this.z_index  = 0;
    this.map = [];
    this.dom_obj;
    
    this.construct_menu(this.map);
}

context_menu.prototype.construct_menu = function(map, parent){
    _debug('context_menu.construct_menu('+map+', '+parent+')');
    
    var dom_obj = document.createElement("ul");
    
    dom_obj.className = 'context_menu';
    dom_obj.style.display = 'none';
    
    if (map == this.map){
        this.dom_obj = dom_obj;
    }
    
    for (var i=0; i<map.lenght; i++){
        
        if (typeof(map[i].cmd) == 'object'){
            
            this.construct_menu(map[i].cmd, dom_obj);
        }else{
            
            map[i].dom_obj = document.createElement("li");
            map[i].dom_obj.innerHTML = map[i].title;
            dom_obj.appendChild(map[i].dom_obj);
        }
    }
    
    document.body.appendChild(dom_obj);
}

context_menu.prototype.set_x_offset = function(x){
    _debug('context_menu.set_x_offset('+x+')');
    
    this.dom_obj.style.left = parseInt(x) + 'px';
}

context_menu.prototype.set_y_offset = function(y){
    _debug('context_menu.set_y_offset('+y+')');
    
    this.dom_obj.style.top = parseInt(y) + 'px';
}

context_menu.prototype.set_z_index = function(z){
    _debug('context_menu.set_z_index('+z+')');
    
    this.dom_obj.style.zIndex = parseInt(z) + 'px';
}
/* END CONTEXT MENU */

</script>
</head>
<body marginheight="0" marginwidth="0" id="body" onkeydown="getkeydown(event)"  onKeyPress="getkeypress(event)" onload="init()">
<iframe src="" width="0" height="0" scrolling="no" frameborder="0" id="fframe"></iframe>
<!-- Main Layer -->
<div id="main" class="main">
</div>

<div id="play" class="play_osd_all" style="display:none;">
</div>

<!-- Seek BAR -->
<div id="seek_bar" class="seek_bar" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
    
    <div style="z-index:888; position:absolute; left: 70px; top: 385px;">
     <table border="0" width="520" height="25" align="center" cellpadding="0" cellspacing="0">
      <tr>
        <td width="20" class="seek_bar_left">&nbsp;</td>
        <td align="center" valign="center" width="400" background="i/bg_seek_bar.gif" nowrap></td>
        <td width="100" class="seek_bar_time"><span id="seek_bar_time"></span></td>
      </tr>
     </table>
    </div>
    
    <div id="seek_button" style="z-index:888; position:absolute; left: 110px; top: 385px;">
        <img src="i/seek_button.png">
    </div>
    
  </div>
</div>

<!-- Mute -->
<div id="mute" class="mute" style="display:none;">
<table align="right" border="0" width="640" height="480" cellpadding="0" cellspacing="0">
  <tr>
    <td nowrap height="40">&nbsp;</td>
  </tr>
  <tr>
    <td align="right" valign="top"><img src="i/novol.gif"></td>
    <td align="right" valign="top" nowrap width="40">&nbsp;</td>
  </tr>
</table>
</div>

<!-- Black Screen -->
<div id="black" class="black_all" style="display:none;"></div>
    
<!-- Alert -->
<div id="alert" class="alert" style="display:none;">
<table width="640" height="480" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td valign="middle">
        <table border="1" width="250" height="100" align="center">
          <tr>
            <td align="center" valign="bottom" bgcolor="#EFEFEF" width="100%">
            <div id="alert_txt"></div>
            <br>
            <input type="button" id="alert_ok" value="OK" onclick="document.getElementById('alert').style.display = 'none';">
            </td>
          </tr>
        </table>
    </td>
  </tr>
</table>
</div>


<!-- 2D MENU-->
<div id="d_menu"  class="d_menu" style="display:none;">
<div style="position:absolute;left:445px;top:48px;"><script>if(browser == 'webkit')echo('<img src="i/logo_anim.gif">')</script></div>
<table border="0" width="640" height="480">
  <tr>
    <td>
       <div style="position:absolute;left:72px;top:67px;text-align:center;width:200px;">
       
        <span id="cur_time" style="position:absolute;left:19px;top:-28px;color:#ffffff;font-size: 25px;"></span>
        
        <div id="cur_year"></div>
        <div id="cur_day"></div>
        <div id="cur_month"></div>
        <div id="cur_day_of_week"></div>

       </div>
       
       <div style="position:absolute;right:208px;top:-4px;">
       <table border="0" cellpadding="0" cellspacing="0" width="200">
       <tr>
        <td style="background-image: url('i/white2_bg.png'); background-position: bottom right;background-repeat: no-repeat;"><img src="i/1x1.gif" width="10"></td>
        <td align="center" style="padding-top: 45px;padding-right: 10px; padding-bottom: 15px; background-image: url('i/white_bg.png'); background-position: bottom right;background-repeat: no-repeat;">
          <div id="cur_weather_bar" class="cur_weather">
          </div>
        </td>
       </tr>
       </table>
       </div>
       
       <!--<div id="cur_weather_bar" class="cur_weather">
       </div>-->
       
        <div id="menu_0_0" style="position:absolute;left:50px;top:48px;"><img src="i/1x1.gif" id="menu_img_0_0"></div>
        <div id="menu_0_1" style="position:absolute;left:250px;top:48px;"><img src="i/1x1.gif" id="menu_img_0_1"></div>
        <div id="menu_0_2" style="position:absolute;left:450px;top:48px;"><img src="i/1x1.gif" id="menu_img_0_2"></div>
        
        <div id="menu_1_0" style="position:absolute;left:50px;top:198px;"><img src="i/1x1.gif" id="menu_img_1_0"><div id="media_club_update_icon" style="display:none;position:absolute;left:165px;top:44px;"><img src="i/refreshed.png"></div></div>
        <div id="menu_1_1" style="position:absolute;left:250px;top:198px;"><img src="i/1x1.gif" id="menu_img_1_1"></div>
        <div id="menu_1_2" style="position:absolute;left:450px;top:198px;"><img src="i/1x1.gif" id="menu_img_1_2"></div>
        
        <div id="menu_2_0" style="position:absolute;left:50px;top:348px;"><img src="i/1x1.gif" id="menu_img_2_0"></div>
        <div id="menu_2_1" style="position:absolute;left:250px;top:348px;"><img src="i/1x1.gif" id="menu_img_2_1"></div>
        <div id="menu_2_2" style="position:absolute;left:450px;top:348px;"><img src="i/1x1.gif" id="menu_img_2_2"><div id="infoportal_update_icon" style="display:none;position:absolute;left:165px;top:44px;"><img src="i/refreshed.png"></div>
        <div style="position:absolute;left:158px;top:0px;"><img src="i/new_label.png"></div>
        </div>
        
        <div id="ver" align="right" style="position:absolute;left:620px;top:510px;color:#efefef;"></div>
    </td>
  </tr>
</table>
</div>
<!---->

<!-- SPEED TITLE -->
<div id="speed_title" style="display:none;"></div>
<!---->

<!-- ATRACK INFO -->
<div id="atrack_info" style="display:none;"></div>
<!---->

<!-- TV PAGE CON MENU -->
<div id="tv_by_number_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
          <td rowspan="9" bgcolor="#66aaee"></td>
            <td height="20" id="con_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="9" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="con_menu_row_1" class="black_row"><script>echo(words['show_tv_program'])</script></td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="con_menu_row_2" class="grey_row"><script>echo(words['add_to_fav'])</script>&nbsp;</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="con_menu_row_3" class="grey_row"><script>echo(words['sub_unsub'])</script></td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="con_menu_row_4" class="black_row"><script>echo(words['back'])</script></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
    </div>
    
    <div id="tv_program_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
            <td rowspan="8" bgcolor="#66aaee"></td>
            <td height="20" id="prog_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="8" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="prog_menu_row_1" class="grey_row"><script>echo(words['add_in_playlist'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="prog_menu_row_2" class="grey_row"><script>echo(words['add_in_my_archive'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="prog_menu_row_3" class="black_row"><script>echo(words['exit'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
    </div>
<!--  -->

<!-- TV PAGE -->
<div id="tv_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['tv'])</script></div>
    <div id="tv_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
    <div id="tv_loading_bar" style="position:absolute;top:80px;color:#3f81cc;text-align:center;width:640px"></div>
    
    <div class="color_button_bar">
    <div id="tv_yellow_btn" class="yellow_button_horizontal_passive" style="position:absolute;top:60px;left:0px;height:50px;width:165px;"><script>echo(words['all'])</script></div>
    <div id="tv_blue_btn"  class="blue_button_horizontal_passive"    style="position:absolute;top:60px;left:165px;height:50px;width:165px;"><script>echo(words['fav'])</script></div>
    </div>
    
    <div id="info_tv_by_number">

    </div>
    <div id="tv_switch_bar">

    </div>
    <div style="position:absolute;left:25px;top:123px;">
    
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="tv_punct_1" class="active_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">1. <script>echo(words['by_number'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="tv_punct_2" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">2. <script>echo(words['by_name'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="tv_punct_3" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">3. <script>echo(words['by_theme'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
      </tr>
    </table>
    </div>
    
    <div id="title_bar_tv_by_number">
    </div>
    
    <div id="main_bar_tv_by_number">
    <table width="610" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th width="50"><script>echo(words['num_char'])</script></th>
            <th width="200"><script>echo(words['channel'])</script></th>
<!--            <th width="110" align="center" class="menu_style1"><strong><script>echo(words['theme'])</script></strong></th>-->
            <th width="20">&nbsp;</th>
<!--            <th width="70" class="menu_style1">&nbsp;</th>-->
            <th width=""><script>echo(words['now_playing'])</script></th>
        </tr>
        <tr id="row_0">
            <td align="right" id="num_0">&nbsp;</td>
            <td id="name_0">&nbsp;</td>
<!--            <td id="theme_0">&nbsp;</td>-->
            <td align="center" id="my_ch_0">&nbsp;</td>
<!--            <td id="prog_start_0">&nbsp;</td>-->
            <td id="prog_name_0">&nbsp;</td>
        </tr>
        <tr id="row_1">
            <td align="right" id="num_1">&nbsp;</td>
            <td id="name_1">&nbsp;</td>
<!--            <td id="theme_1">&nbsp;</td>-->
            <td align="center" id="my_ch_1">&nbsp;</td>
<!--            <td id="prog_start_1">&nbsp;</td>-->
            <td id="prog_name_1">&nbsp;</td>
        </tr>
        <tr id="row_2">
            <td align="right" id="num_2">&nbsp;</td>
            <td id="name_2">&nbsp;</td>
<!--            <td id="theme_2">&nbsp;</td>-->
            <td align="center" id="my_ch_2">&nbsp;</td>
<!--            <td id="prog_start_2">&nbsp;</td>-->
            <td id="prog_name_2">&nbsp;</td>
        </tr>
        <tr id="row_3">
            <td align="right" id="num_3">&nbsp;</td>
            <td id="name_3">&nbsp;</td>
<!--            <td id="theme_3">&nbsp;</td>-->
            <td align="center" id="my_ch_3">&nbsp;</td>
<!--            <td id="prog_start_3">&nbsp;</td>-->
            <td id="prog_name_3">&nbsp;</td>
        </tr>
        <tr id="row_4">
            <td align="right" id="num_4">&nbsp;</td>
            <td id="name_4">&nbsp;</td>
<!--            <td id="theme_4">&nbsp;</td>-->
            <td align="center" id="my_ch_4">&nbsp;</td>
<!--            <td id="prog_start_4">&nbsp;</td>-->
            <td id="prog_name_4">&nbsp;</td>
        </tr>
        <tr id="row_5">
            <td align="right" id="num_5">&nbsp;</td>
            <td id="name_5">&nbsp;</td>
<!--            <td id="theme_5">&nbsp;</td>-->
            <td align="center" id="my_ch_5">&nbsp;</td>
<!--            <td id="prog_start_5">&nbsp;</td>-->
            <td id="prog_name_5">&nbsp;</td>
        </tr>
        <tr id="row_6">
            <td align="right" id="num_6">&nbsp;</td>
            <td id="name_6">&nbsp;</td>
<!--            <td id="theme_6">&nbsp;</td>-->
            <td align="center" id="my_ch_6">&nbsp;</td>
<!--            <td id="prog_start_6">&nbsp;</td>-->
            <td id="prog_name_6">&nbsp;</td>
        </tr>
        <tr id="row_7">
            <td align="right" id="num_7">&nbsp;</td>
            <td id="name_7">&nbsp;</td>
<!--            <td id="theme_7">&nbsp;</td>-->
            <td align="center" id="my_ch_7">&nbsp;</td>
<!--            <td id="prog_start_7">&nbsp;</td>-->
            <td id="prog_name_7">&nbsp;</td>
        </tr>
        <tr id="row_8">
            <td align="right" id="num_8">&nbsp;</td>
            <td id="name_8">&nbsp;</td>
<!--            <td id="theme_8">&nbsp;</td>-->
            <td align="center" id="my_ch_8">&nbsp;</td>
<!--            <td id="prog_start_8">&nbsp;</td>-->
            <td id="prog_name_8">&nbsp;</td>
        </tr>
        <tr id="row_9">
            <td align="right" id="num_9">&nbsp;</td>
            <td id="name_9">&nbsp;</td>
<!--            <td id="theme_9">&nbsp;</td>-->
            <td align="center" id="my_ch_9">&nbsp;</td>
<!--            <td id="prog_start_9">&nbsp;</td>-->
            <td id="prog_name_9">&nbsp;</td>
        </tr>
    </table>
    </div>
    
    <div id="title_bar_tv_by_channel" style="display:none">
    </div>
    
    <div id="main_bar_tv_by_channel" style="display:none">
    
    <table width="610" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th width="200"><script>echo(words['channel'])</script></th>
            <th width="50"><script>echo(words['num_char'])</script></th>
<!--            <th width="110"><script>echo(words['theme'])</script></th>-->
            <th width="20">&nbsp;</strong></th>
            <th width=""><script>echo(words['now_playing'])</script></th>
        </tr>
        <tr id="ch_row_0">
            <td id="ch_name_0">&nbsp;</td>
            <td id="ch_num_0" align="right">&nbsp;</td>
<!--            <td id="ch_theme_0">&nbsp;</td>-->
            <td id="ch_my_ch_0" align="center">&nbsp;</td>
            <td id="ch_prog_name_0">&nbsp;</td>
        </tr>
        <tr id="ch_row_1">
            <td id="ch_name_1">&nbsp;</td>
            <td id="ch_num_1" align="right">&nbsp;</td>
<!--            <td id="ch_theme_1">&nbsp;</td>-->
            <td id="ch_my_ch_1" align="center">&nbsp;</td>
            <td id="ch_prog_name_1">&nbsp;</td>
        </tr>
        <tr id="ch_row_2">
            <td id="ch_name_2">&nbsp;</td>
            <td id="ch_num_2" align="right">&nbsp;</td>
<!--            <td id="ch_theme_2">&nbsp;</td>-->
            <td id="ch_my_ch_2" align="center">&nbsp;</td>
            <td id="ch_prog_name_2">&nbsp;</td>
        </tr>
        <tr id="ch_row_3">
            <td id="ch_name_3">&nbsp;</td>
            <td id="ch_num_3" align="right">&nbsp;</td>
<!--            <td id="ch_theme_3">&nbsp;</td>-->
            <td id="ch_my_ch_3" align="center">&nbsp;</td>
            <td id="ch_prog_name_3">&nbsp;</td>
        </tr>
        <tr id="ch_row_4">
            <td id="ch_name_4">&nbsp;</td>
            <td id="ch_num_4" align="right">&nbsp;</td>
<!--            <td id="ch_theme_4">&nbsp;</td>-->
            <td id="ch_my_ch_4" align="center">&nbsp;</td>
            <td id="ch_prog_name_4">&nbsp;</td>
        </tr>
        <tr id="ch_row_5">
            <td id="ch_name_5">&nbsp;</td>
            <td id="ch_num_5" align="right">&nbsp;</td>
<!--            <td id="ch_theme_5">&nbsp;</td>-->
            <td id="ch_my_ch_5" align="center">&nbsp;</td>
            <td id="ch_prog_name_5">&nbsp;</td>
        </tr>
        <tr id="ch_row_6">
            <td id="ch_name_6">&nbsp;</td>
            <td id="ch_num_6" align="right">&nbsp;</td>
<!--            <td id="ch_theme_6">&nbsp;</td>-->
            <td id="ch_my_ch_6" align="center">&nbsp;</td>
            <td id="ch_prog_name_6">&nbsp;</td>
        </tr>
        <tr id="ch_row_7">
            <td id="ch_name_7">&nbsp;</td>
            <td id="ch_num_7" align="right">&nbsp;</td>
<!--            <td id="ch_theme_7">&nbsp;</td>-->
            <td id="ch_my_ch_7" align="center">&nbsp;</td>
            <td id="ch_prog_name_7">&nbsp;</td>
        </tr>
        <tr id="ch_row_8">
            <td id="ch_name_8">&nbsp;</td>
            <td id="ch_num_8" align="right">&nbsp;</td>
<!--            <td id="ch_theme_8">&nbsp;</td>-->
            <td id="ch_my_ch_8" align="center">&nbsp;</td>
            <td id="ch_prog_name_8">&nbsp;</td>
        </tr>
        <tr id="ch_row_9">
            <td id="ch_name_9">&nbsp;</td>
            <td id="ch_num_9" align="right">&nbsp;</td>
<!--            <td id="ch_theme_9">&nbsp;</td>-->
            <td id="ch_my_ch_9" align="center">&nbsp;</td>
            <td id="ch_prog_name_9">&nbsp;</td>
        </tr>
    </table>
    </div>
    
    <div id="title_bar_tv_by_theme" style="display:none">
    </div>
    
    <div id="theme_bar_tv_by_theme" style="display:none">
    <table width="130" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th width=""><script>echo(words['theme'])</script></th>
        </tr>
        <tr id="bar_theme_0">
            <td align="left" id="theme_text_0" class="grey_row"><script>echo(words['tv_theme_0'])</script></td>
        </tr>
        <tr id="bar_theme_1">
            <td align="left" id="theme_text_1" class="grey_row"><script>echo(words['tv_theme_1'])</script></td>
        </tr>
        <tr id="bar_theme_2">
            <td align="left" id="theme_text_2" class="grey_row"><script>echo(words['tv_theme_2'])</script></td>
        </tr>
        <tr id="bar_theme_3">
            <td align="left" id="theme_text_3" class="grey_row"><script>echo(words['tv_theme_3'])</script></td>
        </tr>
        <tr id="bar_theme_4">
            <td align="left" id="theme_text_4" class="grey_row"><script>echo(words['tv_theme_4'])</script></td>
        </tr>
        <tr id="bar_theme_5">
            <td align="left" id="theme_text_5" class="grey_row"><script>echo(words['tv_theme_5'])</script></td>
        </tr>
        <tr id="bar_theme_6">   
            <td align="left" id="theme_text_6" class="grey_row"><script>echo(words['tv_theme_6'])</script></td>
        </tr>
        <tr id="bar_theme_7">   
            <td align="left" id="theme_text_7" class="grey_row"><script>echo(words['tv_theme_7'])</script></td>
        </tr>
        <tr id="bar_theme_8">   
            <td align="left" id="theme_text_8" class="grey_row"><script>echo(words['tv_theme_8'])</script></td>
        </tr>
        <tr id="bar_theme_9">   
            <td align="left" id="theme_text_9" class="grey_row"><script>echo(words['tv_theme_9'])</script></td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_tv_by_theme" style="display:none">
    
    <table width="479" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th width="50"><script>echo(words['num_char'])</script></th>
            <th width="150"><script>echo(words['channel'])</script></th>
            <th width="20">&nbsp;</th>
            <th width=""><script>echo(words['now_playing'])</script></th>
        </tr>
        <tr id="theme_row_0">
            <td id="theme_num_0" align="right">&nbsp;</td>
            <td id="theme_name_0">&nbsp;</td>
            <td id="theme_my_theme_0" align="center">&nbsp;</td>
            <td id="theme_prog_name_0">&nbsp;</td>
        </tr>
        <tr id="theme_row_1">
            <td id="theme_num_1" align="right">&nbsp;</td>
            <td id="theme_name_1">&nbsp;</td>
            <td id="theme_my_theme_1" align="center">&nbsp;</td>
            <td id="theme_prog_name_1">&nbsp;</td>
        </tr>
        <tr id="theme_row_2">
            <td id="theme_num_2" align="right">&nbsp;</td>
            <td id="theme_name_2">&nbsp;</td>
            <td id="theme_my_theme_2" align="center">&nbsp;</td>
            <td id="theme_prog_name_2">&nbsp;</td>
        </tr>
        <tr id="theme_row_3">
            <td id="theme_num_3" align="right">&nbsp;</td>
            <td id="theme_name_3">&nbsp;</td>
            <td id="theme_my_theme_3" align="center">&nbsp;</td>
            <td id="theme_prog_name_3">&nbsp;</td>
        </tr>
        <tr id="theme_row_4">
            <td id="theme_num_4" align="right">&nbsp;</td>
            <td id="theme_name_4">&nbsp;</td>
            <td id="theme_my_theme_4" align="center">&nbsp;</td>
            <td id="theme_prog_name_4">&nbsp;</td>
        </tr>
        <tr id="theme_row_5">
            <td id="theme_num_5" align="right">&nbsp;</td>
            <td id="theme_name_5">&nbsp;</td>
            <td id="theme_my_theme_5" align="center">&nbsp;</td>
            <td id="theme_prog_name_5">&nbsp;</td>
        </tr>
        <tr id="theme_row_6">
            <td id="theme_num_6" align="right">&nbsp;</td>
            <td id="theme_name_6">&nbsp;</td>
            <td id="theme_my_theme_6" align="center">&nbsp;</td>
            <td id="theme_prog_name_6">&nbsp;</td>
        </tr>
        <tr id="theme_row_7">
            <td id="theme_num_7" align="right">&nbsp;</td>
            <td id="theme_name_7">&nbsp;</td>
            <td id="theme_my_theme_7" align="center">&nbsp;</td>
            <td id="theme_prog_name_7">&nbsp;</td>
        </tr>
        <tr id="theme_row_8">
            <td id="theme_num_8" align="right">&nbsp;</td>
            <td id="theme_name_8">&nbsp;</td>
            <td id="theme_my_theme_8" align="center">&nbsp;</td>
            <td id="theme_prog_name_8">&nbsp;</td>
        </tr>
        <tr id="theme_row_9">
            <td id="theme_num_9" align="right">&nbsp;</td>
            <td id="theme_name_9">&nbsp;</td>
            <td id="theme_my_theme_9" align="center">&nbsp;</td>
            <td id="theme_prog_name_9">&nbsp;</td>
        </tr>
    </table>
    </div>
 </div>
</div>

<!--  TV PROGRAM -->
<div id="tv_program" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
  
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['tv_program'])</script></div>
    <div style="position:absolute;left:20px;top:120px;text-align:center;width:620px;" class="tv_program_title" id="tv_program_title"></div>
    <div id="tv_program_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
    
    <div id="info_tv_program">
    <table border="0" width="360" height="150">
        <tr>
            <td align="left" width="100%" valign="top">
                <div id="info_tv_program_txt"></div>
            </td>
        </tr>
    </table>
    </div>
    
    <div id="day_bar_tv_program">
    <table width="120" height="120" cellspacing="2" cellpadding="0">
        <tr bgcolor="#FFFFFF">
            <td width="120" height="20" class="menu_style1" align="center"><strong><script>echo(words['date'])</script></strong></td>
        </tr>
        <tr id="day_row_0" class="grey_row">
            <td height="25" align="left" id="day_num_0">&nbsp;</td>
        </tr>
        <tr id="day_row_1" class="grey_row">
            <td height="25" align="left" id="day_num_1">&nbsp;</td>
        </tr>
        <tr id="day_row_2" class="grey_row">
            <td height="25" align="left" id="day_num_2">&nbsp;</td>
        </tr>
        <tr id="day_row_3" class="grey_row">
            <td height="25" align="left" id="day_num_3">&nbsp;</td>
        </tr>
        <tr id="day_row_4" class="grey_row">
            <td height="25" align="left" id="day_num_4">&nbsp;</td>
        </tr>
        <tr id="day_row_5" class="grey_row">
            <td height="25" align="left" id="day_num_5">&nbsp;</td>
        </tr>
        <tr id="day_row_6" class="grey_row">
            <td height="25" align="left" id="day_num_6">&nbsp;</td>
        </tr>
    </table>
    </div>

    <div id="main_bar_tv_program">
    <table width="485" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['program_name'])</script></th>
        </tr>
        <tr id="program_row_0">
            <td id="program_name_0">&nbsp;</td>
        </tr>
        <tr id="program_row_1">
            <td id="program_name_1">&nbsp;</td>
        </tr>
        <tr id="program_row_2">
            <td id="program_name_2">&nbsp;</td>
        </tr>
        <tr id="program_row_3">
            <td id="program_name_3">&nbsp;</td>
        </tr>
        <tr id="program_row_4">
            <td id="program_name_4">&nbsp;</td>
        </tr>
        <tr id="program_row_5">
            <td id="program_name_5">&nbsp;</td>
        </tr>
        <tr id="program_row_6">
            <td id="program_name_6">&nbsp;</td>
        </tr>
        <tr id="program_row_7">
            <td id="program_name_7">&nbsp;</td>
        </tr>
        <tr id="program_row_8">
            <td id="program_name_8">&nbsp;</td>
        </tr>
        <tr id="program_row_9">
            <td id="program_name_9">&nbsp;</td>
        </tr>
    </table>
    </div>
 </div>
</div>

<!-- CLUB -->
<div id="club" style="display:none;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['club'])</script></div>
    <div id="vclub_update_icon" style="display:none;position:absolute;left:125px;top:24px;"><img src="i/refreshed.png"></div>
    <div style="position:absolute;right:-50px;top:143px;"><img src="i/cinema.jpg"></div>
    <div id="club_menu">
    <table class="club_menu" cellpadding="0" cellspacing="2" width="255">
        <tr id="club_row_0" class="black_row" align="center">
            <td>Все</td>
        </tr>
        <tr>
            <td></td>
        </tr>
        <tr id="club_row_1" class="black_row" align="center" style="display:none">
            <td>HD</td>
        </tr>
        <tr>
            <td></td>
        </tr>
        <tr id="club_row_2" class="black_row" align="center">
            <td>Мультфильмы</td>
        </tr>
        <tr id="club_row_3" class="black_row" align="center">
            <td>Наше кино</td>
        </tr>
        <tr id="club_row_4" class="black_row" align="center">
            <td>Мировое кино</td>
        </tr>
        <tr id="club_row_5" class="black_row" align="center">
            <td>Документальное</td>
        </tr>
        <tr id="club_row_6" class="black_row" align="center">
            <td>Юмор</td>
        </tr>
        <tr id="club_row_7" class="black_row" align="center">
            <td>Увлечения</td>
        </tr>
        <tr id="club_row_8" class="black_row" align="center">
            <td>Наш Сериал</td>
        </tr>
        <tr id="club_row_9" class="black_row" align="center">
            <td>Зарубежный Сериал</td>
        </tr>
        <tr>
            <td></td>
        </tr>
        <tr id="club_row_10" class="black_row" align="center">
            <td>Недосмотренное видео</td>
        </tr>
        <tr>
            <td></td>
        </tr>
        <tr id="club_row_11" class="black_row" align="center" style="display:none">
            <td>USB Устройство</td>
        </tr>
    </table>
    </div>
    <div id="club_declaration">
        <script>echo(words['club_info'])</script>
    </div>
</div>

<!-- VIDEO CLUB CON MENU -->
<div id="con_alpha_layer_wk" style="display:none;">
</div>

<div id="con_alpha_layer" style="display:none;">
</div>

<div id="con_alpha_layer_top" style="display:none;">
</div>

<div id="con_alpha_layer_top_wk" style="display:none;">
</div>

<div id="video_club_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
            <td rowspan="10" bgcolor="#66aaee"></td>
            <td height="20" id="video_club_con_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="10" bgcolor="#66aaee"></td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_con_menu_row_1" class="black_row"><script>echo(words['continue'])</script>&nbsp;</td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_con_menu_row_2" class="black_row"><script>echo(words['video_info'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_con_menu_row_3" class="black_row"><script>echo(words['add_to_fav'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_con_menu_row_4" class="black_row"><script>echo(words['cancel'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
</div>

<div id="video_club_info_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
            <td rowspan="6" bgcolor="#66aaee"></td>
            <td height="20" id="video_club_info_con_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="6" bgcolor="#66aaee"></td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_info_con_menu_row_1" class="black_row"><script>echo(words['back'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_club_info_con_menu_row_2" class="black_row"><script>echo(words['cancel'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
    
</div>

<div id="video_clips_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
            <td rowspan="6" bgcolor="#66aaee"></td>
            <td height="20" id="video_clips_con_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="6" bgcolor="#66aaee"></td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_clips_con_menu_row_1" class="black_row"><script>echo(words['add_to_fav'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_clips_con_menu_row_2" class="black_row"><script>echo(words['cancel'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
</div>

<div id="rec_bar" style="display:none">
    <font size="23">&bull;</font>
</div>

<div id="video_record_con_menu" style="display:none;">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
            <td rowspan="8" bgcolor="#66aaee"></td>
            <td height="20" id="video_record_con_menu_row_0" class="black_row"><script>echo(words['view'])</script></td>
            <td rowspan="8" bgcolor="#66aaee"></td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_record_con_menu_row_1" class="black_row"><script>echo(words['stop_rec'])</script>&nbsp;</td>
        </tr>
        
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_record_con_menu_row_2" class="black_row"><script>echo(words['del'])</script>&nbsp;</td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="video_record_con_menu_row_3" class="black_row"><script>echo(words['cancel'])</script></td>
        </tr>
        <tr>
            <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
    
</div>
<!--  -->

<!-- VIDEO RECORDS PAGE -->
<div id="video_records_page" style="display:none;">
 <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['video_record'])</script></div>
    
    <div id="video_records_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
  
    <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td>
        <table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_b_l.png" id="video_records_punct_l_img_1" width="10" height="25"></td>
            <td align="center" id="video_records_punct_1" class="top_marks_style3" nowrap>1. <script>echo(words['common'])</script>  </td>
            <td><img src="i/insert_b_r.png" id="video_records_punct_r_img_1" width="10" height="25"></td>
          </tr>
        </table>
        </td>
        <td>
        <table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="video_records_punct_l_img_2" width="10" height="25"></td>
            <td align="center" id="video_records_punct_2" class="top_marks_style1" nowrap>2. <script>echo(words['my_rec'])</script>  </td>
            <td><img src="i/insert_r.png" id="video_records_punct_r_img_2" width="10" height="25"></td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </div>
    
    
    <div id="main_bar_video_records_by_addtime" style="display:none">
    <table width="595"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="107" align="center" class="menu_style1"><strong><script>echo(words['shortcut'])</script></strong></td>
        <td width="488" align="center" class="menu_style1"><strong><script>echo(words['rec_descr'])</script></strong></td>
      </tr>
      
      <tr class="black_row" id="video_records_by_addtime_row_0">
        <td height="80" align="center" id="video_records_by_addtime_img_0"></td>
        <td id="video_records_by_addtime_txt_0" align="left" valign="top" style="padding-left:3px;padding-top:2px"></td>
      </tr>
      
      <tr class="black_row" id="video_records_by_addtime_row_1">
        <td height="80" align="center" id="video_records_by_addtime_img_1"></td>
        <td id="video_records_by_addtime_txt_1" align="left" valign="top" style="padding-left:3px;padding-top:2px"></td>
      </tr>
      
      <tr class="black_row" id="video_records_by_addtime_row_2">
        <td height="80" align="center" id="video_records_by_addtime_img_2"></td>
        <td id="video_records_by_addtime_txt_2" align="left" valign="top" style="padding-left:3px;padding-top:2px"></td>
      </tr>
      
    </table>
    </div>
   
    <div id="main_bar_my_video_records" style="display:none">
    <table width="595"  cellpadding="0" cellspacing="2">
      
      <tr bgcolor="#FFFFFF">
        <td width="180" align="center" class="menu_style1"><strong><script>echo(words['start'])</script></strong></td>
        <td width="105"  align="center" class="menu_style1"><strong>&nbsp;</strong></td>
        <td width="310" align="center" class="menu_style1"><strong><script>echo(words['rec_descr'])</script></strong></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_0">
        <td height="25" align="center" id="my_video_records_start_0"></td>
        <td id="my_video_records_length_0" align="center"></td>
        <td id="my_video_records_channel_0" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_1">
        <td height="25" align="center" id="my_video_records_start_1"></td>
        <td id="my_video_records_length_1" align="center"></td>
        <td id="my_video_records_channel_1" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_2">
        <td height="25" align="center" id="my_video_records_start_2"></td>
        <td id="my_video_records_length_2" align="center"></td>
        <td id="my_video_records_channel_2" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_3">
        <td height="25" align="center" id="my_video_records_start_3"></td>
        <td id="my_video_records_length_3" align="center"></td>
        <td id="my_video_records_channel_3" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_4">
        <td height="25" align="center" id="my_video_records_start_4"></td>
        <td id="my_video_records_length_4" align="center"></td>
        <td id="my_video_records_channel_4" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_5">
        <td height="25" align="center" id="my_video_records_start_5"></td>
        <td id="my_video_records_length_5" align="center"></td>
        <td id="my_video_records_channel_5" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_6">
        <td height="25" align="center" id="my_video_records_start_6"></td>
        <td id="my_video_records_length_6" align="center"></td>
        <td id="my_video_records_channel_6" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_7">
        <td height="25" align="center" id="my_video_records_start_7"></td>
        <td id="my_video_records_length_7" align="center"></td>
        <td id="my_video_records_channel_7" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_8">
        <td height="25" align="center" id="my_video_records_start_8"></td>
        <td id="my_video_records_length_8" align="center"></td>
        <td id="my_video_records_channel_8" align="center"></td>
      </tr>
      
      <tr class="black_row" id="my_video_records_row_9">
        <td height="25" align="center" id="my_video_records_start_9"></td>
        <td id="my_video_records_length_9" align="center"></td>
        <td id="my_video_records_channel_9" align="center"></td>
      </tr>
      
    </table>
    </div>
    
 </div>
</div>
<!-- -->

<!-- VIDEO CLUB PAGE -->
<div id="video_club_page" style="display:none;">
 <div style="position:absolute;left:30px;top:46px;">
    <div id="title_bar_video_club" style="position:absolute;left:20px;top:5px;width:300px;" class="vclub_title"><script>echo(words['video_club_title'])</script></div>
    <div id="video_club_cat_name" style="position:absolute;left:20px;top:37px;width:400px;font-size:22px;" class="vclub_title"></div>
    
    <div id="vclub_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
  
    <div id="info_video_club">
    </div>
    
    <div id="video_club_switch_bar">
    </div>

    <div class="color_button_bar" id="video_button_bar">
        <div id="vclub_green_btn" class="green_button_horizontal_passive" style="position:absolute;top:60px;left:0px;height:50px;width:165px;"><script>echo(words['search'])</script></div>
        <div id="vclub_yellow_btn" class="yellow_button_horizontal_passive" style="position:absolute;top:60px;left:160px;height:50px;width:165px;"><script>echo(words['all'])</script></div>
        <div id="vclub_blue_btn"  class="blue_button_horizontal_passive"    style="position:absolute;top:60px;left:295px;height:50px;width:165px;"><script>echo(words['fav'])</script></div>
    </div>

    <div id="vclub_titles" style="position:absolute;left:25px;top:123px;display:none">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="vclub_punct_1" class="active_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">1. <script>echo(words['name'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="vclub_punct_2" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">2. <script>echo(words['genre'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="vclub_punct_3" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">3. <script>echo(words['year'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="vclub_punct_4" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">4. <script>echo(words['top'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="vclub_punct_5" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">5. <script>echo(words['new'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>

        <td>
      </tr>
    </table>
    </div>
    
    <div id="vclub_titles_all_cats" style="position:absolute;left:25px;top:123px;display:none">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_b_l.png" id="vclub_punct_all_l_img_1" width="10" height="25"></td>
            <td align="center" id="vclub_punct_all_1" class="top_marks_style3" nowrap>1. <script>echo(words['name'])</script>  </td>
            <td><img src="i/insert_b_r.png" id="vclub_punct_all_r_img_1" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="vclub_punct_all_l_img_3" width="10" height="25"></td>
            <td align="center" id="vclub_punct_all_3" class="top_marks_style1" nowrap>2. <script>echo(words['year'])</script> </td>
            <td><img src="i/insert_r.png" id="vclub_punct_all_r_img_3" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="vclub_punct_all_l_img_4" width="10" height="25"></td>
            <td align="center" id="vclub_punct_all_4" class="top_marks_style1" nowrap>3. <script>echo(words['top'])</script> </td>
            <td><img src="i/insert_r.png" id="vclub_punct_all_r_img_4" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="vclub_punct_all_l_img_5" width="10" height="25"></td>
            <td align="center" id="vclub_punct_all_5" class="top_marks_style1" nowrap>4. <script>echo(words['new'])</script> </td>
            <td><img src="i/insert_r.png" id="vclub_punct_all_r_img_5" width="10" height="25"></td>
          </tr>
        </table></td>

        <td>
      </tr>
    </table>
    </div>

    <!--<div id="title_bar_video_club" style="display:none">
    </div>-->
    
    <div id="abc_bar_video_club" style="display:none">
    <table width="54" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th width="">&nbsp;</th>
        </tr>
        <tr id="video_club_abc_row_0">
            <td align="center" class="grey_row" id="video_club_abc_text_0"></td>
        </tr>
        <tr id="video_club_abc_row_1">
            <td align="center" class="grey_row" id="video_club_abc_text_1"></td>
        </tr>
        <tr id="video_club_abc_row_2">
            <td align="center" class="grey_row" id="video_club_abc_text_2"></td>
        </tr>
        <tr id="video_club_abc_row_3">
            <td align="center" class="grey_row" id="video_club_abc_text_3"></td>
        </tr>
        <tr id="video_club_abc_row_4">
            <td align="center" class="grey_row" id="video_club_abc_text_4"></td>
        </tr>
        <tr id="video_club_abc_row_5">
            <td align="center" class="grey_row" id="video_club_abc_text_5"></td>
        </tr>
        <tr id="video_club_abc_row_6">
            <td align="center"  class="grey_row"id="video_club_abc_text_6"></td>
        </tr>
        <tr id="video_club_abc_row_7">
            <td align="center" class="grey_row" id="video_club_abc_text_7"></td>
        </tr>
        <tr id="video_club_abc_row_8">
            <td align="center" class="grey_row" id="video_club_abc_text_8"></td>
        </tr>
        <tr id="video_club_abc_row_9">
            <td align="center" class="grey_row" id="video_club_abc_text_9"></td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_video_club_by_name" style="display:none">

    <table width="558" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="473"><script>echo(words['name'])</script></th>
        <th width="20"></th>
        <th width=""><script>echo(words['year'])</script></th>
      </tr>
      <tr id="video_club_by_name_row_0">
        <td id="video_club_by_name_title_0" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_0" align="center"></td>
        <td id="video_club_by_name_year_0">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_1">
        <td id="video_club_by_name_title_1" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_1" align="center"></td>
        <td id="video_club_by_name_year_1">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_2">
        <td id="video_club_by_name_title_2" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_2" align="center"></td>
        <td id="video_club_by_name_year_2">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_3">
        <td id="video_club_by_name_title_3" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_3" align="center"></td>
        <td id="video_club_by_name_year_3">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_4">
        <td id="video_club_by_name_title_4" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_4" align="center"></td>
        <td id="video_club_by_name_year_4">&nbsp;</td>
      </tr>

      <tr id="video_club_by_name_row_5">
        <td id="video_club_by_name_title_5" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_5" align="center"></td>
        <td id="video_club_by_name_year_5">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_6">
        <td id="video_club_by_name_title_6" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_6" align="center"></td>
        <td id="video_club_by_name_year_6">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_7">
        <td id="video_club_by_name_title_7" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_7" align="center"></td>
        <td id="video_club_by_name_year_7">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_8">
        <td id="video_club_by_name_title_8" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_8" align="center"></td>
        <td id="video_club_by_name_year_8">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_name_row_9">
        <td id="video_club_by_name_title_9" align="left">&nbsp;</td>
        <td id="video_club_by_name_my_video_9" align="center"></td>
        <td id="video_club_by_name_year_9">&nbsp;</td>
      </tr> 

      </table>
    </div>
    
    <div id="main_bar_video_club_by_genre" style="display:none">
    
    <table width="417" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="354"><script>echo(words['name'])</script></th>
        <th width=""><script>echo(words['year'])</script></th>
      </tr>
      <tr id="video_club_by_genre_row_0">
        <td id="video_club_by_genre_title_0" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_0">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_1">
        <td id="video_club_by_genre_title_1" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_1">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_2">
        <td id="video_club_by_genre_title_2" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_2">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_3">
        <td id="video_club_by_genre_title_3" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_3">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_4">
        <td id="video_club_by_genre_title_4" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_4">&nbsp;</td>
      </tr>

      <tr id="video_club_by_genre_row_5">
        <td id="video_club_by_genre_title_5" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_5">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_6">
        <td id="video_club_by_genre_title_6" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_6">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_7">
        <td id="video_club_by_genre_title_7" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_7">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_8">
        <td id="video_club_by_genre_title_8" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_8">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_genre_row_9">
        <td id="video_club_by_genre_title_9" align="left">&nbsp;</td>
        <td id="video_club_by_genre_year_9">&nbsp;</td>
      </tr> 
      </table>
    </div>
    
    <div id="title_bar_video_club_by_year" style="display:none">
    </div>
    
    <div id="main_bar_video_club_by_year" style="display:none">

    <table width="482" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th><script>echo(words['name'])</script></th>
      </tr>
      <tr id="video_club_by_year_row_0">
        <td align="left" class="black_row" id="video_club_by_year_title_0">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_1">
        <td align="left" class="black_row" id="video_club_by_year_title_1">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_2">
        <td align="left" class="black_row" id="video_club_by_year_title_2">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_3">
        <td align="left" class="black_row" id="video_club_by_year_title_3">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_4">
        <td align="left" class="black_row" id="video_club_by_year_title_4">&nbsp;</td>
      </tr>

      <tr id="video_club_by_year_row_5">
        <td align="left" class="black_row" id="video_club_by_year_title_5">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_6">
        <td align="left" class="black_row" id="video_club_by_year_title_6">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_7">
        <td align="left" class="black_row" id="video_club_by_year_title_7">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_8">
        <td align="left" class="black_row" id="video_club_by_year_title_8">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_year_row_9">
        <td align="left" class="black_row" id="video_club_by_year_title_9">&nbsp;</td>
      </tr> 
      </table>

      </div>
      <div id="title_bar_video_club_by_genre" style="display:none">
      </div>
      <div id="genre_bar_video_club" style="display:none">
    <table width="142" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['genre'])</script></th>
        </tr>
        <tr id="video_club_genre_row_0">
            <td id="video_club_genre_text_0" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_1">
            <td id="video_club_genre_text_1" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_2">
            <td id="video_club_genre_text_2" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_3">
            <td id="video_club_genre_text_3" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_4">
            <td id="video_club_genre_text_4" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_5">
            <td id="video_club_genre_text_5" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_6">
            <td id="video_club_genre_text_6" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_7">
            <td id="video_club_genre_text_7" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_8">
            <td id="video_club_genre_text_8" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_genre_row_9">
            <td id="video_club_genre_text_9" class="grey_row">&nbsp;</td>
        </tr>
    </table>
    </div>
    
    <div id="year_bar_video_club" style="display:none">
    <table width="77" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['year'])</script></th>
        </tr>
        <tr id="video_club_year_row_0">
            <td id="video_club_year_text_0" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_1">
            <td id="video_club_year_text_1" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_2">
            <td id="video_club_year_text_2" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_3">
            <td id="video_club_year_text_3" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_4">
            <td id="video_club_year_text_4" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_5">
            <td id="video_club_year_text_5" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_6">
            <td id="video_club_year_text_6" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_7">
            <td id="video_club_year_text_7" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_8">
            <td id="video_club_year_text_8" align="center" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="video_club_year_row_9">
            <td id="video_club_year_text_9" align="center" class="grey_row">&nbsp;</td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_video_club_by_add_time" style="display:none">

    <table width="506" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="443"><script>echo(words['name'])</script></th>
        <th width=""><script>echo(words['year'])</script></th>
      </tr>
      
      <tr id="video_club_by_add_time_row_0">
        <td id="video_club_by_add_time_title_0" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_0">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_1">
        <td id="video_club_by_add_time_title_1" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_1">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_2">
        <td id="video_club_by_add_time_title_2" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_2">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_3">
        <td id="video_club_by_add_time_title_3" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_3">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_4">
        <td id="video_club_by_add_time_title_4" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_4">&nbsp;</td>
      </tr>

      <tr id="video_club_by_add_time_row_5">
        <td id="video_club_by_add_time_title_5" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_5">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_6">
        <td id="video_club_by_add_time_title_6" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_6">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_7">
        <td id="video_club_by_add_time_title_7" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_7">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_8">
        <td id="video_club_by_add_time_title_8" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_8">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_add_time_row_9">
        <td id="video_club_by_add_time_title_9" align="left">&nbsp;</td>
        <td id="video_club_by_add_time_year_9">&nbsp;</td>
      </tr>
      </table>
    </div>
    
    <div id="video_club_add_time_bar" style="display:none">
    
    <table width="107" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['period'])</script></th>    
        </tr>
        
        <tr id="video_club_add_time_row_0">
            <td class="black_row">1 <script>echo(words['day'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_1">
            <td class="grey_row">2 <script>echo(words['day2'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_2">
            <td class="grey_row">3 <script>echo(words['day2'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_3">
            <td class="grey_row">4 <script>echo(words['day2'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_4">
            <td class="grey_row">5 <script>echo(words['days'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_5">
            <td class="grey_row">6 <script>echo(words['days'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_6">
            <td class="grey_row">7 <script>echo(words['days'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_7">
            <td class="grey_row">2 <script>echo(words['weeks'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_8">
            <td class="grey_row">3 <script>echo(words['weeks'])</script></td>
        </tr>
        <tr id="video_club_add_time_row_9">
            <td class="grey_row">1 <script>echo(words['month'])</script></td>
        </tr>
    </table>
    
    </div>
    
    <div id="main_bar_video_club_by_top" style="display:none">
    
        <table width="613"  cellpadding="0" cellspacing="2" class="content_table">
          <tr>
            <th width="40"></th>
            <th width="508"><script>echo(words['name'])</script></th>
            <th width=""><script>echo(words['year'])</script></th>
          </tr>
          <tr id="video_club_by_top_row_0">
            <td id="video_club_by_top_num_0" align="right">1.</td>
            <td id="video_club_by_top_title_0">&nbsp;</td>
            <td id="video_club_by_top_year_0">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_1">
            <td id="video_club_by_top_num_1" align="right">2.</td>
            <td id="video_club_by_top_title_1" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_1">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_2">
            <td id="video_club_by_top_num_2" align="right">3.</td>
            <td id="video_club_by_top_title_2" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_2">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_3">
            <td id="video_club_by_top_num_3" align="right">4.</td>
            <td id="video_club_by_top_title_3" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_3">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_4">
            <td id="video_club_by_top_num_4" align="right">5.</td>
            <td id="video_club_by_top_title_4" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_4">&nbsp;</td>
          </tr>
    
          <tr id="video_club_by_top_row_5">
            <td id="video_club_by_top_num_5" align="right">6.</td>
            <td id="video_club_by_top_title_5" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_5">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_6">
            <td id="video_club_by_top_num_6" align="right">7.</td>
            <td id="video_club_by_top_title_6" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_6">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_7">
            <td id="video_club_by_top_num_7" align="right">8.</td>
            <td id="video_club_by_top_title_7" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_7">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_8">
            <td id="video_club_by_top_num_8" align="right">9.</td>
            <td id="video_club_by_top_title_8" align="left">&nbsp;</div></td>
            <td id="video_club_by_top_year_8">&nbsp;</td>
          </tr>
          
          <tr id="video_club_by_top_row_9">
            <td id="video_club_by_top_num_9" align="right">10.</td>
            <td id="video_club_by_top_title_9" align="left">&nbsp;</td>
            <td id="video_club_by_top_year_9">&nbsp;</td>
          </tr> 
        </table>
    </div>
    
    <div id="main_bar_video_club_by_search" style="display:none">
    <div id="search_kbd_btn" class="yellow_button_horizontal_active color_button_bar" style="position:absolute;top:-85px;left:330px;height:50px;width:165px;"><script>echo(words['list'])</script></div>

    <table width="613" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="550"><script>echo(words['name'])</script></th>
        <th width=""><script>echo(words['year'])</script></th>
      </tr>
      <tr id="video_club_by_search_row_0">
        <td id="video_club_by_search_title_0">&nbsp;</td>
        <td id="video_club_by_search_year_0">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_1">
        <td id="video_club_by_search_title_1">&nbsp;</td>
        <td id="video_club_by_search_year_1">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_2">
        <td id="video_club_by_search_title_2">&nbsp;</td>
        <td id="video_club_by_search_year_2">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_3">
        <td id="video_club_by_search_title_3">&nbsp;</td>
        <td id="video_club_by_search_year_3">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_4">
        <td id="video_club_by_search_title_4">&nbsp;</td>
        <td id="video_club_by_search_year_4">&nbsp;</td>
      </tr>

      <tr id="video_club_by_search_row_5">
        <td id="video_club_by_search_title_5">&nbsp;</td>
        <td id="video_club_by_search_year_5">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_6">
        <td id="video_club_by_search_title_6">&nbsp;</td>
        <td id="video_club_by_search_year_6">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_7">
        <td id="video_club_by_search_title_7">&nbsp;</td>
        <td id="video_club_by_search_year_7">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_8">
        <td id="video_club_by_search_title_8">&nbsp;</td>
        <td id="video_club_by_search_year_8">&nbsp;</td>
      </tr>
      
      <tr id="video_club_by_search_row_9">
        <td id="video_club_by_search_title_9">&nbsp;</td>
        <td id="video_club_by_search_year_9">&nbsp;</td>
      </tr> 

      </table>
    </div>
    
    <div id="main_bar_vclub_not_ended" style="display:none">
    
      <table width="613"  cellpadding="0" cellspacing="2" class="content_table">
      
      <tr>
        <th width="550"><script>echo(words['name'])</script></th>
        <th><script>echo(words['year'])</script></th>
      </tr>
      
      <tr id="vclub_not_ended_row_0">
        <td id="vclub_not_ended_title_0">&nbsp;</td>
        <td id="vclub_not_ended_year_0">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_1">
        <td id="vclub_not_ended_title_1">&nbsp;</td>
        <td id="vclub_not_ended_year_1">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_2">
        <td id="vclub_not_ended_title_2">&nbsp;</td>
        <td id="vclub_not_ended_year_2">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_3">
        <td id="vclub_not_ended_title_3">&nbsp;</td>
        <td id="vclub_not_ended_year_3">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_4">
        <td id="vclub_not_ended_title_4">&nbsp;</td>
        <td id="vclub_not_ended_year_4">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_5">
        <td id="vclub_not_ended_title_5">&nbsp;</td>
        <td id="vclub_not_ended_year_5">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_6">
        <td id="vclub_not_ended_title_6">&nbsp;</td>
        <td id="vclub_not_ended_year_6">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_7">
        <td id="vclub_not_ended_title_7">&nbsp;</td>
        <td id="vclub_not_ended_year_7">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_8">
        <td id="vclub_not_ended_title_8">&nbsp;</td>
        <td id="vclub_not_ended_year_8">&nbsp;</td>
      </tr>
      
      <tr id="vclub_not_ended_row_9">
        <td id="vclub_not_ended_title_9">&nbsp;</td>
        <td id="vclub_not_ended_year_9">&nbsp;</td>
      </tr>
      
      </table>
    </div>
    
    
 </div>
</div>

<!-- VIDEO CLUB INFO -->
<div id="video_club_info" style="display:none;">
 <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['video_club_title'])</script></div>
    
    <div id="video_attributes"></div>
    
    <div id="video_club_info_name"></div>
    
    <div id="video_club_info_descr">
        <div id="video_club_info_descr_txt"></div>
    </div>
    
    <div id="video_club_info_screen">
        <table border="0" width="240" height="320" cellpadding="0" cellspacing="0">
            <tr>
                <td><div id="video_club_info_screen_img"></div></td>
            </tr>
        </table>
    </div>
    
  </div>
</div>

<!-- MEDIA BROWSER -->
<div id="media_browser_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
  
  <div style="position:absolute;left:20px;top:37px;width:400px;" class="vclub_title">USB Устройство</div>
  <div id="media_browser_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
  
  <div id="media_browser">
    <table width="613"  cellpadding="0" cellspacing="2" class="content_table">
      
      <tr>
        <th><script>echo(words['name'])</script></th>
      </tr>
      
      <tr id="media_browser_row_0">
        <td id="media_browser_file_0" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_1">
        <td id="media_browser_file_1" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_2">
        <td id="media_browser_file_2" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_3">
        <td id="media_browser_file_3" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_4">
        <td id="media_browser_file_4" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_5">
        <td id="media_browser_file_5" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_6">
        <td id="media_browser_file_6" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_7">
        <td id="media_browser_file_7" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_8">
        <td id="media_browser_file_8" class="black_row">&nbsp;</td>
      </tr>
      
      <tr id="media_browser_row_9">
        <td id="media_browser_file_9" class="black_row">&nbsp;</td>
      </tr>
      
      
    </table>
  </div>
  
  </div>
</div>
<!---->

<!-- VCLUB VOTE -->
<div id="vclub_vote" style="display:none;">
    
    <table width="350" border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
    </tr>
    
    <tr>
        <td rowspan="4" bgcolor="#66aaee"></td>
        <td height="20" align="center" class="black_row" style="font-size:18px"><div id="vote_video_name" class="td_nowrap_322"></div></td>
        <td rowspan="4" bgcolor="#66aaee"></td>
    </tr>
    
    <tr>
        <td height="10" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" class="black_row">
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
            <tr>
                <td></td>
                <td align="center">плохо</td>
                <td align="center">хорошо</td>
            </tr>
            <tr>
                <td width="100" style="padding-left:5px">оценка качества звука</td>
                <td align="center"><img id="vclub_vote_red_btn_1" src="i/btn_red.png"></td>
                <td align="center"><img id="vclub_vote_green_btn_1" src="i/btn_green.png"></td>
            </tr>
            <tr>
                <td height="10">&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
            </tr>
            <tr id="vclub_audio_vote" style="display:none">
                <td width="100" style="padding-left:5px">оценка качества видео</td>
                <td align="center"><img id="vclub_vote_red_btn_2" src="i/btn_red.png"></td>
                <td align="center"><img id="vclub_vote_green_btn_2" src="i/btn_green.png"></td>
            </tr>
        </table>
        </td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    
    
    <tr>
      <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
    </tr>
</table>

</div>
<!---->

<!-- PORTAL LOADING BAR -->
<div id="portal_loading_bar">
    <table width="350" cellspacing="2" style="border: 2px solid #003399;-webkit-border-radius: 2px;-moz-border-radius: 2px;">
        <tr>
            <td id="portal_loading_bar_per" height="25" width="1%" style="background-color:#FFCC33"></td>
            <td></td>
        </tr>
    </table>
</div>
<!---->

<!-- VIDEO CLIPS PAGE -->
<div id="video_clips_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['video_clips_title'])</script></div>
    
    <div id="video_clips_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
    
    <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_b_l.png" id="video_clips_punct_l_img_1" width="10" height="25"></td>
            <td align="center" id="video_clips_punct_1" class="top_marks_style3" nowrap>1. <script>echo(words['name'])</script>  </td>
            <td><img src="i/insert_b_r.png" id="video_clips_punct_r_img_1" width="10" height="25"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="video_clips_punct_l_img_2" width="10" height="25"></td>
            <td align="center" id="video_clips_punct_2" class="top_marks_style1" nowrap>2. <script>echo(words['performer'])</script> </td>
            <td><img src="i/insert_r.png" id="video_clips_punct_r_img_2" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <!--<td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="video_clips_punct_l_img_3" width="10" height="25"></td>
            <td align="center" id="video_clips_punct_3" class="top_marks_style1" nowrap>3. <script>echo(words['genre'])</script> </td>
            <td><img src="i/insert_r.png" id="video_clips_punct_r_img_3" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="video_clips_punct_l_img_4" width="10" height="25"></td>
            <td align="center" id="video_clips_punct_4" class="top_marks_style1" nowrap>4. <script>echo(words['top'])</script> </td>
            <td><img src="i/insert_r.png" id="video_clips_punct_r_img_4" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="video_clips_punct_l_img_5" width="10" height="25"></td>
            <td align="center" id="video_clips_punct_5" class="top_marks_style1" nowrap>5. <script>echo(words['new'])</script> </td>
            <td><img src="i/insert_r.png" id="video_clips_punct_r_img_5" width="10" height="25"></td>
          </tr>
        </table></td>-->
      </tr>
    </table>
    </div>
    
    <div id="title_bar_video_clips" style="display:none">
    </div>
    
    <div id="abc_bar_video_clips" style="display:none">
    <table width="54" height="120" cellspacing="2" cellpadding="0">
        <tr>
            <td width="54" height="20" align="center" bgcolor="#FFFFFF" class="menu_style1">&nbsp;</td>
        </tr>
        <tr id="video_clips_abc_row_0" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_0"></td>
        </tr>
        <tr id="video_clips_abc_row_1" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_1"></td>
        </tr>
        <tr id="video_clips_abc_row_2" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_2"></td>
        </tr>
        <tr id="video_clips_abc_row_3" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_3"></td>
        </tr>
        <tr id="video_clips_abc_row_4" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_4"></td>
        </tr>
        <tr id="video_clips_abc_row_5" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_5"></td>
        </tr>
        <tr id="video_clips_abc_row_6" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_6"></td>
        </tr>
        <tr id="video_clips_abc_row_7" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_7"></td>
        </tr>
        <tr id="video_clips_abc_row_8" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_8"></td>
        </tr>
        <tr id="video_clips_abc_row_9" class="grey_row">
            <td height="25" align="center" id="video_clips_abc_text_9"></td>
        </tr>
    </table>
    </div>
    
    
    <div id="main_bar_video_clips_by_name" style="display:none">
    <table width="558"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="270" height="20" align="center" class="menu_style1"><strong><script>echo(words['name'])</script></strong></td>
        <td width="288" align="center" class="menu_style1"><strong></strong></td>
      </tr>
      <tr class="black_row" id="video_clips_by_name_row_0">
        <td height="25" align="left"><div id="video_clips_by_name_title_0" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_0" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_1">
        <td height="25" align="left"><div id="video_clips_by_name_title_1" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_1" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_2">
        <td height="25" align="left"><div id="video_clips_by_name_title_2" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_2" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_3">
        <td height="25" align="left"><div id="video_clips_by_name_title_3" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_3" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_4">
        <td height="25" align="left"><div id="video_clips_by_name_title_4" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_4" class="td_nowrap_288">&nbsp;</div></td>
      </tr>

      <tr class="black_row" id="video_clips_by_name_row_5">
        <td height="25" align="left"><div id="video_clips_by_name_title_5" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_5" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_6">
        <td height="25" align="left"><div id="video_clips_by_name_title_6" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_6" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_7">
        <td height="25" align="left"><div id="video_clips_by_name_title_7" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_7" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_8">
        <td height="25" align="left"><div id="video_clips_by_name_title_8" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_8" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="video_clips_by_name_row_9">
        <td height="25" align="left"><div id="video_clips_by_name_title_9" class="td_nowrap_270">&nbsp;</div></td>
        <td align="left"><div id="video_clips_by_name_singer_9" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      </table>
    </div>
    
    <div id="main_bar_video_clips_by_singer" style="display:none">
    <table width="289"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="289" height="20" align="center" class="menu_style1"><strong><script>echo(words['name'])</script></strong></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_0">
        <td height="25" align="left"><div id="video_clips_by_singer_title_0" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_1">
        <td height="25" align="left"><div id="video_clips_by_singer_title_1" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_2">
        <td height="25" align="left"><div id="video_clips_by_singer_title_2" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_3">
        <td height="25" align="left"><div id="video_clips_by_singer_title_3" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_4">
        <td height="25" align="left"><div id="video_clips_by_singer_title_4" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_5">
        <td height="25" align="left"><div id="video_clips_by_singer_title_5" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_6">
        <td height="25" align="left"><div id="video_clips_by_singer_title_6" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_7">
        <td height="25" align="left"><div id="video_clips_by_singer_title_7" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_8">
        <td height="25" align="left"><div id="video_clips_by_singer_title_8" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="video_clips_by_singer_row_9">
        <td height="25" align="left"><div id="video_clips_by_singer_title_9" class="td_nowrap_288">&nbsp;</div></td>
      </tr>
      </table>  
    </div>
    
    <div id="video_clips_singer_bar" style="display:none">
        <table width="271" cellspacing="2" cellpadding="0">
        <tr bgcolor="#FFFFFF">
            <td height="20" align="center" width="271" class="menu_style1"><strong>ИСПОЛНИТЕЛЬ</strong></td>
        </tr>
        <tr id="video_clips_singer_bar_row_0" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_0" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_1" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_1" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_2" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_2" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_3" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_3" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_4" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_4" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_5" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_5" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_6" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_6" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_7" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_7" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_8" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_8" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
        <tr id="video_clips_singer_bar_row_9" class="grey_row">
            <td height="25"><div id="video_clips_singer_bar_text_9" class="td_nowrap_270">&nbsp;</div></td>
        </tr>
    </table>
    </div>
    
  </div>
</div>
<!---->

<!-- KARAOKE CLUB CON MENU -->
<div id="karaoke_con_menu" style="display:none;">
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
    </tr>
    <tr>
        <td rowspan="4" bgcolor="#66aaee"></td>
        <td height="20" id="karaoke_con_menu_row_0" class="black_row"><script>echo(words['play'])</script>&nbsp;</td>
        <td rowspan="4" bgcolor="#66aaee"></td>
    </tr>
    
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" id="karaoke_con_menu_row_1" class="black_row"><script>echo(words['cancel'])</script>&nbsp;</td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
      <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
    </tr>
</table>

</div>
<!---->

<!-- KARAOKE PAGE -->
<div id="karaoke_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['karaoke'])</script></div>
    <div id="karaoke_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
    
    <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="karaoke_punct_1" class="active_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">1. <script>echo(words['name'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="karaoke_punct_2" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">2. <script>echo(words['performer'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </div>

    <div id="abc_bar_karaoke" style="display:none">
    
    <table width="54" height="120" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th>&nbsp;</th>
        </tr>
        <tr id="karaoke_abc_row_0">
            <td align="center" id="karaoke_abc_text_0" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_1">
            <td align="center" id="karaoke_abc_text_1" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_2">
            <td align="center" id="karaoke_abc_text_2" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_3">
            <td align="center" id="karaoke_abc_text_3" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_4">
            <td align="center" id="karaoke_abc_text_4" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_5">
            <td align="center" id="karaoke_abc_text_5" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_6">
            <td align="center" id="karaoke_abc_text_6" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_7">
            <td align="center" id="karaoke_abc_text_7" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_8">
            <td align="center" id="karaoke_abc_text_8" class="grey_row"></td>
        </tr>
        <tr id="karaoke_abc_row_9">
            <td align="center" id="karaoke_abc_text_9" class="grey_row"></td>
        </tr>
    </table>
    </div>
    
    <div id="genre_bar_karaoke" style="display:none">
    
    <table width="142" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['genre'])</script></th>
        </tr>
        <tr id="karaoke_genre_row_0">
            <td id="karaoke_genre_text_0" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_1">
            <td id="karaoke_genre_text_1" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_2">
            <td id="karaoke_genre_text_2" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_3">
            <td id="karaoke_genre_text_3" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_4">
            <td id="karaoke_genre_text_4" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_5">
            <td id="karaoke_genre_text_5" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_6">
            <td id="karaoke_genre_text_6" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_7">
            <td id="karaoke_genre_text_7" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_8">
            <td id="karaoke_genre_text_8" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_genre_row_9">
            <td id="karaoke_genre_text_9" class="grey_row">&nbsp;</td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_karaoke_by_name" style="display:none">
    
    <table width="558"  cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="260"><script>echo(words['name'])</script></th>
        <th width=""><script>echo(words['performer'])</script></th>
      </tr>
      <tr id="karaoke_by_name_row_0">
        <td id="karaoke_by_name_title_0">&nbsp;</td>
        <td id="karaoke_by_name_singer_0">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_1">
        <td id="karaoke_by_name_title_1">&nbsp;</td>
        <td id="karaoke_by_name_singer_1">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_2">
        <td id="karaoke_by_name_title_2">&nbsp;</td>
        <td id="karaoke_by_name_singer_2">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_3">
        <td id="karaoke_by_name_title_3">&nbsp;</td>
        <td id="karaoke_by_name_singer_3">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_4">
        <td id="karaoke_by_name_title_4">&nbsp;</td>
        <td id="karaoke_by_name_singer_4">&nbsp;</td>
      </tr>

      <tr id="karaoke_by_name_row_5">
        <td id="karaoke_by_name_title_5">&nbsp;</td>
        <td id="karaoke_by_name_singer_5">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_6">
        <td id="karaoke_by_name_title_6">&nbsp;</td>
        <td id="karaoke_by_name_singer_6">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_7">
        <td id="karaoke_by_name_title_7">&nbsp;</td>
        <td id="karaoke_by_name_singer_7">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_8">
        <td id="karaoke_by_name_title_8">&nbsp;</td>
        <td id="karaoke_by_name_singer_8">&nbsp;</td>
      </tr>
      
      <tr id="karaoke_by_name_row_9">
        <td id="karaoke_by_name_title_9">&nbsp;</td>
        <td id="karaoke_by_name_singer_9">&nbsp;</td>
      </tr> 
      
      </table>  
    </div>
    
    <div id="main_bar_karaoke_by_singer" style="display:none">
    
    <table width="322" cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th><script>echo(words['name'])</script></th>
      </tr>
      
      <tr id="karaoke_by_singer_row_0">
        <td id="karaoke_by_singer_title_0" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_1">
        <td id="karaoke_by_singer_title_1" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_2">
        <td id="karaoke_by_singer_title_2" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_3">
        <td id="karaoke_by_singer_title_3" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_4">
        <td id="karaoke_by_singer_title_4" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_5">
        <td id="karaoke_by_singer_title_5" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_6">
        <td id="karaoke_by_singer_title_6" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_7">
        <td id="karaoke_by_singer_title_7" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_8">
        <td id="karaoke_by_singer_title_8" class="black_row">&nbsp;</td>
      </tr>
      <tr id="karaoke_by_singer_row_9">
        <td id="karaoke_by_singer_title_9" class="black_row">&nbsp;</td>
      </tr>

      </table>  
    </div>
    
    <div id="karaoke_singer_bar" style="display:none">
    
        <table width="220" cellspacing="2" cellpadding="0" class="content_table">
        <tr>
            <th><script>echo(words['performer'])</script></th>
        </tr>
        <tr id="karaoke_singer_bar_row_0">
            <td id="karaoke_singer_bar_text_0" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_1">
            <td id="karaoke_singer_bar_text_1" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_2">
            <td id="karaoke_singer_bar_text_2" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_3">
            <td id="karaoke_singer_bar_text_3" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_4">
            <td id="karaoke_singer_bar_text_4" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_5">
            <td id="karaoke_singer_bar_text_5" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_6">
            <td id="karaoke_singer_bar_text_6" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_7">
            <td id="karaoke_singer_bar_text_7" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_8">
            <td id="karaoke_singer_bar_text_8" class="grey_row">&nbsp;</td>
        </tr>
        <tr id="karaoke_singer_bar_row_9">
            <td id="karaoke_singer_bar_text_9" class="grey_row">&nbsp;</td>
        </tr>
    </table>
    </div>
    
  </div>
</div>
<!---->

<!-- AUDIO CLUB CON MENU -->
<div id="audio_club_con_menu" style="display:none;">
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
    </tr>
    <tr>
        <td rowspan="8" bgcolor="#66aaee"></td>
        <td height="20" id="audio_club_con_menu_row_0" class="black_row"><script>echo(words['play'])</script>&nbsp;</td>
        <td rowspan="8" bgcolor="#66aaee"></td>
    </tr>
    
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" id="audio_club_con_menu_row_1" class="black_row">ДОБАВИТЬ В ПЛЕЙЛИСТ&nbsp;</td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" id="audio_club_con_menu_row_2" class="grey_row">СОРТИРОВКА ПО АЛЬБОМАМ&nbsp;</td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" id="audio_club_con_menu_row_3" class="black_row">ОТМЕНА&nbsp;</td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
      <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
    </tr>
</table>

</div>
<!---->

<!-- AUDIO CLUB PAGE -->
<div id="audio_club_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
  <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title">АУДИО КЛУБ</div>
  <div id="audio_club_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
  
  <div class="color_button_bar">
    <div id="audio_yellow_btn" class="yellow_button_horizontal_passive" style="position:absolute;top:60px;left:0px;height:50px;width:165px;">Русский</div>
    <div id="audio_blue_btn"  class="blue_button_horizontal_passive"    style="position:absolute;top:60px;left:165px;height:50px;width:165px;">Английский</div>
  </div>
  
  <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_b_l.png" id="audio_club_punct_l_img_1" width="10" height="25"></td>
            <td align="center" id="audio_club_punct_1" class="top_marks_style3" nowrap>1. НАЗВАНИЕ  </td>
            <td><img src="i/insert_b_r.png" id="audio_club_punct_r_img_1" width="10" height="25"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="audio_club_punct_l_img_2" width="10" height="25"></td>
            <td align="center" id="audio_club_punct_2" class="top_marks_style1" nowrap>2. ИСПОЛНИТЕЛЬ </td>
            <td><img src="i/insert_r.png" id="audio_club_punct_r_img_2" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><img src="i/insert_l.png" id="audio_club_punct_l_img_3" width="10" height="25"></td>
            <td align="center" id="audio_club_punct_3" class="top_marks_style1" nowrap>3. ПЛЕЙЛИСТ </td>
            <td><img src="i/insert_r.png" id="audio_club_punct_r_img_3" width="10" height="25"></td>
          </tr>
        </table></td>
        <td>
            <img src="i/1x1.gif" width="2">
      </tr>
    </table>
    </div>
    
    <div id="abc_bar_audio_club" style="display:none">
    <table width="74" height="120" cellspacing="2" cellpadding="0">
        <tr>
            <td width="74" height="20" align="center" bgcolor="#FFFFFF" class="menu_style1">&nbsp;</td>
        </tr>
        <tr id="audio_club_abc_row_0" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_0">ВСЕ</td>
        </tr>
        <tr id="audio_club_abc_row_1" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_1">А-Б</td>
        </tr>
        <tr id="audio_club_abc_row_2" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_2">В-Г</td>
        </tr>
        <tr id="audio_club_abc_row_3" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_3">Д-З</td>
        </tr>
        <tr id="audio_club_abc_row_4" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_4">И-М</td>
        </tr>
        <tr id="audio_club_abc_row_5" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_5">Н-П</td>
        </tr>
        <tr id="audio_club_abc_row_6" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_6">Р-Т</td>
        </tr>
        <tr id="audio_club_abc_row_7" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_7">У-Ч</td>
        </tr>
        <tr id="audio_club_abc_row_8" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_8">Ш-Я</td>
        </tr>
        <tr id="audio_club_abc_row_9" class="grey_row">
            <td height="25" align="center" id="audio_club_abc_text_9">0-9</td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_audio_club_by_name" style="display:none">
    <table width="520"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="240" height="20" align="center" class="menu_style1"><strong>НАЗВАНИЕ</strong></td>
        <td width="280" align="center" class="menu_style1"><strong>ИСПОЛНИТЕЛЬ</strong></td>
      </tr>
      <tr class="black_row" id="audio_club_by_name_row_0">
        <td height="25"><div id="audio_club_by_name_title_0" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_0" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_1">
        <td height="25"><div id="audio_club_by_name_title_1" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_1" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_2">
        <td height="25"><div id="audio_club_by_name_title_2" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_2" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_3">
        <td height="25"><div id="audio_club_by_name_title_3" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_3" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_4">
        <td height="25"><div id="audio_club_by_name_title_4" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_4" class="td_nowrap_280">&nbsp;</div></td>
      </tr>

      <tr class="black_row" id="audio_club_by_name_row_5">
        <td height="25"><div id="audio_club_by_name_title_5" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_5" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_6">
        <td height="25"><div id="audio_club_by_name_title_6" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_6" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_7">
        <td height="25"><div id="audio_club_by_name_title_7" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_7" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_8">
        <td height="25"><div id="audio_club_by_name_title_8" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_8" class="td_nowrap_280">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_name_row_9">
        <td height="25"><div id="audio_club_by_name_title_9" class="td_nowrap_240">&nbsp;</div></td>
        <td><div id="audio_club_by_name_singer_9" class="td_nowrap_280">&nbsp;</div></td>
      </tr> 
      
      </table>  
    </div>
    
    <div id="main_bar_audio_club_by_singer" style="display:none">
    <table width="302"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="302" height="20" align="center" class="menu_style1"><strong>НАЗВАНИЕ</strong></td>
      </tr>
      
      <tr class="black_row" id="audio_club_by_singer_row_0">
        <td height="25" align="left"><div id="audio_club_by_singer_title_0" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_1">
        <td height="25" align="left"><div id="audio_club_by_singer_title_1" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_2">
        <td height="25" align="left"><div id="audio_club_by_singer_title_2" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_3">
        <td height="25" align="left"><div id="audio_club_by_singer_title_3" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_4">
        <td height="25" align="left"><div id="audio_club_by_singer_title_4" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_5">
        <td height="25" align="left"><div id="audio_club_by_singer_title_5" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_6">
        <td height="25" align="left"><div id="audio_club_by_singer_title_6" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_7">
        <td height="25" align="left"><div id="audio_club_by_singer_title_7" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_8">
        <td height="25" align="left"><div id="audio_club_by_singer_title_8" class="td_nowrap_302">&nbsp;</div></td>
      </tr>
      <tr class="black_row" id="audio_club_by_singer_row_9">
        <td height="25" align="left"><div id="audio_club_by_singer_title_9" class="td_nowrap_302">&nbsp;</div></td>
      </tr>

      </table>  
    </div>
    
    <div id="audio_club_singer_bar" style="display:none">
        <table width="220" cellspacing="2" cellpadding="0">
        <tr bgcolor="#FFFFFF">
            <td height="20" align="center" width="220" class="menu_style1"><strong>ИСПОЛНИТЕЛЬ</strong></td>
        </tr>
        <tr id="audio_club_singer_bar_row_0" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_0" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_1" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_1" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_2" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_2" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_3" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_3" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_4" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_4" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_5" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_5" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_6" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_6" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_7" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_7" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_8" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_8" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
        <tr id="audio_club_singer_bar_row_9" class="grey_row">
            <td height="25"><div id="audio_club_singer_bar_text_9" class="td_nowrap_220">&nbsp;</div></td>
        </tr>
    </table>
    </div>
    
    <div id="main_bar_audio_club_playlist" style="display:none">
    <table width="595"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="30" height="20" align="center" class="menu_style1"><strong>&nbsp;</strong></td>
        <td width="200" align="center" class="menu_style1"><strong>ИСПОЛНИТЕЛЬ</strong></td>
        <td width="210" height="20" align="center" class="menu_style1"><strong>НАЗВАНИЕ</strong></td>
        <td width="155" height="20" align="center" class="menu_style1"><strong>АЛЬБОМ</strong></td>
      </tr>
      <tr class="black_row" id="audio_club_playlist_row_0">
        <td height="25" id="audio_club_playlist_play_0" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_0" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_0" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_0" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_1">
        <td height="25" id="audio_club_playlist_play_1" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_1" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_1" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_1" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_2">
        <td height="25" id="audio_club_playlist_play_2" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_2" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_2" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_2" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_3">
        <td height="25" id="audio_club_playlist_play_3" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_3" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_3" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_3" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_4">
        <td height="25" id="audio_club_playlist_play_4" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_4" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_4" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_4" class="td_nowrap_155">&nbsp;</div></td>
      </tr>

      <tr class="black_row" id="audio_club_playlist_row_5">
        <td height="25" id="audio_club_playlist_play_5" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_5" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_5" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_5" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_6">
        <td height="25" id="audio_club_playlist_play_6" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_6" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_6" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_6" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_7">
        <td height="25" id="audio_club_playlist_play_7" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_7" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_7" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_7" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_8">
        <td height="25" id="audio_club_playlist_play_8" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_8" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_8" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_8" class="td_nowrap_155">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="audio_club_playlist_row_9">
        <td height="25" id="audio_club_playlist_play_9" align="center">&nbsp;</td>
        <td><div id="audio_club_playlist_singer_9" class="td_nowrap_200">&nbsp;</div></td>
        <td height="25"><div id="audio_club_playlist_title_9" class="td_nowrap_210">&nbsp;</div></td>
        <td><div id="audio_club_playlist_album_9" class="td_nowrap_155">&nbsp;</div></td>
      </tr> 
      
      </table>  
    </div>
    
  </div>
</div>
<!---->

<!-- RADIO PAGE CON MENU -->
<div id="radio_con_menu" style="display:none;">
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
    </tr>
    <tr>
        <td rowspan="4" bgcolor="#66aaee"></td>
        <td height="20" id="radio_con_menu_row_0" class="black_row">ВОСПРОИЗВЕСТИ&nbsp;</td>
        <td rowspan="4" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
        <td height="20" id="radio_con_menu_row_1" class="black_row">ОТМЕНА&nbsp;</td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
      <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
    </tr>
</table>
</div>
<!---->

<!-- RADIO PAGE -->
<div id="radio_page" style="display:none;">
  <div style="position:absolute;left:30px;top:46px;">
  <div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title">РАДИО</div>
  <div id="radio_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>

  <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td>
        <table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="radio_punct_1" class="active_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">1. НАЗВАНИЕ</td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table>
        </td>
      </tr>
    </table>
    </div>
  
    <div id="main_bar_radio_by_name" style="display:none">
    
    <table width="613"  cellpadding="0" cellspacing="2" class="content_table">
      <tr>
        <th width="30">&nbsp;</th>
        <th>НАЗВАНИЕ</th>
      </tr>
      <tr id="radio_by_name_row_0">
        <td id="radio_by_name_play_0" align="center">&nbsp;</td>
        <td id="radio_by_name_title_0">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_1">
        <td id="radio_by_name_play_1" align="center">&nbsp;</td>
        <td id="radio_by_name_title_1">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_2">
        <td id="radio_by_name_play_2" align="center">&nbsp;</td>
        <td id="radio_by_name_title_2">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_3">
        <td id="radio_by_name_play_3" align="center">&nbsp;</td>
        <td id="radio_by_name_title_3">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_4">
        <td id="radio_by_name_play_4" align="center">&nbsp;</td>
        <td id="radio_by_name_title_4">&nbsp;</td>
      </tr>

      <tr id="radio_by_name_row_5"> 
        <td id="radio_by_name_play_5" align="center">&nbsp;</td>
        <td id="radio_by_name_title_5">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_6">
        <td id="radio_by_name_play_6" align="center">&nbsp;</td>
        <td id="radio_by_name_title_6">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_7">
        <td id="radio_by_name_play_7" align="center">&nbsp;</td>
        <td id="radio_by_name_title_7">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_8">
        <td id="radio_by_name_play_8" align="center">&nbsp;</td>
        <td id="radio_by_name_title_8">&nbsp;</td>
      </tr>
      
      <tr id="radio_by_name_row_9">
        <td id="radio_by_name_play_9" align="center">&nbsp;</td>
        <td id="radio_by_name_title_9">&nbsp;</td>
      </tr> 
      
    </table>  
    </div>
   </div>
 
</div>
<!---->

<!-- WIDGET PAGE -->
<div id="widget_page" style="display:none">
    <div style="position:absolute;left:50px;top:66px;width:350px;" class="vclub_title"><script>echo(words['infoportal'])</script></div>
<!--    <div class="widget_menu_row_1 widget_menu_col_2"><img id="widget_menu_1_1" src="i/widget_menu_button_1_1_a.jpg"></div>-->
    
    <div class="widget_menu_row_2 widget_menu_col_1"><img id="widget_menu_2_1" src="i/widget_menu_button_2_1_a.jpg"></div>
    <div class="widget_menu_row_2 widget_menu_col_2"><img id="widget_menu_2_2" src="i/widget_menu_button_2_2_a.jpg"><div id="anec_update_icon" style="display:none;position:absolute;left:165px;top:42px;"><img src="i/refreshed.png"></div></div>
    <div class="widget_menu_row_2 widget_menu_col_3"><img id="widget_menu_2_3" src="i/widget_menu_button_2_3_a.jpg"></div>
    
    <div class="widget_menu_row_3 widget_menu_col_1"><img id="widget_menu_3_1" src="i/widget_menu_button_3_1_a.jpg"></div>
    <div class="widget_menu_row_3 widget_menu_col_2"><img id="widget_menu_3_2" src="i/widget_menu_button_3_2_a.jpg"></div>
    <div class="widget_menu_row_3 widget_menu_col_3"><img id="widget_menu_3_3" src="i/widget_menu_button_3_3_a.jpg"></div>
</div>
<!---->

<div id="city_info_page" style="display:none">
  <div style="position:absolute;left:0px;top:0px;"><img src="i/spravka_thumb.jpg"></div>
  <div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:160px;top:20px;width:250px;font-size: 25px;" class="vclub_title"><script>echo(words['city_info'])</script></div>
    
    <div id="city_info_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
    
    <div style="position:absolute;left:25px;top:123px;">
    <table border="0" cellpadding="0" cellspacing="0">
      <tr>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="city_info_punct_1" class="active_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">1. <script>echo(words['emergency'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="city_info_punct_2" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">2. <script>echo(words['help_services'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
        <td >
            <img src="i/1x1.gif" width="2">
        </td>
        <td><table height="25" border="0" cellpadding="0" cellspacing="0">
          <tr id="city_info_punct_3" class="passive_punct">
            <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
            <td class="punct_main">3. <script>echo(words['other_services'])</script></td>
            <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
          </tr>
        </table></td>
      </tr>
    </table>
    </div>
    
    <div id="main_bar_main_city_info" style="display:none">
    <table width="605"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="500" align="center" class="menu_style1"><strong><script>echo(words['service'])</script></strong></td>
        <td width="" height="20" align="center" class="menu_style1"><strong><script>echo(words['number'])</script></strong></td>
      </tr>
      <tr class="black_row" id="main_city_info_row_0">
        <td height="50" align="left"><div id="main_city_info_title_0" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="main_city_info_number_0" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="main_city_info_row_1">
        <td height="50" align="left"><div id="main_city_info_title_1" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="main_city_info_number_1" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="main_city_info_row_2">
        <td height="50" align="left"><div id="main_city_info_title_2" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="main_city_info_number_2" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="main_city_info_row_3">
        <td height="50" align="left"><div id="main_city_info_title_3" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="main_city_info_number_3" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="main_city_info_row_4">
        <td height="50" align="left"><div id="main_city_info_title_4" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="main_city_info_number_4" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      </table>
    </div>
    
    <div id="main_bar_other_city_info" style="display:none">
    <table width="605"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="500" align="center" class="menu_style1"><strong><script>echo(words['service'])</script></strong></td>
        <td width="" height="20" align="center" class="menu_style1"><strong><script>echo(words['number'])</script></strong></td>
      </tr>
      <tr class="black_row" id="other_city_info_row_0">
        <td height="50" align="left"><div id="other_city_info_title_0" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="other_city_info_number_0" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="other_city_info_row_1">
        <td height="50" align="left"><div id="other_city_info_title_1" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="other_city_info_number_1" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="other_city_info_row_2">
        <td height="50" align="left"><div id="other_city_info_title_2" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="other_city_info_number_2" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="other_city_info_row_3">
        <td height="50" align="left"><div id="other_city_info_title_3" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="other_city_info_number_3" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="other_city_info_row_4">
        <td height="50" align="left"><div id="other_city_info_title_4" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="other_city_info_number_4" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      </table>
    </div>
    
    <div id="main_bar_help_city_info" style="display:none">
    <table width="605"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="500" align="center" class="menu_style1"><strong><script>echo(words['service'])</script></strong></td>
        <td width="" height="20" align="center" class="menu_style1"><strong><script>echo(words['number'])</script></strong></td>
      </tr>
      <tr class="black_row" id="help_city_info_row_0">
        <td height="50" align="left"><div id="help_city_info_title_0" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="help_city_info_number_0" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="help_city_info_row_1">
        <td height="50" align="left"><div id="help_city_info_title_1" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="help_city_info_number_1" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="help_city_info_row_2">
        <td height="50" align="left"><div id="help_city_info_title_2" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="help_city_info_number_2" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="help_city_info_row_3">
        <td height="50" align="left"><div id="help_city_info_title_3" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="help_city_info_number_3" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      
      <tr class="black_row" id="help_city_info_row_4">
        <td height="50" align="left"><div id="help_city_info_title_4" class="td_nowrap_505 wordwrap">&nbsp;</div></td>
        <td id="help_city_info_number_4" align="center" style="font-size: 16px">&nbsp;</td>
      </tr>
      </table>
    </div>
    
  </div>
</div>
<!---->

<!-- ANECDOTE PAGE -->
<div id="anec_page" style="display:none">
 <div style="position:absolute;left:0px;top:0px;"><img src="i/humor_thumb.jpg"></div>
  <div style="position:absolute;left:30px;top:46px;">
  <div style="position:absolute;left:160px;top:20px;width:350px;" class="vclub_title"><script>echo(words['anecdote'])</script></div>
  
  <div id="anec_green_btn" class="green_button_horizontal_passive" style="display:none;position:absolute;top:60px;left:0px;height:50px;width:165px;"><script>echo(words['anec_vote'])</script></div>
  <div id="anec_yellow_btn" class="yellow_button_horizontal_active" style="position:absolute;top:60px;left:190px;height:50px;width:165px;"><script>echo(words['make_bookmark'])</script></div>
  <div id="anec_blue_btn" class="blue_button_horizontal_active" style="position:absolute;top:60px;left:355px;height:50px;width:165px;"><script>echo(words['goto_bookmark'])</script> <span id="anec_bookmark_page"></span> <script>echo(words['page'])</script></div>
  
  <div id="anec_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
  <div style="position:absolute;top:470px;color:#3f81cc;text-align:center;width:640px"><script>echo(words['anec_page_info'])</script></div>
  
  <div id="main_bar_anec_blog" style="display:none">
   <div id="anec_blog_body" style="width:589px;height:280px;overflow:hidden;">

   </div>
   <div style="position:absolute;z-index:802;left:594px;top:-2px;"><img src="i/scroll.jpg"></div>
  </div>
  
  </div>
</div>
<!---->

<!-- ANECDOTE PAGE BOX -->
<div id="anec_page_box" style="display:none">
<input type="text" id="anec_page_box_txt" class="ch_num_txt" size="5" maxlength="5">
</div>
<!---->

<!-- HOROSCOPE PAGE -->
<div id="horoscope_page" style="display:none">

<div style="position:absolute;left:0px;bottom:0px;"><img src="i/horoscope_arrow_l.jpg"></div>
<div style="position:absolute;right:0px;bottom:0px;"><img src="i/horoscope_arrow_r.jpg"></div>

<div style="position:absolute;left:90px;top:66px;width:350px;" class="vclub_title">Гороскоп</div>

    <div style="position:absolute;top:122px;left:45px;">
        <table cellspacing="0" cellpadding="0" width="610">
            <tr>
                <td><img src="i/white_bg1.png"></td>
                <td background="i/white_bg_t.png" height="12"><img src="i/1x1.gif" width="1" height="12"></td>
                <td><img src="i/white_bg2.png"></td>
            </tr>
            <tr>
                <td background="i/white_bg_l.png"><img src="i/1x1.gif" width="12" height="140"></td>
                <td background="i/white_bg_c_20.png" style="color:#003b89" width="586"><div id="common_horoscope" style="width: 586px;height: 140px;overflow: auto;outline:none;"></div></td>
                <td background="i/white_bg_r.png"><img src="i/1x1.gif" width="12" height="140"></td>
            </tr>
            <tr>
                <td><img src="i/white_bg3.png"></td>
                <td background="i/white_bg_b.png" height="12"><img src="i/1x1.gif" width="1" height="12"></td>
                <td><img src="i/white_bg4.png"></td>
            </tr>
        </table>
    </div>
    
    <div class="horoscope_menu_row_1 horoscope_menu_col_1"><img id="horoscope_menu_1_1" src="i/horoscope_menu_button_1_1_a.png"></div>
    <div class="horoscope_menu_row_1 horoscope_menu_col_2"><img id="horoscope_menu_1_2" src="i/horoscope_menu_button_1_2_a.png"></div>
    <div class="horoscope_menu_row_1 horoscope_menu_col_3"><img id="horoscope_menu_1_3" src="i/horoscope_menu_button_1_3_a.png"></div>
    
</div>
<!---->

<!-- HOROSCOPE SIGN PAGE -->
<div id="horoscope_sign_page" style="display:none">
    <div style="position:absolute;left:0px;top:0px;"><img src="i/horoscope_thumb.jpg"></div>
    <div style="position:absolute;left:150px;top:70px;width:350px;" class="vclub_title">Гороскоп</div>
    <div id="horoscope_sign_title" style="position:absolute;left:150px;top:115px;width:550px;font-size:20px;color:#5fa1ec" class="vclub_title"></div>
    <div id="horoscope_sign_desc" style="position:absolute;left:60px;top:200px;width:600px;color:#5fa1ec;font-size:20px;text-align:justify;"></div>
</div>
<!---->

<!-- COURSE PAGE -->
<div id="course_page" style="display:none">
    <div style="position:absolute;left:0px;top:0px;"><img src="i/course_thumb.jpg"></div>
    <div id="course_page_title" style="position:absolute;left:70px;top:166px;width:550px;font-size:22px;text-align:center;" class="vclub_title"></div>
    <div style="position:absolute;left:200px;top:280px;">
        <table width="300" cellpadding="8" cellspacing="2">
            <tr class="black_row" style="font-size:24px;">
                <td id="course_currency_0"></td>
                <td id="course_value_0"></td>
            </tr>
            <tr class="black_row" style="font-size:24px;">
                <td id="course_currency_1"></td>
                <td id="course_value_1"></td>
            </tr>
            <tr class="black_row" style="font-size:24px;">
                <td id="course_currency_2"></td>
                <td id="course_value_2"></td>
            </tr>
        </table>
    </div>
</div>
<!---->

<!-- RECIPE CON MENU -->
<div id="recipe_con_menu" style="display:none">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
          <td rowspan="5" bgcolor="#66aaee"></td>
            <td height="20" id="recipe_con_menu_row_0" class="black_row" style="padding-left:3px;padding-right:3px;">ЧИТАТЬ</td>
            <td rowspan="5" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="recipe_con_menu_row_1" class="black_row" style="padding-left:3px;padding-right:3px;">В ЗАКЛАДКИ</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="recipe_con_menu_row_2" class="black_row" style="padding-left:3px;padding-right:3px;">ОТМЕНА</td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
</div>
<!---->

<!-- RECIPE PAGE -->
<div id="recipe_page" style="display:none">
  <div style="position:absolute;left:30px;top:46px;">
  
      <div style="position:absolute;left:160px;top:20px;width:250px;font-size: 25px;" class="vclub_title">Рецепты</div>
      
      <div id="recipes_page_bar" style="position:absolute;top:454px;color:#3f81cc;text-align:center;width:640px"></div>
      
      <div style="position:absolute;left:25px;top:123px;">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><table height="25" border="0" cellpadding="0" cellspacing="0">
              <tr id="recipe_punct_1" class="active_punct">
                <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
                <td class="punct_main">1. ВСЕ</td>
                <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
              </tr>
            </table></td>
            <td >
                <img src="i/1x1.gif" width="2">
            </td>
            <td><table height="25" border="0" cellpadding="0" cellspacing="0">
              <tr id="recipe_punct_2" class="passive_punct">
                <td class="punct_l_side"><img src="i/1x1.gif" width="10"></td>
                <td class="punct_main">2. ИЗБРАННОЕ</td>
                <td class="punct_r_side"><img src="i/1x1.gif" width="10"></td>
              </tr>
            </table></td>
          </tr>
        </table>
      </div>
      
      <div id="recipes_by_cat" style="display:none">
      
      <div id="search_recipe_kbd_btn" class="yellow_button_horizontal_active color_button_bar" style="position:absolute;top:-85px;left:180px;height:50px;width:165px;"><script>echo(words['search'])</script></div>
      
        <table width="455" cellpadding="0" cellspacing="2">
          <tr bgcolor="#FFFFFF">
            <td width="435" align="center" class="menu_style1"><strong><script>echo(words['name'])</script></strong></td>
            <td width="20" height="20" align="center" class="menu_style1">&nbsp;</td>    
          </tr>
          
          <tr class="black_row" id="recipes_by_cat_row_0">
            <td height="25" align="left"><div id="recipes_by_cat_title_0" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_0" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_1">
            <td height="25" align="left"><div id="recipes_by_cat_title_1" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_1" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_2">
            <td height="25" align="left"><div id="recipes_by_cat_title_2" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_2" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_3">
            <td height="25" align="left"><div id="recipes_by_cat_title_3" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_3" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_4">
            <td height="25" align="left"><div id="recipes_by_cat_title_4" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_4" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_5">
            <td height="25" align="left"><div id="recipes_by_cat_title_5" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_5" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_6">
            <td height="25" align="left"><div id="recipes_by_cat_title_6" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_6" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_7">
            <td height="25" align="left"><div id="recipes_by_cat_title_7" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_7" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_8">
            <td height="25" align="left"><div id="recipes_by_cat_title_8" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_8" align="center">&nbsp;</td>
          </tr>
          <tr class="black_row" id="recipes_by_cat_row_9">
            <td height="25" align="left"><div id="recipes_by_cat_title_9" class="td_nowrap_435">&nbsp;</div></td>
            <td id="recipes_by_cat_fav_9" align="center">&nbsp;</td>
          </tr>
          
        </table>
      </div>
      
      <div id="recipe_cat_bar" style="display:none">
         <table width="160" cellspacing="2" cellpadding="0">
            <tr>
                <td height="20" align="center" width="142" bgcolor="#FFFFFF" class="menu_style1"><strong>РАЗДЕЛ</strong></td>
            </tr>
            <tr id="recipe_cat_row_0" class="grey_row">
                <td height="25"><div id="recipe_cat_text_0" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_1" class="grey_row">
                <td height="25"><div id="recipe_cat_text_1" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_2" class="grey_row">
                <td height="25"><div id="recipe_cat_text_2" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_3" class="grey_row">
                <td height="25"><div id="recipe_cat_text_3" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_4" class="grey_row">
                <td height="25"><div id="recipe_cat_text_4" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_5" class="grey_row">
                <td height="25"><div id="recipe_cat_text_5" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_6" class="grey_row">
                <td height="25"><div id="recipe_cat_text_6" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_7" class="grey_row">
                <td height="25"><div id="recipe_cat_text_7" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_8" class="grey_row">
                <td height="25"><div id="recipe_cat_text_8" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
            <tr id="recipe_cat_row_9" class="grey_row">
                <td height="25"><div id="recipe_cat_text_9" class="td_nowrap_160">&nbsp;</div></td>
            </tr>
        </table>
      </div>
      
  </div>
</div>
<!---->

<!-- RECIPE INFO PAGE -->
<div id="recipe_info_page" style="display:none;">
 <div style="position:absolute;left:30px;top:46px;">
    
    <div style="position:absolute;left:20px;top:69px;width:650px;font-size:22px;color:#ffffff;" class="vclub_title">Рецепт:&nbsp;<span id="recipe_info_page_name"></span></div>
    
    <div style="position:absolute;z-index:802;left:622px;top:130px;"><img src="i/scroll_300.png" border="0"></div>
    
    <div id="recipe_info_page_descr"></div>
    
  </div>
</div>
<!---->

<!-- GAME PAGE -->
<!-- MASTERMIND MENU -->
<div id="mastermind_menu" style="display:none">
    <table border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
        </tr>
        <tr>
          <td rowspan="11" bgcolor="#66aaee"></td>
            <td height="20" id="mastermind_menu_row_0" class="black_row" style="padding-left:3px;padding-right:3px;">ПРОДОЛЖИТЬ ИГРУ</td>
            <td rowspan="11" bgcolor="#66aaee"></td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="mastermind_menu_row_1" class="black_row" style="padding-left:3px;padding-right:3px;">НАЧАТЬ ЗАНОВО</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="mastermind_menu_row_2" class="black_row" style="padding-left:3px;padding-right:3px;">ПРАВИЛА</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="mastermind_menu_row_3" class="black_row" style="padding-left:3px;padding-right:3px;">УПРАВЛЕНИЕ</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="mastermind_menu_row_4" class="black_row" style="padding-left:3px;padding-right:3px;">РЕЙТИНГ</td>
        </tr>
        <tr>
          <td height="2" bgcolor="#66aaee"></td>
        </tr>
        <tr>
            <td height="20" id="mastermind_menu_row_5" class="black_row" style="padding-left:3px;padding-right:3px;">ВЫХОД</td>
        </tr>
        <tr>
          <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
          <td height="6" bgcolor="#66aaee"></td>
          <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
        </tr>
    </table>
</div>

<div id="mastermind_rules" style="display:none">
<div style="position:absolute;left:0px;top:0px;"><img src="i/rules_thumb.jpg"></div>
<div style="position:absolute;left:170px;top:66px;width:390px;" class="vclub_title">Правила игры</div>
    <div style="position:absolute;left:60px;top:200px;width:600px;color:#3f81cc;font-size:20px;text-align:justify;">Ваша задача отгадать число из четырех неповторяющихся цифр,
    причем первая из них - не ноль. Каждое Ваше предположение будет сравниваться с числом, которое загадала приставка.
    Если Вы отгадали цифру, но она стоит не на своем месте, то это КОРОВА (К). Если Вы отгадали и цифру, и её место,
    то это БЫК (Б).
    </div>
</div>

<div id="mastermind_control" style="display:none">
<div style="position:absolute;left:0px;top:0px;"><img src="i/control_thumb.jpg"></div>
<div style="position:absolute;left:170px;top:66px;width:390px;" class="vclub_title">Управление</div>
    <div style="position:absolute;left:60px;top:200px;width:600px;color:#3f81cc;font-size:20px;text-align:justify;">
    <table width="100%" cellpadding="3" cellspacing="3">
    <tr>
        <td width="100" style="color:#ffffff;">&larr; &rarr;</td>
        <td style="color:#3f81cc;">Перемещение курсора</td>
    </tr>
    <tr>
        <td style="color:#ffffff;">0-9</td>
        <td style="color:#3f81cc;">Ввод цифр в ячейки</td>
    </tr>
    <tr>
        <td style="color:#ffffff;">ОК</td>
        <td style="color:#3f81cc;">Подтверждение хода</td>
    </tr>
    <tr>
        <td style="color:#ffffff;">Page +/-</td>
        <td style="color:#3f81cc;">Перемещение по страницам истории ходов</td>
    </tr>
    <tr>
        <td style="color:#ffffff;">Menu/Exit</td>
        <td style="color:#3f81cc;">Меню игры</td>
    </tr>
    </table>
    </div>
</div>

<div id="mastermind_rating" style="display:none">
<div style="position:absolute;left:0px;top:0px;"><img src="i/rating_thumb.jpg"></div>
<div style="position:absolute;left:170px;top:66px;width:390px;" class="vclub_title">Рейтинг</div>

<div id="mastermind_rating_page_bar" style="position:absolute;top:500px;color:#3f81cc;text-align:center;width:670px"></div>

<div id="mastermind_rating_table">
    <table width="600"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <th width="75" align="center" class="menu_style1"><strong>МЕСТО</strong></th>
        <th width="80" height="20" align="center" class="menu_style1"><strong>ИМЯ</strong></th>
        <th width="80" height="20" align="center" class="menu_style1"><strong>ОЧКИ</strong></th>
        <th width="75" height="20" align="center" class="menu_style1"><strong>ИГР</strong></th>
        <th width="130" height="20" align="center" class="menu_style1"><strong>МИН ВРЕМЯ</strong></th>
        <th width="160" height="20" align="center" class="menu_style1"><strong>МИН ПОПЫТОК</strong></th>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_0">
        <td height="25" align="right"><div id="mastermind_rating_place_0" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_0" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_0" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_0" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_0"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_0" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_1">
        <td height="25" align="right"><div id="mastermind_rating_place_1" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_1" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_1" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_1" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_1"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_1" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_2">
        <td height="25" align="right"><div id="mastermind_rating_place_2" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_2" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_2" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_2" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_2"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_2" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_3">
        <td height="25" align="right"><div id="mastermind_rating_place_3" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_3" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_3" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_3" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_3"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_3" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_4">
        <td height="25" align="right"><div id="mastermind_rating_place_4" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_4" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_4" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_4" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_4"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_4" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_5">
        <td height="25" align="right"><div id="mastermind_rating_place_5" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_5" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_5" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_5" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_5"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_5" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_6">
        <td height="25" align="right"><div id="mastermind_rating_place_6" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_6" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_6" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_6" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_6"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_6" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_7">
        <td height="25" align="right"><div id="mastermind_rating_place_7" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_7" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_7" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_7" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_7"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_7" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_8">
        <td height="25" align="right"><div id="mastermind_rating_place_8" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_8" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_8" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_8" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_8"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_8" class="wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="grey_row" id="mastermind_rating_row_9">
        <td height="25" align="right"><div id="mastermind_rating_place_9" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_rating_name_9" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_points_9" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_games_9" class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_time_9"  class="wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_rating_steps_9" class="wordwrap">&nbsp;</div></td>
      </tr>
            
      </table>
      </div>
</div>

<!-- MASTERMIND PAGE -->
<div id="mastermind_game" style="display:none">
<div style="position:absolute;left:0px;top:0px;"><img src="i/mastermind_thumb.jpg"></div>
<div id="mastermind_cow_tongue" style="display:none;position:absolute;left:0px;top:0px;"><img src="i/mastermind_cow_tongue.png"></div>
<div style="position:absolute;left:30px;top:46px;">
    <div style="position:absolute;left:110px;top:20px;width:390px;" class="vclub_title">"Быки и Коровы"</div>
    <div id="mastermind_num_1" class="mastermind_num" style="left:270px"></div>
    <div id="mastermind_num_2" class="mastermind_num" style="left:350px"></div>
    <div id="mastermind_num_3" class="mastermind_num" style="left:430px"></div>
    <div id="mastermind_num_4" class="mastermind_num" style="left:510px"></div>    
</div>

<div id="mastermind_arrow" style="position:absolute;left:310px;top:200px;font-size:30px;color:#FFFFFF;">&darr;</div>
<div id="mastermind_winner_info" style="position:absolute;left:298px;top:330px;font-size:30px;color:#3f81cc;"></div>
<div id="mastermind_info" style="position:absolute;left:298px;top:370px;font-size:24px;color:#3f81cc;width:390px;"></div>

<div id="mastermind_page_bar" style="position:absolute;top:475px;color:#3f81cc;left:116px;"></div>

<div style="position:absolute;top:500px;color:#3f81cc;text-align:center;width:710px">EXIT - выход в меню игры.</div>

<div id="mastermind_steps">
    <table width="200"  cellpadding="0" cellspacing="2">
      <tr bgcolor="#FFFFFF">
        <td width="40" align="center" class="menu_style1"><strong></strong></td>
        <td width="80" height="20" align="center" class="menu_style1"><strong></strong></td>
        <td width="80" height="20" align="center" class="menu_style1"><strong></strong></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_0">
        <td height="25" align="right"><div id="mastermind_step_num_0" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_0" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_0" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_1">
        <td height="25" align="right"><div id="mastermind_step_num_1" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_1" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_1" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_2">
        <td height="25" align="right"><div id="mastermind_step_num_2" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_2" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_2" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_3">
        <td height="25" align="right"><div id="mastermind_step_num_3" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_3" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_3" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_4">
        <td height="25" align="right"><div id="mastermind_step_num_4" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_4" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_4" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_5">
        <td height="25" align="right"><div id="mastermind_step_num_5" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_5" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_5" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_6">
        <td height="25" align="right"><div id="mastermind_step_num_6" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_6" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_6" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_7">
        <td height="25" align="right"><div id="mastermind_step_num_7" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_7" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_7" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_8">
        <td height="25" align="right"><div id="mastermind_step_num_8" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_8" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_8" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      <tr class="black_row" id="mastermind_log_row_9">
        <td height="25" align="right"><div id="mastermind_step_num_9" class="wordwrap" style="padding-right:3px">&nbsp;</div></td>
        <td><div id="mastermind_try_9" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
        <td><div id="mastermind_res_9" class="td_nowrap_80 wordwrap">&nbsp;</div></td>
      </tr>
      
      </table>
</div>
</div>

<!-- VIRTUAL KEYBOARD FOR SEARCH -->
<div id="search_kbd" style="display:none;">
    <table class="search_kbd_table" cellspacing="1" cellspacing="2" style="border: 0px;background-color: #FFFFFF;">
    <tr>
        <td id="kbd_0_0"></td>
        <td id="kbd_0_1"></td>
        <td id="kbd_0_2"></td>
        <td id="kbd_0_3"></td>
        <td id="kbd_0_4"></td>
        <td id="kbd_0_5"></td>
        <td id="kbd_0_6"></td>
        <td id="kbd_0_7"></td>
        <td id="kbd_0_8"></td>
        <td id="kbd_0_9"></td>
        <td id="kbd_0_10"></td>
        <td id="kbd_0_11"></td>
    </tr>
    <tr>
        <td id="kbd_1_0"></td>
        <td id="kbd_1_1"></td>
        <td id="kbd_1_2"></td>
        <td id="kbd_1_3"></td>
        <td id="kbd_1_4"></td>
        <td id="kbd_1_5"></td>
        <td id="kbd_1_6"></td>
        <td id="kbd_1_7"></td>
        <td id="kbd_1_8"></td>
        <td id="kbd_1_9"></td>
        <td id="kbd_1_10"></td>
        <td id="kbd_1_11" style="width:25px;"></td>
    </tr>
    <tr>
        <td id="kbd_2_0"></td>
        <td id="kbd_2_1"></td>
        <td id="kbd_2_2"></td>
        <td id="kbd_2_3"></td>
        <td id="kbd_2_4"></td>
        <td id="kbd_2_5"></td>
        <td id="kbd_2_6"></td>
        <td id="kbd_2_7"></td>
        <td id="kbd_2_8"></td>
        <td id="kbd_2_9" colspan="3"></td>
    </tr>
    <tr>
        <td id="kbd_3_0">1</td>
        <td id="kbd_3_1">2</td>
        <td id="kbd_3_2">3</td>
        <td id="kbd_3_3">4</td>
        <td id="kbd_3_4">5</td>
        <td id="kbd_3_5">6</td>
        <td id="kbd_3_6">7</td>
        <td id="kbd_3_7">8</td>
        <td id="kbd_3_8">9</td>
        <td id="kbd_3_9">0</td>
        <td colspan="2" id="kbd_3_10"></td>
<!--        <td>&nbsp;</td>-->
    </tr>
    </table>
    <input type="text" id="kbd_input" onfocus="this.blur" readonly style="border:1px solid">
</div>
<!---->

<!-- LOADING MARK -->
<div id="loading_mark" style="display:none;">
О
</div>
<!---->

<!-- UNDER CONSTRUCTION -->
<div id="under_construction" style="display:none;" align="center">
<script>echo(words['under_construction'])</script>
</div>
<!---->

<!-- WARNING MESSAGE -->
<div id="warning_message" style="display:none;" align="center">
<div id="warning_message_txt"></div>
</div>
<!---->

<!-- PASSWORD INPUT -->
<div id="password_input" style="display:none;" align="center">
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
      <td width="6" height="6"><img src="i/corner_lt.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td width="6" height="6"><img src="i/corner_rt.png" width="6" height="6" /></td>
    </tr>
    <tr>
        <td rowspan="3" bgcolor="#66aaee"></td>
        <td height="20" bgcolor="#66aaee"><div id="password_input_error">&nbsp;</div></td>
        <td rowspan="3" bgcolor="#66aaee"></td>
    </tr>
    
    <tr>
        <td height="2" bgcolor="#66aaee"><script>echo(words['password'])</script>: <input type="password" id="password_input_txt" class="input_active" onfocus="this.blur()" size="5"></td>
    </tr>
    <tr>
        <td height="2" bgcolor="#66aaee"></td>
    </tr>
    <tr>
      <td width="6" height="6"><img src="i/corner_lb.png" width="6" height="6" /></td>
      <td height="6" bgcolor="#66aaee"></td>
      <td height="6"><img src="i/corner_rb.png" width="6" height="6" /></td>
    </tr>
</table>
</div>
<!---->

<!-- SETTING PAGE -->
<div id="setting_page" style="display:none;">
<div style="position:absolute;left:20px;top:20px;width:320px;" class="vclub_title"><script>echo(words['setting'])</script></div>
    <div id="setting_page_menu">
    <table border="0" cellpadding="1" cellspacing="2" width="310">
    <tr id="setting_row_0" class="black_row">
        <td width="100%" align="center"><script>echo(words['parent_password'])</script></td>
    </tr>
    <tr id="setting_row_1" class="black_row">
        <td align="center"><script>echo(words['video_out_setting'])</script></td>
    </tr>
    <!--<tr id="setting_row_2" class="black_row">
        <td align="center">ИДЕНТИФИКАЦИЯ</td>
    </tr>-->
    </table>
    </div>
</div>
<!---->

<!-- INCOMING MESSAGE -->
<div id="incoming_message" style="display:none">
<div style="padding-left: 20px;padding-right: 22px;padding-top: 3px;padding-bottom: 14px;">
<font color="#050505">[<script>echo(words['incoming_msg'])</script>]</font>&nbsp;<span id="incoming_message_txt" class="style2">&nbsp;</span>
</div>
</div>
<!---->

<div id="full_incoming_message" class="full_incoming_message_all" style="display:none">
    <div style="width: 640px;padding-left: 40px;padding-right: 18px;padding-top: 13px;padding-bottom: 14px;">
        <font color="#050505">[<script>echo(words['incoming_msg'])</script>]</font>&nbsp;<span id="full_incoming_message_txt">&nbsp;</span>
        <br><font color="#050505">[Для подтверждения нажмите ОК]</font><br><br>
    </div>
</div>

<!-- REC NOTICE -->
<div id="rec_notice" style="display:none">
<table border="0" cellpadding="0" cellspacing="0" width="720">
<tbody>
    <tr>
        <td background="i/scroll3.png" height="126" width="65">&nbsp;</td>
        <td background="i/scroll3.png" valign="top" ><br style="font-size:13px;"><font color="#050505">[<script>echo(words['notice'])</script>]</font>&nbsp;<span id="rec_notice_txt" class="style2">&nbsp;</span></td>
        <td background="i/scroll3.png" width="40">&nbsp;</td>
    </tr>
</tbody>
</table>
</div>
<!---->

<!-- PARENT PASSWORD -->
<div id="parent_password_page" style="display:none;">
<div style="position:absolute;left:20px;top:20px;width:300px;" class="vclub_title"><script>echo(words['parent_password2'])</script></div>
    <div id="parent_password_form">
    <table border="0" cellpadding="0" cellspacing="2" width="410">
    <tr>
        <td colspan="2" align="center"><strong></strong></td>
    </tr>
    <tr>
        <td colspan="2" id="parent_password_error_txt" align="center">&nbsp;</td>
    </tr>
    <tr class="black_row">
        <td align="right"><script>echo(words['old_pass'])</script>:</td>
        <td><input type="password" onfocus="this.blur()" id="parent_password_item_0" size="8" class="input_active"></td>
    </tr>
    <tr class="black_row">
        <td align="right"><script>echo(words['new_pass'])</script>:</td>
        <td><input type="password" onfocus="this.blur()" id="parent_password_item_1" size="8" class="input_passive"></td>
    </tr>
    <tr class="black_row">
        <td align="right"><script>echo(words['r_new_pass'])</script>:</td>
        <td><input type="password" onfocus="this.blur()" id="parent_password_item_2" size="8" class="input_passive"></td>
    </tr>
    </table>
    </div>
</div>
<!---->

<!-- IDENTIFICATION -->
<div id="identification_page" style="display:none">
<!--    <input type="text" id="identification_login" size="36" readonly style="position:absolute;left:80px;top:120px;border:1px solid">-->
</div>
<!---->

<!-- VIDEO OUT SETTING -->
<div id="video_out_setting_page" style="display:none">
  <div style="position:absolute;left:37px;top:46px;">
    <div style="position:absolute;left:10px;top:20px;width:500px;" class="vclub_title"><script>echo(words['video_settings'])</script></div>
    
    <div id="video_out_error_msg" style="position:absolute;left:0px;top:80px;width:600px;text-align:center;"></div>
  
    <div id="bright_setting_bar">
        <div class="video_out_label"><script>echo(words['brightness'])</script>:</div>
        <div id="bright_bar" class="passive_setting_bar"></div>
        <div id="bright_button" class="passive_setting_bar"></div>
    </div>
    
    <div id="contrast_setting_bar" style="display:none">
        <div class="video_out_label"><script>echo(words['contrast'])</script>:</div>
        <div id="contrast_bar" class="passive_setting_bar"></div>
        <div id="contrast_button" class="passive_setting_bar"></div>
    </div>
    
    <div id="saturation_setting_bar" style="display:none">
        <div class="video_out_label"><script>echo(words['saturation'])</script>:</div>
        <div id="saturation_bar" class="passive_setting_bar"></div>
        <div id="saturation_button" class="passive_setting_bar"></div>
    </div>

    <!--<div class="label1" style="position:absolute; left: 50px; top: 115px;">
        <script>echo(words['brightness'])</script>:
    </div>
    
    <div id="bright_bar" class="passive_setting_bar"></div>
    
    <div id="bright_button" class="passive_setting_bar"></div>-->
    
    <div id="video_out_help" class="label" style="display:none;position:absolute; left: 20px; top: 280px;width:500px;"">Данные настройки имеют силу только в режиме SD</div>
    
    <div id="video_out_table" class="label" style="position:absolute; left: 20px; top: 280px;width:300px;">
        <script>echo(words['current_video_out'])</script>: <span id="video_out"></span>
    </div>
    
    <div id="help" style="position:absolute; left: 10px; top: 370px;width:400px;">
        <table width="90%" class="label">
        <tr>
            <td width="30">OK</td>
            <td> - <script>echo(words['save_settings'])</script></td> 
        </tr>
        <tr id="change_video_out_row">
            <td>
                <img src="i/btn_red.png">
            </td>
            <td> - <script>echo(words['change_video_out'])</script></td> 
        </tr>
        </table>
    </div>
    
  </div>
</div>
<!---->

<!-- CUT OFF PAGE -->
<div id="cut_off" style="display:none;">
    <div style="position:absolute; top: 240px;width:100%;text-align:center;">
    <script>echo(words['cut_off_msg'])</script>
    </div>
</div>
<!---->

<!-- OSD Volume -->
<div id="volume" class="volume" style="display:none;">
<table width="640" height="480" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td valign="top" align="right">
        <table width="258" border="0" cellpadding="0" cellspacing="0" background="">
          <tr>

            <td align="left" height="30" valign="bottom">
            <img src="i/vol_logo.gif">&nbsp;
            <b><font color="#0000FF"><span id="percent"></span></font></b>
            </td>
          <!--</tr>-->
          </tr>
          <tr>
           <td>
            <table id="vol_bar" width="258" border="0" cellpadding="0" cellspacing="4">
              <tr>
                <td width=8 height="21"><img src="i/vol_bar_l.gif" width=7 height=21 alt="" border="0"></td>
                <td id="vol_5" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_10" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_15" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_20" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_25" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_30" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_35" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_40" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_45" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_50" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_55" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_60" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_65" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_70" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_75" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_80" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_85" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_90" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_95" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td id="vol_100" width=8 height="21" bgcolor="blue"><img src="i/vol_pnt.gif" width=8 height=21></td>
                <td width=8 height="21"><img src="i/vol_bar_r.gif" width=7 height=21 alt="" border="0"></td>
              </tr>
            </table>
           </td>
          </tr>
          
        </table>
    </td>
  </tr>
</table>
</div>

<!-- Channel changer -->
<div id="channel" class="channel" style="display:none;">
<table width="640" height="480" align="center" cellpadding="0" cellspacing="0">
  <tr>
    <td valign="top" align="center">
        <table width="244" border="0" cellpadding="0" cellspacing="0" background="i/bg.png">
          <tr>
            <td></td>
            <td align="left" height="30" valign="bottom">
            <b><font color="#0000FF"><span id="ch_name"></span></font></b>
            </td>
            <td></td>
          </tr>
          <tr>
            <td width="16" align="right" nowrap></td>
            <td>
            <table width="244" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td width="100%" id="ch_descr">&nbsp;</td>
              </tr>
            </table>
            </td>
            <td width="16" align="left" nowrap></td>
          </tr>
          <tr>
            <td height="10"></td>
          </tr>
        </table>
    </td>
  </tr>
</table>
</div>

<!-- Channel changer by list  "F10" -->
<div id="ch_list" class="ch_list" style="display:none;">
<table>
  <tr>
    <td valign="top" align="left">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td>
			  <table id="ch_list_opt" class="ch_list_opt" cellspacing="0" cellpadding="0" border="0" onclick="show_playing(channels[this.selectedIndex].value+'. '+channels[this.selectedIndex].name);play(''+channels[this.selectedIndex].cmd)">
			    <tr>
			     <td id="epg_list_row0" class="epg_tbl_row">1&nbsp;</td>
			     <td id="epg_list_bar" class="epg_tbl_bar" rowspan="10"><img src="i/scr_bar_0.gif" width=18 height=222 border="0"></td>
			    </tr>
			    <tr>
			     <td id="epg_list_row1" class="epg_tbl_row">2&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row2" class="epg_tbl_row">3&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row3" class="epg_tbl_row">4&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row4" class="epg_tbl_row">5&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row5" class="epg_tbl_row">6&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row6" class="epg_tbl_row">7&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row7" class="epg_tbl_row">8&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row8" class="epg_tbl_row">9&nbsp;</td>
			    </tr>
			    <tr>
			     <td id="epg_list_row9" class="epg_tbl_row">10&nbsp;</td>
			    </tr>
			</table>
            </td>
          </tr>
        </table>
    </td>
  </tr>
</table>
 <div class="slider_list" id="slider_list"><img src="i/scr_bar_1.gif" width=18 height=24 border="0">
 </div>
</div>

<!-- language_menu -->
<div id="language_menu" style="display:none;">
<div id="language_table">

</div>
</div>

<!-- web_bar -->
<div id="web_bar" style="display:none;">
    <font color="WhiteSmoke">URL:</font>
    <input type="text" size="50" name="web_bar_url" id="web_bar_url" value="">

</div>
<div id="web_bar_tip" style="display:none;">
    <table>
        <tr>
        <td><img src="i/btn_blue.png" width=30 height=30 alt="" border="0"></td>
        <td style="color:#FFFFFF"><script>echo(words['v_keyboard'])</script></td>
        </tr>
    </table>
</div>
    
<div id="kbd" style="display:none">
 <div id="div_keyboard"></div>
</div>
<div id="kbd_res" style="display:none"><script>echo(words['input'])</script>:&nbsp;
 <input class="counter" type="text" id="Input" align="left" size=25 maxlength="30" value="">
</div>

<!-- Channel changer by number -->
<div id="ch_num" class="ch_num" style="display:none;">
<table>
  <tr>
    <td valign="top" align="left">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td align="center" valign="bottom">
                <input type="text" id="ch_num_txt" class="ch_num_txt" size="3" maxlength="3">
            </td>
          </tr>
        </table>
    </td>
  </tr>
</table>
</div>
<!---->

<!-- WEATHER PAGE -->
<div id="weather_page" style="display:none">
<div style="position:absolute;left:0px;top:0px;"><img src="i/weather_thumb.jpg"></div>
  <div style="position:absolute;left:30px;top:46px;">
  <img src="i/w_cloud_big.png" height="0" width="0">
  <img src="i/w_cloud_black.png" height="0" width="0">
  <img src="i/w_cloud_small.png" height="0" width="0">
  <img src="i/w_empty.png" height="0" width="0">
  <img src="i/w_moon.png" height="0" width="0">
  <img src="i/w_rain.png" height="0" width="0">
  <img src="i/w_rain_strong.png" height="0" width="0">
  <img src="i/w_snow.png" height="0" width="0">
  <img src="i/w_snow_strong.png" height="0" width="0">
  <img src="i/w_sun.png" height="0" width="0">
  <img src="i/w_thunderstorm.png" height="0" width="0">
  <img src="i/deg.png" height="0" width="0">
  <img src="i/dots.png" height="0" width="0">
  <img src="i/minus.png" height="0" width="0">
  <img src="i/plus.png" height="0" width="0">
  <img src="i/0.png" height="0" width="0">
  <img src="i/1.png" height="0" width="0">
  <img src="i/2.png" height="0" width="0">
  <img src="i/3.png" height="0" width="0">
  <img src="i/4.png" height="0" width="0">
  <img src="i/5.png" height="0" width="0">
  <img src="i/6.png" height="0" width="0">
  <img src="i/7.png" height="0" width="0">
  <img src="i/8.png" height="0" width="0">
  <img src="i/9.png" height="0" width="0">

  <div style="position:absolute;left:160px;top:20px;width:250px;font-size: 25px;" class="vclub_title"><script>echo(words['weather'])</script></div>
   
   <div id="main_bar_day_weather" style="display:none">
    <div class="weather_row_1 weather_col_1">
      <div id="weather_col_title_1" style="text-align:center; width:156px;"></div><br>
      <div id="weather_col_descr_1" style="position:absolute;z-index:805;text-align:center; width:156px;"></div>
      <div class="day_weather_layer_1"><img id="day_weather_layer_1_img_1" src=""></div>
      <div class="day_weather_layer_2"><img id="day_weather_layer_2_img_1" src=""></div>
      <div class="day_weather_layer_3"><img id="day_weather_layer_3_img_1" src=""></div>
      <div class="day_weather_temp" id="day_weather_temp_col_1"></div>
    </div>
    <div class="weather_row_1 weather_col_2">
      <div id="weather_col_title_2" style="text-align:center; width:156px;"></div><br>
      <div id="weather_col_descr_2" style="position:absolute;z-index:805;text-align:center; width:156px;"></div>
      <div class="day_weather_layer_1"><img id="day_weather_layer_1_img_2" src=""></div>
      <div class="day_weather_layer_2"><img id="day_weather_layer_2_img_2" src=""></div>
      <div class="day_weather_layer_3"><img id="day_weather_layer_3_img_2" src=""></div>
      <div class="day_weather_temp" id="day_weather_temp_col_2"></div>
    </div>
    <div class="weather_row_1 weather_col_3">
      <div id="weather_col_title_3" style="text-align:center; width:156px;"></div><br>
      <div id="weather_col_descr_3" style="position:absolute;z-index:805;text-align:center; width:156px;"></div>
      <div class="day_weather_layer_1"><img id="day_weather_layer_1_img_3" src=""></div>
      <div class="day_weather_layer_2"><img id="day_weather_layer_2_img_3" src=""></div>
      <div class="day_weather_layer_3"><img id="day_weather_layer_3_img_3" src=""></div>
      <div class="day_weather_temp" id="day_weather_temp_col_3"></div>
    </div>
    <div class="weather_row_1 weather_col_4">
      <div id="weather_col_title_4" style="text-align:center; width:156px;"></div><br>
      <div id="weather_col_descr_4" style="position:absolute;z-index:805;text-align:center; width:156px;"></div>
      <div class="day_weather_layer_1"><img id="day_weather_layer_1_img_4" src=""></div>
      <div class="day_weather_layer_2"><img id="day_weather_layer_2_img_4" src=""></div>
      <div class="day_weather_layer_3"><img id="day_weather_layer_3_img_4" src=""></div>
      <div class="day_weather_temp" id="day_weather_temp_col_4"></div>
    </div>
   </div> 
    
  </div>
</div>
<!---->

<div id="tmp" style="border:1px dashed blue; margin:2px;position:absolute;top:481px;font-size:12pt;display:none">
tmp for KA
</div>
<script>
var finish=1
</script>
</body>
</html>