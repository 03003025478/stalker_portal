<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>stalker_portal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="reset.css" type="text/css" />
<link rel="stylesheet" href="main_menu.css" type="text/css" />

<style type="text/css">

/* GLOBAL STYLES */
body{
    font-family: "Myriad Pro";
}

.text24_white{
    font-size: 24px;
    color: #fff;
}

.text25_white{
    font-size: 25px;
    color: #fff;
}

.text20_white{
    font-size: 20px;
    color: #fff;
}

.text14_white{
    font-size: 14px;
    color: #fff;
}

.text15_white{
    font-size: 15px;
    color: #fff;
}

.bold{
    font-weight:bold;
}

.uppercase{
    text-transform: uppercase;
}

.align_justify{
    text-align: justify;
}

.shadow_dark2{
    text-shadow: #000 -1px -1px 0;
}
/* END GLOBAL STYLES */

</style>

<link type="text/css" rel="stylesheet" href="alert.css"></link>

<script type="text/javascript" src="global.js"></script>

<script type="text/javascript" src="alert.js"></script>

<script type="text/javascript" src="JsHttpRequest.js"></script>

<script type="text/javascript" src="keydown.keycodes.js"></script>
<script type="text/javascript" src="keydown.observer.js"></script>

<script type="text/javascript" src="xpcom.common.js"></script>
<script type="text/javascript" src="xpcom.webkit.js"></script>

<script type="text/javascript" src="main_menu.js"></script>
<script type="text/javascript" src="player.js"></script>



<script type="text/javascript">

var ver = '4.0.0';
var debug = 1;
var stb;
var stbEvent;

var module = {};

window.onerror = function(msg, url, lno){
    _debug('line: '+lno+'; msg: "'+msg+'" url: '+url);
    return true;
}

window.onload = init;

var loader = {
    
    chain : [],
    cur_idx : -1,
    head : document.getElementsByTagName("head")[0],
    
    add : function(modules){
        _debug('loader.add');
        
        var modules = modules || [];
        
        this.chain = modules;
        this.next();
    },
    
    next : function(){
        _debug('loader.next');
        
        if (this.cur_idx < this.chain.length-1){
            this.cur_idx++;
            this.append(this.chain[this.cur_idx]);
        }
    },
    
    append : function(module){
        _debug('loader.append');
        
        var _script = document.createElement('script');
        _script.type = "text/javascript";
        _script.src  = module + ".js";
        
        var _style = document.createElement('link');
        _style.type = "text/css";
        _style.rel = "stylesheet";
        _style.href = module + ".css";
        
        this.head.appendChild(_script);
        _debug('append', _script.src);
        this.head.appendChild(_style);
        _debug('append', _style.href);
    },
};

/**
 * Init STB.
 */
function init(){
    _debug('init');
    
    //load_module('_alert');
    
    /*load_module('layer');
    load_module('layer.sidebar');
    load_module('layer.search_box');*/
    
    /*window.setInterval(function(){_debug('test')}, 1000);
    
    window.setTimeout(function(){document.body.appendChild(document.createElement('span'));_debug('insert');}, 7000);*/
    
    /*window.setTimeout(function(){
        load_module('layer.bottom_menu');
        load_module('layer.scrollbar');
        load_module('layer.vclub_info');
        load_module('vclub');
        load_module('tv');
        load_module('media_browser');
    },
    8000);*/
    
    loader.add([
        "layer",
        "layer.sidebar",
        "layer.search_box",
        "layer.bottom_menu",
        "layer.scrollbar",
        "layer.vclub_info",
        "password_input",
        "series_switch",
        "vclub",
        "tv",
        "media_browser"
    ])
    
    var map = [
        {"title"    : "КАРАОКЕ",
         "cmd"      : "",
         "sub" : [
                          {
                            "title" : "НАШЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ЗАРУБЕЖНОЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ХИТЫ 80-х",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ХИТЫ 90-х",
                            "cmd"   : ""
                          },
                      ]
        },
        {"title"    : "НАСТРОЙКИ",
         "cmd"      : "",
         "sub" : [
                          {
                            "title" : "ОБЩЕЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ВИДЕОВЫХОД",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ЛИЧНЫЙ КАБИНЕТ",
                            "cmd"   : ""
                          },
                      ]
        }
    ];
    
    stb.init();

    try{
        main_menu.init(map);
    }catch(e){
        _debug(e);
    }
    
    (function(){
        
        if (stb.player.on){
            stb.player.stop();
            main_menu.show();
        }
        
    }).bind(key.MENU);

    /* END LAYER MANAGEMENT */
    
}

var stbEvent = {
    onEvent : function(data){},
    event : 0
}

</script>

<!--<script type="text/javascript" src="global.js"></script>
<script type="text/javascript" src="JsHttpRequest.js"></script>

<script type="text/javascript" src="keydown.keycodes.js"></script>
<script type="text/javascript" src="keydown.observer.js"></script>

<script type="text/javascript" src="xpcom.common.js"></script>
<script type="text/javascript" src="xpcom.webkit.js"></script>

<script type="text/javascript" src="main_menu.js"></script>
<script type="text/javascript" src="player.js"></script>-->

</head>
<body>

</body>
</html>