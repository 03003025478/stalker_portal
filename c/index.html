<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>stalker_portal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="reset.css" type="text/css" />
<link rel="stylesheet" href="main_menu.css" type="text/css" />

<style type="text/css">

/* GLOBAL STYLES */
body{
    font-family: "Myriad Pro";
}

.text24_white{
    font-size: 24px;
    color: #FFF;
}

.text20_white{
    font-size: 20px;
    color: #FFF;
}

.text14_white{
    font-size: 14px;
    color: #FFF;
}

.bold{
    font-weight:bold;
}
/* END GLOBAL STYLES */

</style>

<script type="text/javascript" src="global.js"></script>
<script type="text/javascript" src="JsHttpRequest.js"></script>

<script type="text/javascript" src="keydown.keycodes.js"></script>
<script type="text/javascript" src="keydown.observer.js"></script>

<script type="text/javascript" src="xpcom.common.js"></script>
<script type="text/javascript" src="xpcom.webkit.js"></script>

<script type="text/javascript" src="main_menu.js"></script>
<script type="text/javascript" src="player.js"></script>

<script language="JavaScript" type="text/javascript">

var ver = '4.0.0';
var debug = 1;
var stb;
var stbEvent;

var module = {};

window.onerror = function(msg, url, lno){
    _debug('line: '+lno+'; msg: "'+msg+'" url: '+url);
    return true;
}

window.onload = init;

/**
 * Init STB.
 */
function init(){
    _debug('init');
    
    load_module('layer');
    load_module('layer.sidebar');
    load_module('vclub');
    
    var map = [
        /*{"title"    : "ТЕЛЕВИДЕНИЕ",
         "cmd"      : "",
         "sub" : [
                          {
                            "title" : "СПОРТ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "РАЗВЛЕЧЕНИЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ТОП",
                            "cmd"   : ""
                          },
                          {
                            "title" : "НОВОСТИ",
                            "cmd"   : ""
                          }
                      ]
        },*/
        {"title"    : "КАРАОКЕ",
         "cmd"      : "",
         "sub" : [
                          {
                            "title" : "НАШЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ЗАРУБЕЖНОЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ХИТЫ 80-х",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ХИТЫ 90-х",
                            "cmd"   : ""
                          },
                      ]
        },
        {"title"    : "НАСТРОЙКИ",
         "cmd"      : "",
         "sub" : [
                          {
                            "title" : "ОБЩЕЕ",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ВИДЕОВЫХОД",
                            "cmd"   : ""
                          },
                          {
                            "title" : "ЛИЧНЫЙ КАБИНЕТ",
                            "cmd"   : ""
                          },
                      ]
        }
    ];
    
    stb.init();
    
    try{
        main_menu.init(map);
    }catch(e){
        _debug(e);
    }
    
    /* LAYER MANAGEMENT */
    (function(){
            
        if (main_menu.on){
            main_menu.hide();
            stb.player.play_last();
        }else if (stb.player.on){
            stb.player.stop();
            main_menu.show();
        }else if (module.vclub && module.vclub.on){
            module.vclub.hide();
            main_menu.show();
        }
        
    }).bind(key.EXIT);
    
    (function(){
        
        if (stb.player.on){
            stb.player.stop();
            main_menu.show();
        }
        
    }).bind(key.MENU);
    
    /* END LAYER MANAGEMENT */
    
}

var stbEvent = {
    onEvent : function(data){},
    event : 0
}

/**
 * Callback for player events.
 */
function event_callback(event){
    _debug('event:',event)
    
    switch(event){
        case 1: // End of stream
        {
            stb.player.stop();
            break;
        }
        case 4: // Playback started
        {
            
            break;
        }
    }
}

</script>

<!--<script type="text/javascript" src="global.js"></script>
<script type="text/javascript" src="JsHttpRequest.js"></script>

<script type="text/javascript" src="keydown.keycodes.js"></script>
<script type="text/javascript" src="keydown.observer.js"></script>

<script type="text/javascript" src="xpcom.common.js"></script>
<script type="text/javascript" src="xpcom.webkit.js"></script>

<script type="text/javascript" src="main_menu.js"></script>
<script type="text/javascript" src="player.js"></script>-->

</head>
<body>

</body>
</html>