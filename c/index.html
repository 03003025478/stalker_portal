<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>stalker_portal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="reset.css" type="text/css" />

<script type="text/javascript" src="global.js"></script>
<script type="text/javascript" src="JsHttpRequest.js"></script>
<script type="text/javascript" src="keycodes.keydown.js"></script>
<script type="text/javascript" src="observer.keydown.js"></script>
<script type="text/javascript" src="common.xpcom.js"></script>
<script type="text/javascript" src="webkit.xpcom.js"></script>

<script language="JavaScript" type="text/javascript">

var ver = '4.0.0';
var debug = 1;
var stb;
var stbEvent;

window.onerror = function(msg, url, lno){
    _debug('line: '+lno+'; msg: "'+msg+'" url: '+url);
    return true;
}

window.onload = init;

/**
 * Alias for document.getElementById.
 * @param {Number} id 
 * @return {*} DOMElement
 */
var $ = function(id){
    return document.getElementById(id);
}

/**
 * Init STB.
 */
function init(){
    try{
        webkit_xpcom.prototype = gSTB;
    }catch(e){}
    common_xpcom.prototype = new webkit_xpcom();
    stb = new common_xpcom();
    stb.init();
}

/**
 * Debug function.
 */
function _debug(t){
    if (debug){
        try{
            gSTB.Debug(t)
        }catch(e){}
    }
}


/**
 * Callback for player events.
 */
function event_callback(event){
    _debug('event: '+event)
    
    switch(event){
        case 1: // End of stream
        {
            stb.player.stop();
            break;
        }
        case 4: // Playback started
        {
            
            break;
        }
    }
}

/**
 * Layer constructor.
 * @constructor
 */
function Layer(){
    
    this.name = 'Layer';
    this.on = false;
    
    this.cur_row = 0;
    this.prev_row = 1;
    this.cur_page = 0;
    this.total_pages = 0;
    
    this.con_menu_action = [];
    this.con_menu_on = false;
    this.con_menu_cur_row = 0;
    this.con_menu_prev_row = 0;
    
    this.col_ids = [];
    
    this.layer_dom_obj = $('layer_'+this.name);
    
    this.shift_row.bind(key.UP,   this, -1);
    this.shift_row.bind(key.DOWN, this,  1);
    
    this.shift_page.bind(key.PAGE_PREV, this, -1);
    this.shift_page.bind(key.PAGE_NEXT, this,  1);
}

Layer.prototype.show = function(){
    _debug(this.name + ' show');
    
    this.layer_dom_obj.show();
    this.on = true;
}

Layer.prototype.hide = function(){
    _debug(this.name + ' hide');
    
    this.layer_dom_obj.hide();
    this.on = false;
}

Layer.prototype.shift_row = function(dir){
    _debug(this.name + ' shift_row ' + dir);
    
}

Layer.prototype.shift_page = function(dir){
    _debug(this.name + ' shift_page ' + dir);
    
}

Layer.prototype.set_active_row = function(){
    _debug(this.name + ' set_active_row');
    
}

Layer.prototype.set_passive_row = function(){
    _debug(this.name + ' set_passive_row');
    
}

Layer.prototype.set_passive_all_rows = function(){
    _debug(this.name + ' set_passive_all_rows');
    
}

Layer.prototype.load = function(p){
    _debug(this.name + ' load ' + p);
    
}

Layer.prototype.fill_rows = function(arr){
    _debug(this.name + ' fill_rows ' + arr.toSource());
    
}

Layer.prototype.del_rows = function(arr){
    _debug(this.name + ' del_rows ');
    
}
/*
 * END Layer
 */


/**
 * Default tv player.
 * @constructor
 */
function default_tv_player(){
    this.on = false;
    
}

default_tv_player.prototype.switch_channel = function(dir){
    
    if (dir > 0){
        
    }else{
        
    }
    
}



</script>
</head>
<body>

</body>
</html>